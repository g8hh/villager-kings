(window.webpackJsonp = window.webpackJsonp || []).push([[1], {
    0: function (e, t, n) {
        e.exports = n("zUnb")
    },
    crnd: function (e, t) {
        function n(e) {
            return Promise.resolve().then(function () {
                var t = new Error("Cannot find module '" + e + "'");
                throw t.code = "MODULE_NOT_FOUND", t
            })
        }
        n.keys = function () {
            return []
        }, n.resolve = n, e.exports = n, n.id = "crnd"
    },
    zUnb: function (e, t, n) {
        "use strict";
        n.r(t);
        var r = function (e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (e, t) {
                    e.__proto__ = t
                } || function (e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        };

        function i(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }
        var l = function () {
            return (l = Object.assign || function (e) {
                for (var t, n = 1, r = arguments.length; n < r; n++)
                    for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
                return e
            }).apply(this, arguments)
        };

        function o(e, t, n, r) {
            var i, l = arguments.length,
                o = l < 3 ? t : null === r ? r = Object.getOwnPropertyDescriptor(t, n) : r;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, n, r);
            else
                for (var u = e.length - 1; u >= 0; u--)(i = e[u]) && (o = (l < 3 ? i(o) : l > 3 ? i(t, n, o) : i(t, n)) || o);
            return l > 3 && o && Object.defineProperty(t, n, o), o
        }

        function u(e, t) {
            if ("object" == typeof Reflect && "function" == typeof Reflect.metadata) return Reflect.metadata(e, t)
        }

        function s(e) {
            var t = "function" == typeof Symbol && e[Symbol.iterator],
                n = 0;
            return t ? t.call(e) : {
                next: function () {
                    return e && n >= e.length && (e = void 0), {
                        value: e && e[n++],
                        done: !e
                    }
                }
            }
        }

        function a(e, t) {
            var n = "function" == typeof Symbol && e[Symbol.iterator];
            if (!n) return e;
            var r, i, l = n.call(e),
                o = [];
            try {
                for (;
                    (void 0 === t || t-- > 0) && !(r = l.next()).done;) o.push(r.value)
            } catch (u) {
                i = {
                    error: u
                }
            } finally {
                try {
                    r && !r.done && (n = l.return) && n.call(l)
                } finally {
                    if (i) throw i.error
                }
            }
            return o
        }

        function c() {
            for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(a(arguments[t]));
            return e
        }
        var p = Array.isArray || function (e) {
            return e && "number" == typeof e.length
        };

        function h(e) {
            return null !== e && "object" == typeof e
        }

        function d(e) {
            return "function" == typeof e
        }

        function f(e) {
            return Error.call(this), this.message = e ? e.length + " errors occurred during unsubscription:\n" + e.map(function (e, t) {
                return t + 1 + ") " + e.toString()
            }).join("\n  ") : "", this.name = "UnsubscriptionError", this.errors = e, this
        }
        f.prototype = Object.create(Error.prototype);
        var g = f,
            v = function () {
                function e(e) {
                    this.closed = !1, this._parentOrParents = null, this._subscriptions = null, e && (this._unsubscribe = e)
                }
                var t;
                return e.prototype.unsubscribe = function () {
                    var t;
                    if (!this.closed) {
                        var n = this._parentOrParents,
                            r = this._unsubscribe,
                            i = this._subscriptions;
                        if (this.closed = !0, this._parentOrParents = null, this._subscriptions = null, n instanceof e) n.remove(this);
                        else if (null !== n)
                            for (var l = 0; l < n.length; ++l) n[l].remove(this);
                        if (d(r)) try {
                            r.call(this)
                        } catch (s) {
                            t = s instanceof g ? m(s.errors) : [s]
                        }
                        if (p(i)) {
                            l = -1;
                            for (var o = i.length; ++l < o;) {
                                var u = i[l];
                                if (h(u)) try {
                                    u.unsubscribe()
                                } catch (s) {
                                    t = t || [], s instanceof g ? t = t.concat(m(s.errors)) : t.push(s)
                                }
                            }
                        }
                        if (t) throw new g(t)
                    }
                }, e.prototype.add = function (t) {
                    var n = t;
                    if (!t) return e.EMPTY;
                    switch (typeof t) {
                        case "function":
                            n = new e(t);
                        case "object":
                            if (n === this || n.closed || "function" != typeof n.unsubscribe) return n;
                            if (this.closed) return n.unsubscribe(), n;
                            if (!(n instanceof e)) {
                                var r = n;
                                (n = new e)._subscriptions = [r]
                            }
                            break;
                        default:
                            throw new Error("unrecognized teardown " + t + " added to Subscription.")
                    }
                    var i = n._parentOrParents;
                    if (null === i) n._parentOrParents = this;
                    else if (i instanceof e) {
                        if (i === this) return n;
                        n._parentOrParents = [i, this]
                    } else {
                        if (-1 !== i.indexOf(this)) return n;
                        i.push(this)
                    }
                    var l = this._subscriptions;
                    return null === l ? this._subscriptions = [n] : l.push(n), n
                }, e.prototype.remove = function (e) {
                    var t = this._subscriptions;
                    if (t) {
                        var n = t.indexOf(e); - 1 !== n && t.splice(n, 1)
                    }
                }, e.EMPTY = ((t = new e).closed = !0, t), e
            }();

        function m(e) {
            return e.reduce(function (e, t) {
                return e.concat(t instanceof g ? t.errors : t)
            }, [])
        }
        var y = !1,
            S = {
                Promise: void 0,
                set useDeprecatedSynchronousErrorHandling(e) {
                    y = e
                },
                get useDeprecatedSynchronousErrorHandling() {
                    return y
                }
            };

        function E(e) {
            setTimeout(function () {
                throw e
            }, 0)
        }
        var O = {
                closed: !0,
                next: function (e) {},
                error: function (e) {
                    if (S.useDeprecatedSynchronousErrorHandling) throw e;
                    E(e)
                },
                complete: function () {}
            },
            b = "function" == typeof Symbol ? Symbol("rxSubscriber") : "@@rxSubscriber_" + Math.random(),
            T = function (e) {
                function t(n, r, i) {
                    var l = e.call(this) || this;
                    switch (l.syncErrorValue = null, l.syncErrorThrown = !1, l.syncErrorThrowable = !1, l.isStopped = !1, arguments.length) {
                        case 0:
                            l.destination = O;
                            break;
                        case 1:
                            if (!n) {
                                l.destination = O;
                                break
                            }
                            if ("object" == typeof n) {
                                n instanceof t ? (l.syncErrorThrowable = n.syncErrorThrowable, l.destination = n, n.add(l)) : (l.syncErrorThrowable = !0, l.destination = new R(l, n));
                                break
                            }
                        default:
                            l.syncErrorThrowable = !0, l.destination = new R(l, n, r, i)
                    }
                    return l
                }
                return i(t, e), t.prototype[b] = function () {
                    return this
                }, t.create = function (e, n, r) {
                    var i = new t(e, n, r);
                    return i.syncErrorThrowable = !1, i
                }, t.prototype.next = function (e) {
                    this.isStopped || this._next(e)
                }, t.prototype.error = function (e) {
                    this.isStopped || (this.isStopped = !0, this._error(e))
                }, t.prototype.complete = function () {
                    this.isStopped || (this.isStopped = !0, this._complete())
                }, t.prototype.unsubscribe = function () {
                    this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this))
                }, t.prototype._next = function (e) {
                    this.destination.next(e)
                }, t.prototype._error = function (e) {
                    this.destination.error(e), this.unsubscribe()
                }, t.prototype._complete = function () {
                    this.destination.complete(), this.unsubscribe()
                }, t.prototype._unsubscribeAndRecycle = function () {
                    var e = this._parentOrParents;
                    return this._parentOrParents = null, this.unsubscribe(), this.closed = !1, this.isStopped = !1, this._parentOrParents = e, this
                }, t
            }(v),
            R = function (e) {
                function t(t, n, r, i) {
                    var l, o = e.call(this) || this;
                    o._parentSubscriber = t;
                    var u = o;
                    return d(n) ? l = n : n && (l = n.next, r = n.error, i = n.complete, n !== O && (d((u = Object.create(n)).unsubscribe) && o.add(u.unsubscribe.bind(u)), u.unsubscribe = o.unsubscribe.bind(o))), o._context = u, o._next = l, o._error = r, o._complete = i, o
                }
                return i(t, e), t.prototype.next = function (e) {
                    if (!this.isStopped && this._next) {
                        var t = this._parentSubscriber;
                        S.useDeprecatedSynchronousErrorHandling && t.syncErrorThrowable ? this.__tryOrSetError(t, this._next, e) && this.unsubscribe() : this.__tryOrUnsub(this._next, e)
                    }
                }, t.prototype.error = function (e) {
                    if (!this.isStopped) {
                        var t = this._parentSubscriber,
                            n = S.useDeprecatedSynchronousErrorHandling;
                        if (this._error) n && t.syncErrorThrowable ? (this.__tryOrSetError(t, this._error, e), this.unsubscribe()) : (this.__tryOrUnsub(this._error, e), this.unsubscribe());
                        else if (t.syncErrorThrowable) n ? (t.syncErrorValue = e, t.syncErrorThrown = !0) : E(e), this.unsubscribe();
                        else {
                            if (this.unsubscribe(), n) throw e;
                            E(e)
                        }
                    }
                }, t.prototype.complete = function () {
                    var e = this;
                    if (!this.isStopped) {
                        var t = this._parentSubscriber;
                        if (this._complete) {
                            var n = function () {
                                return e._complete.call(e._context)
                            };
                            S.useDeprecatedSynchronousErrorHandling && t.syncErrorThrowable ? (this.__tryOrSetError(t, n), this.unsubscribe()) : (this.__tryOrUnsub(n), this.unsubscribe())
                        } else this.unsubscribe()
                    }
                }, t.prototype.__tryOrUnsub = function (e, t) {
                    try {
                        e.call(this._context, t)
                    } catch (n) {
                        if (this.unsubscribe(), S.useDeprecatedSynchronousErrorHandling) throw n;
                        E(n)
                    }
                }, t.prototype.__tryOrSetError = function (e, t, n) {
                    if (!S.useDeprecatedSynchronousErrorHandling) throw new Error("bad call");
                    try {
                        t.call(this._context, n)
                    } catch (r) {
                        return S.useDeprecatedSynchronousErrorHandling ? (e.syncErrorValue = r, e.syncErrorThrown = !0, !0) : (E(r), !0)
                    }
                    return !1
                }, t.prototype._unsubscribe = function () {
                    var e = this._parentSubscriber;
                    this._context = null, this._parentSubscriber = null, e.unsubscribe()
                }, t
            }(T),
            C = "function" == typeof Symbol && Symbol.observable || "@@observable";

        function _() {}

        function I() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return A(e)
        }

        function A(e) {
            return e ? 1 === e.length ? e[0] : function (t) {
                return e.reduce(function (e, t) {
                    return t(e)
                }, t)
            } : _
        }
        var w = function () {
            function e(e) {
                this._isScalar = !1, e && (this._subscribe = e)
            }
            return e.prototype.lift = function (t) {
                var n = new e;
                return n.source = this, n.operator = t, n
            }, e.prototype.subscribe = function (e, t, n) {
                var r = this.operator,
                    i = function (e, t, n) {
                        if (e) {
                            if (e instanceof T) return e;
                            if (e[b]) return e[b]()
                        }
                        return e || t || n ? new T(e, t, n) : new T(O)
                    }(e, t, n);
                if (i.add(r ? r.call(i, this.source) : this.source || S.useDeprecatedSynchronousErrorHandling && !i.syncErrorThrowable ? this._subscribe(i) : this._trySubscribe(i)), S.useDeprecatedSynchronousErrorHandling && i.syncErrorThrowable && (i.syncErrorThrowable = !1, i.syncErrorThrown)) throw i.syncErrorValue;
                return i
            }, e.prototype._trySubscribe = function (e) {
                try {
                    return this._subscribe(e)
                } catch (t) {
                    S.useDeprecatedSynchronousErrorHandling && (e.syncErrorThrown = !0, e.syncErrorValue = t),
                        function (e) {
                            for (; e;) {
                                var t = e.destination;
                                if (e.closed || e.isStopped) return !1;
                                e = t && t instanceof T ? t : null
                            }
                            return !0
                        }(e) ? e.error(t) : console.warn(t)
                }
            }, e.prototype.forEach = function (e, t) {
                var n = this;
                return new(t = N(t))(function (t, r) {
                    var i;
                    i = n.subscribe(function (t) {
                        try {
                            e(t)
                        } catch (n) {
                            r(n), i && i.unsubscribe()
                        }
                    }, r, t)
                })
            }, e.prototype._subscribe = function (e) {
                var t = this.source;
                return t && t.subscribe(e)
            }, e.prototype[C] = function () {
                return this
            }, e.prototype.pipe = function () {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                return 0 === e.length ? this : A(e)(this)
            }, e.prototype.toPromise = function (e) {
                var t = this;
                return new(e = N(e))(function (e, n) {
                    var r;
                    t.subscribe(function (e) {
                        return r = e
                    }, function (e) {
                        return n(e)
                    }, function () {
                        return e(r)
                    })
                })
            }, e.create = function (t) {
                return new e(t)
            }, e
        }();

        function N(e) {
            if (e || (e = S.Promise || Promise), !e) throw new Error("no Promise impl found");
            return e
        }

        function P() {
            return Error.call(this), this.message = "object unsubscribed", this.name = "ObjectUnsubscribedError", this
        }
        P.prototype = Object.create(Error.prototype);
        var D = P,
            M = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r.subject = t, r.subscriber = n, r.closed = !1, r
                }
                return i(t, e), t.prototype.unsubscribe = function () {
                    if (!this.closed) {
                        this.closed = !0;
                        var e = this.subject,
                            t = e.observers;
                        if (this.subject = null, t && 0 !== t.length && !e.isStopped && !e.closed) {
                            var n = t.indexOf(this.subscriber); - 1 !== n && t.splice(n, 1)
                        }
                    }
                }, t
            }(v),
            k = function (e) {
                function t(t) {
                    var n = e.call(this, t) || this;
                    return n.destination = t, n
                }
                return i(t, e), t
            }(T),
            L = function (e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.observers = [], t.closed = !1, t.isStopped = !1, t.hasError = !1, t.thrownError = null, t
                }
                return i(t, e), t.prototype[b] = function () {
                    return new k(this)
                }, t.prototype.lift = function (e) {
                    var t = new x(this, this);
                    return t.operator = e, t
                }, t.prototype.next = function (e) {
                    if (this.closed) throw new D;
                    if (!this.isStopped)
                        for (var t = this.observers, n = t.length, r = t.slice(), i = 0; i < n; i++) r[i].next(e)
                }, t.prototype.error = function (e) {
                    if (this.closed) throw new D;
                    this.hasError = !0, this.thrownError = e, this.isStopped = !0;
                    for (var t = this.observers, n = t.length, r = t.slice(), i = 0; i < n; i++) r[i].error(e);
                    this.observers.length = 0
                }, t.prototype.complete = function () {
                    if (this.closed) throw new D;
                    this.isStopped = !0;
                    for (var e = this.observers, t = e.length, n = e.slice(), r = 0; r < t; r++) n[r].complete();
                    this.observers.length = 0
                }, t.prototype.unsubscribe = function () {
                    this.isStopped = !0, this.closed = !0, this.observers = null
                }, t.prototype._trySubscribe = function (t) {
                    if (this.closed) throw new D;
                    return e.prototype._trySubscribe.call(this, t)
                }, t.prototype._subscribe = function (e) {
                    if (this.closed) throw new D;
                    return this.hasError ? (e.error(this.thrownError), v.EMPTY) : this.isStopped ? (e.complete(), v.EMPTY) : (this.observers.push(e), new M(this, e))
                }, t.prototype.asObservable = function () {
                    var e = new w;
                    return e.source = this, e
                }, t.create = function (e, t) {
                    return new x(e, t)
                }, t
            }(w),
            x = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r.destination = t, r.source = n, r
                }
                return i(t, e), t.prototype.next = function (e) {
                    var t = this.destination;
                    t && t.next && t.next(e)
                }, t.prototype.error = function (e) {
                    var t = this.destination;
                    t && t.error && this.destination.error(e)
                }, t.prototype.complete = function () {
                    var e = this.destination;
                    e && e.complete && this.destination.complete()
                }, t.prototype._subscribe = function (e) {
                    return this.source ? this.source.subscribe(e) : v.EMPTY
                }, t
            }(L);

        function F(e) {
            return e && "function" == typeof e.schedule
        }
        var U = function (e) {
                function t(t, n, r) {
                    var i = e.call(this) || this;
                    return i.parent = t, i.outerValue = n, i.outerIndex = r, i.index = 0, i
                }
                return i(t, e), t.prototype._next = function (e) {
                    this.parent.notifyNext(this.outerValue, e, this.outerIndex, this.index++, this)
                }, t.prototype._error = function (e) {
                    this.parent.notifyError(e, this), this.unsubscribe()
                }, t.prototype._complete = function () {
                    this.parent.notifyComplete(this), this.unsubscribe()
                }, t
            }(T),
            H = function (e) {
                return function (t) {
                    for (var n = 0, r = e.length; n < r && !t.closed; n++) t.next(e[n]);
                    t.complete()
                }
            };

        function G() {
            return "function" == typeof Symbol && Symbol.iterator ? Symbol.iterator : "@@iterator"
        }
        var B = G(),
            V = function (e) {
                return e && "number" == typeof e.length && "function" != typeof e
            };

        function W(e) {
            return !!e && "function" != typeof e.subscribe && "function" == typeof e.then
        }
        var j = function (e) {
            if (e && "function" == typeof e[C]) return r = e,
                function (e) {
                    var t = r[C]();
                    if ("function" != typeof t.subscribe) throw new TypeError("Provided object does not correctly implement Symbol.observable");
                    return t.subscribe(e)
                };
            if (V(e)) return H(e);
            if (W(e)) return n = e,
                function (e) {
                    return n.then(function (t) {
                        e.closed || (e.next(t), e.complete())
                    }, function (t) {
                        return e.error(t)
                    }).then(null, E), e
                };
            if (e && "function" == typeof e[B]) return t = e,
                function (e) {
                    for (var n = t[B]();;) {
                        var r = n.next();
                        if (r.done) {
                            e.complete();
                            break
                        }
                        if (e.next(r.value), e.closed) break
                    }
                    return "function" == typeof n.return && e.add(function () {
                        n.return && n.return()
                    }), e
                };
            var t, n, r, i = h(e) ? "an invalid object" : "'" + e + "'";
            throw new TypeError("You provided " + i + " where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")
        };

        function Y(e, t, n, r, i) {
            if (void 0 === i && (i = new U(e, n, r)), !i.closed) return t instanceof w ? t.subscribe(i) : j(t)(i)
        }
        var z = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return i(t, e), t.prototype.notifyNext = function (e, t, n, r, i) {
                this.destination.next(t)
            }, t.prototype.notifyError = function (e, t) {
                this.destination.error(e)
            }, t.prototype.notifyComplete = function (e) {
                this.destination.complete()
            }, t
        }(T);

        function K(e, t) {
            return function (n) {
                if ("function" != typeof e) throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
                return n.lift(new q(e, t))
            }
        }
        var q = function () {
                function e(e, t) {
                    this.project = e, this.thisArg = t
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new Q(e, this.project, this.thisArg))
                }, e
            }(),
            Q = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, t) || this;
                    return i.project = n, i.count = 0, i.thisArg = r || i, i
                }
                return i(t, e), t.prototype._next = function (e) {
                    var t;
                    try {
                        t = this.project.call(this.thisArg, e, this.count++)
                    } catch (n) {
                        return void this.destination.error(n)
                    }
                    this.destination.next(t)
                }, t
            }(T);

        function $(e, t) {
            return new w(function (n) {
                var r = new v,
                    i = 0;
                return r.add(t.schedule(function () {
                    i !== e.length ? (n.next(e[i++]), n.closed || r.add(this.schedule())) : n.complete()
                })), r
            })
        }

        function Z(e, t) {
            return t ? function (e, t) {
                if (null != e) {
                    if (function (e) {
                            return e && "function" == typeof e[C]
                        }(e)) return function (e, t) {
                        return new w(function (n) {
                            var r = new v;
                            return r.add(t.schedule(function () {
                                var i = e[C]();
                                r.add(i.subscribe({
                                    next: function (e) {
                                        r.add(t.schedule(function () {
                                            return n.next(e)
                                        }))
                                    },
                                    error: function (e) {
                                        r.add(t.schedule(function () {
                                            return n.error(e)
                                        }))
                                    },
                                    complete: function () {
                                        r.add(t.schedule(function () {
                                            return n.complete()
                                        }))
                                    }
                                }))
                            })), r
                        })
                    }(e, t);
                    if (W(e)) return function (e, t) {
                        return new w(function (n) {
                            var r = new v;
                            return r.add(t.schedule(function () {
                                return e.then(function (e) {
                                    r.add(t.schedule(function () {
                                        n.next(e), r.add(t.schedule(function () {
                                            return n.complete()
                                        }))
                                    }))
                                }, function (e) {
                                    r.add(t.schedule(function () {
                                        return n.error(e)
                                    }))
                                })
                            })), r
                        })
                    }(e, t);
                    if (V(e)) return $(e, t);
                    if (function (e) {
                            return e && "function" == typeof e[B]
                        }(e) || "string" == typeof e) return function (e, t) {
                        if (!e) throw new Error("Iterable cannot be null");
                        return new w(function (n) {
                            var r, i = new v;
                            return i.add(function () {
                                r && "function" == typeof r.return && r.return()
                            }), i.add(t.schedule(function () {
                                r = e[B](), i.add(t.schedule(function () {
                                    if (!n.closed) {
                                        var e, t;
                                        try {
                                            var i = r.next();
                                            e = i.value, t = i.done
                                        } catch (l) {
                                            return void n.error(l)
                                        }
                                        t ? n.complete() : (n.next(e), this.schedule())
                                    }
                                }))
                            })), i
                        })
                    }(e, t)
                }
                throw new TypeError((null !== e && typeof e || e) + " is not observable")
            }(e, t) : e instanceof w ? e : new w(j(e))
        }

        function X(e, t, n) {
            return void 0 === n && (n = Number.POSITIVE_INFINITY), "function" == typeof t ? function (r) {
                return r.pipe(X(function (n, r) {
                    return Z(e(n, r)).pipe(K(function (e, i) {
                        return t(n, e, r, i)
                    }))
                }, n))
            } : ("number" == typeof t && (n = t), function (t) {
                return t.lift(new J(e, n))
            })
        }
        var J = function () {
                function e(e, t) {
                    void 0 === t && (t = Number.POSITIVE_INFINITY), this.project = e, this.concurrent = t
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new ee(e, this.project, this.concurrent))
                }, e
            }(),
            ee = function (e) {
                function t(t, n, r) {
                    void 0 === r && (r = Number.POSITIVE_INFINITY);
                    var i = e.call(this, t) || this;
                    return i.project = n, i.concurrent = r, i.hasCompleted = !1, i.buffer = [], i.active = 0, i.index = 0, i
                }
                return i(t, e), t.prototype._next = function (e) {
                    this.active < this.concurrent ? this._tryNext(e) : this.buffer.push(e)
                }, t.prototype._tryNext = function (e) {
                    var t, n = this.index++;
                    try {
                        t = this.project(e, n)
                    } catch (r) {
                        return void this.destination.error(r)
                    }
                    this.active++, this._innerSub(t, e, n)
                }, t.prototype._innerSub = function (e, t, n) {
                    var r = new U(this, void 0, void 0);
                    this.destination.add(r), Y(this, e, t, n, r)
                }, t.prototype._complete = function () {
                    this.hasCompleted = !0, 0 === this.active && 0 === this.buffer.length && this.destination.complete(), this.unsubscribe()
                }, t.prototype.notifyNext = function (e, t, n, r, i) {
                    this.destination.next(t)
                }, t.prototype.notifyComplete = function (e) {
                    var t = this.buffer;
                    this.remove(e), this.active--, t.length > 0 ? this._next(t.shift()) : 0 === this.active && this.hasCompleted && this.destination.complete()
                }, t
            }(z);

        function te(e) {
            return e
        }

        function ne(e) {
            return void 0 === e && (e = Number.POSITIVE_INFINITY), X(te, e)
        }

        function re(e, t) {
            return t ? $(e, t) : new w(H(e))
        }

        function ie() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            var n = Number.POSITIVE_INFINITY,
                r = null,
                i = e[e.length - 1];
            return F(i) ? (r = e.pop(), e.length > 1 && "number" == typeof e[e.length - 1] && (n = e.pop())) : "number" == typeof i && (n = e.pop()), null === r && 1 === e.length && e[0] instanceof w ? e[0] : ne(n)(re(e, r))
        }

        function le() {
            return function (e) {
                return e.lift(new oe(e))
            }
        }
        var oe = function () {
                function e(e) {
                    this.connectable = e
                }
                return e.prototype.call = function (e, t) {
                    var n = this.connectable;
                    n._refCount++;
                    var r = new ue(e, n),
                        i = t.subscribe(r);
                    return r.closed || (r.connection = n.connect()), i
                }, e
            }(),
            ue = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.connectable = n, r
                }
                return i(t, e), t.prototype._unsubscribe = function () {
                    var e = this.connectable;
                    if (e) {
                        this.connectable = null;
                        var t = e._refCount;
                        if (t <= 0) this.connection = null;
                        else if (e._refCount = t - 1, t > 1) this.connection = null;
                        else {
                            var n = this.connection,
                                r = e._connection;
                            this.connection = null, !r || n && r !== n || r.unsubscribe()
                        }
                    } else this.connection = null
                }, t
            }(T),
            se = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r.source = t, r.subjectFactory = n, r._refCount = 0, r._isComplete = !1, r
                }
                return i(t, e), t.prototype._subscribe = function (e) {
                    return this.getSubject().subscribe(e)
                }, t.prototype.getSubject = function () {
                    var e = this._subject;
                    return e && !e.isStopped || (this._subject = this.subjectFactory()), this._subject
                }, t.prototype.connect = function () {
                    var e = this._connection;
                    return e || (this._isComplete = !1, (e = this._connection = new v).add(this.source.subscribe(new ce(this.getSubject(), this))), e.closed && (this._connection = null, e = v.EMPTY)), e
                }, t.prototype.refCount = function () {
                    return le()(this)
                }, t
            }(w).prototype,
            ae = {
                operator: {
                    value: null
                },
                _refCount: {
                    value: 0,
                    writable: !0
                },
                _subject: {
                    value: null,
                    writable: !0
                },
                _connection: {
                    value: null,
                    writable: !0
                },
                _subscribe: {
                    value: se._subscribe
                },
                _isComplete: {
                    value: se._isComplete,
                    writable: !0
                },
                getSubject: {
                    value: se.getSubject
                },
                connect: {
                    value: se.connect
                },
                refCount: {
                    value: se.refCount
                }
            },
            ce = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.connectable = n, r
                }
                return i(t, e), t.prototype._error = function (t) {
                    this._unsubscribe(), e.prototype._error.call(this, t)
                }, t.prototype._complete = function () {
                    this.connectable._isComplete = !0, this._unsubscribe(), e.prototype._complete.call(this)
                }, t.prototype._unsubscribe = function () {
                    var e = this.connectable;
                    if (e) {
                        this.connectable = null;
                        var t = e._connection;
                        e._refCount = 0, e._subject = null, e._connection = null, t && t.unsubscribe()
                    }
                }, t
            }(k);

        function pe() {
            return new L
        }

        function he(e) {
            for (var t in e)
                if (e[t] === he) return t;
            throw Error("Could not find renamed property on target object.")
        }

        function de(e, t) {
            for (var n in t) t.hasOwnProperty(n) && !e.hasOwnProperty(n) && (e[n] = t[n])
        }
        var fe = he({
                ngInjectableDef: he
            }),
            ge = he({
                ngBaseDef: he
            });

        function ve(e) {
            return {
                providedIn: e.providedIn || null,
                factory: e.factory,
                value: void 0
            }
        }

        function me(e) {
            return e && e.hasOwnProperty(fe) ? e[fe] : null
        }
        var ye = function () {
                function e(e, t) {
                    this._desc = e, this.ngMetadataName = "InjectionToken", this.ngInjectableDef = void 0 !== t ? ve({
                        providedIn: t.providedIn || "root",
                        factory: t.factory
                    }) : void 0
                }
                return e.prototype.toString = function () {
                    return "InjectionToken " + this._desc
                }, e
            }(),
            Se = "__parameters__",
            Ee = "__prop__metadata__";

        function Oe(e) {
            return function () {
                for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
                if (e) {
                    var r = e.apply(void 0, c(t));
                    for (var i in r) this[i] = r[i]
                }
            }
        }

        function be(e, t, n) {
            var r = Oe(t);

            function i() {
                for (var e, t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
                if (this instanceof i) return r.apply(this, t), this;
                var l = new((e = i).bind.apply(e, c([void 0], t)));
                return o.annotation = l, o;

                function o(e, t, n) {
                    for (var r = e.hasOwnProperty(Se) ? e[Se] : Object.defineProperty(e, Se, {
                            value: []
                        })[Se]; r.length <= n;) r.push(null);
                    return (r[n] = r[n] || []).push(l), e
                }
            }
            return n && (i.prototype = Object.create(n.prototype)), i.prototype.ngMetadataName = e, i.annotationCls = i, i
        }

        function Te(e, t, n, r) {
            var i = Oe(t);

            function l() {
                for (var e, t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
                if (this instanceof l) return i.apply(this, t), this;
                var o = new((e = l).bind.apply(e, c([void 0], t)));
                return function (e, n) {
                    var i = e.constructor,
                        l = i.hasOwnProperty(Ee) ? i[Ee] : Object.defineProperty(i, Ee, {
                            value: {}
                        })[Ee];
                    l[n] = l.hasOwnProperty(n) && l[n] || [], l[n].unshift(o), r && r.apply(void 0, c([e, n], t))
                }
            }
            return n && (l.prototype = Object.create(n.prototype)), l.prototype.ngMetadataName = e, l.annotationCls = l, l
        }
        var Re = new ye("AnalyzeForEntryComponents"),
            Ce = "undefined" != typeof window && window,
            _e = "undefined" != typeof self && "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope && self,
            Ie = "undefined" != typeof global && global || Ce || _e,
            Ae = Promise.resolve(0),
            we = null;

        function Ne() {
            if (!we) {
                var e = Ie.Symbol;
                if (e && e.iterator) we = e.iterator;
                else
                    for (var t = Object.getOwnPropertyNames(Map.prototype), n = 0; n < t.length; ++n) {
                        var r = t[n];
                        "entries" !== r && "size" !== r && Map.prototype[r] === Map.prototype.entries && (we = r)
                    }
            }
            return we
        }

        function Pe(e) {
            "undefined" == typeof Zone ? Ae.then(function () {
                e && e.apply(null, null)
            }) : Zone.current.scheduleMicroTask("scheduleMicrotask", e)
        }

        function De(e, t) {
            return e === t || "number" == typeof e && "number" == typeof t && isNaN(e) && isNaN(t)
        }

        function Me(e) {
            if ("string" == typeof e) return e;
            if (e instanceof Array) return "[" + e.map(Me).join(", ") + "]";
            if (null == e) return "" + e;
            if (e.overriddenName) return "" + e.overriddenName;
            if (e.name) return "" + e.name;
            var t = e.toString();
            if (null == t) return "" + t;
            var n = t.indexOf("\n");
            return -1 === n ? t : t.substring(0, n)
        }
        var ke = he({
            __forward_ref__: he
        });

        function Le(e) {
            return e.__forward_ref__ = Le, e.toString = function () {
                return Me(this())
            }, e
        }

        function xe(e) {
            var t = e;
            return "function" == typeof t && t.hasOwnProperty(ke) && t.__forward_ref__ === Le ? t() : e
        }
        var Fe, Ue = function (e) {
                return e[e.Emulated = 0] = "Emulated", e[e.Native = 1] = "Native", e[e.None = 2] = "None", e[e.ShadowDom = 3] = "ShadowDom", e
            }({}),
            He = be("Inject", function (e) {
                return {
                    token: e
                }
            }),
            Ge = be("Optional"),
            Be = be("Self"),
            Ve = be("SkipSelf"),
            We = function (e) {
                return e[e.Default = 0] = "Default", e[e.Host = 1] = "Host", e[e.Self = 2] = "Self", e[e.SkipSelf = 4] = "SkipSelf", e[e.Optional = 8] = "Optional", e
            }({}),
            je = void 0;

        function Ye(e) {
            var t = je;
            return je = e, t
        }

        function ze(e, t) {
            return void 0 === t && (t = We.Default), (Fe || function (e, t) {
                if (void 0 === t && (t = We.Default), void 0 === je) throw new Error("inject() must be called from an injection context");
                return null === je ? function (e, t, n) {
                    var r = me(e);
                    if (r && "root" == r.providedIn) return void 0 === r.value ? r.value = r.factory() : r.value;
                    if (n & We.Optional) return null;
                    throw new Error("Injector: NOT_FOUND [" + Me(e) + "]")
                }(e, 0, t) : je.get(e, t & We.Optional ? null : void 0, t)
            })(e, t)
        }
        var Ke = /([A-Z])/g;

        function qe(e) {
            try {
                return null != e ? e.toString().slice(0, 30) : e
            } catch (t) {
                return "[ERROR] Exception while trying to serialize the value"
            }
        }

        function Qe(e, t) {
            var n = Xe(e),
                r = Xe(t);
            return n && r ? function (e, t, n) {
                for (var r = e[Ne()](), i = t[Ne()]();;) {
                    var l = r.next(),
                        o = i.next();
                    if (l.done && o.done) return !0;
                    if (l.done || o.done) return !1;
                    if (!n(l.value, o.value)) return !1
                }
            }(e, t, Qe) : !(n || !e || "object" != typeof e && "function" != typeof e || r || !t || "object" != typeof t && "function" != typeof t) || De(e, t)
        }
        var $e = function () {
                function e(e) {
                    this.wrapped = e
                }
                return e.wrap = function (t) {
                    return new e(t)
                }, e.unwrap = function (t) {
                    return e.isWrapped(t) ? t.wrapped : t
                }, e.isWrapped = function (t) {
                    return t instanceof e
                }, e
            }(),
            Ze = function () {
                function e(e, t, n) {
                    this.previousValue = e, this.currentValue = t, this.firstChange = n
                }
                return e.prototype.isFirstChange = function () {
                    return this.firstChange
                }, e
            }();

        function Xe(e) {
            return !!Je(e) && (Array.isArray(e) || !(e instanceof Map) && Ne() in e)
        }

        function Je(e) {
            return null !== e && ("function" == typeof e || "object" == typeof e)
        }

        function et() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t]
        }
        var tt = "__source",
            nt = new Object,
            rt = new ye("INJECTOR"),
            it = function () {
                function e() {}
                return e.prototype.get = function (e, t) {
                    if (void 0 === t && (t = nt), t === nt) throw new Error("NullInjectorError: No provider for " + Me(e) + "!");
                    return t
                }, e
            }(),
            lt = function () {
                function e() {}
                return e.create = function (e, t) {
                    return Array.isArray(e) ? new gt(e, t) : new gt(e.providers, e.parent, e.name || null)
                }, e.THROW_IF_NOT_FOUND = nt, e.NULL = new it, e.ngInjectableDef = ve({
                    providedIn: "any",
                    factory: function () {
                        return ze(rt)
                    }
                }), e.__NG_ELEMENT_ID__ = function () {
                    return ot()
                }, e
            }(),
            ot = et,
            ut = function (e) {
                return e
            },
            st = [],
            at = ut,
            ct = function () {
                return Array.prototype.slice.call(arguments)
            },
            pt = he({
                provide: String,
                useValue: he
            }),
            ht = lt.NULL,
            dt = /\n/gm,
            ft = "\u0275",
            gt = function () {
                function e(e, t, n) {
                    void 0 === t && (t = ht), void 0 === n && (n = null), this.parent = t, this.source = n;
                    var r = this._records = new Map;
                    r.set(lt, {
                            token: lt,
                            fn: ut,
                            deps: st,
                            value: this,
                            useNew: !1
                        }), r.set(rt, {
                            token: rt,
                            fn: ut,
                            deps: st,
                            value: this,
                            useNew: !1
                        }),
                        function e(t, n) {
                            if (n)
                                if ((n = xe(n)) instanceof Array)
                                    for (var r = 0; r < n.length; r++) e(t, n[r]);
                                else {
                                    if ("function" == typeof n) throw yt("Function/Class not supported", n);
                                    if (!n || "object" != typeof n || !n.provide) throw yt("Unexpected provider", n);
                                    var i = xe(n.provide),
                                        l = function (e) {
                                            var t = function (e) {
                                                    var t = st,
                                                        n = e.deps;
                                                    if (n && n.length) {
                                                        t = [];
                                                        for (var r = 0; r < n.length; r++) {
                                                            var i = 6;
                                                            if ((s = xe(n[r])) instanceof Array)
                                                                for (var l = 0, o = s; l < o.length; l++) {
                                                                    var u = o[l];
                                                                    u instanceof Ge || u == Ge ? i |= 1 : u instanceof Ve || u == Ve ? i &= -3 : u instanceof Be || u == Be ? i &= -5 : s = u instanceof He ? u.token : xe(u)
                                                                }
                                                            t.push({
                                                                token: s,
                                                                options: i
                                                            })
                                                        }
                                                    } else if (e.useExisting) {
                                                        var s;
                                                        t = [{
                                                            token: s = xe(e.useExisting),
                                                            options: 6
                                                        }]
                                                    } else if (!(n || pt in e)) throw yt("'deps' required", e);
                                                    return t
                                                }(e),
                                                n = ut,
                                                r = st,
                                                i = !1,
                                                l = xe(e.provide);
                                            if (pt in e) r = e.useValue;
                                            else if (e.useFactory) n = e.useFactory;
                                            else if (e.useExisting);
                                            else if (e.useClass) i = !0, n = xe(e.useClass);
                                            else {
                                                if ("function" != typeof l) throw yt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable", e);
                                                i = !0, n = l
                                            }
                                            return {
                                                deps: t,
                                                fn: n,
                                                useNew: i,
                                                value: r
                                            }
                                        }(n);
                                    if (!0 === n.multi) {
                                        var o = t.get(i);
                                        if (o) {
                                            if (o.fn !== ct) throw vt(i)
                                        } else t.set(i, o = {
                                            token: n.provide,
                                            deps: [],
                                            useNew: !1,
                                            fn: ct,
                                            value: st
                                        });
                                        o.deps.push({
                                            token: i = n,
                                            options: 6
                                        })
                                    }
                                    var u = t.get(i);
                                    if (u && u.fn == ct) throw vt(i);
                                    t.set(i, l)
                                }
                        }(r, e)
                }
                return e.prototype.get = function (e, t, n) {
                    void 0 === n && (n = We.Default);
                    var r = this._records.get(e);
                    try {
                        return function e(t, n, r, i, l, o) {
                            try {
                                return function (t, n, r, i, l, o) {
                                    var u, s;
                                    if (!n || o & We.SkipSelf) o & We.Self || (s = i.get(t, l, We.Default));
                                    else {
                                        if ((s = n.value) == at) throw Error(ft + "Circular dependency");
                                        if (s === st) {
                                            n.value = at;
                                            var a = n.useNew,
                                                p = n.fn,
                                                h = n.deps,
                                                d = st;
                                            if (h.length) {
                                                d = [];
                                                for (var f = 0; f < h.length; f++) {
                                                    var g = h[f],
                                                        v = g.options,
                                                        m = 2 & v ? r.get(g.token) : void 0;
                                                    d.push(e(g.token, m, r, m || 4 & v ? i : ht, 1 & v ? null : lt.THROW_IF_NOT_FOUND, We.Default))
                                                }
                                            }
                                            n.value = s = a ? new((u = p).bind.apply(u, c([void 0], d))) : p.apply(void 0, d)
                                        }
                                    }
                                    return s
                                }(t, n, r, i, l, o)
                            } catch (u) {
                                throw u instanceof Error || (u = new Error(u)), (u.ngTempTokenPath = u.ngTempTokenPath || []).unshift(t), n && n.value == at && (n.value = st), u
                            }
                        }(e, r, this._records, this.parent, t, n)
                    } catch (l) {
                        var i = l.ngTempTokenPath;
                        throw e[tt] && i.unshift(e[tt]), l.message = mt("\n" + l.message, i, this.source), l.ngTokenPath = i, l.ngTempTokenPath = null, l
                    }
                }, e.prototype.toString = function () {
                    var e = [];
                    return this._records.forEach(function (t, n) {
                        return e.push(Me(n))
                    }), "StaticInjector[" + e.join(", ") + "]"
                }, e
            }();

        function vt(e) {
            return yt("Cannot mix multi providers and regular providers", e)
        }

        function mt(e, t, n) {
            void 0 === n && (n = null), e = e && "\n" === e.charAt(0) && e.charAt(1) == ft ? e.substr(2) : e;
            var r = Me(t);
            if (t instanceof Array) r = t.map(Me).join(" -> ");
            else if ("object" == typeof t) {
                var i = [];
                for (var l in t)
                    if (t.hasOwnProperty(l)) {
                        var o = t[l];
                        i.push(l + ":" + ("string" == typeof o ? JSON.stringify(o) : Me(o)))
                    } r = "{" + i.join(", ") + "}"
            }
            return "StaticInjectorError" + (n ? "(" + n + ")" : "") + "[" + r + "]: " + e.replace(dt, "\n  ")
        }

        function yt(e, t) {
            return new Error(mt(e, t))
        }
        var St = new ye("The presence of this token marks an injector as being the root injector."),
            Et = function () {
                return function () {}
            }(),
            Ot = function () {
                return function () {}
            }();

        function bt(e) {
            var t = Error("No component factory found for " + Me(e) + ". Did you add it to @NgModule.entryComponents?");
            return t[Tt] = e, t
        }
        var Tt = "ngComponent",
            Rt = function () {
                function e() {}
                return e.prototype.resolveComponentFactory = function (e) {
                    throw bt(e)
                }, e
            }(),
            Ct = function () {
                function e() {}
                return e.NULL = new Rt, e
            }(),
            _t = function () {
                function e(e, t, n) {
                    this._parent = t, this._ngModule = n, this._factories = new Map;
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        this._factories.set(i.componentType, i)
                    }
                }
                return e.prototype.resolveComponentFactory = function (e) {
                    var t = this._factories.get(e);
                    if (!t && this._parent && (t = this._parent.resolveComponentFactory(e)), !t) throw bt(e);
                    return new It(t, this._ngModule)
                }, e
            }(),
            It = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r.factory = t, r.ngModule = n, r.selector = t.selector, r.componentType = t.componentType, r.ngContentSelectors = t.ngContentSelectors, r.inputs = t.inputs, r.outputs = t.outputs, r
                }
                return i(t, e), t.prototype.create = function (e, t, n, r) {
                    return this.factory.create(e, t, n, r || this.ngModule)
                }, t
            }(Ot),
            At = function () {
                return function () {}
            }(),
            wt = function () {
                return function () {}
            }(),
            Nt = function () {
                function e(e) {
                    this.nativeElement = e
                }
                return e.__NG_ELEMENT_ID__ = function () {
                    return Pt(e)
                }, e
            }(),
            Pt = et,
            Dt = function () {
                return function () {}
            }(),
            Mt = function () {
                return function () {}
            }(),
            kt = function (e) {
                return e[e.Important = 1] = "Important", e[e.DashCase = 2] = "DashCase", e
            }({}),
            Lt = function () {
                function e() {}
                return e.__NG_ELEMENT_ID__ = function () {
                    return xt()
                }, e
            }(),
            xt = et,
            Ft = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.HTML = 1] = "HTML", e[e.STYLE = 2] = "STYLE", e[e.SCRIPT = 3] = "SCRIPT", e[e.URL = 4] = "URL", e[e.RESOURCE_URL = 5] = "RESOURCE_URL", e
            }({}),
            Ut = function () {
                return function () {}
            }(),
            Ht = new(function () {
                return function (e) {
                    this.full = e, this.major = e.split(".")[0], this.minor = e.split(".")[1], this.patch = e.split(".").slice(2).join(".")
                }
            }())("7.2.15"),
            Gt = !0,
            Bt = !1;

        function Vt() {
            return Bt = !0, Gt
        }
        var Wt = function () {
                function e(e) {
                    if (this.defaultDoc = e, this.inertDocument = this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"), this.inertBodyElement = this.inertDocument.body, null == this.inertBodyElement) {
                        var t = this.inertDocument.createElement("html");
                        this.inertDocument.appendChild(t), this.inertBodyElement = this.inertDocument.createElement("body"), t.appendChild(this.inertBodyElement)
                    }
                    this.inertBodyElement.innerHTML = '<svg><g onload="this.parentNode.remove()"></g></svg>', !this.inertBodyElement.querySelector || this.inertBodyElement.querySelector("svg") ? (this.inertBodyElement.innerHTML = '<svg><p><style><img src="</style><img src=x onerror=alert(1)//">', this.getInertBodyElement = this.inertBodyElement.querySelector && this.inertBodyElement.querySelector("svg img") && function () {
                        try {
                            return !!window.DOMParser
                        } catch (e) {
                            return !1
                        }
                    }() ? this.getInertBodyElement_DOMParser : this.getInertBodyElement_InertDocument) : this.getInertBodyElement = this.getInertBodyElement_XHR
                }
                return e.prototype.getInertBodyElement_XHR = function (e) {
                    e = "<body><remove></remove>" + e + "</body>";
                    try {
                        e = encodeURI(e)
                    } catch (r) {
                        return null
                    }
                    var t = new XMLHttpRequest;
                    t.responseType = "document", t.open("GET", "data:text/html;charset=utf-8," + e, !1), t.send(void 0);
                    var n = t.response.body;
                    return n.removeChild(n.firstChild), n
                }, e.prototype.getInertBodyElement_DOMParser = function (e) {
                    e = "<body><remove></remove>" + e + "</body>";
                    try {
                        var t = (new window.DOMParser).parseFromString(e, "text/html").body;
                        return t.removeChild(t.firstChild), t
                    } catch (n) {
                        return null
                    }
                }, e.prototype.getInertBodyElement_InertDocument = function (e) {
                    var t = this.inertDocument.createElement("template");
                    return "content" in t ? (t.innerHTML = e, t) : (this.inertBodyElement.innerHTML = e, this.defaultDoc.documentMode && this.stripCustomNsAttrs(this.inertBodyElement), this.inertBodyElement)
                }, e.prototype.stripCustomNsAttrs = function (e) {
                    for (var t = e.attributes, n = t.length - 1; 0 < n; n--) {
                        var r = t.item(n).name;
                        "xmlns:ns1" !== r && 0 !== r.indexOf("ns1:") || e.removeAttribute(r)
                    }
                    for (var i = e.firstChild; i;) i.nodeType === Node.ELEMENT_NODE && this.stripCustomNsAttrs(i), i = i.nextSibling
                }, e
            }(),
            jt = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,
            Yt = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;

        function zt(e) {
            return (e = String(e)).match(jt) || e.match(Yt) ? e : (Vt() && console.warn("WARNING: sanitizing unsafe URL value " + e + " (see http://g.co/ng/security#xss)"), "unsafe:" + e)
        }

        function Kt(e) {
            var t, n, r = {};
            try {
                for (var i = s(e.split(",")), l = i.next(); !l.done; l = i.next()) r[l.value] = !0
            } catch (o) {
                t = {
                    error: o
                }
            } finally {
                try {
                    l && !l.done && (n = i.return) && n.call(i)
                } finally {
                    if (t) throw t.error
                }
            }
            return r
        }

        function qt() {
            for (var e, t, n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r];
            var i = {};
            try {
                for (var l = s(n), o = l.next(); !o.done; o = l.next()) {
                    var u = o.value;
                    for (var a in u) u.hasOwnProperty(a) && (i[a] = !0)
                }
            } catch (c) {
                e = {
                    error: c
                }
            } finally {
                try {
                    o && !o.done && (t = l.return) && t.call(l)
                } finally {
                    if (e) throw e.error
                }
            }
            return i
        }
        var Qt, $t = Kt("area,br,col,hr,img,wbr"),
            Zt = Kt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
            Xt = Kt("rp,rt"),
            Jt = qt(Xt, Zt),
            en = qt($t, qt(Zt, Kt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")), qt(Xt, Kt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")), Jt),
            tn = Kt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),
            nn = Kt("srcset"),
            rn = qt(tn, nn, Kt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),
            ln = Kt("script,style,template"),
            on = function () {
                function e() {
                    this.sanitizedSomething = !1, this.buf = []
                }
                return e.prototype.sanitizeChildren = function (e) {
                    for (var t = e.firstChild, n = !0; t;)
                        if (t.nodeType === Node.ELEMENT_NODE ? n = this.startElement(t) : t.nodeType === Node.TEXT_NODE ? this.chars(t.nodeValue) : this.sanitizedSomething = !0, n && t.firstChild) t = t.firstChild;
                        else
                            for (; t;) {
                                t.nodeType === Node.ELEMENT_NODE && this.endElement(t);
                                var r = this.checkClobberedElement(t, t.nextSibling);
                                if (r) {
                                    t = r;
                                    break
                                }
                                t = this.checkClobberedElement(t, t.parentNode)
                            }
                    return this.buf.join("")
                }, e.prototype.startElement = function (e) {
                    var t, n = e.nodeName.toLowerCase();
                    if (!en.hasOwnProperty(n)) return this.sanitizedSomething = !0, !ln.hasOwnProperty(n);
                    this.buf.push("<"), this.buf.push(n);
                    for (var r = e.attributes, i = 0; i < r.length; i++) {
                        var l = r.item(i),
                            o = l.name,
                            u = o.toLowerCase();
                        if (rn.hasOwnProperty(u)) {
                            var s = l.value;
                            tn[u] && (s = zt(s)), nn[u] && (t = s, s = (t = String(t)).split(",").map(function (e) {
                                return zt(e.trim())
                            }).join(", ")), this.buf.push(" ", o, '="', an(s), '"')
                        } else this.sanitizedSomething = !0
                    }
                    return this.buf.push(">"), !0
                }, e.prototype.endElement = function (e) {
                    var t = e.nodeName.toLowerCase();
                    en.hasOwnProperty(t) && !$t.hasOwnProperty(t) && (this.buf.push("</"), this.buf.push(t), this.buf.push(">"))
                }, e.prototype.chars = function (e) {
                    this.buf.push(an(e))
                }, e.prototype.checkClobberedElement = function (e, t) {
                    if (t && (e.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY) === Node.DOCUMENT_POSITION_CONTAINED_BY) throw new Error("Failed to sanitize html because the element is clobbered: " + e.outerHTML);
                    return t
                }, e
            }(),
            un = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
            sn = /([^\#-~ |!])/g;

        function an(e) {
            return e.replace(/&/g, "&amp;").replace(un, function (e) {
                return "&#" + (1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320) + 65536) + ";"
            }).replace(sn, function (e) {
                return "&#" + e.charCodeAt(0) + ";"
            }).replace(/</g, "&lt;").replace(/>/g, "&gt;")
        }

        function cn(e) {
            return "content" in e && function (e) {
                return e.nodeType === Node.ELEMENT_NODE && "TEMPLATE" === e.nodeName
            }(e) ? e.content : null
        }
        var pn = function (e) {
                function t(t) {
                    void 0 === t && (t = !1);
                    var n = e.call(this) || this;
                    return n.__isAsync = t, n
                }
                return i(t, e), t.prototype.emit = function (t) {
                    e.prototype.next.call(this, t)
                }, t.prototype.subscribe = function (t, n, r) {
                    var i, l = function (e) {
                            return null
                        },
                        o = function () {
                            return null
                        };
                    t && "object" == typeof t ? (i = this.__isAsync ? function (e) {
                        setTimeout(function () {
                            return t.next(e)
                        })
                    } : function (e) {
                        t.next(e)
                    }, t.error && (l = this.__isAsync ? function (e) {
                        setTimeout(function () {
                            return t.error(e)
                        })
                    } : function (e) {
                        t.error(e)
                    }), t.complete && (o = this.__isAsync ? function () {
                        setTimeout(function () {
                            return t.complete()
                        })
                    } : function () {
                        t.complete()
                    })) : (i = this.__isAsync ? function (e) {
                        setTimeout(function () {
                            return t(e)
                        })
                    } : function (e) {
                        t(e)
                    }, n && (l = this.__isAsync ? function (e) {
                        setTimeout(function () {
                            return n(e)
                        })
                    } : function (e) {
                        n(e)
                    }), r && (o = this.__isAsync ? function () {
                        setTimeout(function () {
                            return r()
                        })
                    } : function () {
                        r()
                    }));
                    var u = e.prototype.subscribe.call(this, i, l, o);
                    return t instanceof v && t.add(u), u
                }, t
            }(L),
            hn = function () {
                function e() {}
                return e.__NG_ELEMENT_ID__ = function () {
                    return dn(e, Nt)
                }, e
            }(),
            dn = et,
            fn = new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$", "g"),
            gn = /^url\(([^)]+)\)$/,
            vn = function () {
                return function () {}
            }(),
            mn = Te("Input", function (e) {
                return {
                    bindingPropertyName: e
                }
            }, void 0, function (e) {
                return function (e, t) {
                    for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];
                    var i = e.constructor;
                    i.hasOwnProperty(ge) || function (e) {
                        var t = e.constructor,
                            n = t.ngBaseDef,
                            r = t.ngBaseDef = {
                                inputs: {},
                                outputs: {},
                                declaredInputs: {}
                            };
                        n && (de(r.inputs, n.inputs), de(r.outputs, n.outputs), de(r.declaredInputs, n.declaredInputs))
                    }(e), (function (e) {
                        return e.inputs || {}
                    }(i.ngBaseDef))[t] = n[0]
                }
            }()),
            yn = Te("HostBinding", function (e) {
                return {
                    hostPropertyName: e
                }
            }),
            Sn = "ngDebugContext",
            En = "ngOriginalError",
            On = "ngErrorLogger";

        function bn(e) {
            return e[Sn]
        }

        function Tn(e) {
            return e[En]
        }

        function Rn(e) {
            for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
            e.error.apply(e, c(t))
        }
        var Cn = function () {
            function e() {
                this._console = console
            }
            return e.prototype.handleError = function (e) {
                var t = this._findOriginalError(e),
                    n = this._findContext(e),
                    r = function (e) {
                        return e[On] || Rn
                    }(e);
                r(this._console, "ERROR", e), t && r(this._console, "ORIGINAL ERROR", t), n && r(this._console, "ERROR CONTEXT", n)
            }, e.prototype._findContext = function (e) {
                return e ? bn(e) ? bn(e) : this._findContext(Tn(e)) : null
            }, e.prototype._findOriginalError = function (e) {
                for (var t = Tn(e); t && Tn(t);) t = Tn(t);
                return t
            }, e
        }();

        function _n(e) {
            return !!e && "function" == typeof e.then
        }

        function In(e) {
            return !!e && "function" == typeof e.subscribe
        }
        var An = new ye("Application Initializer"),
            wn = function () {
                function e(e) {
                    var t = this;
                    this.appInits = e, this.initialized = !1, this.done = !1, this.donePromise = new Promise(function (e, n) {
                        t.resolve = e, t.reject = n
                    })
                }
                return e.prototype.runInitializers = function () {
                    var e = this;
                    if (!this.initialized) {
                        var t = [],
                            n = function () {
                                e.done = !0, e.resolve()
                            };
                        if (this.appInits)
                            for (var r = 0; r < this.appInits.length; r++) {
                                var i = this.appInits[r]();
                                _n(i) && t.push(i)
                            }
                        Promise.all(t).then(function () {
                            n()
                        }).catch(function (t) {
                            e.reject(t)
                        }), 0 === t.length && n(), this.initialized = !0
                    }
                }, e
            }(),
            Nn = new ye("AppId");

        function Pn() {
            return "" + Dn() + Dn() + Dn()
        }

        function Dn() {
            return String.fromCharCode(97 + Math.floor(25 * Math.random()))
        }
        var Mn = new ye("Platform Initializer"),
            kn = new ye("Platform ID"),
            Ln = new ye("appBootstrapListener"),
            xn = function () {
                function e() {}
                return e.prototype.log = function (e) {
                    console.log(e)
                }, e.prototype.warn = function (e) {
                    console.warn(e)
                }, e
            }();

        function Fn() {
            throw new Error("Runtime compiler is not loaded")
        }
        var Un, Hn, Gn = Fn,
            Bn = Fn,
            Vn = Fn,
            Wn = Fn,
            jn = function () {
                function e() {
                    this.compileModuleSync = Gn, this.compileModuleAsync = Bn, this.compileModuleAndAllComponentsSync = Vn, this.compileModuleAndAllComponentsAsync = Wn
                }
                return e.prototype.clearCache = function () {}, e.prototype.clearCacheFor = function (e) {}, e.prototype.getModuleId = function (e) {}, e
            }(),
            Yn = function () {
                return function () {}
            }();

        function zn() {
            var e = Ie.wtf;
            return !(!e || !(Un = e.trace) || (Hn = Un.events, 0))
        }
        var Kn = zn();

        function qn(e, t) {
            return null
        }
        var Qn = Kn ? function (e, t) {
                return void 0 === t && (t = null), Hn.createScope(e, t)
            } : function (e, t) {
                return qn
            },
            $n = Kn ? function (e, t) {
                return Un.leaveScope(e, t), t
            } : function (e, t) {
                return t
            },
            Zn = function () {
                function e(e) {
                    var t, n = e.enableLongStackTrace,
                        r = void 0 !== n && n;
                    if (this.hasPendingMicrotasks = !1, this.hasPendingMacrotasks = !1, this.isStable = !0, this.onUnstable = new pn(!1), this.onMicrotaskEmpty = new pn(!1), this.onStable = new pn(!1), this.onError = new pn(!1), "undefined" == typeof Zone) throw new Error("In this configuration Angular requires Zone.js");
                    Zone.assertZonePatched(), this._nesting = 0, this._outer = this._inner = Zone.current, Zone.wtfZoneSpec && (this._inner = this._inner.fork(Zone.wtfZoneSpec)), Zone.TaskTrackingZoneSpec && (this._inner = this._inner.fork(new Zone.TaskTrackingZoneSpec)), r && Zone.longStackTraceZoneSpec && (this._inner = this._inner.fork(Zone.longStackTraceZoneSpec)), (t = this)._inner = t._inner.fork({
                        name: "angular",
                        properties: {
                            isAngularZone: !0
                        },
                        onInvokeTask: function (e, n, r, i, l, o) {
                            try {
                                return tr(t), e.invokeTask(r, i, l, o)
                            } finally {
                                nr(t)
                            }
                        },
                        onInvoke: function (e, n, r, i, l, o, u) {
                            try {
                                return tr(t), e.invoke(r, i, l, o, u)
                            } finally {
                                nr(t)
                            }
                        },
                        onHasTask: function (e, n, r, i) {
                            e.hasTask(r, i), n === r && ("microTask" == i.change ? (t.hasPendingMicrotasks = i.microTask, er(t)) : "macroTask" == i.change && (t.hasPendingMacrotasks = i.macroTask))
                        },
                        onHandleError: function (e, n, r, i) {
                            return e.handleError(r, i), t.runOutsideAngular(function () {
                                return t.onError.emit(i)
                            }), !1
                        }
                    })
                }
                return e.isInAngularZone = function () {
                    return !0 === Zone.current.get("isAngularZone")
                }, e.assertInAngularZone = function () {
                    if (!e.isInAngularZone()) throw new Error("Expected to be in Angular Zone, but it is not!")
                }, e.assertNotInAngularZone = function () {
                    if (e.isInAngularZone()) throw new Error("Expected to not be in Angular Zone, but it is!")
                }, e.prototype.run = function (e, t, n) {
                    return this._inner.run(e, t, n)
                }, e.prototype.runTask = function (e, t, n, r) {
                    var i = this._inner,
                        l = i.scheduleEventTask("NgZoneEvent: " + r, e, Jn, Xn, Xn);
                    try {
                        return i.runTask(l, t, n)
                    } finally {
                        i.cancelTask(l)
                    }
                }, e.prototype.runGuarded = function (e, t, n) {
                    return this._inner.runGuarded(e, t, n)
                }, e.prototype.runOutsideAngular = function (e) {
                    return this._outer.run(e)
                }, e
            }();

        function Xn() {}
        var Jn = {};

        function er(e) {
            if (0 == e._nesting && !e.hasPendingMicrotasks && !e.isStable) try {
                e._nesting++, e.onMicrotaskEmpty.emit(null)
            } finally {
                if (e._nesting--, !e.hasPendingMicrotasks) try {
                    e.runOutsideAngular(function () {
                        return e.onStable.emit(null)
                    })
                } finally {
                    e.isStable = !0
                }
            }
        }

        function tr(e) {
            e._nesting++, e.isStable && (e.isStable = !1, e.onUnstable.emit(null))
        }

        function nr(e) {
            e._nesting--, er(e)
        }
        var rr, ir = function () {
                function e() {
                    this.hasPendingMicrotasks = !1, this.hasPendingMacrotasks = !1, this.isStable = !0, this.onUnstable = new pn, this.onMicrotaskEmpty = new pn, this.onStable = new pn, this.onError = new pn
                }
                return e.prototype.run = function (e) {
                    return e()
                }, e.prototype.runGuarded = function (e) {
                    return e()
                }, e.prototype.runOutsideAngular = function (e) {
                    return e()
                }, e.prototype.runTask = function (e) {
                    return e()
                }, e
            }(),
            lr = function () {
                function e(e) {
                    var t = this;
                    this._ngZone = e, this._pendingCount = 0, this._isZoneStable = !0, this._didWork = !1, this._callbacks = [], this.taskTrackingZone = null, this._watchAngularEvents(), e.run(function () {
                        t.taskTrackingZone = "undefined" == typeof Zone ? null : Zone.current.get("TaskTrackingZone")
                    })
                }
                return e.prototype._watchAngularEvents = function () {
                    var e = this;
                    this._ngZone.onUnstable.subscribe({
                        next: function () {
                            e._didWork = !0, e._isZoneStable = !1
                        }
                    }), this._ngZone.runOutsideAngular(function () {
                        e._ngZone.onStable.subscribe({
                            next: function () {
                                Zn.assertNotInAngularZone(), Pe(function () {
                                    e._isZoneStable = !0, e._runCallbacksIfReady()
                                })
                            }
                        })
                    })
                }, e.prototype.increasePendingRequestCount = function () {
                    return this._pendingCount += 1, this._didWork = !0, this._pendingCount
                }, e.prototype.decreasePendingRequestCount = function () {
                    if (this._pendingCount -= 1, this._pendingCount < 0) throw new Error("pending async requests below zero");
                    return this._runCallbacksIfReady(), this._pendingCount
                }, e.prototype.isStable = function () {
                    return this._isZoneStable && 0 === this._pendingCount && !this._ngZone.hasPendingMacrotasks
                }, e.prototype._runCallbacksIfReady = function () {
                    var e = this;
                    if (this.isStable()) Pe(function () {
                        for (; 0 !== e._callbacks.length;) {
                            var t = e._callbacks.pop();
                            clearTimeout(t.timeoutId), t.doneCb(e._didWork)
                        }
                        e._didWork = !1
                    });
                    else {
                        var t = this.getPendingTasks();
                        this._callbacks = this._callbacks.filter(function (e) {
                            return !e.updateCb || !e.updateCb(t) || (clearTimeout(e.timeoutId), !1)
                        }), this._didWork = !0
                    }
                }, e.prototype.getPendingTasks = function () {
                    return this.taskTrackingZone ? this.taskTrackingZone.macroTasks.map(function (e) {
                        return {
                            source: e.source,
                            creationLocation: e.creationLocation,
                            data: e.data
                        }
                    }) : []
                }, e.prototype.addCallback = function (e, t, n) {
                    var r = this,
                        i = -1;
                    t && t > 0 && (i = setTimeout(function () {
                        r._callbacks = r._callbacks.filter(function (e) {
                            return e.timeoutId !== i
                        }), e(r._didWork, r.getPendingTasks())
                    }, t)), this._callbacks.push({
                        doneCb: e,
                        timeoutId: i,
                        updateCb: n
                    })
                }, e.prototype.whenStable = function (e, t, n) {
                    if (n && !this.taskTrackingZone) throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');
                    this.addCallback(e, t, n), this._runCallbacksIfReady()
                }, e.prototype.getPendingRequestCount = function () {
                    return this._pendingCount
                }, e.prototype.findProviders = function (e, t, n) {
                    return []
                }, e
            }(),
            or = function () {
                function e() {
                    this._applications = new Map, ur.addToWindow(this)
                }
                return e.prototype.registerApplication = function (e, t) {
                    this._applications.set(e, t)
                }, e.prototype.unregisterApplication = function (e) {
                    this._applications.delete(e)
                }, e.prototype.unregisterAllApplications = function () {
                    this._applications.clear()
                }, e.prototype.getTestability = function (e) {
                    return this._applications.get(e) || null
                }, e.prototype.getAllTestabilities = function () {
                    return Array.from(this._applications.values())
                }, e.prototype.getAllRootElements = function () {
                    return Array.from(this._applications.keys())
                }, e.prototype.findTestabilityInTree = function (e, t) {
                    return void 0 === t && (t = !0), ur.findTestabilityInTree(this, e, t)
                }, o([u("design:paramtypes", [])], e)
            }(),
            ur = new(function () {
                function e() {}
                return e.prototype.addToWindow = function (e) {}, e.prototype.findTestabilityInTree = function (e, t, n) {
                    return null
                }, e
            }()),
            sr = new ye("AllowMultipleToken"),
            ar = function () {
                return function (e, t) {
                    this.name = e, this.token = t
                }
            }();

        function cr(e, t, n) {
            void 0 === n && (n = []);
            var r = "Platform: " + t,
                i = new ye(r);
            return function (t) {
                void 0 === t && (t = []);
                var l = pr();
                if (!l || l.injector.get(sr, !1))
                    if (e) e(n.concat(t).concat({
                        provide: i,
                        useValue: !0
                    }));
                    else {
                        var o = n.concat(t).concat({
                            provide: i,
                            useValue: !0
                        });
                        ! function (e) {
                            if (rr && !rr.destroyed && !rr.injector.get(sr, !1)) throw new Error("There can be only one platform. Destroy the previous one to create a new one.");
                            rr = e.get(hr);
                            var t = e.get(Mn, null);
                            t && t.forEach(function (e) {
                                return e()
                            })
                        }(lt.create({
                            providers: o,
                            name: r
                        }))
                    } return function (e) {
                    var t = pr();
                    if (!t) throw new Error("No platform exists!");
                    if (!t.injector.get(e, null)) throw new Error("A platform with a different configuration has been created. Please destroy it first.");
                    return t
                }(i)
            }
        }

        function pr() {
            return rr && !rr.destroyed ? rr : null
        }
        var hr = function () {
            function e(e) {
                this._injector = e, this._modules = [], this._destroyListeners = [], this._destroyed = !1
            }
            return e.prototype.bootstrapModuleFactory = function (e, t) {
                var n, r = this,
                    i = "noop" === (n = t ? t.ngZone : void 0) ? new ir : ("zone.js" === n ? void 0 : n) || new Zn({
                        enableLongStackTrace: Vt()
                    }),
                    l = [{
                        provide: Zn,
                        useValue: i
                    }];
                return i.run(function () {
                    var t = lt.create({
                            providers: l,
                            parent: r.injector,
                            name: e.moduleType.name
                        }),
                        n = e.create(t),
                        o = n.injector.get(Cn, null);
                    if (!o) throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");
                    return n.onDestroy(function () {
                            return gr(r._modules, n)
                        }), i.runOutsideAngular(function () {
                            return i.onError.subscribe({
                                next: function (e) {
                                    o.handleError(e)
                                }
                            })
                        }),
                        function (e, t, i) {
                            try {
                                var l = ((o = n.injector.get(wn)).runInitializers(), o.donePromise.then(function () {
                                    return r._moduleDoBootstrap(n), n
                                }));
                                return _n(l) ? l.catch(function (n) {
                                    throw t.runOutsideAngular(function () {
                                        return e.handleError(n)
                                    }), n
                                }) : l
                            } catch (u) {
                                throw t.runOutsideAngular(function () {
                                    return e.handleError(u)
                                }), u
                            }
                            var o
                        }(o, i)
                })
            }, e.prototype.bootstrapModule = function (e, t) {
                var n = this;
                void 0 === t && (t = []);
                var r = dr({}, t);
                return function (e, t, n) {
                    return e.get(Yn).createCompiler([t]).compileModuleAsync(n)
                }(this.injector, r, e).then(function (e) {
                    return n.bootstrapModuleFactory(e, r)
                })
            }, e.prototype._moduleDoBootstrap = function (e) {
                var t = e.injector.get(fr);
                if (e._bootstrapComponents.length > 0) e._bootstrapComponents.forEach(function (e) {
                    return t.bootstrap(e)
                });
                else {
                    if (!e.instance.ngDoBootstrap) throw new Error("The module " + Me(e.instance.constructor) + ' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');
                    e.instance.ngDoBootstrap(t)
                }
                this._modules.push(e)
            }, e.prototype.onDestroy = function (e) {
                this._destroyListeners.push(e)
            }, Object.defineProperty(e.prototype, "injector", {
                get: function () {
                    return this._injector
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.destroy = function () {
                if (this._destroyed) throw new Error("The platform has already been destroyed!");
                this._modules.slice().forEach(function (e) {
                    return e.destroy()
                }), this._destroyListeners.forEach(function (e) {
                    return e()
                }), this._destroyed = !0
            }, Object.defineProperty(e.prototype, "destroyed", {
                get: function () {
                    return this._destroyed
                },
                enumerable: !0,
                configurable: !0
            }), e
        }();

        function dr(e, t) {
            return Array.isArray(t) ? t.reduce(dr, e) : l({}, e, t)
        }
        var fr = function () {
            function e(e, t, n, r, i, l) {
                var o = this;
                this._zone = e, this._console = t, this._injector = n, this._exceptionHandler = r, this._componentFactoryResolver = i, this._initStatus = l, this._bootstrapListeners = [], this._views = [], this._runningTick = !1, this._enforceNoNewChanges = !1, this._stable = !0, this.componentTypes = [], this.components = [], this._enforceNoNewChanges = Vt(), this._zone.onMicrotaskEmpty.subscribe({
                    next: function () {
                        o._zone.run(function () {
                            o.tick()
                        })
                    }
                });
                var u = new w(function (e) {
                        o._stable = o._zone.isStable && !o._zone.hasPendingMacrotasks && !o._zone.hasPendingMicrotasks, o._zone.runOutsideAngular(function () {
                            e.next(o._stable), e.complete()
                        })
                    }),
                    s = new w(function (e) {
                        var t;
                        o._zone.runOutsideAngular(function () {
                            t = o._zone.onStable.subscribe(function () {
                                Zn.assertNotInAngularZone(), Pe(function () {
                                    o._stable || o._zone.hasPendingMacrotasks || o._zone.hasPendingMicrotasks || (o._stable = !0, e.next(!0))
                                })
                            })
                        });
                        var n = o._zone.onUnstable.subscribe(function () {
                            Zn.assertInAngularZone(), o._stable && (o._stable = !1, o._zone.runOutsideAngular(function () {
                                e.next(!1)
                            }))
                        });
                        return function () {
                            t.unsubscribe(), n.unsubscribe()
                        }
                    });
                this.isStable = ie(u, s.pipe(function (e) {
                    return le()((t = pe, function (e) {
                        var n;
                        n = "function" == typeof t ? t : function () {
                            return t
                        };
                        var r = Object.create(e, ae);
                        return r.source = e, r.subjectFactory = n, r
                    })(e));
                    var t
                }))
            }
            var t;
            return t = e, e.prototype.bootstrap = function (e, t) {
                var n, r = this;
                if (!this._initStatus.done) throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");
                n = e instanceof Ot ? e : this._componentFactoryResolver.resolveComponentFactory(e), this.componentTypes.push(n.componentType);
                var i = n instanceof It ? null : this._injector.get(At),
                    l = n.create(lt.NULL, [], t || n.selector, i);
                l.onDestroy(function () {
                    r._unloadComponent(l)
                });
                var o = l.injector.get(lr, null);
                return o && l.injector.get(or).registerApplication(l.location.nativeElement, o), this._loadComponent(l), Vt() && this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."), l
            }, e.prototype.tick = function () {
                var e = this;
                if (this._runningTick) throw new Error("ApplicationRef.tick is called recursively");
                var n = t._tickScope();
                try {
                    this._runningTick = !0, this._views.forEach(function (e) {
                        return e.detectChanges()
                    }), this._enforceNoNewChanges && this._views.forEach(function (e) {
                        return e.checkNoChanges()
                    })
                } catch (r) {
                    this._zone.runOutsideAngular(function () {
                        return e._exceptionHandler.handleError(r)
                    })
                } finally {
                    this._runningTick = !1, $n(n)
                }
            }, e.prototype.attachView = function (e) {
                var t = e;
                this._views.push(t), t.attachToAppRef(this)
            }, e.prototype.detachView = function (e) {
                var t = e;
                gr(this._views, t), t.detachFromAppRef()
            }, e.prototype._loadComponent = function (e) {
                this.attachView(e.hostView), this.tick(), this.components.push(e), this._injector.get(Ln, []).concat(this._bootstrapListeners).forEach(function (t) {
                    return t(e)
                })
            }, e.prototype._unloadComponent = function (e) {
                this.detachView(e.hostView), gr(this.components, e)
            }, e.prototype.ngOnDestroy = function () {
                this._views.slice().forEach(function (e) {
                    return e.destroy()
                })
            }, Object.defineProperty(e.prototype, "viewCount", {
                get: function () {
                    return this._views.length
                },
                enumerable: !0,
                configurable: !0
            }), e._tickScope = Qn("ApplicationRef#tick()"), e
        }();

        function gr(e, t) {
            var n = e.indexOf(t);
            n > -1 && e.splice(n, 1)
        }
        var vr = function () {
                function e() {
                    this.dirty = !0, this._results = [], this.changes = new pn, this.length = 0
                }
                return e.prototype.map = function (e) {
                    return this._results.map(e)
                }, e.prototype.filter = function (e) {
                    return this._results.filter(e)
                }, e.prototype.find = function (e) {
                    return this._results.find(e)
                }, e.prototype.reduce = function (e, t) {
                    return this._results.reduce(e, t)
                }, e.prototype.forEach = function (e) {
                    this._results.forEach(e)
                }, e.prototype.some = function (e) {
                    return this._results.some(e)
                }, e.prototype.toArray = function () {
                    return this._results.slice()
                }, e.prototype[Ne()] = function () {
                    return this._results[Ne()]()
                }, e.prototype.toString = function () {
                    return this._results.toString()
                }, e.prototype.reset = function (e) {
                    this._results = function e(t) {
                        return t.reduce(function (t, n) {
                            var r = Array.isArray(n) ? e(n) : n;
                            return t.concat(r)
                        }, [])
                    }(e), this.dirty = !1, this.length = this._results.length, this.last = this._results[this.length - 1], this.first = this._results[0]
                }, e.prototype.notifyOnChanges = function () {
                    this.changes.emit(this)
                }, e.prototype.setDirty = function () {
                    this.dirty = !0
                }, e.prototype.destroy = function () {
                    this.changes.complete(), this.changes.unsubscribe()
                }, e
            }(),
            mr = function () {
                return function () {}
            }(),
            yr = {
                factoryPathPrefix: "",
                factoryPathSuffix: ".ngfactory"
            },
            Sr = function () {
                function e(e, t) {
                    this._compiler = e, this._config = t || yr
                }
                return e.prototype.load = function (e) {
                    return this._compiler instanceof jn ? this.loadFactory(e) : this.loadAndCompile(e)
                }, e.prototype.loadAndCompile = function (e) {
                    var t = this,
                        r = a(e.split("#"), 2),
                        i = r[0],
                        l = r[1];
                    return void 0 === l && (l = "default"), n("crnd")(i).then(function (e) {
                        return e[l]
                    }).then(function (e) {
                        return Er(e, i, l)
                    }).then(function (e) {
                        return t._compiler.compileModuleAsync(e)
                    })
                }, e.prototype.loadFactory = function (e) {
                    var t = a(e.split("#"), 2),
                        r = t[0],
                        i = t[1],
                        l = "NgFactory";
                    return void 0 === i && (i = "default", l = ""), n("crnd")(this._config.factoryPathPrefix + r + this._config.factoryPathSuffix).then(function (e) {
                        return e[i + l]
                    }).then(function (e) {
                        return Er(e, r, i)
                    })
                }, e
            }();

        function Er(e, t, n) {
            if (!e) throw new Error("Cannot find '" + n + "' in '" + t + "'");
            return e
        }
        var Or = function () {
                function e() {}
                return e.__NG_ELEMENT_ID__ = function () {
                    return br(e, Nt)
                }, e
            }(),
            br = et,
            Tr = function () {
                function e() {}
                return e.__NG_ELEMENT_ID__ = function () {
                    return Rr()
                }, e
            }(),
            Rr = function () {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t]
            },
            Cr = function () {
                return function (e, t) {
                    this.name = e, this.callback = t
                }
            }(),
            _r = function () {
                function e(e, t, n) {
                    this.listeners = [], this.parent = null, this._debugContext = n, this.nativeNode = e, t && t instanceof Ir && t.addChild(this)
                }
                return Object.defineProperty(e.prototype, "injector", {
                    get: function () {
                        return this._debugContext.injector
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "componentInstance", {
                    get: function () {
                        return this._debugContext.component
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "context", {
                    get: function () {
                        return this._debugContext.context
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "references", {
                    get: function () {
                        return this._debugContext.references
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "providerTokens", {
                    get: function () {
                        return this._debugContext.providerTokens
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }(),
            Ir = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, t, n, r) || this;
                    return i.properties = {}, i.attributes = {}, i.classes = {}, i.styles = {}, i.childNodes = [], i.nativeElement = t, i
                }
                return i(t, e), t.prototype.addChild = function (e) {
                    e && (this.childNodes.push(e), e.parent = this)
                }, t.prototype.removeChild = function (e) {
                    var t = this.childNodes.indexOf(e); - 1 !== t && (e.parent = null, this.childNodes.splice(t, 1))
                }, t.prototype.insertChildrenAfter = function (e, t) {
                    var n, r = this,
                        i = this.childNodes.indexOf(e); - 1 !== i && ((n = this.childNodes).splice.apply(n, c([i + 1, 0], t)), t.forEach(function (t) {
                        t.parent && t.parent.removeChild(t), e.parent = r
                    }))
                }, t.prototype.insertBefore = function (e, t) {
                    var n = this.childNodes.indexOf(e); - 1 === n ? this.addChild(t) : (t.parent && t.parent.removeChild(t), t.parent = this, this.childNodes.splice(n, 0, t))
                }, t.prototype.query = function (e) {
                    return this.queryAll(e)[0] || null
                }, t.prototype.queryAll = function (e) {
                    var t = [];
                    return function e(t, n, r) {
                        t.childNodes.forEach(function (t) {
                            t instanceof Ir && (n(t) && r.push(t), e(t, n, r))
                        })
                    }(this, e, t), t
                }, t.prototype.queryAllNodes = function (e) {
                    var t = [];
                    return function e(t, n, r) {
                        t instanceof Ir && t.childNodes.forEach(function (t) {
                            n(t) && r.push(t), t instanceof Ir && e(t, n, r)
                        })
                    }(this, e, t), t
                }, Object.defineProperty(t.prototype, "children", {
                    get: function () {
                        return this.childNodes.filter(function (e) {
                            return e instanceof t
                        })
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.triggerEventHandler = function (e, t) {
                    this.listeners.forEach(function (n) {
                        n.name == e && n.callback(t)
                    })
                }, t
            }(_r),
            Ar = new Map,
            wr = function (e) {
                return Ar.get(e) || null
            };

        function Nr(e) {
            Ar.set(e.nativeNode, e)
        }
        var Pr = function () {
                function e() {}
                return e.prototype.supports = function (e) {
                    return Xe(e)
                }, e.prototype.create = function (e) {
                    return new Mr(e)
                }, e
            }(),
            Dr = function (e, t) {
                return t
            },
            Mr = function () {
                function e(e) {
                    this.length = 0, this._linkedRecords = null, this._unlinkedRecords = null, this._previousItHead = null, this._itHead = null, this._itTail = null, this._additionsHead = null, this._additionsTail = null, this._movesHead = null, this._movesTail = null, this._removalsHead = null, this._removalsTail = null, this._identityChangesHead = null, this._identityChangesTail = null, this._trackByFn = e || Dr
                }
                return e.prototype.forEachItem = function (e) {
                    var t;
                    for (t = this._itHead; null !== t; t = t._next) e(t)
                }, e.prototype.forEachOperation = function (e) {
                    for (var t = this._itHead, n = this._removalsHead, r = 0, i = null; t || n;) {
                        var l = !n || t && t.currentIndex < Fr(n, r, i) ? t : n,
                            o = Fr(l, r, i),
                            u = l.currentIndex;
                        if (l === n) r--, n = n._nextRemoved;
                        else if (t = t._next, null == l.previousIndex) r++;
                        else {
                            i || (i = []);
                            var s = o - r,
                                a = u - r;
                            if (s != a) {
                                for (var c = 0; c < s; c++) {
                                    var p = c < i.length ? i[c] : i[c] = 0,
                                        h = p + c;
                                    a <= h && h < s && (i[c] = p + 1)
                                }
                                i[l.previousIndex] = a - s
                            }
                        }
                        o !== u && e(l, o, u)
                    }
                }, e.prototype.forEachPreviousItem = function (e) {
                    var t;
                    for (t = this._previousItHead; null !== t; t = t._nextPrevious) e(t)
                }, e.prototype.forEachAddedItem = function (e) {
                    var t;
                    for (t = this._additionsHead; null !== t; t = t._nextAdded) e(t)
                }, e.prototype.forEachMovedItem = function (e) {
                    var t;
                    for (t = this._movesHead; null !== t; t = t._nextMoved) e(t)
                }, e.prototype.forEachRemovedItem = function (e) {
                    var t;
                    for (t = this._removalsHead; null !== t; t = t._nextRemoved) e(t)
                }, e.prototype.forEachIdentityChange = function (e) {
                    var t;
                    for (t = this._identityChangesHead; null !== t; t = t._nextIdentityChange) e(t)
                }, e.prototype.diff = function (e) {
                    if (null == e && (e = []), !Xe(e)) throw new Error("Error trying to diff '" + Me(e) + "'. Only arrays and iterables are allowed");
                    return this.check(e) ? this : null
                }, e.prototype.onDestroy = function () {}, e.prototype.check = function (e) {
                    var t = this;
                    this._reset();
                    var n, r, i, l = this._itHead,
                        o = !1;
                    if (Array.isArray(e)) {
                        this.length = e.length;
                        for (var u = 0; u < this.length; u++) i = this._trackByFn(u, r = e[u]), null !== l && De(l.trackById, i) ? (o && (l = this._verifyReinsertion(l, r, i, u)), De(l.item, r) || this._addIdentityChange(l, r)) : (l = this._mismatch(l, r, i, u), o = !0), l = l._next
                    } else n = 0,
                        function (e, t) {
                            if (Array.isArray(e))
                                for (var n = 0; n < e.length; n++) t(e[n]);
                            else
                                for (var r = e[Ne()](), i = void 0; !(i = r.next()).done;) t(i.value)
                        }(e, function (e) {
                            i = t._trackByFn(n, e), null !== l && De(l.trackById, i) ? (o && (l = t._verifyReinsertion(l, e, i, n)), De(l.item, e) || t._addIdentityChange(l, e)) : (l = t._mismatch(l, e, i, n), o = !0), l = l._next, n++
                        }), this.length = n;
                    return this._truncate(l), this.collection = e, this.isDirty
                }, Object.defineProperty(e.prototype, "isDirty", {
                    get: function () {
                        return null !== this._additionsHead || null !== this._movesHead || null !== this._removalsHead || null !== this._identityChangesHead
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._reset = function () {
                    if (this.isDirty) {
                        var e = void 0,
                            t = void 0;
                        for (e = this._previousItHead = this._itHead; null !== e; e = e._next) e._nextPrevious = e._next;
                        for (e = this._additionsHead; null !== e; e = e._nextAdded) e.previousIndex = e.currentIndex;
                        for (this._additionsHead = this._additionsTail = null, e = this._movesHead; null !== e; e = t) e.previousIndex = e.currentIndex, t = e._nextMoved;
                        this._movesHead = this._movesTail = null, this._removalsHead = this._removalsTail = null, this._identityChangesHead = this._identityChangesTail = null
                    }
                }, e.prototype._mismatch = function (e, t, n, r) {
                    var i;
                    return null === e ? i = this._itTail : (i = e._prev, this._remove(e)), null !== (e = null === this._linkedRecords ? null : this._linkedRecords.get(n, r)) ? (De(e.item, t) || this._addIdentityChange(e, t), this._moveAfter(e, i, r)) : null !== (e = null === this._unlinkedRecords ? null : this._unlinkedRecords.get(n, null)) ? (De(e.item, t) || this._addIdentityChange(e, t), this._reinsertAfter(e, i, r)) : e = this._addAfter(new kr(t, n), i, r), e
                }, e.prototype._verifyReinsertion = function (e, t, n, r) {
                    var i = null === this._unlinkedRecords ? null : this._unlinkedRecords.get(n, null);
                    return null !== i ? e = this._reinsertAfter(i, e._prev, r) : e.currentIndex != r && (e.currentIndex = r, this._addToMoves(e, r)), e
                }, e.prototype._truncate = function (e) {
                    for (; null !== e;) {
                        var t = e._next;
                        this._addToRemovals(this._unlink(e)), e = t
                    }
                    null !== this._unlinkedRecords && this._unlinkedRecords.clear(), null !== this._additionsTail && (this._additionsTail._nextAdded = null), null !== this._movesTail && (this._movesTail._nextMoved = null), null !== this._itTail && (this._itTail._next = null), null !== this._removalsTail && (this._removalsTail._nextRemoved = null), null !== this._identityChangesTail && (this._identityChangesTail._nextIdentityChange = null)
                }, e.prototype._reinsertAfter = function (e, t, n) {
                    null !== this._unlinkedRecords && this._unlinkedRecords.remove(e);
                    var r = e._prevRemoved,
                        i = e._nextRemoved;
                    return null === r ? this._removalsHead = i : r._nextRemoved = i, null === i ? this._removalsTail = r : i._prevRemoved = r, this._insertAfter(e, t, n), this._addToMoves(e, n), e
                }, e.prototype._moveAfter = function (e, t, n) {
                    return this._unlink(e), this._insertAfter(e, t, n), this._addToMoves(e, n), e
                }, e.prototype._addAfter = function (e, t, n) {
                    return this._insertAfter(e, t, n), this._additionsTail = null === this._additionsTail ? this._additionsHead = e : this._additionsTail._nextAdded = e, e
                }, e.prototype._insertAfter = function (e, t, n) {
                    var r = null === t ? this._itHead : t._next;
                    return e._next = r, e._prev = t, null === r ? this._itTail = e : r._prev = e, null === t ? this._itHead = e : t._next = e, null === this._linkedRecords && (this._linkedRecords = new xr), this._linkedRecords.put(e), e.currentIndex = n, e
                }, e.prototype._remove = function (e) {
                    return this._addToRemovals(this._unlink(e))
                }, e.prototype._unlink = function (e) {
                    null !== this._linkedRecords && this._linkedRecords.remove(e);
                    var t = e._prev,
                        n = e._next;
                    return null === t ? this._itHead = n : t._next = n, null === n ? this._itTail = t : n._prev = t, e
                }, e.prototype._addToMoves = function (e, t) {
                    return e.previousIndex === t ? e : (this._movesTail = null === this._movesTail ? this._movesHead = e : this._movesTail._nextMoved = e, e)
                }, e.prototype._addToRemovals = function (e) {
                    return null === this._unlinkedRecords && (this._unlinkedRecords = new xr), this._unlinkedRecords.put(e), e.currentIndex = null, e._nextRemoved = null, null === this._removalsTail ? (this._removalsTail = this._removalsHead = e, e._prevRemoved = null) : (e._prevRemoved = this._removalsTail, this._removalsTail = this._removalsTail._nextRemoved = e), e
                }, e.prototype._addIdentityChange = function (e, t) {
                    return e.item = t, this._identityChangesTail = null === this._identityChangesTail ? this._identityChangesHead = e : this._identityChangesTail._nextIdentityChange = e, e
                }, e
            }(),
            kr = function () {
                return function (e, t) {
                    this.item = e, this.trackById = t, this.currentIndex = null, this.previousIndex = null, this._nextPrevious = null, this._prev = null, this._next = null, this._prevDup = null, this._nextDup = null, this._prevRemoved = null, this._nextRemoved = null, this._nextAdded = null, this._nextMoved = null, this._nextIdentityChange = null
                }
            }(),
            Lr = function () {
                function e() {
                    this._head = null, this._tail = null
                }
                return e.prototype.add = function (e) {
                    null === this._head ? (this._head = this._tail = e, e._nextDup = null, e._prevDup = null) : (this._tail._nextDup = e, e._prevDup = this._tail, e._nextDup = null, this._tail = e)
                }, e.prototype.get = function (e, t) {
                    var n;
                    for (n = this._head; null !== n; n = n._nextDup)
                        if ((null === t || t <= n.currentIndex) && De(n.trackById, e)) return n;
                    return null
                }, e.prototype.remove = function (e) {
                    var t = e._prevDup,
                        n = e._nextDup;
                    return null === t ? this._head = n : t._nextDup = n, null === n ? this._tail = t : n._prevDup = t, null === this._head
                }, e
            }(),
            xr = function () {
                function e() {
                    this.map = new Map
                }
                return e.prototype.put = function (e) {
                    var t = e.trackById,
                        n = this.map.get(t);
                    n || (n = new Lr, this.map.set(t, n)), n.add(e)
                }, e.prototype.get = function (e, t) {
                    var n = this.map.get(e);
                    return n ? n.get(e, t) : null
                }, e.prototype.remove = function (e) {
                    var t = e.trackById;
                    return this.map.get(t).remove(e) && this.map.delete(t), e
                }, Object.defineProperty(e.prototype, "isEmpty", {
                    get: function () {
                        return 0 === this.map.size
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.clear = function () {
                    this.map.clear()
                }, e
            }();

        function Fr(e, t, n) {
            var r = e.previousIndex;
            if (null === r) return r;
            var i = 0;
            return n && r < n.length && (i = n[r]), r + t + i
        }
        var Ur = function () {
                function e() {}
                return e.prototype.supports = function (e) {
                    return e instanceof Map || Je(e)
                }, e.prototype.create = function () {
                    return new Hr
                }, e
            }(),
            Hr = function () {
                function e() {
                    this._records = new Map, this._mapHead = null, this._appendAfter = null, this._previousMapHead = null, this._changesHead = null, this._changesTail = null, this._additionsHead = null, this._additionsTail = null, this._removalsHead = null, this._removalsTail = null
                }
                return Object.defineProperty(e.prototype, "isDirty", {
                    get: function () {
                        return null !== this._additionsHead || null !== this._changesHead || null !== this._removalsHead
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.forEachItem = function (e) {
                    var t;
                    for (t = this._mapHead; null !== t; t = t._next) e(t)
                }, e.prototype.forEachPreviousItem = function (e) {
                    var t;
                    for (t = this._previousMapHead; null !== t; t = t._nextPrevious) e(t)
                }, e.prototype.forEachChangedItem = function (e) {
                    var t;
                    for (t = this._changesHead; null !== t; t = t._nextChanged) e(t)
                }, e.prototype.forEachAddedItem = function (e) {
                    var t;
                    for (t = this._additionsHead; null !== t; t = t._nextAdded) e(t)
                }, e.prototype.forEachRemovedItem = function (e) {
                    var t;
                    for (t = this._removalsHead; null !== t; t = t._nextRemoved) e(t)
                }, e.prototype.diff = function (e) {
                    if (e) {
                        if (!(e instanceof Map || Je(e))) throw new Error("Error trying to diff '" + Me(e) + "'. Only maps and objects are allowed")
                    } else e = new Map;
                    return this.check(e) ? this : null
                }, e.prototype.onDestroy = function () {}, e.prototype.check = function (e) {
                    var t = this;
                    this._reset();
                    var n = this._mapHead;
                    if (this._appendAfter = null, this._forEach(e, function (e, r) {
                            if (n && n.key === r) t._maybeAddToChanges(n, e), t._appendAfter = n, n = n._next;
                            else {
                                var i = t._getOrCreateRecordForKey(r, e);
                                n = t._insertBeforeOrAppend(n, i)
                            }
                        }), n) {
                        n._prev && (n._prev._next = null), this._removalsHead = n;
                        for (var r = n; null !== r; r = r._nextRemoved) r === this._mapHead && (this._mapHead = null), this._records.delete(r.key), r._nextRemoved = r._next, r.previousValue = r.currentValue, r.currentValue = null, r._prev = null, r._next = null
                    }
                    return this._changesTail && (this._changesTail._nextChanged = null), this._additionsTail && (this._additionsTail._nextAdded = null), this.isDirty
                }, e.prototype._insertBeforeOrAppend = function (e, t) {
                    if (e) {
                        var n = e._prev;
                        return t._next = e, t._prev = n, e._prev = t, n && (n._next = t), e === this._mapHead && (this._mapHead = t), this._appendAfter = e, e
                    }
                    return this._appendAfter ? (this._appendAfter._next = t, t._prev = this._appendAfter) : this._mapHead = t, this._appendAfter = t, null
                }, e.prototype._getOrCreateRecordForKey = function (e, t) {
                    if (this._records.has(e)) {
                        var n = this._records.get(e);
                        this._maybeAddToChanges(n, t);
                        var r = n._prev,
                            i = n._next;
                        return r && (r._next = i), i && (i._prev = r), n._next = null, n._prev = null, n
                    }
                    var l = new Gr(e);
                    return this._records.set(e, l), l.currentValue = t, this._addToAdditions(l), l
                }, e.prototype._reset = function () {
                    if (this.isDirty) {
                        var e = void 0;
                        for (this._previousMapHead = this._mapHead, e = this._previousMapHead; null !== e; e = e._next) e._nextPrevious = e._next;
                        for (e = this._changesHead; null !== e; e = e._nextChanged) e.previousValue = e.currentValue;
                        for (e = this._additionsHead; null != e; e = e._nextAdded) e.previousValue = e.currentValue;
                        this._changesHead = this._changesTail = null, this._additionsHead = this._additionsTail = null, this._removalsHead = null
                    }
                }, e.prototype._maybeAddToChanges = function (e, t) {
                    De(t, e.currentValue) || (e.previousValue = e.currentValue, e.currentValue = t, this._addToChanges(e))
                }, e.prototype._addToAdditions = function (e) {
                    null === this._additionsHead ? this._additionsHead = this._additionsTail = e : (this._additionsTail._nextAdded = e, this._additionsTail = e)
                }, e.prototype._addToChanges = function (e) {
                    null === this._changesHead ? this._changesHead = this._changesTail = e : (this._changesTail._nextChanged = e, this._changesTail = e)
                }, e.prototype._forEach = function (e, t) {
                    e instanceof Map ? e.forEach(t) : Object.keys(e).forEach(function (n) {
                        return t(e[n], n)
                    })
                }, e
            }(),
            Gr = function () {
                return function (e) {
                    this.key = e, this.previousValue = null, this.currentValue = null, this._nextPrevious = null, this._next = null, this._prev = null, this._nextAdded = null, this._nextRemoved = null, this._nextChanged = null
                }
            }(),
            Br = function () {
                function e(e) {
                    this.factories = e
                }
                return e.create = function (t, n) {
                    if (null != n) {
                        var r = n.factories.slice();
                        t = t.concat(r)
                    }
                    return new e(t)
                }, e.extend = function (t) {
                    return {
                        provide: e,
                        useFactory: function (n) {
                            if (!n) throw new Error("Cannot extend IterableDiffers without a parent injector");
                            return e.create(t, n)
                        },
                        deps: [[e, new Ve, new Ge]]
                    }
                }, e.prototype.find = function (e) {
                    var t, n = this.factories.find(function (t) {
                        return t.supports(e)
                    });
                    if (null != n) return n;
                    throw new Error("Cannot find a differ supporting object '" + e + "' of type '" + ((t = e).name || typeof t) + "'")
                }, e.ngInjectableDef = ve({
                    providedIn: "root",
                    factory: function () {
                        return new e([new Pr])
                    }
                }), e
            }(),
            Vr = function () {
                function e(e) {
                    this.factories = e
                }
                return e.create = function (t, n) {
                    if (n) {
                        var r = n.factories.slice();
                        t = t.concat(r)
                    }
                    return new e(t)
                }, e.extend = function (t) {
                    return {
                        provide: e,
                        useFactory: function (n) {
                            if (!n) throw new Error("Cannot extend KeyValueDiffers without a parent injector");
                            return e.create(t, n)
                        },
                        deps: [[e, new Ve, new Ge]]
                    }
                }, e.prototype.find = function (e) {
                    var t = this.factories.find(function (t) {
                        return t.supports(e)
                    });
                    if (t) return t;
                    throw new Error("Cannot find a differ supporting object '" + e + "'")
                }, e.ngInjectableDef = ve({
                    providedIn: "root",
                    factory: function () {
                        return new e([new Ur])
                    }
                }), e
            }(),
            Wr = [new Ur],
            jr = new Br([new Pr]),
            Yr = new Vr(Wr),
            zr = cr(null, "core", [{
                provide: kn,
                useValue: "unknown"
            }, {
                provide: hr,
                deps: [lt]
            }, {
                provide: or,
                deps: []
            }, {
                provide: xn,
                deps: []
            }]),
            Kr = new ye("LocaleId");

        function qr() {
            return jr
        }

        function Qr() {
            return Yr
        }

        function $r(e) {
            return e || "en-US"
        }
        var Zr = function () {
            return function (e) {}
        }();

        function Xr(e, t, n) {
            var r = e.state,
                i = 1792 & r;
            return i === t ? (e.state = -1793 & r | n, e.initIndex = -1, !0) : i === n
        }

        function Jr(e, t, n) {
            return (1792 & e.state) === t && e.initIndex <= n && (e.initIndex = n + 1, !0)
        }

        function ei(e, t) {
            return e.nodes[t]
        }

        function ti(e, t) {
            return e.nodes[t]
        }

        function ni(e, t) {
            return e.nodes[t]
        }

        function ri(e, t) {
            return e.nodes[t]
        }

        function ii(e, t) {
            return e.nodes[t]
        }
        var li = {
            setCurrentNode: void 0,
            createRootView: void 0,
            createEmbeddedView: void 0,
            createComponentView: void 0,
            createNgModuleRef: void 0,
            overrideProvider: void 0,
            overrideComponentView: void 0,
            clearOverrides: void 0,
            checkAndUpdateView: void 0,
            checkNoChangesView: void 0,
            destroyView: void 0,
            resolveDep: void 0,
            createDebugContext: void 0,
            handleEvent: void 0,
            updateDirectives: void 0,
            updateRenderer: void 0,
            dirtyParentQueries: void 0
        };

        function oi(e, t, n, r) {
            var i = "ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '" + t + "'. Current value: '" + n + "'.";
            return r && (i += " It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),
                function (e, t) {
                    var n = new Error(e);
                    return ui(n, t), n
                }(i, e)
        }

        function ui(e, t) {
            e[Sn] = t, e[On] = t.logError.bind(t)
        }

        function si(e) {
            return new Error("ViewDestroyedError: Attempt to use a destroyed view: " + e)
        }
        var ai = function () {},
            ci = new Map;

        function pi(e) {
            var t = ci.get(e);
            return t || (t = Me(e) + "_" + ci.size, ci.set(e, t)), t
        }

        function hi(e, t, n, r) {
            if ($e.isWrapped(r)) {
                r = $e.unwrap(r);
                var i = e.def.nodes[t].bindingIndex + n,
                    l = $e.unwrap(e.oldValues[i]);
                e.oldValues[i] = new $e(l)
            }
            return r
        }
        var di = "$$undefined",
            fi = "$$empty";

        function gi(e) {
            return {
                id: di,
                styles: e.styles,
                encapsulation: e.encapsulation,
                data: e.data
            }
        }
        var vi = 0;

        function mi(e, t, n, r) {
            return !(!(2 & e.state) && De(e.oldValues[t.bindingIndex + n], r))
        }

        function yi(e, t, n, r) {
            return !!mi(e, t, n, r) && (e.oldValues[t.bindingIndex + n] = r, !0)
        }

        function Si(e, t, n, r) {
            var i = e.oldValues[t.bindingIndex + n];
            if (1 & e.state || !Qe(i, r)) {
                var l = t.bindings[n].name;
                throw oi(li.createDebugContext(e, t.nodeIndex), l + ": " + i, l + ": " + r, 0 != (1 & e.state))
            }
        }

        function Ei(e) {
            for (var t = e; t;) 2 & t.def.flags && (t.state |= 8), t = t.viewContainerParent || t.parent
        }

        function Oi(e, t) {
            for (var n = e; n && n !== t;) n.state |= 64, n = n.viewContainerParent || n.parent
        }

        function bi(e, t, n, r) {
            try {
                return Ei(33554432 & e.def.nodes[t].flags ? ti(e, t).componentView : e), li.handleEvent(e, t, n, r)
            } catch (i) {
                e.root.errorHandler.handleError(i)
            }
        }

        function Ti(e) {
            return e.parent ? ti(e.parent, e.parentNodeDef.nodeIndex) : null
        }

        function Ri(e) {
            return e.parent ? e.parentNodeDef.parent : null
        }

        function Ci(e, t) {
            switch (201347067 & t.flags) {
                case 1:
                    return ti(e, t.nodeIndex).renderElement;
                case 2:
                    return ei(e, t.nodeIndex).renderText
            }
        }

        function _i(e) {
            return !!e.parent && !!(32768 & e.parentNodeDef.flags)
        }

        function Ii(e) {
            return !(!e.parent || 32768 & e.parentNodeDef.flags)
        }

        function Ai(e) {
            return 1 << e % 32
        }

        function wi(e) {
            var t = {},
                n = 0,
                r = {};
            return e && e.forEach(function (e) {
                var i = a(e, 2),
                    l = i[0],
                    o = i[1];
                "number" == typeof l ? (t[l] = o, n |= Ai(l)) : r[l] = o
            }), {
                matchedQueries: t,
                references: r,
                matchedQueryIds: n
            }
        }

        function Ni(e, t) {
            return e.map(function (e) {
                var n, r, i;
                return Array.isArray(e) ? (i = (n = a(e, 2))[0], r = n[1]) : (i = 0, r = e), r && ("function" == typeof r || "object" == typeof r) && t && Object.defineProperty(r, tt, {
                    value: t,
                    configurable: !0
                }), {
                    flags: i,
                    token: r,
                    tokenKey: pi(r)
                }
            })
        }

        function Pi(e, t, n) {
            var r = n.renderParent;
            return r ? 0 == (1 & r.flags) || 0 == (33554432 & r.flags) || r.element.componentRendererType && r.element.componentRendererType.encapsulation === Ue.Native ? ti(e, n.renderParent.nodeIndex).renderElement : void 0 : t
        }
        var Di = new WeakMap;

        function Mi(e) {
            var t = Di.get(e);
            return t || ((t = e(function () {
                return ai
            })).factory = e, Di.set(e, t)), t
        }

        function ki(e, t, n, r, i) {
            3 === t && (n = e.renderer.parentNode(Ci(e, e.def.lastRenderRootNode))), Li(e, t, 0, e.def.nodes.length - 1, n, r, i)
        }

        function Li(e, t, n, r, i, l, o) {
            for (var u = n; u <= r; u++) {
                var s = e.def.nodes[u];
                11 & s.flags && Fi(e, s, t, i, l, o), u += s.childCount
            }
        }

        function xi(e, t, n, r, i, l) {
            for (var o = e; o && !_i(o);) o = o.parent;
            for (var u = o.parent, s = Ri(o), a = s.nodeIndex + s.childCount, c = s.nodeIndex + 1; c <= a; c++) {
                var p = u.def.nodes[c];
                p.ngContentIndex === t && Fi(u, p, n, r, i, l), c += p.childCount
            }
            if (!u.parent) {
                var h = e.root.projectableNodes[t];
                if (h)
                    for (c = 0; c < h.length; c++) Ui(e, h[c], n, r, i, l)
            }
        }

        function Fi(e, t, n, r, i, l) {
            if (8 & t.flags) xi(e, t.ngContent.index, n, r, i, l);
            else {
                var o = Ci(e, t);
                if (3 === n && 33554432 & t.flags && 48 & t.bindingFlags ? (16 & t.bindingFlags && Ui(e, o, n, r, i, l), 32 & t.bindingFlags && Ui(ti(e, t.nodeIndex).componentView, o, n, r, i, l)) : Ui(e, o, n, r, i, l), 16777216 & t.flags)
                    for (var u = ti(e, t.nodeIndex).viewContainer._embeddedViews, s = 0; s < u.length; s++) ki(u[s], n, r, i, l);
                1 & t.flags && !t.element.name && Li(e, n, t.nodeIndex + 1, t.nodeIndex + t.childCount, r, i, l)
            }
        }

        function Ui(e, t, n, r, i, l) {
            var o = e.renderer;
            switch (n) {
                case 1:
                    o.appendChild(r, t);
                    break;
                case 2:
                    o.insertBefore(r, t, i);
                    break;
                case 3:
                    o.removeChild(r, t);
                    break;
                case 0:
                    l.push(t)
            }
        }
        var Hi = /^:([^:]+):(.+)$/;

        function Gi(e) {
            if (":" === e[0]) {
                var t = e.match(Hi);
                return [t[1], t[2]]
            }
            return ["", e]
        }

        function Bi(e) {
            for (var t = 0, n = 0; n < e.length; n++) t |= e[n].flags;
            return t
        }

        function Vi(e, t, n, r, i, l, o, u, s, a, c, p, h, d, f, g, v, m, y, S) {
            switch (e) {
                case 1:
                    return t + Wi(n) + r;
                case 2:
                    return t + Wi(n) + r + Wi(i) + l;
                case 3:
                    return t + Wi(n) + r + Wi(i) + l + Wi(o) + u;
                case 4:
                    return t + Wi(n) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a;
                case 5:
                    return t + Wi(n) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p;
                case 6:
                    return t + Wi(n) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p + Wi(h) + d;
                case 7:
                    return t + Wi(n) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p + Wi(h) + d + Wi(f) + g;
                case 8:
                    return t + Wi(n) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p + Wi(h) + d + Wi(f) + g + Wi(v) + m;
                case 9:
                    return t + Wi(n) + r + Wi(i) + l + Wi(o) + u + Wi(s) + a + Wi(c) + p + Wi(h) + d + Wi(f) + g + Wi(v) + m + Wi(y) + S;
                default:
                    throw new Error("Does not support more than 9 expressions")
            }
        }

        function Wi(e) {
            return null != e ? e.toString() : ""
        }

        function ji(e, t, n, r, i, l) {
            e |= 1;
            var o = wi(t);
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                flags: e,
                checkIndex: -1,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: o.matchedQueries,
                matchedQueryIds: o.matchedQueryIds,
                references: o.references,
                ngContentIndex: n,
                childCount: r,
                bindings: [],
                bindingFlags: 0,
                outputs: [],
                element: {
                    ns: null,
                    name: null,
                    attrs: null,
                    template: l ? Mi(l) : null,
                    componentProvider: null,
                    componentView: null,
                    componentRendererType: null,
                    publicProviders: null,
                    allProviders: null,
                    handleEvent: i || ai
                },
                provider: null,
                text: null,
                query: null,
                ngContent: null
            }
        }

        function Yi(e, t, n, r, i, l, o, u, s, c, p, h) {
            var d;
            void 0 === o && (o = []), c || (c = ai);
            var f = wi(n),
                g = f.matchedQueries,
                v = f.references,
                m = f.matchedQueryIds,
                y = null,
                S = null;
            l && (y = (d = a(Gi(l), 2))[0], S = d[1]), u = u || [];
            for (var E = new Array(u.length), O = 0; O < u.length; O++) {
                var b = a(u[O], 3),
                    T = b[0],
                    R = b[2],
                    C = a(Gi(b[1]), 2),
                    _ = C[0],
                    I = C[1],
                    A = void 0,
                    w = void 0;
                switch (15 & T) {
                    case 4:
                        w = R;
                        break;
                    case 1:
                    case 8:
                        A = R
                }
                E[O] = {
                    flags: T,
                    ns: _,
                    name: I,
                    nonMinifiedName: I,
                    securityContext: A,
                    suffix: w
                }
            }
            s = s || [];
            var N = new Array(s.length);
            for (O = 0; O < s.length; O++) {
                var P = a(s[O], 2);
                N[O] = {
                    type: 0,
                    target: P[0],
                    eventName: P[1],
                    propName: null
                }
            }
            var D = (o = o || []).map(function (e) {
                var t = a(e, 2),
                    n = t[1],
                    r = a(Gi(t[0]), 2);
                return [r[0], r[1], n]
            });
            return h = function (e) {
                if (e && e.id === di) {
                    var t = null != e.encapsulation && e.encapsulation !== Ue.None || e.styles.length || Object.keys(e.data).length;
                    e.id = t ? "c" + vi++ : fi
                }
                return e && e.id === fi && (e = null), e || null
            }(h), p && (t |= 33554432), {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: e,
                flags: t |= 1,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: g,
                matchedQueryIds: m,
                references: v,
                ngContentIndex: r,
                childCount: i,
                bindings: E,
                bindingFlags: Bi(E),
                outputs: N,
                element: {
                    ns: y,
                    name: S,
                    attrs: D,
                    template: null,
                    componentProvider: null,
                    componentView: p || null,
                    componentRendererType: h,
                    publicProviders: null,
                    allProviders: null,
                    handleEvent: c || ai
                },
                provider: null,
                text: null,
                query: null,
                ngContent: null
            }
        }

        function zi(e, t, n) {
            var r, i = n.element,
                l = e.root.selectorOrNode,
                o = e.renderer;
            if (e.parent || !l) {
                r = i.name ? o.createElement(i.name, i.ns) : o.createComment("");
                var u = Pi(e, t, n);
                u && o.appendChild(u, r)
            } else r = o.selectRootElement(l, !!i.componentRendererType && i.componentRendererType.encapsulation === Ue.ShadowDom);
            if (i.attrs)
                for (var s = 0; s < i.attrs.length; s++) {
                    var c = a(i.attrs[s], 3);
                    o.setAttribute(r, c[1], c[2], c[0])
                }
            return r
        }

        function Ki(e, t, n, r) {
            for (var i = 0; i < n.outputs.length; i++) {
                var l = n.outputs[i],
                    o = qi(e, n.nodeIndex, (p = l.eventName, (c = l.target) ? c + ":" + p : p)),
                    u = l.target,
                    s = e;
                "component" === l.target && (u = null, s = t);
                var a = s.renderer.listen(u || r, l.eventName, o);
                e.disposables[n.outputIndex + i] = a
            }
            var c, p
        }

        function qi(e, t, n) {
            return function (r) {
                return bi(e, t, n, r)
            }
        }

        function Qi(e, t, n, r) {
            if (!yi(e, t, n, r)) return !1;
            var i = t.bindings[n],
                l = ti(e, t.nodeIndex),
                o = l.renderElement,
                u = i.name;
            switch (15 & i.flags) {
                case 1:
                    ! function (e, t, n, r, i, l) {
                        var o = t.securityContext,
                            u = o ? e.root.sanitizer.sanitize(o, l) : l;
                        u = null != u ? u.toString() : null;
                        var s = e.renderer;
                        null != l ? s.setAttribute(n, i, u, r) : s.removeAttribute(n, i, r)
                    }(e, i, o, i.ns, u, r);
                    break;
                case 2:
                    ! function (e, t, n, r) {
                        var i = e.renderer;
                        r ? i.addClass(t, n) : i.removeClass(t, n)
                    }(e, o, u, r);
                    break;
                case 4:
                    ! function (e, t, n, r, i) {
                        var l = e.root.sanitizer.sanitize(Ft.STYLE, i);
                        if (null != l) {
                            l = l.toString();
                            var o = t.suffix;
                            null != o && (l += o)
                        } else l = null;
                        var u = e.renderer;
                        null != l ? u.setStyle(n, r, l) : u.removeStyle(n, r)
                    }(e, i, o, u, r);
                    break;
                case 8:
                    ! function (e, t, n, r, i) {
                        var l = t.securityContext,
                            o = l ? e.root.sanitizer.sanitize(l, i) : i;
                        e.renderer.setProperty(n, r, o)
                    }(33554432 & t.flags && 32 & i.flags ? l.componentView : e, i, o, u, r)
            }
            return !0
        }
        var $i = new Object,
            Zi = pi(lt),
            Xi = pi(rt),
            Ji = pi(At);

        function el(e, t, n, r) {
            return n = xe(n), {
                index: -1,
                deps: Ni(r, Me(t)),
                flags: e,
                token: t,
                value: n
            }
        }

        function tl(e, t, n) {
            void 0 === n && (n = lt.THROW_IF_NOT_FOUND);
            var r, i, l = Ye(e);
            try {
                if (8 & t.flags) return t.token;
                if (2 & t.flags && (n = null), 1 & t.flags) return e._parent.get(t.token, n);
                var o = t.tokenKey;
                switch (o) {
                    case Zi:
                    case Xi:
                    case Ji:
                        return e
                }
                var u, s = e._def.providersByKey[o];
                if (s) {
                    var a = e._providers[s.index];
                    return void 0 === a && (a = e._providers[s.index] = nl(e, s)), a === $i ? void 0 : a
                }
                if ((u = me(t.token)) && (r = e, null != (i = u).providedIn && (function (e, t) {
                        return e._def.modules.indexOf(i.providedIn) > -1
                    }(r) || "root" === i.providedIn && r._def.isRoot))) {
                    var c = e._providers.length;
                    return e._def.providersByKey[t.tokenKey] = {
                        flags: 5120,
                        value: u.factory,
                        deps: [],
                        index: c,
                        token: t.token
                    }, e._providers[c] = $i, e._providers[c] = nl(e, e._def.providersByKey[t.tokenKey])
                }
                return 4 & t.flags ? n : e._parent.get(t.token, n)
            } finally {
                Ye(l)
            }
        }

        function nl(e, t) {
            var n;
            switch (201347067 & t.flags) {
                case 512:
                    n = function (e, t, n) {
                        var r = n.length;
                        switch (r) {
                            case 0:
                                return new t;
                            case 1:
                                return new t(tl(e, n[0]));
                            case 2:
                                return new t(tl(e, n[0]), tl(e, n[1]));
                            case 3:
                                return new t(tl(e, n[0]), tl(e, n[1]), tl(e, n[2]));
                            default:
                                for (var i = new Array(r), l = 0; l < r; l++) i[l] = tl(e, n[l]);
                                return new(t.bind.apply(t, c([void 0], i)))
                        }
                    }(e, t.value, t.deps);
                    break;
                case 1024:
                    n = function (e, t, n) {
                        var r = n.length;
                        switch (r) {
                            case 0:
                                return t();
                            case 1:
                                return t(tl(e, n[0]));
                            case 2:
                                return t(tl(e, n[0]), tl(e, n[1]));
                            case 3:
                                return t(tl(e, n[0]), tl(e, n[1]), tl(e, n[2]));
                            default:
                                for (var i = Array(r), l = 0; l < r; l++) i[l] = tl(e, n[l]);
                                return t.apply(void 0, c(i))
                        }
                    }(e, t.value, t.deps);
                    break;
                case 2048:
                    n = tl(e, t.deps[0]);
                    break;
                case 256:
                    n = t.value
            }
            return n === $i || null == n || "object" != typeof n || 131072 & t.flags || "function" != typeof n.ngOnDestroy || (t.flags |= 131072), void 0 === n ? $i : n
        }

        function rl(e, t) {
            var n = e.viewContainer._embeddedViews;
            if ((null == t || t >= n.length) && (t = n.length - 1), t < 0) return null;
            var r = n[t];
            return r.viewContainerParent = null, ul(n, t), li.dirtyParentQueries(r), ll(r), r
        }

        function il(e, t, n) {
            var r = t ? Ci(t, t.def.lastRenderRootNode) : e.renderElement,
                i = n.renderer.parentNode(r),
                l = n.renderer.nextSibling(r);
            ki(n, 2, i, l, void 0)
        }

        function ll(e) {
            ki(e, 3, null, null, void 0)
        }

        function ol(e, t, n) {
            t >= e.length ? e.push(n) : e.splice(t, 0, n)
        }

        function ul(e, t) {
            t >= e.length - 1 ? e.pop() : e.splice(t, 1)
        }
        var sl = new Object;

        function al(e, t, n, r, i, l) {
            return new cl(e, t, n, r, i, l)
        }
        var cl = function (e) {
                function t(t, n, r, i, l, o) {
                    var u = e.call(this) || this;
                    return u.selector = t, u.componentType = n, u._inputs = i, u._outputs = l, u.ngContentSelectors = o, u.viewDefFactory = r, u
                }
                return i(t, e), Object.defineProperty(t.prototype, "inputs", {
                    get: function () {
                        var e = [],
                            t = this._inputs;
                        for (var n in t) e.push({
                            propName: n,
                            templateName: t[n]
                        });
                        return e
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "outputs", {
                    get: function () {
                        var e = [];
                        for (var t in this._outputs) e.push({
                            propName: t,
                            templateName: this._outputs[t]
                        });
                        return e
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.create = function (e, t, n, r) {
                    if (!r) throw new Error("ngModule should be provided");
                    var i = Mi(this.viewDefFactory),
                        l = i.nodes[0].element.componentProvider.nodeIndex,
                        o = li.createRootView(e, t || [], n, i, r, sl),
                        u = ni(o, l).instance;
                    return n && o.renderer.setAttribute(ti(o, 0).renderElement, "ng-version", Ht.full), new pl(o, new gl(o), u)
                }, t
            }(Ot),
            pl = function (e) {
                function t(t, n, r) {
                    var i = e.call(this) || this;
                    return i._view = t, i._viewRef = n, i._component = r, i._elDef = i._view.def.nodes[0], i.hostView = n, i.changeDetectorRef = n, i.instance = r, i
                }
                return i(t, e), Object.defineProperty(t.prototype, "location", {
                    get: function () {
                        return new Nt(ti(this._view, this._elDef.nodeIndex).renderElement)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "injector", {
                    get: function () {
                        return new Sl(this._view, this._elDef)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "componentType", {
                    get: function () {
                        return this._component.constructor
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.destroy = function () {
                    this._viewRef.destroy()
                }, t.prototype.onDestroy = function (e) {
                    this._viewRef.onDestroy(e)
                }, t
            }(Et);

        function hl(e, t, n) {
            return new dl(e, t, n)
        }
        var dl = function () {
            function e(e, t, n) {
                this._view = e, this._elDef = t, this._data = n, this._embeddedViews = []
            }
            return Object.defineProperty(e.prototype, "element", {
                get: function () {
                    return new Nt(this._data.renderElement)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "injector", {
                get: function () {
                    return new Sl(this._view, this._elDef)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "parentInjector", {
                get: function () {
                    for (var e = this._view, t = this._elDef.parent; !t && e;) t = Ri(e), e = e.parent;
                    return e ? new Sl(e, t) : new Sl(this._view, null)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.clear = function () {
                for (var e = this._embeddedViews.length - 1; e >= 0; e--) {
                    var t = rl(this._data, e);
                    li.destroyView(t)
                }
            }, e.prototype.get = function (e) {
                var t = this._embeddedViews[e];
                if (t) {
                    var n = new gl(t);
                    return n.attachToViewContainerRef(this), n
                }
                return null
            }, Object.defineProperty(e.prototype, "length", {
                get: function () {
                    return this._embeddedViews.length
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.createEmbeddedView = function (e, t, n) {
                var r = e.createEmbeddedView(t || {});
                return this.insert(r, n), r
            }, e.prototype.createComponent = function (e, t, n, r, i) {
                var l = n || this.parentInjector;
                i || e instanceof It || (i = l.get(At));
                var o = e.create(l, r, void 0, i);
                return this.insert(o.hostView, t), o
            }, e.prototype.insert = function (e, t) {
                if (e.destroyed) throw new Error("Cannot insert a destroyed View in a ViewContainer!");
                var n, r, i, l, o = e;
                return l = (n = this._data).viewContainer._embeddedViews, null == (r = t) && (r = l.length), (i = o._view).viewContainerParent = this._view, ol(l, r, i),
                    function (e, t) {
                        var n = Ti(t);
                        if (n && n !== e && !(16 & t.state)) {
                            t.state |= 16;
                            var r = n.template._projectedViews;
                            r || (r = n.template._projectedViews = []), r.push(t),
                                function (e, n) {
                                    if (!(4 & n.flags)) {
                                        t.parent.def.nodeFlags |= 4, n.flags |= 4;
                                        for (var r = n.parent; r;) r.childFlags |= 4, r = r.parent
                                    }
                                }(0, t.parentNodeDef)
                        }
                    }(n, i), li.dirtyParentQueries(i), il(n, r > 0 ? l[r - 1] : null, i), o.attachToViewContainerRef(this), e
            }, e.prototype.move = function (e, t) {
                if (e.destroyed) throw new Error("Cannot move a destroyed View in a ViewContainer!");
                var n, r, i, l, o, u = this._embeddedViews.indexOf(e._view);
                return i = t, o = (l = (n = this._data).viewContainer._embeddedViews)[r = u], ul(l, r), null == i && (i = l.length), ol(l, i, o), li.dirtyParentQueries(o), ll(o), il(n, i > 0 ? l[i - 1] : null, o), e
            }, e.prototype.indexOf = function (e) {
                return this._embeddedViews.indexOf(e._view)
            }, e.prototype.remove = function (e) {
                var t = rl(this._data, e);
                t && li.destroyView(t)
            }, e.prototype.detach = function (e) {
                var t = rl(this._data, e);
                return t ? new gl(t) : null
            }, e
        }();

        function fl(e) {
            return new gl(e)
        }
        var gl = function () {
            function e(e) {
                this._view = e, this._viewContainerRef = null, this._appRef = null
            }
            return Object.defineProperty(e.prototype, "rootNodes", {
                get: function () {
                    return ki(this._view, 0, void 0, void 0, e = []), e;
                    var e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "context", {
                get: function () {
                    return this._view.context
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "destroyed", {
                get: function () {
                    return 0 != (128 & this._view.state)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.markForCheck = function () {
                Ei(this._view)
            }, e.prototype.detach = function () {
                this._view.state &= -5
            }, e.prototype.detectChanges = function () {
                var e = this._view.root.rendererFactory;
                e.begin && e.begin();
                try {
                    li.checkAndUpdateView(this._view)
                } finally {
                    e.end && e.end()
                }
            }, e.prototype.checkNoChanges = function () {
                li.checkNoChangesView(this._view)
            }, e.prototype.reattach = function () {
                this._view.state |= 4
            }, e.prototype.onDestroy = function (e) {
                this._view.disposables || (this._view.disposables = []), this._view.disposables.push(e)
            }, e.prototype.destroy = function () {
                this._appRef ? this._appRef.detachView(this) : this._viewContainerRef && this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)), li.destroyView(this._view)
            }, e.prototype.detachFromAppRef = function () {
                this._appRef = null, ll(this._view), li.dirtyParentQueries(this._view)
            }, e.prototype.attachToAppRef = function (e) {
                if (this._viewContainerRef) throw new Error("This view is already attached to a ViewContainer!");
                this._appRef = e
            }, e.prototype.attachToViewContainerRef = function (e) {
                if (this._appRef) throw new Error("This view is already attached directly to the ApplicationRef!");
                this._viewContainerRef = e
            }, e
        }();

        function vl(e, t) {
            return new ml(e, t)
        }
        var ml = function (e) {
            function t(t, n) {
                var r = e.call(this) || this;
                return r._parentView = t, r._def = n, r
            }
            return i(t, e), t.prototype.createEmbeddedView = function (e) {
                return new gl(li.createEmbeddedView(this._parentView, this._def, this._def.element.template, e))
            }, Object.defineProperty(t.prototype, "elementRef", {
                get: function () {
                    return new Nt(ti(this._parentView, this._def.nodeIndex).renderElement)
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(hn);

        function yl(e, t) {
            return new Sl(e, t)
        }
        var Sl = function () {
            function e(e, t) {
                this.view = e, this.elDef = t
            }
            return e.prototype.get = function (e, t) {
                return void 0 === t && (t = lt.THROW_IF_NOT_FOUND), li.resolveDep(this.view, this.elDef, !!this.elDef && 0 != (33554432 & this.elDef.flags), {
                    flags: 0,
                    token: e,
                    tokenKey: pi(e)
                }, t)
            }, e
        }();

        function El(e, t) {
            var n = e.def.nodes[t];
            if (1 & n.flags) {
                var r = ti(e, n.nodeIndex);
                return n.element.template ? r.template : r.renderElement
            }
            if (2 & n.flags) return ei(e, n.nodeIndex).renderText;
            if (20240 & n.flags) return ni(e, n.nodeIndex).instance;
            throw new Error("Illegal state: read nodeValue for node index " + t)
        }

        function Ol(e) {
            return new bl(e.renderer)
        }
        var bl = function () {
            function e(e) {
                this.delegate = e
            }
            return e.prototype.selectRootElement = function (e) {
                return this.delegate.selectRootElement(e)
            }, e.prototype.createElement = function (e, t) {
                var n = a(Gi(t), 2),
                    r = this.delegate.createElement(n[1], n[0]);
                return e && this.delegate.appendChild(e, r), r
            }, e.prototype.createViewRoot = function (e) {
                return e
            }, e.prototype.createTemplateAnchor = function (e) {
                var t = this.delegate.createComment("");
                return e && this.delegate.appendChild(e, t), t
            }, e.prototype.createText = function (e, t) {
                var n = this.delegate.createText(t);
                return e && this.delegate.appendChild(e, n), n
            }, e.prototype.projectNodes = function (e, t) {
                for (var n = 0; n < t.length; n++) this.delegate.appendChild(e, t[n])
            }, e.prototype.attachViewAfter = function (e, t) {
                for (var n = this.delegate.parentNode(e), r = this.delegate.nextSibling(e), i = 0; i < t.length; i++) this.delegate.insertBefore(n, t[i], r)
            }, e.prototype.detachView = function (e) {
                for (var t = 0; t < e.length; t++) {
                    var n = e[t],
                        r = this.delegate.parentNode(n);
                    this.delegate.removeChild(r, n)
                }
            }, e.prototype.destroyView = function (e, t) {
                for (var n = 0; n < t.length; n++) this.delegate.destroyNode(t[n])
            }, e.prototype.listen = function (e, t, n) {
                return this.delegate.listen(e, t, n)
            }, e.prototype.listenGlobal = function (e, t, n) {
                return this.delegate.listen(e, t, n)
            }, e.prototype.setElementProperty = function (e, t, n) {
                this.delegate.setProperty(e, t, n)
            }, e.prototype.setElementAttribute = function (e, t, n) {
                var r = a(Gi(t), 2),
                    i = r[0],
                    l = r[1];
                null != n ? this.delegate.setAttribute(e, l, n, i) : this.delegate.removeAttribute(e, l, i)
            }, e.prototype.setBindingDebugInfo = function (e, t, n) {}, e.prototype.setElementClass = function (e, t, n) {
                n ? this.delegate.addClass(e, t) : this.delegate.removeClass(e, t)
            }, e.prototype.setElementStyle = function (e, t, n) {
                null != n ? this.delegate.setStyle(e, t, n) : this.delegate.removeStyle(e, t)
            }, e.prototype.invokeElementMethod = function (e, t, n) {
                e[t].apply(e, n)
            }, e.prototype.setText = function (e, t) {
                this.delegate.setValue(e, t)
            }, e.prototype.animate = function () {
                throw new Error("Renderer.animate is no longer supported!")
            }, e
        }();

        function Tl(e, t, n, r) {
            return new Rl(e, t, n, r)
        }
        var Rl = function () {
                function e(e, t, n, r) {
                    this._moduleType = e, this._parent = t, this._bootstrapComponents = n, this._def = r, this._destroyListeners = [], this._destroyed = !1, this.injector = this,
                        function (e) {
                            for (var t = e._def, n = e._providers = new Array(t.providers.length), r = 0; r < t.providers.length; r++) {
                                var i = t.providers[r];
                                4096 & i.flags || void 0 === n[r] && (n[r] = nl(e, i))
                            }
                        }(this)
                }
                return e.prototype.get = function (e, t, n) {
                    void 0 === t && (t = lt.THROW_IF_NOT_FOUND), void 0 === n && (n = We.Default);
                    var r = 0;
                    return n & We.SkipSelf ? r |= 1 : n & We.Self && (r |= 4), tl(this, {
                        token: e,
                        tokenKey: pi(e),
                        flags: r
                    }, t)
                }, Object.defineProperty(e.prototype, "instance", {
                    get: function () {
                        return this.get(this._moduleType)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "componentFactoryResolver", {
                    get: function () {
                        return this.get(Ct)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.destroy = function () {
                    if (this._destroyed) throw new Error("The ng module " + Me(this.instance.constructor) + " has already been destroyed.");
                    this._destroyed = !0,
                        function (e, t) {
                            for (var n = e._def, r = new Set, i = 0; i < n.providers.length; i++)
                                if (131072 & n.providers[i].flags) {
                                    var l = e._providers[i];
                                    if (l && l !== $i) {
                                        var o = l.ngOnDestroy;
                                        "function" != typeof o || r.has(l) || (o.apply(l), r.add(l))
                                    }
                                }
                        }(this), this._destroyListeners.forEach(function (e) {
                            return e()
                        })
                }, e.prototype.onDestroy = function (e) {
                    this._destroyListeners.push(e)
                }, e
            }(),
            Cl = pi(Dt),
            _l = pi(Lt),
            Il = pi(Nt),
            Al = pi(Or),
            wl = pi(hn),
            Nl = pi(Tr),
            Pl = pi(lt),
            Dl = pi(rt);

        function Ml(e, t, n, r, i, l, o, u) {
            var s = [];
            if (o)
                for (var c in o) {
                    var p = a(o[c], 2);
                    s[p[0]] = {
                        flags: 8,
                        name: c,
                        nonMinifiedName: p[1],
                        ns: null,
                        securityContext: null,
                        suffix: null
                    }
                }
            var h = [];
            if (u)
                for (var d in u) h.push({
                    type: 1,
                    propName: d,
                    target: null,
                    eventName: u[d]
                });
            return xl(e, t |= 16384, n, r, i, i, l, s, h)
        }

        function kl(e, t, n) {
            return xl(-1, e |= 16, null, 0, t, t, n)
        }

        function Ll(e, t, n, r, i) {
            return xl(-1, e, t, 0, n, r, i)
        }

        function xl(e, t, n, r, i, l, o, u, s) {
            var a = wi(n),
                c = a.matchedQueries,
                p = a.references,
                h = a.matchedQueryIds;
            s || (s = []), u || (u = []), l = xe(l);
            var d = Ni(o, Me(i));
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: e,
                flags: t,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: c,
                matchedQueryIds: h,
                references: p,
                ngContentIndex: -1,
                childCount: r,
                bindings: u,
                bindingFlags: Bi(u),
                outputs: s,
                element: null,
                provider: {
                    token: i,
                    value: l,
                    deps: d
                },
                text: null,
                query: null,
                ngContent: null
            }
        }

        function Fl(e, t) {
            return Bl(e, t)
        }

        function Ul(e, t) {
            for (var n = e; n.parent && !_i(n);) n = n.parent;
            return Vl(n.parent, Ri(n), !0, t.provider.value, t.provider.deps)
        }

        function Hl(e, t) {
            var n = Vl(e, t.parent, (32768 & t.flags) > 0, t.provider.value, t.provider.deps);
            if (t.outputs.length)
                for (var r = 0; r < t.outputs.length; r++) {
                    var i = t.outputs[r],
                        l = n[i.propName];
                    if (!In(l)) throw new Error("@Output " + i.propName + " not initialized in '" + n.constructor.name + "'.");
                    var o = l.subscribe(Gl(e, t.parent.nodeIndex, i.eventName));
                    e.disposables[t.outputIndex + r] = o.unsubscribe.bind(o)
                }
            return n
        }

        function Gl(e, t, n) {
            return function (r) {
                return bi(e, t, n, r)
            }
        }

        function Bl(e, t) {
            var n = (8192 & t.flags) > 0,
                r = t.provider;
            switch (201347067 & t.flags) {
                case 512:
                    return Vl(e, t.parent, n, r.value, r.deps);
                case 1024:
                    return function (e, t, n, r, i) {
                        var l = i.length;
                        switch (l) {
                            case 0:
                                return r();
                            case 1:
                                return r(jl(e, t, n, i[0]));
                            case 2:
                                return r(jl(e, t, n, i[0]), jl(e, t, n, i[1]));
                            case 3:
                                return r(jl(e, t, n, i[0]), jl(e, t, n, i[1]), jl(e, t, n, i[2]));
                            default:
                                for (var o = Array(l), u = 0; u < l; u++) o[u] = jl(e, t, n, i[u]);
                                return r.apply(void 0, c(o))
                        }
                    }(e, t.parent, n, r.value, r.deps);
                case 2048:
                    return jl(e, t.parent, n, r.deps[0]);
                case 256:
                    return r.value
            }
        }

        function Vl(e, t, n, r, i) {
            var l = i.length;
            switch (l) {
                case 0:
                    return new r;
                case 1:
                    return new r(jl(e, t, n, i[0]));
                case 2:
                    return new r(jl(e, t, n, i[0]), jl(e, t, n, i[1]));
                case 3:
                    return new r(jl(e, t, n, i[0]), jl(e, t, n, i[1]), jl(e, t, n, i[2]));
                default:
                    for (var o = new Array(l), u = 0; u < l; u++) o[u] = jl(e, t, n, i[u]);
                    return new(r.bind.apply(r, c([void 0], o)))
            }
        }
        var Wl = {};

        function jl(e, t, n, r, i) {
            if (void 0 === i && (i = lt.THROW_IF_NOT_FOUND), 8 & r.flags) return r.token;
            var l = e;
            2 & r.flags && (i = null);
            var o = r.tokenKey;
            o === Nl && (n = !(!t || !t.element.componentView)), t && 1 & r.flags && (n = !1, t = t.parent);
            for (var u = e; u;) {
                if (t) switch (o) {
                    case Cl:
                        return Ol(Yl(u, t, n));
                    case _l:
                        return Yl(u, t, n).renderer;
                    case Il:
                        return new Nt(ti(u, t.nodeIndex).renderElement);
                    case Al:
                        return ti(u, t.nodeIndex).viewContainer;
                    case wl:
                        if (t.element.template) return ti(u, t.nodeIndex).template;
                        break;
                    case Nl:
                        return fl(Yl(u, t, n));
                    case Pl:
                    case Dl:
                        return yl(u, t);
                    default:
                        var s = (n ? t.element.allProviders : t.element.publicProviders)[o];
                        if (s) {
                            var a = ni(u, s.nodeIndex);
                            return a || (a = {
                                instance: Bl(u, s)
                            }, u.nodes[s.nodeIndex] = a), a.instance
                        }
                }
                n = _i(u), t = Ri(u), u = u.parent, 4 & r.flags && (u = null)
            }
            var c = l.root.injector.get(r.token, Wl);
            return c !== Wl || i === Wl ? c : l.root.ngModule.injector.get(r.token, i)
        }

        function Yl(e, t, n) {
            var r;
            if (n) r = ti(e, t.nodeIndex).componentView;
            else
                for (r = e; r.parent && !_i(r);) r = r.parent;
            return r
        }

        function zl(e, t, n, r, i, l) {
            if (32768 & n.flags) {
                var o = ti(e, n.parent.nodeIndex).componentView;
                2 & o.def.flags && (o.state |= 8)
            }
            if (t.instance[n.bindings[r].name] = i, 524288 & n.flags) {
                l = l || {};
                var u = $e.unwrap(e.oldValues[n.bindingIndex + r]);
                l[n.bindings[r].nonMinifiedName] = new Ze(u, i, 0 != (2 & e.state))
            }
            return e.oldValues[n.bindingIndex + r] = i, l
        }

        function Kl(e, t) {
            if (e.def.nodeFlags & t)
                for (var n = e.def.nodes, r = 0, i = 0; i < n.length; i++) {
                    var l = n[i],
                        o = l.parent;
                    for (!o && l.flags & t && Ql(e, i, l.flags & t, r++), 0 == (l.childFlags & t) && (i += l.childCount); o && 1 & o.flags && i === o.nodeIndex + o.childCount;) o.directChildFlags & t && (r = ql(e, o, t, r)), o = o.parent
                }
        }

        function ql(e, t, n, r) {
            for (var i = t.nodeIndex + 1; i <= t.nodeIndex + t.childCount; i++) {
                var l = e.def.nodes[i];
                l.flags & n && Ql(e, i, l.flags & n, r++), i += l.childCount
            }
            return r
        }

        function Ql(e, t, n, r) {
            var i = ni(e, t);
            if (i) {
                var l = i.instance;
                l && (li.setCurrentNode(e, t), 1048576 & n && Jr(e, 512, r) && l.ngAfterContentInit(), 2097152 & n && l.ngAfterContentChecked(), 4194304 & n && Jr(e, 768, r) && l.ngAfterViewInit(), 8388608 & n && l.ngAfterViewChecked(), 131072 & n && l.ngOnDestroy())
            }
        }

        function $l(e, t, n) {
            var r = [];
            for (var i in n) r.push({
                propName: i,
                bindingType: n[i]
            });
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: -1,
                flags: e,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                ngContentIndex: -1,
                matchedQueries: {},
                matchedQueryIds: 0,
                references: {},
                childCount: 0,
                bindings: [],
                bindingFlags: 0,
                outputs: [],
                element: null,
                provider: null,
                text: null,
                query: {
                    id: t,
                    filterId: Ai(t),
                    bindings: r
                },
                ngContent: null
            }
        }

        function Zl(e) {
            for (var t = e.def.nodeMatchedQueries; e.parent && Ii(e);) {
                var n = e.parentNodeDef;
                e = e.parent;
                for (var r = n.nodeIndex + n.childCount, i = 0; i <= r; i++) 67108864 & (l = e.def.nodes[i]).flags && 536870912 & l.flags && (l.query.filterId & t) === l.query.filterId && ii(e, i).setDirty(), !(1 & l.flags && i + l.childCount < n.nodeIndex) && 67108864 & l.childFlags && 536870912 & l.childFlags || (i += l.childCount)
            }
            if (134217728 & e.def.nodeFlags)
                for (i = 0; i < e.def.nodes.length; i++) {
                    var l;
                    134217728 & (l = e.def.nodes[i]).flags && 536870912 & l.flags && ii(e, i).setDirty(), i += l.childCount
                }
        }

        function Xl(e, t) {
            var n = ii(e, t.nodeIndex);
            if (n.dirty) {
                var r, i = void 0;
                if (67108864 & t.flags) {
                    var l = t.parent.parent;
                    i = Jl(e, l.nodeIndex, l.nodeIndex + l.childCount, t.query, []), r = ni(e, t.parent.nodeIndex).instance
                } else 134217728 & t.flags && (i = Jl(e, 0, e.def.nodes.length - 1, t.query, []), r = e.component);
                n.reset(i);
                for (var o = t.query.bindings, u = !1, s = 0; s < o.length; s++) {
                    var a = o[s],
                        c = void 0;
                    switch (a.bindingType) {
                        case 0:
                            c = n.first;
                            break;
                        case 1:
                            c = n, u = !0
                    }
                    r[a.propName] = c
                }
                u && n.notifyOnChanges()
            }
        }

        function Jl(e, t, n, r, i) {
            for (var l = t; l <= n; l++) {
                var o = e.def.nodes[l],
                    u = o.matchedQueries[r.id];
                if (null != u && i.push(eo(e, o, u)), 1 & o.flags && o.element.template && (o.element.template.nodeMatchedQueries & r.filterId) === r.filterId) {
                    var s = ti(e, l);
                    if ((o.childMatchedQueries & r.filterId) === r.filterId && (Jl(e, l + 1, l + o.childCount, r, i), l += o.childCount), 16777216 & o.flags)
                        for (var a = s.viewContainer._embeddedViews, c = 0; c < a.length; c++) {
                            var p = a[c],
                                h = Ti(p);
                            h && h === s && Jl(p, 0, p.def.nodes.length - 1, r, i)
                        }
                    var d = s.template._projectedViews;
                    if (d)
                        for (c = 0; c < d.length; c++) {
                            var f = d[c];
                            Jl(f, 0, f.def.nodes.length - 1, r, i)
                        }
                }(o.childMatchedQueries & r.filterId) !== r.filterId && (l += o.childCount)
            }
            return i
        }

        function eo(e, t, n) {
            if (null != n) switch (n) {
                case 1:
                    return ti(e, t.nodeIndex).renderElement;
                case 0:
                    return new Nt(ti(e, t.nodeIndex).renderElement);
                case 2:
                    return ti(e, t.nodeIndex).template;
                case 3:
                    return ti(e, t.nodeIndex).viewContainer;
                case 4:
                    return ni(e, t.nodeIndex).instance
            }
        }

        function to(e, t, n) {
            var r = Pi(e, t, n);
            r && xi(e, n.ngContent.index, 1, r, null, void 0)
        }

        function no(e, t) {
            return io(128, e, new Array(t + 1))
        }

        function ro(e, t) {
            for (var n = Object.keys(t), r = n.length, i = new Array(r), l = 0; l < r; l++) {
                var o = n[l];
                i[t[o]] = o
            }
            return io(64, e, i)
        }

        function io(e, t, n) {
            for (var r = new Array(n.length), i = 0; i < n.length; i++) {
                var l = n[i];
                r[i] = {
                    flags: 8,
                    name: l,
                    ns: null,
                    nonMinifiedName: l,
                    securityContext: null,
                    suffix: null
                }
            }
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: t,
                flags: e,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: {},
                matchedQueryIds: 0,
                references: {},
                ngContentIndex: -1,
                childCount: 0,
                bindings: r,
                bindingFlags: Bi(r),
                outputs: [],
                element: null,
                provider: null,
                text: null,
                query: null,
                ngContent: null
            }
        }

        function lo(e, t, n) {
            for (var r = new Array(n.length - 1), i = 1; i < n.length; i++) r[i - 1] = {
                flags: 8,
                name: null,
                ns: null,
                nonMinifiedName: null,
                securityContext: null,
                suffix: n[i]
            };
            return {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: e,
                flags: 2,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: {},
                matchedQueryIds: 0,
                references: {},
                ngContentIndex: t,
                childCount: 0,
                bindings: r,
                bindingFlags: 8,
                outputs: [],
                element: null,
                provider: null,
                text: {
                    prefix: n[0]
                },
                query: null,
                ngContent: null
            }
        }

        function oo(e, t, n) {
            var r, i = e.renderer;
            r = i.createText(n.text.prefix);
            var l = Pi(e, t, n);
            return l && i.appendChild(l, r), {
                renderText: r
            }
        }

        function uo(e, t) {
            return (null != e ? e.toString() : "") + t.suffix
        }

        function so(e, t, n, r) {
            for (var i = 0, l = 0, o = 0, u = 0, s = 0, a = null, c = null, p = !1, h = !1, d = null, f = 0; f < t.length; f++) {
                var g = t[f];
                if (g.nodeIndex = f, g.parent = a, g.bindingIndex = i, g.outputIndex = l, g.renderParent = c, o |= g.flags, s |= g.matchedQueryIds, g.element) {
                    var v = g.element;
                    v.publicProviders = a ? a.element.publicProviders : Object.create(null), v.allProviders = v.publicProviders, p = !1, h = !1, g.element.template && (s |= g.element.template.nodeMatchedQueries)
                }
                if (co(a, g, t.length), i += g.bindings.length, l += g.outputs.length, !c && 3 & g.flags && (d = g), 20224 & g.flags) {
                    p || (p = !0, a.element.publicProviders = Object.create(a.element.publicProviders), a.element.allProviders = a.element.publicProviders);
                    var m = 0 != (32768 & g.flags);
                    0 == (8192 & g.flags) || m ? a.element.publicProviders[pi(g.provider.token)] = g : (h || (h = !0, a.element.allProviders = Object.create(a.element.publicProviders)), a.element.allProviders[pi(g.provider.token)] = g), m && (a.element.componentProvider = g)
                }
                if (a ? (a.childFlags |= g.flags, a.directChildFlags |= g.flags, a.childMatchedQueries |= g.matchedQueryIds, g.element && g.element.template && (a.childMatchedQueries |= g.element.template.nodeMatchedQueries)) : u |= g.flags, g.childCount > 0) a = g, ao(g) || (c = g);
                else
                    for (; a && f === a.nodeIndex + a.childCount;) {
                        var y = a.parent;
                        y && (y.childFlags |= a.childFlags, y.childMatchedQueries |= a.childMatchedQueries), c = (a = y) && ao(a) ? a.renderParent : a
                    }
            }
            return {
                factory: null,
                nodeFlags: o,
                rootNodeFlags: u,
                nodeMatchedQueries: s,
                flags: e,
                nodes: t,
                updateDirectives: n || ai,
                updateRenderer: r || ai,
                handleEvent: function (e, n, r, i) {
                    return t[n].element.handleEvent(e, r, i)
                },
                bindingCount: i,
                outputCount: l,
                lastRenderRootNode: d
            }
        }

        function ao(e) {
            return 0 != (1 & e.flags) && null === e.element.name
        }

        function co(e, t, n) {
            var r = t.element && t.element.template;
            if (r) {
                if (!r.lastRenderRootNode) throw new Error("Illegal State: Embedded templates without nodes are not allowed!");
                if (r.lastRenderRootNode && 16777216 & r.lastRenderRootNode.flags) throw new Error("Illegal State: Last root node of a template can't have embedded views, at index " + t.nodeIndex + "!")
            }
            if (20224 & t.flags && 0 == (1 & (e ? e.flags : 0))) throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index " + t.nodeIndex + "!");
            if (t.query) {
                if (67108864 & t.flags && (!e || 0 == (16384 & e.flags))) throw new Error("Illegal State: Content Query nodes need to be children of directives, at index " + t.nodeIndex + "!");
                if (134217728 & t.flags && e) throw new Error("Illegal State: View Query nodes have to be top level nodes, at index " + t.nodeIndex + "!")
            }
            if (t.childCount) {
                var i = e ? e.nodeIndex + e.childCount : n - 1;
                if (t.nodeIndex <= i && t.nodeIndex + t.childCount > i) throw new Error("Illegal State: childCount of node leads outside of parent, at index " + t.nodeIndex + "!")
            }
        }

        function po(e, t, n, r) {
            var i = go(e.root, e.renderer, e, t, n);
            return vo(i, e.component, r), mo(i), i
        }

        function ho(e, t, n) {
            var r = go(e, e.renderer, null, null, t);
            return vo(r, n, n), mo(r), r
        }

        function fo(e, t, n, r) {
            var i, l = t.element.componentRendererType;
            return i = l ? e.root.rendererFactory.createRenderer(r, l) : e.root.renderer, go(e.root, i, e, t.element.componentProvider, n)
        }

        function go(e, t, n, r, i) {
            var l = new Array(i.nodes.length),
                o = i.outputCount ? new Array(i.outputCount) : null;
            return {
                def: i,
                parent: n,
                viewContainerParent: null,
                parentNodeDef: r,
                context: null,
                component: null,
                nodes: l,
                state: 13,
                root: e,
                renderer: t,
                oldValues: new Array(i.bindingCount),
                disposables: o,
                initIndex: -1
            }
        }

        function vo(e, t, n) {
            e.component = t, e.context = n
        }

        function mo(e) {
            var t;
            _i(e) && (t = ti(e.parent, e.parentNodeDef.parent.nodeIndex).renderElement);
            for (var n = e.def, r = e.nodes, i = 0; i < n.nodes.length; i++) {
                var l = n.nodes[i];
                li.setCurrentNode(e, i);
                var o = void 0;
                switch (201347067 & l.flags) {
                    case 1:
                        var u = zi(e, t, l),
                            s = void 0;
                        if (33554432 & l.flags) {
                            var a = Mi(l.element.componentView);
                            s = li.createComponentView(e, l, a, u)
                        }
                        Ki(e, s, l, u), o = {
                            renderElement: u,
                            componentView: s,
                            viewContainer: null,
                            template: l.element.template ? vl(e, l) : void 0
                        }, 16777216 & l.flags && (o.viewContainer = hl(e, l, o));
                        break;
                    case 2:
                        o = oo(e, t, l);
                        break;
                    case 512:
                    case 1024:
                    case 2048:
                    case 256:
                        (o = r[i]) || 4096 & l.flags || (o = {
                            instance: Fl(e, l)
                        });
                        break;
                    case 16:
                        o = {
                            instance: Ul(e, l)
                        };
                        break;
                    case 16384:
                        (o = r[i]) || (o = {
                            instance: Hl(e, l)
                        }), 32768 & l.flags && vo(ti(e, l.parent.nodeIndex).componentView, o.instance, o.instance);
                        break;
                    case 32:
                    case 64:
                    case 128:
                        o = {
                            value: void 0
                        };
                        break;
                    case 67108864:
                    case 134217728:
                        o = new vr;
                        break;
                    case 8:
                        to(e, t, l), o = void 0
                }
                r[i] = o
            }
            _o(e, Co.CreateViewNodes), No(e, 201326592, 268435456, 0)
        }

        function yo(e) {
            Oo(e), li.updateDirectives(e, 1), Io(e, Co.CheckNoChanges), li.updateRenderer(e, 1), _o(e, Co.CheckNoChanges), e.state &= -97
        }

        function So(e) {
            1 & e.state ? (e.state &= -2, e.state |= 2) : e.state &= -3, Xr(e, 0, 256), Oo(e), li.updateDirectives(e, 0), Io(e, Co.CheckAndUpdate), No(e, 67108864, 536870912, 0);
            var t = Xr(e, 256, 512);
            Kl(e, 2097152 | (t ? 1048576 : 0)), li.updateRenderer(e, 0), _o(e, Co.CheckAndUpdate), No(e, 134217728, 536870912, 0), Kl(e, 8388608 | ((t = Xr(e, 512, 768)) ? 4194304 : 0)), 2 & e.def.flags && (e.state &= -9), e.state &= -97, Xr(e, 768, 1024)
        }

        function Eo(e, t, n, r, i, l, o, u, s, a, p, h, d) {
            return 0 === n ? function (e, t, n, r, i, l, o, u, s, a, c, p) {
                switch (201347067 & t.flags) {
                    case 1:
                        return function (e, t, n, r, i, l, o, u, s, a, c, p) {
                            var h = t.bindings.length,
                                d = !1;
                            return h > 0 && Qi(e, t, 0, n) && (d = !0), h > 1 && Qi(e, t, 1, r) && (d = !0), h > 2 && Qi(e, t, 2, i) && (d = !0), h > 3 && Qi(e, t, 3, l) && (d = !0), h > 4 && Qi(e, t, 4, o) && (d = !0), h > 5 && Qi(e, t, 5, u) && (d = !0), h > 6 && Qi(e, t, 6, s) && (d = !0), h > 7 && Qi(e, t, 7, a) && (d = !0), h > 8 && Qi(e, t, 8, c) && (d = !0), h > 9 && Qi(e, t, 9, p) && (d = !0), d
                        }(e, t, n, r, i, l, o, u, s, a, c, p);
                    case 2:
                        return function (e, t, n, r, i, l, o, u, s, a, c, p) {
                            var h = !1,
                                d = t.bindings,
                                f = d.length;
                            if (f > 0 && yi(e, t, 0, n) && (h = !0), f > 1 && yi(e, t, 1, r) && (h = !0), f > 2 && yi(e, t, 2, i) && (h = !0), f > 3 && yi(e, t, 3, l) && (h = !0), f > 4 && yi(e, t, 4, o) && (h = !0), f > 5 && yi(e, t, 5, u) && (h = !0), f > 6 && yi(e, t, 6, s) && (h = !0), f > 7 && yi(e, t, 7, a) && (h = !0), f > 8 && yi(e, t, 8, c) && (h = !0), f > 9 && yi(e, t, 9, p) && (h = !0), h) {
                                var g = t.text.prefix;
                                f > 0 && (g += uo(n, d[0])), f > 1 && (g += uo(r, d[1])), f > 2 && (g += uo(i, d[2])), f > 3 && (g += uo(l, d[3])), f > 4 && (g += uo(o, d[4])), f > 5 && (g += uo(u, d[5])), f > 6 && (g += uo(s, d[6])), f > 7 && (g += uo(a, d[7])), f > 8 && (g += uo(c, d[8])), f > 9 && (g += uo(p, d[9]));
                                var v = ei(e, t.nodeIndex).renderText;
                                e.renderer.setValue(v, g)
                            }
                            return h
                        }(e, t, n, r, i, l, o, u, s, a, c, p);
                    case 16384:
                        return function (e, t, n, r, i, l, o, u, s, a, c, p) {
                            var h = ni(e, t.nodeIndex),
                                d = h.instance,
                                f = !1,
                                g = void 0,
                                v = t.bindings.length;
                            return v > 0 && mi(e, t, 0, n) && (f = !0, g = zl(e, h, t, 0, n, g)), v > 1 && mi(e, t, 1, r) && (f = !0, g = zl(e, h, t, 1, r, g)), v > 2 && mi(e, t, 2, i) && (f = !0, g = zl(e, h, t, 2, i, g)), v > 3 && mi(e, t, 3, l) && (f = !0, g = zl(e, h, t, 3, l, g)), v > 4 && mi(e, t, 4, o) && (f = !0, g = zl(e, h, t, 4, o, g)), v > 5 && mi(e, t, 5, u) && (f = !0, g = zl(e, h, t, 5, u, g)), v > 6 && mi(e, t, 6, s) && (f = !0, g = zl(e, h, t, 6, s, g)), v > 7 && mi(e, t, 7, a) && (f = !0, g = zl(e, h, t, 7, a, g)), v > 8 && mi(e, t, 8, c) && (f = !0, g = zl(e, h, t, 8, c, g)), v > 9 && mi(e, t, 9, p) && (f = !0, g = zl(e, h, t, 9, p, g)), g && d.ngOnChanges(g), 65536 & t.flags && Jr(e, 256, t.nodeIndex) && d.ngOnInit(), 262144 & t.flags && d.ngDoCheck(), f
                        }(e, t, n, r, i, l, o, u, s, a, c, p);
                    case 32:
                    case 64:
                    case 128:
                        return function (e, t, n, r, i, l, o, u, s, a, c, p) {
                            var h = t.bindings,
                                d = !1,
                                f = h.length;
                            if (f > 0 && yi(e, t, 0, n) && (d = !0), f > 1 && yi(e, t, 1, r) && (d = !0), f > 2 && yi(e, t, 2, i) && (d = !0), f > 3 && yi(e, t, 3, l) && (d = !0), f > 4 && yi(e, t, 4, o) && (d = !0), f > 5 && yi(e, t, 5, u) && (d = !0), f > 6 && yi(e, t, 6, s) && (d = !0), f > 7 && yi(e, t, 7, a) && (d = !0), f > 8 && yi(e, t, 8, c) && (d = !0), f > 9 && yi(e, t, 9, p) && (d = !0), d) {
                                var g = ri(e, t.nodeIndex),
                                    v = void 0;
                                switch (201347067 & t.flags) {
                                    case 32:
                                        v = new Array(h.length), f > 0 && (v[0] = n), f > 1 && (v[1] = r), f > 2 && (v[2] = i), f > 3 && (v[3] = l), f > 4 && (v[4] = o), f > 5 && (v[5] = u), f > 6 && (v[6] = s), f > 7 && (v[7] = a), f > 8 && (v[8] = c), f > 9 && (v[9] = p);
                                        break;
                                    case 64:
                                        v = {}, f > 0 && (v[h[0].name] = n), f > 1 && (v[h[1].name] = r), f > 2 && (v[h[2].name] = i), f > 3 && (v[h[3].name] = l), f > 4 && (v[h[4].name] = o), f > 5 && (v[h[5].name] = u), f > 6 && (v[h[6].name] = s), f > 7 && (v[h[7].name] = a), f > 8 && (v[h[8].name] = c), f > 9 && (v[h[9].name] = p);
                                        break;
                                    case 128:
                                        var m = n;
                                        switch (f) {
                                            case 1:
                                                v = m.transform(n);
                                                break;
                                            case 2:
                                                v = m.transform(r);
                                                break;
                                            case 3:
                                                v = m.transform(r, i);
                                                break;
                                            case 4:
                                                v = m.transform(r, i, l);
                                                break;
                                            case 5:
                                                v = m.transform(r, i, l, o);
                                                break;
                                            case 6:
                                                v = m.transform(r, i, l, o, u);
                                                break;
                                            case 7:
                                                v = m.transform(r, i, l, o, u, s);
                                                break;
                                            case 8:
                                                v = m.transform(r, i, l, o, u, s, a);
                                                break;
                                            case 9:
                                                v = m.transform(r, i, l, o, u, s, a, c);
                                                break;
                                            case 10:
                                                v = m.transform(r, i, l, o, u, s, a, c, p)
                                        }
                                }
                                g.value = v
                            }
                            return d
                        }(e, t, n, r, i, l, o, u, s, a, c, p);
                    default:
                        throw "unreachable"
                }
            }(e, t, r, i, l, o, u, s, a, p, h, d) : function (e, t, n) {
                switch (201347067 & t.flags) {
                    case 1:
                        return function (e, t, n) {
                            for (var r = !1, i = 0; i < n.length; i++) Qi(e, t, i, n[i]) && (r = !0);
                            return r
                        }(e, t, n);
                    case 2:
                        return function (e, t, n) {
                            for (var r = t.bindings, i = !1, l = 0; l < n.length; l++) yi(e, t, l, n[l]) && (i = !0);
                            if (i) {
                                var o = "";
                                for (l = 0; l < n.length; l++) o += uo(n[l], r[l]);
                                o = t.text.prefix + o;
                                var u = ei(e, t.nodeIndex).renderText;
                                e.renderer.setValue(u, o)
                            }
                            return i
                        }(e, t, n);
                    case 16384:
                        return function (e, t, n) {
                            for (var r = ni(e, t.nodeIndex), i = r.instance, l = !1, o = void 0, u = 0; u < n.length; u++) mi(e, t, u, n[u]) && (l = !0, o = zl(e, r, t, u, n[u], o));
                            return o && i.ngOnChanges(o), 65536 & t.flags && Jr(e, 256, t.nodeIndex) && i.ngOnInit(), 262144 & t.flags && i.ngDoCheck(), l
                        }(e, t, n);
                    case 32:
                    case 64:
                    case 128:
                        return function (e, t, n) {
                            for (var r = t.bindings, i = !1, l = 0; l < n.length; l++) yi(e, t, l, n[l]) && (i = !0);
                            if (i) {
                                var o = ri(e, t.nodeIndex),
                                    u = void 0;
                                switch (201347067 & t.flags) {
                                    case 32:
                                        u = n;
                                        break;
                                    case 64:
                                        for (u = {}, l = 0; l < n.length; l++) u[r[l].name] = n[l];
                                        break;
                                    case 128:
                                        var s = n[0],
                                            a = n.slice(1);
                                        u = s.transform.apply(s, c(a))
                                }
                                o.value = u
                            }
                            return i
                        }(e, t, n);
                    default:
                        throw "unreachable"
                }
            }(e, t, r)
        }

        function Oo(e) {
            var t = e.def;
            if (4 & t.nodeFlags)
                for (var n = 0; n < t.nodes.length; n++) {
                    var r = t.nodes[n];
                    if (4 & r.flags) {
                        var i = ti(e, n).template._projectedViews;
                        if (i)
                            for (var l = 0; l < i.length; l++) {
                                var o = i[l];
                                o.state |= 32, Oi(o, e)
                            }
                    } else 0 == (4 & r.childFlags) && (n += r.childCount)
                }
        }

        function bo(e, t, n, r, i, l, o, u, s, a, c, p, h) {
            return 0 === n ? function (e, t, n, r, i, l, o, u, s, a, c, p) {
                var h = t.bindings.length;
                h > 0 && Si(e, t, 0, n), h > 1 && Si(e, t, 1, r), h > 2 && Si(e, t, 2, i), h > 3 && Si(e, t, 3, l), h > 4 && Si(e, t, 4, o), h > 5 && Si(e, t, 5, u), h > 6 && Si(e, t, 6, s), h > 7 && Si(e, t, 7, a), h > 8 && Si(e, t, 8, c), h > 9 && Si(e, t, 9, p)
            }(e, t, r, i, l, o, u, s, a, c, p, h) : function (e, t, n) {
                for (var r = 0; r < n.length; r++) Si(e, t, r, n[r])
            }(e, t, r), !1
        }

        function To(e, t) {
            if (ii(e, t.nodeIndex).dirty) throw oi(li.createDebugContext(e, t.nodeIndex), "Query " + t.query.id + " not dirty", "Query " + t.query.id + " dirty", 0 != (1 & e.state))
        }

        function Ro(e) {
            if (!(128 & e.state)) {
                if (Io(e, Co.Destroy), _o(e, Co.Destroy), Kl(e, 131072), e.disposables)
                    for (var t = 0; t < e.disposables.length; t++) e.disposables[t]();
                ! function (e) {
                    if (16 & e.state) {
                        var t = Ti(e);
                        if (t) {
                            var n = t.template._projectedViews;
                            n && (ul(n, n.indexOf(e)), li.dirtyParentQueries(e))
                        }
                    }
                }(e), e.renderer.destroyNode && function (e) {
                    for (var t = e.def.nodes.length, n = 0; n < t; n++) {
                        var r = e.def.nodes[n];
                        1 & r.flags ? e.renderer.destroyNode(ti(e, n).renderElement) : 2 & r.flags ? e.renderer.destroyNode(ei(e, n).renderText) : (67108864 & r.flags || 134217728 & r.flags) && ii(e, n).destroy()
                    }
                }(e), _i(e) && e.renderer.destroy(), e.state |= 128
            }
        }
        var Co = function (e) {
            return e[e.CreateViewNodes = 0] = "CreateViewNodes", e[e.CheckNoChanges = 1] = "CheckNoChanges", e[e.CheckNoChangesProjectedViews = 2] = "CheckNoChangesProjectedViews", e[e.CheckAndUpdate = 3] = "CheckAndUpdate", e[e.CheckAndUpdateProjectedViews = 4] = "CheckAndUpdateProjectedViews", e[e.Destroy = 5] = "Destroy", e
        }({});

        function _o(e, t) {
            var n = e.def;
            if (33554432 & n.nodeFlags)
                for (var r = 0; r < n.nodes.length; r++) {
                    var i = n.nodes[r];
                    33554432 & i.flags ? Ao(ti(e, r).componentView, t) : 0 == (33554432 & i.childFlags) && (r += i.childCount)
                }
        }

        function Io(e, t) {
            var n = e.def;
            if (16777216 & n.nodeFlags)
                for (var r = 0; r < n.nodes.length; r++) {
                    var i = n.nodes[r];
                    if (16777216 & i.flags)
                        for (var l = ti(e, r).viewContainer._embeddedViews, o = 0; o < l.length; o++) Ao(l[o], t);
                    else 0 == (16777216 & i.childFlags) && (r += i.childCount)
                }
        }

        function Ao(e, t) {
            var n = e.state;
            switch (t) {
                case Co.CheckNoChanges:
                    0 == (128 & n) && (12 == (12 & n) ? yo(e) : 64 & n && wo(e, Co.CheckNoChangesProjectedViews));
                    break;
                case Co.CheckNoChangesProjectedViews:
                    0 == (128 & n) && (32 & n ? yo(e) : 64 & n && wo(e, t));
                    break;
                case Co.CheckAndUpdate:
                    0 == (128 & n) && (12 == (12 & n) ? So(e) : 64 & n && wo(e, Co.CheckAndUpdateProjectedViews));
                    break;
                case Co.CheckAndUpdateProjectedViews:
                    0 == (128 & n) && (32 & n ? So(e) : 64 & n && wo(e, t));
                    break;
                case Co.Destroy:
                    Ro(e);
                    break;
                case Co.CreateViewNodes:
                    mo(e)
            }
        }

        function wo(e, t) {
            Io(e, t), _o(e, t)
        }

        function No(e, t, n, r) {
            if (e.def.nodeFlags & t && e.def.nodeFlags & n)
                for (var i = e.def.nodes.length, l = 0; l < i; l++) {
                    var o = e.def.nodes[l];
                    if (o.flags & t && o.flags & n) switch (li.setCurrentNode(e, o.nodeIndex), r) {
                        case 0:
                            Xl(e, o);
                            break;
                        case 1:
                            To(e, o)
                    }
                    o.childFlags & t && o.childFlags & n || (l += o.childCount)
                }
        }
        var Po = !1;

        function Do(e, t, n, r, i, l) {
            var o = i.injector.get(Mt);
            return ho(ko(e, i, o, t, n), r, l)
        }

        function Mo(e, t, n, r, i, l) {
            var o = i.injector.get(Mt),
                u = ko(e, i, new hu(o), t, n),
                s = jo(r);
            return cu(Jo.create, ho, null, [u, s, l])
        }

        function ko(e, t, n, r, i) {
            var l = t.injector.get(Ut),
                o = t.injector.get(Cn),
                u = n.createRenderer(null, null);
            return {
                ngModule: t,
                injector: e,
                projectableNodes: r,
                selectorOrNode: i,
                sanitizer: l,
                rendererFactory: n,
                renderer: u,
                errorHandler: o
            }
        }

        function Lo(e, t, n, r) {
            var i = jo(n);
            return cu(Jo.create, po, null, [e, t, i, r])
        }

        function xo(e, t, n, r) {
            return n = Go.get(t.element.componentProvider.provider.token) || jo(n), cu(Jo.create, fo, null, [e, t, n, r])
        }

        function Fo(e, t, n, r) {
            return Tl(e, t, n, function (e) {
                var t = function (e) {
                        var t = !1,
                            n = !1;
                        return 0 === Uo.size ? {
                            hasOverrides: t,
                            hasDeprecatedOverrides: n
                        } : (e.providers.forEach(function (e) {
                            var r = Uo.get(e.token);
                            3840 & e.flags && r && (t = !0, n = n || r.deprecatedBehavior)
                        }), e.modules.forEach(function (e) {
                            Ho.forEach(function (r, i) {
                                me(i).providedIn === e && (t = !0, n = n || r.deprecatedBehavior)
                            })
                        }), {
                            hasOverrides: t,
                            hasDeprecatedOverrides: n
                        })
                    }(e),
                    n = t.hasDeprecatedOverrides;
                return t.hasOverrides ? (function (e) {
                    for (var t = 0; t < e.providers.length; t++) {
                        var r = e.providers[t];
                        n && (r.flags |= 4096);
                        var i = Uo.get(r.token);
                        i && (r.flags = -3841 & r.flags | i.flags, r.deps = Ni(i.deps), r.value = i.value)
                    }
                    if (Ho.size > 0) {
                        var l = new Set(e.modules);
                        Ho.forEach(function (t, r) {
                            if (l.has(me(r).providedIn)) {
                                var i = {
                                    token: r,
                                    flags: t.flags | (n ? 4096 : 0),
                                    deps: Ni(t.deps),
                                    value: t.value,
                                    index: e.providers.length
                                };
                                e.providers.push(i), e.providersByKey[pi(r)] = i
                            }
                        })
                    }
                }(e = e.factory(function () {
                    return ai
                })), e) : e
            }(r))
        }
        var Uo = new Map,
            Ho = new Map,
            Go = new Map;

        function Bo(e) {
            var t;
            Uo.set(e.token, e), "function" == typeof e.token && (t = me(e.token)) && "function" == typeof t.providedIn && Ho.set(e.token, e)
        }

        function Vo(e, t) {
            var n = Mi(t.viewDefFactory),
                r = Mi(n.nodes[0].element.componentView);
            Go.set(e, r)
        }

        function Wo() {
            Uo.clear(), Ho.clear(), Go.clear()
        }

        function jo(e) {
            if (0 === Uo.size) return e;
            var t = function (e) {
                for (var t = [], n = null, r = 0; r < e.nodes.length; r++) {
                    var i = e.nodes[r];
                    1 & i.flags && (n = i), n && 3840 & i.flags && Uo.has(i.provider.token) && (t.push(n.nodeIndex), n = null)
                }
                return t
            }(e);
            if (0 === t.length) return e;
            e = e.factory(function () {
                return ai
            });
            for (var n = 0; n < t.length; n++) r(e, t[n]);
            return e;

            function r(e, t) {
                for (var n = t + 1; n < e.nodes.length; n++) {
                    var r = e.nodes[n];
                    if (1 & r.flags) return;
                    if (3840 & r.flags) {
                        var i = r.provider,
                            l = Uo.get(i.token);
                        l && (r.flags = -3841 & r.flags | l.flags, i.deps = Ni(l.deps), i.value = l.value)
                    }
                }
            }
        }

        function Yo(e, t, n, r, i, l, o, u, s, a, c, p, h) {
            var d = e.def.nodes[t];
            return Eo(e, d, n, r, i, l, o, u, s, a, c, p, h), 224 & d.flags ? ri(e, t).value : void 0
        }

        function zo(e, t, n, r, i, l, o, u, s, a, c, p, h) {
            var d = e.def.nodes[t];
            return bo(e, d, n, r, i, l, o, u, s, a, c, p, h), 224 & d.flags ? ri(e, t).value : void 0
        }

        function Ko(e) {
            return cu(Jo.detectChanges, So, null, [e])
        }

        function qo(e) {
            return cu(Jo.checkNoChanges, yo, null, [e])
        }

        function Qo(e) {
            return cu(Jo.destroy, Ro, null, [e])
        }
        var $o, Zo, Xo, Jo = function (e) {
            return e[e.create = 0] = "create", e[e.detectChanges = 1] = "detectChanges", e[e.checkNoChanges = 2] = "checkNoChanges", e[e.destroy = 3] = "destroy", e[e.handleEvent = 4] = "handleEvent", e
        }({});

        function eu(e, t) {
            Zo = e, Xo = t
        }

        function tu(e, t, n, r) {
            return eu(e, t), cu(Jo.handleEvent, e.def.handleEvent, null, [e, t, n, r])
        }

        function nu(e, t) {
            if (128 & e.state) throw si(Jo[$o]);
            return eu(e, ou(e, 0)), e.def.updateDirectives(function (e, n, r) {
                for (var i = [], l = 3; l < arguments.length; l++) i[l - 3] = arguments[l];
                var o = e.def.nodes[n];
                return 0 === t ? iu(e, o, r, i) : lu(e, o, r, i), 16384 & o.flags && eu(e, ou(e, n)), 224 & o.flags ? ri(e, o.nodeIndex).value : void 0
            }, e)
        }

        function ru(e, t) {
            if (128 & e.state) throw si(Jo[$o]);
            return eu(e, uu(e, 0)), e.def.updateRenderer(function (e, n, r) {
                for (var i = [], l = 3; l < arguments.length; l++) i[l - 3] = arguments[l];
                var o = e.def.nodes[n];
                return 0 === t ? iu(e, o, r, i) : lu(e, o, r, i), 3 & o.flags && eu(e, uu(e, n)), 224 & o.flags ? ri(e, o.nodeIndex).value : void 0
            }, e)
        }

        function iu(e, t, n, r) {
            if (Eo.apply(void 0, c([e, t, n], r))) {
                var i = 1 === n ? r[0] : r;
                if (16384 & t.flags) {
                    for (var l = {}, o = 0; o < t.bindings.length; o++) {
                        var u = t.bindings[o],
                            s = i[o];
                        8 & u.flags && (l[(d = u.nonMinifiedName, "ng-reflect-" + d.replace(/[$@]/g, "_").replace(Ke, function () {
                            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                            return "-" + e[1].toLowerCase()
                        }))] = qe(s))
                    }
                    var a = t.parent,
                        p = ti(e, a.nodeIndex).renderElement;
                    if (a.element.name)
                        for (var h in l) null != (s = l[h]) ? e.renderer.setAttribute(p, h, s) : e.renderer.removeAttribute(p, h);
                    else e.renderer.setValue(p, "bindings=" + JSON.stringify(l, null, 2))
                }
            }
            var d
        }

        function lu(e, t, n, r) {
            bo.apply(void 0, c([e, t, n], r))
        }

        function ou(e, t) {
            for (var n = t; n < e.def.nodes.length; n++) {
                var r = e.def.nodes[n];
                if (16384 & r.flags && r.bindings && r.bindings.length) return n
            }
            return null
        }

        function uu(e, t) {
            for (var n = t; n < e.def.nodes.length; n++) {
                var r = e.def.nodes[n];
                if (3 & r.flags && r.bindings && r.bindings.length) return n
            }
            return null
        }
        var su = function () {
            function e(e, t) {
                this.view = e, this.nodeIndex = t, null == t && (this.nodeIndex = t = 0), this.nodeDef = e.def.nodes[t];
                for (var n = this.nodeDef, r = e; n && 0 == (1 & n.flags);) n = n.parent;
                if (!n)
                    for (; !n && r;) n = Ri(r), r = r.parent;
                this.elDef = n, this.elView = r
            }
            return Object.defineProperty(e.prototype, "elOrCompView", {
                get: function () {
                    return ti(this.elView, this.elDef.nodeIndex).componentView || this.view
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "injector", {
                get: function () {
                    return yl(this.elView, this.elDef)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "component", {
                get: function () {
                    return this.elOrCompView.component
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "context", {
                get: function () {
                    return this.elOrCompView.context
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "providerTokens", {
                get: function () {
                    var e = [];
                    if (this.elDef)
                        for (var t = this.elDef.nodeIndex + 1; t <= this.elDef.nodeIndex + this.elDef.childCount; t++) {
                            var n = this.elView.def.nodes[t];
                            20224 & n.flags && e.push(n.provider.token), t += n.childCount
                        }
                    return e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "references", {
                get: function () {
                    var e = {};
                    if (this.elDef) {
                        au(this.elView, this.elDef, e);
                        for (var t = this.elDef.nodeIndex + 1; t <= this.elDef.nodeIndex + this.elDef.childCount; t++) {
                            var n = this.elView.def.nodes[t];
                            20224 & n.flags && au(this.elView, n, e), t += n.childCount
                        }
                    }
                    return e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "componentRenderElement", {
                get: function () {
                    var e = function (e) {
                        for (; e && !_i(e);) e = e.parent;
                        return e.parent ? ti(e.parent, Ri(e).nodeIndex) : null
                    }(this.elOrCompView);
                    return e ? e.renderElement : void 0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "renderNode", {
                get: function () {
                    return 2 & this.nodeDef.flags ? Ci(this.view, this.nodeDef) : Ci(this.elView, this.elDef)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.logError = function (e) {
                for (var t, n, r = [], i = 1; i < arguments.length; i++) r[i - 1] = arguments[i];
                2 & this.nodeDef.flags ? (t = this.view.def, n = this.nodeDef.nodeIndex) : (t = this.elView.def, n = this.elDef.nodeIndex);
                var l = function (e, t) {
                        for (var n = -1, r = 0; r <= t; r++) 3 & e.nodes[r].flags && n++;
                        return n
                    }(t, n),
                    o = -1;
                t.factory(function () {
                    var t;
                    return ++o === l ? (t = e.error).bind.apply(t, c([e], r)) : ai
                }), o < l && (e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"), e.error.apply(e, c(r)))
            }, e
        }();

        function au(e, t, n) {
            for (var r in t.references) n[r] = eo(e, t, t.references[r])
        }

        function cu(e, t, n, r) {
            var i = $o,
                l = Zo,
                o = Xo;
            try {
                $o = e;
                var u = t.apply(n, r);
                return Zo = l, Xo = o, $o = i, u
            } catch (s) {
                if (bn(s) || !Zo) throw s;
                throw function (e, t) {
                    return e instanceof Error || (e = new Error(e.toString())), ui(e, t), e
                }(s, pu())
            }
        }

        function pu() {
            return Zo ? new su(Zo, Xo) : null
        }
        var hu = function () {
                function e(e) {
                    this.delegate = e
                }
                return e.prototype.createRenderer = function (e, t) {
                    return new du(this.delegate.createRenderer(e, t))
                }, e.prototype.begin = function () {
                    this.delegate.begin && this.delegate.begin()
                }, e.prototype.end = function () {
                    this.delegate.end && this.delegate.end()
                }, e.prototype.whenRenderingDone = function () {
                    return this.delegate.whenRenderingDone ? this.delegate.whenRenderingDone() : Promise.resolve(null)
                }, e
            }(),
            du = function () {
                function e(e) {
                    this.delegate = e, this.debugContextFactory = pu, this.data = this.delegate.data
                }
                return e.prototype.createDebugContext = function (e) {
                    return this.debugContextFactory(e)
                }, e.prototype.destroyNode = function (e) {
                    ! function (e) {
                        Ar.delete(e.nativeNode)
                    }(wr(e)), this.delegate.destroyNode && this.delegate.destroyNode(e)
                }, e.prototype.destroy = function () {
                    this.delegate.destroy()
                }, e.prototype.createElement = function (e, t) {
                    var n = this.delegate.createElement(e, t),
                        r = this.createDebugContext(n);
                    if (r) {
                        var i = new Ir(n, null, r);
                        i.name = e, Nr(i)
                    }
                    return n
                }, e.prototype.createComment = function (e) {
                    var t = this.delegate.createComment(e),
                        n = this.createDebugContext(t);
                    return n && Nr(new _r(t, null, n)), t
                }, e.prototype.createText = function (e) {
                    var t = this.delegate.createText(e),
                        n = this.createDebugContext(t);
                    return n && Nr(new _r(t, null, n)), t
                }, e.prototype.appendChild = function (e, t) {
                    var n = wr(e),
                        r = wr(t);
                    n && r && n instanceof Ir && n.addChild(r), this.delegate.appendChild(e, t)
                }, e.prototype.insertBefore = function (e, t, n) {
                    var r = wr(e),
                        i = wr(t),
                        l = wr(n);
                    r && i && r instanceof Ir && r.insertBefore(l, i), this.delegate.insertBefore(e, t, n)
                }, e.prototype.removeChild = function (e, t) {
                    var n = wr(e),
                        r = wr(t);
                    n && r && n instanceof Ir && n.removeChild(r), this.delegate.removeChild(e, t)
                }, e.prototype.selectRootElement = function (e, t) {
                    var n = this.delegate.selectRootElement(e, t),
                        r = pu();
                    return r && Nr(new Ir(n, null, r)), n
                }, e.prototype.setAttribute = function (e, t, n, r) {
                    var i = wr(e);
                    i && i instanceof Ir && (i.attributes[r ? r + ":" + t : t] = n), this.delegate.setAttribute(e, t, n, r)
                }, e.prototype.removeAttribute = function (e, t, n) {
                    var r = wr(e);
                    r && r instanceof Ir && (r.attributes[n ? n + ":" + t : t] = null), this.delegate.removeAttribute(e, t, n)
                }, e.prototype.addClass = function (e, t) {
                    var n = wr(e);
                    n && n instanceof Ir && (n.classes[t] = !0), this.delegate.addClass(e, t)
                }, e.prototype.removeClass = function (e, t) {
                    var n = wr(e);
                    n && n instanceof Ir && (n.classes[t] = !1), this.delegate.removeClass(e, t)
                }, e.prototype.setStyle = function (e, t, n, r) {
                    var i = wr(e);
                    i && i instanceof Ir && (i.styles[t] = n), this.delegate.setStyle(e, t, n, r)
                }, e.prototype.removeStyle = function (e, t, n) {
                    var r = wr(e);
                    r && r instanceof Ir && (r.styles[t] = null), this.delegate.removeStyle(e, t, n)
                }, e.prototype.setProperty = function (e, t, n) {
                    var r = wr(e);
                    r && r instanceof Ir && (r.properties[t] = n), this.delegate.setProperty(e, t, n)
                }, e.prototype.listen = function (e, t, n) {
                    if ("string" != typeof e) {
                        var r = wr(e);
                        r && r.listeners.push(new Cr(t, n))
                    }
                    return this.delegate.listen(e, t, n)
                }, e.prototype.parentNode = function (e) {
                    return this.delegate.parentNode(e)
                }, e.prototype.nextSibling = function (e) {
                    return this.delegate.nextSibling(e)
                }, e.prototype.setValue = function (e, t) {
                    return this.delegate.setValue(e, t)
                }, e
            }();

        function fu(e, t, n) {
            return new gu(e, t, n)
        }
        var gu = function (e) {
                function t(t, n, r) {
                    var i = e.call(this) || this;
                    return i.moduleType = t, i._bootstrapComponents = n, i._ngModuleDefFactory = r, i
                }
                return i(t, e), t.prototype.create = function (e) {
                    ! function () {
                        if (!Po) {
                            Po = !0;
                            var e = Vt() ? {
                                setCurrentNode: eu,
                                createRootView: Mo,
                                createEmbeddedView: Lo,
                                createComponentView: xo,
                                createNgModuleRef: Fo,
                                overrideProvider: Bo,
                                overrideComponentView: Vo,
                                clearOverrides: Wo,
                                checkAndUpdateView: Ko,
                                checkNoChangesView: qo,
                                destroyView: Qo,
                                createDebugContext: function (e, t) {
                                    return new su(e, t)
                                },
                                handleEvent: tu,
                                updateDirectives: nu,
                                updateRenderer: ru
                            } : {
                                setCurrentNode: function () {},
                                createRootView: Do,
                                createEmbeddedView: po,
                                createComponentView: fo,
                                createNgModuleRef: Tl,
                                overrideProvider: ai,
                                overrideComponentView: ai,
                                clearOverrides: ai,
                                checkAndUpdateView: So,
                                checkNoChangesView: yo,
                                destroyView: Ro,
                                createDebugContext: function (e, t) {
                                    return new su(e, t)
                                },
                                handleEvent: function (e, t, n, r) {
                                    return e.def.handleEvent(e, t, n, r)
                                },
                                updateDirectives: function (e, t) {
                                    return e.def.updateDirectives(0 === t ? Yo : zo, e)
                                },
                                updateRenderer: function (e, t) {
                                    return e.def.updateRenderer(0 === t ? Yo : zo, e)
                                }
                            };
                            li.setCurrentNode = e.setCurrentNode, li.createRootView = e.createRootView, li.createEmbeddedView = e.createEmbeddedView, li.createComponentView = e.createComponentView, li.createNgModuleRef = e.createNgModuleRef, li.overrideProvider = e.overrideProvider, li.overrideComponentView = e.overrideComponentView, li.clearOverrides = e.clearOverrides, li.checkAndUpdateView = e.checkAndUpdateView, li.checkNoChangesView = e.checkNoChangesView, li.destroyView = e.destroyView, li.resolveDep = jl, li.createDebugContext = e.createDebugContext, li.handleEvent = e.handleEvent, li.updateDirectives = e.updateDirectives, li.updateRenderer = e.updateRenderer, li.dirtyParentQueries = Zl
                        }
                    }();
                    var t = function (e) {
                        var t = Array.from(e.providers),
                            n = Array.from(e.modules),
                            r = {};
                        for (var i in e.providersByKey) r[i] = e.providersByKey[i];
                        return {
                            factory: e.factory,
                            isRoot: e.isRoot,
                            providers: t,
                            modules: n,
                            providersByKey: r
                        }
                    }(Mi(this._ngModuleDefFactory));
                    return li.createNgModuleRef(this.moduleType, e || lt.NULL, this._bootstrapComponents, t)
                }, t
            }(wt),
            vu = function (e) {
                return e[e.NOTHING = 0] = "NOTHING", e[e.FOOD = 1] = "FOOD", e[e.LOG = 2] = "LOG", e[e.BRUSHWOOD = 3] = "BRUSHWOOD", e[e.STONE = 4] = "STONE", e[e.FUR = 5] = "FUR", e[e.WHEAT = 6] = "WHEAT", e[e.BARLEY = 7] = "BARLEY", e[e.HOP = 8] = "HOP", e[e.COTTON = 9] = "COTTON", e[e.HAY = 10] = "HAY", e[e.CHICKEN = 11] = "CHICKEN", e[e.COW = 12] = "COW", e[e.PIG = 13] = "PIG", e[e.HORSE = 14] = "HORSE", e[e.COAL = 15] = "COAL", e[e.GOLD_ORE = 16] = "GOLD_ORE", e[e.SILVER_ORE = 17] = "SILVER_ORE", e[e.COPPER_ORE = 18] = "COPPER_ORE", e[e.TIN_ORE = 19] = "TIN_ORE", e[e.IRON_ORE = 20] = "IRON_ORE", e[e.PLANK = 21] = "PLANK", e[e.CUT_STONE = 22] = "CUT_STONE", e[e.FUEL = 23] = "FUEL", e[e.FLOUR = 24] = "FLOUR", e[e.FABRIC = 25] = "FABRIC", e[e.LEATHER = 26] = "LEATHER", e[e.COINS = 27] = "COINS", e[e.COPPER = 28] = "COPPER", e[e.GOLD = 29] = "GOLD", e[e.SILVER = 30] = "SILVER", e[e.TIN = 31] = "TIN", e[e.BRONZE = 32] = "BRONZE", e[e.IRON = 33] = "IRON", e[e.STEEL = 34] = "STEEL", e[e.BERRY = 35] = "BERRY", e[e.MUSHROOM = 36] = "MUSHROOM", e[e.FISH = 37] = "FISH", e[e.APPLE = 38] = "APPLE", e[e.GRAPE = 39] = "GRAPE", e[e.BREAD = 40] = "BREAD", e[e.MEAT = 41] = "MEAT", e[e.EGG = 42] = "EGG", e[e.MILK = 43] = "MILK", e[e.COOKED_MEAT = 44] = "COOKED_MEAT", e[e.VEGETABLE_SOUP = 45] = "VEGETABLE_SOUP", e[e.MEAT_SOUP = 46] = "MEAT_SOUP", e[e.BEER = 47] = "BEER", e[e.WINE = 48] = "WINE", e[e.CLOTHES = 49] = "CLOTHES", e[e.BOW = 50] = "BOW", e[e.STONE_PICKAXE = 51] = "STONE_PICKAXE", e[e.STONE_SHOVEL = 52] = "STONE_SHOVEL", e[e.STONE_AXE = 53] = "STONE_AXE", e[e.STONE_SPEAR = 54] = "STONE_SPEAR", e[e.STONE_HAMMER = 55] = "STONE_HAMMER", e[e.SWORD = 56] = "SWORD", e[e.WOODEN_SHIELD = 57] = "WOODEN_SHIELD", e[e.LEATHER_ARMOR = 58] = "LEATHER_ARMOR", e[e.LIGHT_ARMOR = 59] = "LIGHT_ARMOR", e[e.HEAVY_ARMOR = 60] = "HEAVY_ARMOR", e
            }({});
        ! function (e) {
            e.values = function () {
                return Object.keys(e).filter(function (e) {
                    return isNaN(e) && "values" !== e
                })
            }
        }(vu || (vu = {}));
        var mu, yu = function (e) {
                return e[e.MOTIVATION_SPEECH = 0] = "MOTIVATION_SPEECH", e[e.ROYAL_PROPHECY = 1] = "ROYAL_PROPHECY", e[e.HERITAGE = 2] = "HERITAGE", e[e.FAMILY_JEWELS = 3] = "FAMILY_JEWELS", e[e.KING_OF_THE_FOREST = 4] = "KING_OF_THE_FOREST", e[e.KING_OF_THE_SEAS = 5] = "KING_OF_THE_SEAS", e[e.KING_OF_THE_PEOPLE = 6] = "KING_OF_THE_PEOPLE", e[e.KING_OF_THE_WAR = 7] = "KING_OF_THE_WAR", e[e.CALL_TO_ARMS = 8] = "CALL_TO_ARMS", e[e.UNITE_WITH_THE_PEOPLE = 9] = "UNITE_WITH_THE_PEOPLE", e
            }({}),
            Su = function (e) {
                return e[e.MANAGEMENT = 0] = "MANAGEMENT", e[e.STONE_AXE = 1] = "STONE_AXE", e[e.STONE_PICKAXE = 2] = "STONE_PICKAXE", e[e.STONE_SHOVEL = 3] = "STONE_SHOVEL", e[e.STONE_HAMMER = 4] = "STONE_HAMMER", e[e.HUNTING = 5] = "HUNTING", e[e.FIRE = 6] = "FIRE", e[e.BIGGER_FIRE = 7] = "BIGGER_FIRE", e[e.COOKING = 8] = "COOKING", e[e.TRADE = 9] = "TRADE", e[e.ENTERTAINMENT = 10] = "ENTERTAINMENT", e[e.WONDER_BUILDINGS = 11] = "WONDER_BUILDINGS", e[e.TRADE_ROUTES = 12] = "TRADE_ROUTES", e[e.BUFF_PRODUCTION = 13] = "BUFF_PRODUCTION", e[e.STONE_SPEAR = 14] = "STONE_SPEAR", e[e.BOW = 15] = "BOW", e[e.BARRACKS = 16] = "BARRACKS", e[e.WOODEN_DEFENCES = 17] = "WOODEN_DEFENCES", e[e.STONE_DEFENCES = 18] = "STONE_DEFENCES", e[e.STASH = 19] = "STASH", e[e.SCIENTIFIC_METHOD = 20] = "SCIENTIFIC_METHOD", e[e.FORESIGHT = 21] = "FORESIGHT", e[e.CALENDAR = 22] = "CALENDAR", e[e.WEATHER = 23] = "WEATHER", e[e.HISTORY = 24] = "HISTORY", e[e.URBAN_PLANNING = 25] = "URBAN_PLANNING", e[e.MATHEMATICS = 26] = "MATHEMATICS", e[e.PROSPECTING_FOR_ORE = 27] = "PROSPECTING_FOR_ORE", e[e.ADVANCED_PROSPECTING = 28] = "ADVANCED_PROSPECTING", e[e.MASTER_PROSPECTING = 29] = "MASTER_PROSPECTING", e[e.SAWMILL = 30] = "SAWMILL", e[e.MINING = 31] = "MINING", e[e.PIT_MINE = 32] = "PIT_MINE", e[e.UNDERGROUND_MINE = 33] = "UNDERGROUND_MINE", e[e.WINDMILL = 34] = "WINDMILL", e[e.MORTAR = 35] = "MORTAR", e[e.HOUSE = 36] = "HOUSE", e[e.LEATHER = 37] = "LEATHER", e[e.FABRIC = 38] = "FABRIC", e[e.TAILORING = 39] = "TAILORING", e[e.ORE_PROCESSING = 40] = "ORE_PROCESSING", e[e.ADVANCED_ORE_PROCESSING = 41] = "ADVANCED_ORE_PROCESSING", e[e.MASTER_ORE_PROCESSING = 42] = "MASTER_ORE_PROCESSING", e[e.COINS_MINTING = 43] = "COINS_MINTING", e[e.METALLURGY = 44] = "METALLURGY", e[e.ADVANCED_METALLURGY = 45] = "ADVANCED_METALLURGY", e[e.PICKAXE_DESIGN = 46] = "PICKAXE_DESIGN", e[e.AGRICULTURE = 47] = "AGRICULTURE", e[e.FORESTRY = 48] = "FORESTRY", e[e.FISHING = 49] = "FISHING", e[e.ANIMALS = 50] = "ANIMALS", e[e.COTTON = 51] = "COTTON", e[e.FERTILIZER = 52] = "FERTILIZER", e[e.HUMAN_RESOURCES = 53] = "HUMAN_RESOURCES", e
            }({}),
            Eu = function (e) {
                return e[e.WEATHER = 0] = "WEATHER", e[e.MARKET = 1] = "MARKET", e[e.MANAGEMENT = 2] = "MANAGEMENT", e[e.CRAFTING = 3] = "CRAFTING", e[e.RESEARCH = 4] = "RESEARCH", e[e.ARMY = 5] = "ARMY", e[e.RELIGION = 6] = "RELIGION", e[e.FORT = 7] = "FORT", e[e.SEA = 8] = "SEA", e[e.FIELD = 9] = "FIELD", e[e.MOUNTAINS = 10] = "MOUNTAINS", e[e.PLATEAU = 11] = "PLATEAU", e[e.HOUSE = 12] = "HOUSE", e[e.SHRINE = 13] = "SHRINE", e[e.CHURCH = 14] = "CHURCH", e[e.TAILOR = 15] = "TAILOR", e[e.TAVERN = 16] = "TAVERN", e[e.BAKERY = 17] = "BAKERY", e[e.MARKETPLACE = 18] = "MARKETPLACE", e[e.BARRACKS = 19] = "BARRACKS", e[e.STOCKADE = 20] = "STOCKADE", e[e.WOODEN_TOWER = 21] = "WOODEN_TOWER", e[e.STONE_TOWER = 22] = "STONE_TOWER", e[e.STASH = 23] = "STASH", e[e.FORESTER = 24] = "FORESTER", e[e.SAWMILL = 25] = "SAWMILL", e[e.HUNTER = 26] = "HUNTER", e[e.TANNERY = 27] = "TANNERY", e[e.WINDMILL = 28] = "WINDMILL", e[e.FARM = 29] = "FARM", e[e.PASTURE = 30] = "PASTURE", e[e.BUTCHER = 31] = "BUTCHER", e[e.BREWERY = 32] = "BREWERY", e[e.WINERY = 33] = "WINERY", e[e.COTTON_MILL = 34] = "COTTON_MILL", e[e.PIT_MINE = 35] = "PIT_MINE", e[e.GEOLOGIST = 36] = "GEOLOGIST", e[e.SMITHY = 37] = "SMITHY", e[e.MINT = 38] = "MINT", e[e.FISHERS_HUT = 39] = "FISHERS_HUT", e[e.CALENDAR = 40] = "CALENDAR", e[e.FIRE = 41] = "FIRE", e[e.URBAN_PLANNING = 42] = "URBAN_PLANNING", e[e.ENTERTAINMENT = 43] = "ENTERTAINMENT", e[e.GOLD = 44] = "GOLD", e[e.SILVER = 45] = "SILVER", e[e.BRONZE = 46] = "BRONZE", e[e.IRON = 47] = "IRON", e[e.STEEL = 48] = "STEEL", e[e.ADVANCED_ORE_PROCESSING = 49] = "ADVANCED_ORE_PROCESSING", e[e.BUFFS = 50] = "BUFFS", e[e.COTTON = 51] = "COTTON", e[e.BARLEY = 52] = "BARLEY", e[e.HOPS = 53] = "HOPS", e[e.R_QUARRY = 54] = "R_QUARRY", e[e.R_SMITHY = 55] = "R_SMITHY", e[e.HUMAN_RESOURCES = 56] = "HUMAN_RESOURCES", e
            }({}),
            Ou = function (e) {
                return e[e.ALL = 0] = "ALL", e[e.CONSTRUCTION = 1] = "CONSTRUCTION", e[e.DECONSTRUCTION = 2] = "DECONSTRUCTION", e[e.HUT = 3] = "HUT", e[e.HOUSE = 4] = "HOUSE", e[e.MARKETPLACE = 5] = "MARKETPLACE", e[e.WAREHOUSE = 6] = "WAREHOUSE", e[e.SMITHY = 7] = "SMITHY", e[e.BAKERY = 8] = "BAKERY", e[e.WORKSHOP = 9] = "WORKSHOP", e[e.SHRINE = 10] = "SHRINE", e[e.TAILOR = 11] = "TAILOR", e[e.BREWERY = 12] = "BREWERY", e[e.TAVERN = 13] = "TAVERN", e[e.CHURCH = 14] = "CHURCH", e[e.STOCKADE = 15] = "STOCKADE", e[e.BARRACKS = 16] = "BARRACKS", e[e.TRAINING_SQUARE = 17] = "TRAINING_SQUARE", e[e.WOODEN_TOWER = 18] = "WOODEN_TOWER", e[e.STONE_TOWER = 19] = "STONE_TOWER", e[e.STASH = 20] = "STASH", e[e.LOGGERS_HUT = 21] = "LOGGERS_HUT", e[e.SAWMILL = 22] = "SAWMILL", e[e.FORESTER = 23] = "FORESTER", e[e.HUNTER_LODGE = 24] = "HUNTER_LODGE", e[e.GATHERER = 25] = "GATHERER", e[e.TANNERY = 26] = "TANNERY", e[e.FARM = 27] = "FARM", e[e.FIELD = 28] = "FIELD", e[e.ORCHARD = 29] = "ORCHARD", e[e.PASTURE = 30] = "PASTURE", e[e.WINDMILL = 31] = "WINDMILL", e[e.BUTCHER = 32] = "BUTCHER", e[e.COTTON_MILL = 33] = "COTTON_MILL", e[e.WINERY = 34] = "WINERY", e[e.PIT_MINE = 35] = "PIT_MINE", e[e.QUARRY = 36] = "QUARRY", e[e.GEOLOGIST = 37] = "GEOLOGIST", e[e.STONEMASON = 38] = "STONEMASON", e[e.MINT = 39] = "MINT", e[e.FISHERS_HUT = 40] = "FISHERS_HUT", e[e.SCHOOL_OF_FISH = 41] = "SCHOOL_OF_FISH", e[e.SHARKS = 42] = "SHARKS", e[e.STONEHENGE = 43] = "STONEHENGE", e[e.PYRAMID = 44] = "PYRAMID", e[e.HANGING_GARDEN = 45] = "HANGING_GARDEN", e[e.COLOSSUS = 46] = "COLOSSUS", e[e.UNDERGROUND_CITY = 47] = "UNDERGROUND_CITY", e[e.GREAT_LIGHTHOUSE = 48] = "GREAT_LIGHTHOUSE", e[e.SACRED_GROVE = 49] = "SACRED_GROVE", e[e.ASCENSION_TEMPLE = 50] = "ASCENSION_TEMPLE", e
            }({}),
            bu = function (e) {
                return e[e.BLESSING = 0] = "BLESSING", e[e.PREACH = 1] = "PREACH", e[e.FAITH_SHIELD = 2] = "FAITH_SHIELD", e[e.SOLDIER_PRAYER = 3] = "SOLDIER_PRAYER", e[e.FAITHFUL_RESEARCH = 4] = "FAITHFUL_RESEARCH", e[e.BABY_BOOM = 5] = "BABY_BOOM", e[e.LIFE_CYCLE = 6] = "LIFE_CYCLE", e[e.HOLY_WAR = 7] = "HOLY_WAR", e
            }({}),
            Tu = function (e) {
                return e[e.TRAIN = 0] = "TRAIN", e[e.DEFEND = 1] = "DEFEND", e[e.SPY = 2] = "SPY", e[e.DIVERSION = 3] = "DIVERSION", e[e.PLUNDER = 4] = "PLUNDER", e[e.EXPEDITION = 5] = "EXPEDITION", e[e.CONQUER = 6] = "CONQUER", e
            }({}),
            Ru = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.WHEAT = 1] = "WHEAT", e[e.BARLEY = 2] = "BARLEY", e[e.HAY = 3] = "HAY", e[e.HOP = 4] = "HOP", e[e.COTTON = 5] = "COTTON", e[e.BERRY = 6] = "BERRY", e[e.GRAPE = 7] = "GRAPE", e[e.APPLE = 8] = "APPLE", e
            }({}),
            Cu = function (e) {
                return e[e.ALL = 0] = "ALL", e[e.NONE = 1] = "NONE", e[e.RAW = 2] = "RAW", e[e.PROCESSED = 3] = "PROCESSED", e[e.FOOD = 4] = "FOOD", e[e.TOOLS = 5] = "TOOLS", e[e.OTHER = 6] = "OTHER", e[e.WOODEN = 7] = "WOODEN", e[e.METAL = 8] = "METAL", e[e.STONE = 9] = "STONE", e[e.ANIMAL = 10] = "ANIMAL", e[e.FUEL = 11] = "FUEL", e[e.CONSUMABLE = 12] = "CONSUMABLE", e
            }({}),
            _u = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.FERTILITY = 1] = "FERTILITY", e[e.NATURE = 2] = "NATURE", e[e.TECHNOLOGY = 3] = "TECHNOLOGY", e[e.WAR = 4] = "WAR", e
            }({}),
            Iu = function (e) {
                return e[e.ALL = 0] = "ALL", e[e.MILITIA = 1] = "MILITIA", e[e.SPEARMAN = 2] = "SPEARMAN", e[e.ARCHER = 3] = "ARCHER", e[e.SWORDSMAN = 4] = "SWORDSMAN", e
            }({}),
            Au = function () {
                function e() {}
                return e.round = function (e, t) {
                    return e.toFixed(t)
                }, e.titleCase = function (e) {
                    return e.charAt(0).toUpperCase() + e.substr(1).toLowerCase()
                }, e.prepareResourceName = function (e) {
                    return this.titleCase(vu[e].replace(/_/g, " "))
                }, e.prepareResourceTypeName = function (e) {
                    return this.titleCase(Cu[e].replace(/_/g, " "))
                }, e.preparePerkName = function (e) {
                    return this.titleCase(yu[e].replace(/_/g, " "))
                }, e.prepareTechName = function (e) {
                    return this.titleCase(Su[e].replace(/_/g, " "))
                }, e.prepareFlagName = function (e) {
                    return this.titleCase(Eu[e].replace(/_/g, " "))
                }, e.prepareBuildingName = function (e) {
                    return this.titleCase(Ou[e].replace(/_/g, " "))
                }, e.preparePrayerName = function (e) {
                    return this.titleCase(bu[e].replace(/_/g, " "))
                }, e.prepareReligionName = function (e) {
                    return this.titleCase(_u[e].replace(/_/g, " "))
                }, e.prepareTroopName = function (e) {
                    return this.titleCase(Iu[e].replace(/_/g, " "))
                }, e.prepareMissionName = function (e) {
                    return this.titleCase(Tu[e].replace(/_/g, " "))
                }, e.prepareCropName = function (e) {
                    return this.titleCase(Ru[e].replace(/_/g, " "))
                }, e.resourcesArraysDiff = function (e, t) {
                    return e.filter(function (e) {
                        return t.findIndex(function (t) {
                            return t.resource === e.resource
                        }) < 0
                    })
                }, e.prepareResourcesNamesList = function (t) {
                    var n = "";
                    return t.forEach(function (t) {
                        return n += e.prepareResourceName(t.resource) + ", "
                    }), (n = n.substr(0, n.length - 2)).toLowerCase()
                }, e.copyResourceArray = function (e) {
                    var t = [];
                    return e.forEach(function (e) {
                        return t.push({
                            resource: e.resource,
                            amount: e.amount
                        })
                    }), t
                }, e
            }(),
            wu = function (e) {
                return e[e.GENERAL = 0] = "GENERAL", e[e.MILITARY = 1] = "MILITARY", e[e.SCIENCE = 2] = "SCIENCE", e[e.TECHNOLOGY = 3] = "TECHNOLOGY", e[e.AGRICULTURE = 4] = "AGRICULTURE", e
            }({}),
            Nu = function (e) {
                return e[e.GAME = 0] = "GAME", e[e.LOG = 1] = "LOG", e[e.MODAL = 2] = "MODAL", e[e.RESOURCES = 3] = "RESOURCES", e[e.LAND = 4] = "LAND", e[e.RESEARCH = 5] = "RESEARCH", e[e.CRAFTING = 6] = "CRAFTING", e[e.RECIPE = 7] = "RECIPE", e[e.RELIGION = 8] = "RELIGION", e[e.WEATHER = 9] = "WEATHER", e[e.CALENDAR = 10] = "CALENDAR", e[e.EFFECTS = 11] = "EFFECTS", e[e.ARMY = 12] = "ARMY", e[e.HAPPINESS = 13] = "HAPPINESS", e[e.MANAGEMENT = 14] = "MANAGEMENT", e[e.ROYAL = 15] = "ROYAL", e[e.MARKET = 16] = "MARKET", e[e.VILLAGE = 17] = "VILLAGE", e[e.FORT = 18] = "FORT", e[e.FOREST = 19] = "FOREST", e[e.FIELD = 20] = "FIELD", e[e.MOUNTAINS = 21] = "MOUNTAINS", e[e.SEA = 22] = "SEA", e[e.PLATEAU = 23] = "PLATEAU", e[e.BUILDING_FACTORY = 24] = "BUILDING_FACTORY", e[e.SERIALIZER = 25] = "SERIALIZER", e[e.KONGREGATE = 26] = "KONGREGATE", e[e.ID = 27] = "ID", e
            }({}),
            Pu = function (e) {
                return e[e.PLANK = 0] = "PLANK", e[e.CUT_STONE = 1] = "CUT_STONE", e[e.FABRIC = 2] = "FABRIC", e[e.LEATHER = 3] = "LEATHER", e[e.GOLD = 4] = "GOLD", e[e.SILVER = 5] = "SILVER", e[e.COPPER = 6] = "COPPER", e[e.TIN = 7] = "TIN", e[e.BRONZE = 8] = "BRONZE", e[e.IRON = 9] = "IRON", e[e.STEEL = 10] = "STEEL", e[e.FUEL_BRUSHWOOD = 11] = "FUEL_BRUSHWOOD", e[e.FUEL_LOG = 12] = "FUEL_LOG", e[e.FUEL_COAL = 13] = "FUEL_COAL", e[e.STONE_AXE = 14] = "STONE_AXE", e[e.STONE_PICKAXE = 15] = "STONE_PICKAXE", e[e.STONE_SHOVEL = 16] = "STONE_SHOVEL", e[e.STONE_SPEAR = 17] = "STONE_SPEAR", e[e.STONE_HAMMER = 18] = "STONE_HAMMER", e[e.BOW = 19] = "BOW", e[e.CLOTHES_FUR = 20] = "CLOTHES_FUR", e[e.CLOTHES_FABRIC = 21] = "CLOTHES_FABRIC", e[e.SWORD = 22] = "SWORD", e[e.WOODEN_SHIELD = 23] = "WOODEN_SHIELD", e[e.LEATHER_ARMOR = 24] = "LEATHER_ARMOR", e[e.LIGHT_ARMOR = 25] = "LIGHT_ARMOR", e[e.HEAVY_ARMOR = 26] = "HEAVY_ARMOR", e[e.COOKED_MEAT = 27] = "COOKED_MEAT", e[e.FLOUR = 28] = "FLOUR", e[e.BREAD = 29] = "BREAD", e[e.VEGETABLE_SOUP_BERRY = 30] = "VEGETABLE_SOUP_BERRY", e[e.VEGETABLE_SOUP_MUSHROOM = 31] = "VEGETABLE_SOUP_MUSHROOM", e[e.MEAT_SOUP = 32] = "MEAT_SOUP", e
            }({}),
            Du = function () {
                function e(e, t, n, r, i) {
                    void 0 === i && (i = 0), this.name = e, this.building = t, this.effect = n, this.duration = r, this.buff = i
                }
                return e.prototype.isPermanent = function () {
                    return this.duration < 0
                }, e.prototype.isRoyal = function () {
                    return -10 === this.duration
                }, e.prototype.isBuff = function () {
                    return this.buff > 0
                }, e
            }();
        ! function (e) {
            e.BUILD = "build-modal", e.IMPORT = "import-modal", e.EXPORT = "export-modal", e.HARD_RESET = "hard-reset-modal", e.INFO = "info-modal", e.OPTIONS = "options-modal", e.CONFIRM = "confirm-modal", e.INPUT = "input-modal", e.ROYAL = "royal-modal", e.MISSION = "mission-modal", e.MARKET = "market-modal", e.WORK_MANAGEMENT = "work-management-modal", e.TUTORIAL = "tutorial-modal", e.CHANGELOG = "changelog-modal"
        }(mu || (mu = {}));
        var Mu = function () {
                function e() {}
                return e.randomElement = function (e, t) {
                    void 0 === t && (t = 10);
                    var n = 0;
                    if (e.forEach(function (e) {
                            return n += e.chance
                        }), n > 100) {
                        console.warn("Random roll for params with sum of chances over 100");
                        var r = 100 / n;
                        e.forEach(function (e) {
                            return e.chance = Math.floor(e.chance * r)
                        })
                    }
                    for (var i = this.randomBetween(1, 100 * t), l = 0, o = 0, u = e; o < u.length; o++) {
                        var s = u[o];
                        if (l + 1 <= i && l + s.chance * t >= i) return s.item;
                        l += s.chance * t
                    }
                    for (; n > 100;)
                        for (var a = 0, c = e; a < c.length; a++) {
                            if (s = c[a], l + 1 <= i && l + s.chance * t >= i) return s.item;
                            l += s.chance * t
                        }
                    return null
                }, e.chance = function (e) {
                    return Math.random() < e
                }, e.randomExcept = function (e, t) {
                    var n = e.filter(function (e) {
                        return t.indexOf(e) < 0
                    });
                    return n[this.randomBetween(0, n.length - 1)]
                }, e.randomBetween = function (e, t) {
                    return Math.floor(Math.random() * (t - e + 1)) + e
                }, e.randomWeightedExcept = function (e, t) {
                    var n = e.filter(function (e) {
                            return t.indexOf(e.item) < 0
                        }),
                        r = 0;
                    n.forEach(function (e) {
                        return r += e.chance
                    });
                    for (var i = this.randomBetween(1, r), l = 0, o = 0; o < n.length; o++) {
                        if (l < i && i <= l + n[o].chance) return n[o].item;
                        l += n[o].chance
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            ku = function (e) {
                return e[e.VILLAGE = 0] = "VILLAGE", e[e.FORT = 1] = "FORT", e[e.FOREST = 2] = "FOREST", e[e.FIELD = 3] = "FIELD", e[e.MOUNTAINS = 4] = "MOUNTAINS", e[e.SEA = 5] = "SEA", e[e.PLATEAU = 6] = "PLATEAU", e
            }({}),
            Lu = function () {
                function e(e, t, n, r) {
                    this.name = e, this.troop = t, this.effect = n, this.duration = r
                }
                return e.prototype.isPermanent = function () {
                    return this.duration < 0
                }, e.prototype.isRoyal = function () {
                    return -10 === this.duration
                }, e
            }(),
            xu = function (e) {
                return e[e.SUN = 0] = "SUN", e[e.CLOUDS = 1] = "CLOUDS", e[e.RAIN = 2] = "RAIN", e[e.WIND = 3] = "WIND", e[e.STORM = 4] = "STORM", e[e.SNOW = 5] = "SNOW", e
            }({}),
            Fu = function (e) {
                return e[e.DEV = 0] = "DEV", e[e.V1_0_0 = 1] = "V1_0_0", e
            }({}),
            Uu = function () {
                function e(e, t, n) {
                    this.name = e, this.effect = t, this.duration = n
                }
                return e.prototype.isPermanent = function () {
                    return this.duration < 0
                }, e.prototype.isRoyal = function () {
                    return -10 === this.duration
                }, e
            }(),
            Hu = {
                production: !0,
                gameName: "Villager Kings",
                saveName: "VillagerKingsSave",
                versionString: "1.0.2",
                saveVersion: Fu.V1_0_0
            },
            Gu = " <b>" + Hu.gameName + "</b><br><br>? <br><br><br>!<br>!",
            Bu = [{
                VERSION: "v1.0.1",
                MESSAGE: ['<ul><li></li><li>Fixed weather research description</li><li>Shrine and Church will be available earlier</li><li>"New year!" message will appear on day 1 and only after researching calendar</li><li>Shrine and Church will now log when they become available</li><li>Fixed wrapper boxes sizes</li><li>Pit mine research description changed</li><li>Reduced building button and dropdown font size to prevent overflow</li><li>Aligned building icon and text</li><li>Reduced amount of fur produced by hunter</li><li>Fixed merchant buying items for 0 coins</li><li>Reduced required research points for forestry</li><li>Last tutorial step no longer has "" button</li><li>Available nutrition metric doesn\'t include reserved food</li><li>Researching animals require hay</li><li>Fixed geologist last find description</li></ul>']
            }, {
                VERSION: "v1.0.2",
                MESSAGE: ["<ul><li>Fixed building line icons alignment</li><li>Refactored dev message window into changelog</li><li>Reduced low happiness severity</li><li>Doubled starting food amount</li><li>Buffed berry and mushroom find chance</li></ul>"]
            }],
            Vu = new Du("New King", Ou.ALL, 100, 90),
            Wu = 750,
            ju = 360,
            Yu = 50,
            zu = [{
                text: "Welcome to this quick tutorial that will guide you through basic controls of Villager Kings",
                position: {
                    width: "250px",
                    top: "180px",
                    left: "275px"
                }
            }, {
                text: "To the left you can see navigation menu that will allow you to browse tabs representing different aspects of your village",
                position: {
                    width: "200px",
                    top: "50px",
                    left: "100px"
                }
            }, {
                text: "Right now we are in the village tab and using top menu you can navigate between village regions",
                position: {
                    width: "200px",
                    top: "65px",
                    left: "130px"
                }
            }, {
                text: "In the middle of the village region you can see your buildings. There are many different types of buildings. <br> Some of them produce items, others consume them to produce more advanced items. <br>Currently in your village there are only Huts which produce workers for your village.<br>Housing buildings cannot be stopped and require constant supply of food, fuel (in winter) and clothes",
                position: {
                    width: "400px",
                    top: "180px",
                    left: "200px"
                }
            }, {
                text: "Above your buildings you can see most important metrics for current region.<br>For village those are:<br>1. Population of your village/max population<br>2. Free workers that can be assigned to work<br>3. Size of your empty land where you can build<br>4. Size of your whole village (all regions)<br>5. Your people happiness, which will influence their productivity<br>",
                position: {
                    width: "400px",
                    top: "115px",
                    left: "100px"
                }
            }, {
                text: "That's all here for now let's move into the Forest region<br> using top menu and continue the tutorial there",
                position: {
                    width: "400px",
                    top: "180px",
                    left: "200px"
                }
            }],
            Ku = [{
                text: "In the forest you have two working buildings<br>Logger's hut that cuts forest trees and produces logs<br>and Gatherer that collects various resources when wandering in the forest. Gatherer has two operating modes<br>Worker working here can either focus on looking for food or useful and sometimes rare resources",
                position: {
                    width: "400px",
                    top: "240px",
                    left: "200px"
                }
            }, {
                text: "There are two icons on both sides of building name.<br>To the left there is details icon. If you hover over it, <br>a tooltip with more technical details regarding a building will popup (not active during tutorial),<br>To the right you can see a cog icon which allows you to stop and start production by hiring or firing worker",
                position: {
                    width: "450px",
                    top: "160px",
                    left: "150px"
                }
            }, {
                text: "Above buildings you can see 'Build' and 'Demolish' buttons.<br>First one opens a window with all buildings you can build in this region.<br>In future you will discover many more types of building to build.<br>Second one allows you to set buildings to be demolished by free worker<br>You will receive small portion of resources used to build demolished building",
                position: {
                    width: "450px",
                    top: "100px",
                    left: "50px"
                }
            }, {
                text: "",
                position: {
                    width: "250px",
                    top: "180px",
                    left: "275px"
                }
            }],
            qu = [{
                text: ".<br/><br/>",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }, {
                text: "To the right there are two additional icons present for each resource<br>First one allows you to set amount that will be reserved and no automated action can use them<br>Player initiated action can on the other hand use reserved resources<br>(keep in mind that some actions like for example invasion can still reduce resources below reserved amount!)<br><br>Second icon toggles which resources should be highlighted in the game header",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }, {
                text: "In the header you can highlight up to 7 resources to know their amounts in any tab of the game",
                position: {
                    width: "400px",
                    top: "30px",
                    left: "30px"
                }
            }, {
                text: "That's all for the basics.<br>To really start progressing you should work towards building Workshop in the village which will open new opportunities<br>",
                position: {
                    width: "400px",
                    top: "150px",
                    left: "200px"
                }
            }],
            Qu = {
                ALLOW_FUR_CLOTHES: !0,
                SHOW_FOOD_NUTRITION: !1,
                FOOD_RATIONS: 2,
                CLOTHES_RATIONS: 1,
                ALCOHOL_RATIONS: 1
            },
            $u = {
                START_LAND: 1e3,
                START_FOREST: 1500,
                START_MOUNTAINS: 200,
                START_FOREST_LIMIT: 100,
                FOREST_GROW_PERCENTAGE: .05,
                MINIMAL_FOREST_GROWTH: 50,
                FOREST_GROW_TICKS: 10 * ju
            },
            Zu = {
                getBuilding: function (e) {
                    var t = this.getBuildings().find(function (t) {
                        return t[0] === Ou[e]
                    });
                    if (t) return t[1];
                    console.warn("Invalid building: " + Au.prepareBuildingName(e))
                },
                getBuildings: function () {
                    return Object.entries(this.VILLAGE).concat(Object.entries(this.FORT)).concat(Object.entries(this.FOREST)).concat(Object.entries(this.FIELD)).concat(Object.entries(this.MOUNTAINS)).concat(Object.entries(this.PLATEAU)).concat(Object.entries(this.SEA))
                },
                DEMOLITION_RETURN: .3,
                FOREST: {
                    LOGGERS_HUT: {
                        BASE_POWER: 5,
                        SIZE: 2,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Loggers cut trees in the forest",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -50
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_AXE,
                                amount: 5
                            }]
                        },
                        UPGRADES: [{
                            BASE_POWER: 7.5,
                            COMPLEXITY: 10,
                            PREREQUISITES: [Eu.URBAN_PLANNING],
                            COST: [{
                                resource: vu.PLANK,
                                amount: 10
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 5
                            }, {
                                resource: vu.STONE_AXE,
                                amount: 5
                            }]
                        }, {
                            BASE_POWER: 10,
                            COMPLEXITY: 20,
                            PREREQUISITES: [],
                            COST: [{
                                resource: vu.PLANK,
                                amount: 20
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 20
                            }, {
                                resource: vu.COPPER,
                                amount: 10
                            }, {
                                resource: vu.STONE_AXE,
                                amount: 10
                            }]
                        }]
                    },
                    FORESTER: {
                        BASE_POWER: 10,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Forester can plant new trees and control natural growth of the forest",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.STONE_SHOVEL,
                            amount: 2
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 5
                            }]
                        }
                    },
                    SAWMILL: {
                        BASE_POWER: 3,
                        SIZE: 5,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Sawmill cut logs into planks",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }],
                        TEXT: "cutting",
                        INPUT_RESOURCES: [{
                            resource: vu.LOG,
                            amount: 3
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.PLANK,
                            amount: 1
                        }]
                    },
                    GATHERER: {
                        BASE_POWER: 10,
                        SIZE: 5,
                        COMPLEXITY: 3,
                        DESCRIPTION: "Gatherer can find all kinds of useful things in the forest",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -75
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BERRY_CHANCE: 30,
                        MUSHROOM_CHANCE: 30,
                        WHEAT_CHANCE: 3,
                        BRUSHWOOD_CHANCE: 30,
                        STONE_CHANCE: 10,
                        LOG_CHANCE: 5,
                        COPPER_CHANCE: .5
                    },
                    HUNTER_LODGE: {
                        BASE_POWER: 2,
                        SIZE: 5,
                        COMPLEXITY: 8,
                        DESCRIPTION: "Hunts animals for meat and fur",
                        COST: [{
                            resource: vu.LOG,
                            amount: 15
                        }, {
                            resource: vu.PLANK,
                            amount: 5
                        }, {
                            resource: vu.BOW,
                            amount: 1
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.BOW,
                                amount: 5
                            }]
                        }
                    },
                    TANNERY: {
                        BASE_POWER: 5,
                        SIZE: 5,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Turns furs into leather",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }],
                        TEXT: "tanning",
                        INPUT_RESOURCES: [{
                            resource: vu.FUR,
                            amount: 1
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.LEATHER,
                            amount: 1
                        }]
                    }
                },
                MOUNTAINS: {
                    QUARRY: {
                        BASE_POWER: 5,
                        SIZE: 20,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Cuts stone out of mountains",
                        COST: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_PICKAXE,
                                amount: 5
                            }]
                        }
                    },
                    GEOLOGIST: {
                        BASE_POWER: 1,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Looks for useful rocks",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        COAL_CHANCE: 10,
                        GOLD_CHANCE: 2,
                        SILVER_CHANCE: 4,
                        COPPER_CHANCE: 6,
                        TIN_CHANCE: 4,
                        IRON_CHANCE: 2
                    },
                    PIT_MINE: {
                        BASE_POWER: 10,
                        SIZE: 20,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Allows workers to mine ores",
                        COST: [{
                            resource: vu.LOG,
                            amount: 60
                        }, {
                            resource: vu.STONE_PICKAXE,
                            amount: 5
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_PICKAXE,
                                amount: 5
                            }, {
                                resource: vu.STONE_SHOVEL,
                                amount: 5
                            }]
                        }
                    },
                    STONEMASON: {
                        BASE_POWER: 3,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Shapes stones for building",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 10
                        }],
                        TEXT: "cutting",
                        INPUT_RESOURCES: [{
                            resource: vu.STONE,
                            amount: 3
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.CUT_STONE,
                            amount: 1
                        }]
                    },
                    SMITHY: {
                        BASE_POWER: 5,
                        SIZE: 10,
                        COMPLEXITY: 20,
                        DESCRIPTION: "Provides furnace for smelting ore and metal items",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }, {
                            resource: vu.COPPER,
                            amount: 5
                        }],
                        RECIPES: [{
                            recipe: Pu.COPPER,
                            prerequisite: Eu.SMITHY
                        }, {
                            recipe: Pu.TIN,
                            prerequisite: Eu.SMITHY
                        }, {
                            recipe: Pu.BRONZE,
                            prerequisite: Eu.BRONZE
                        }, {
                            recipe: Pu.GOLD,
                            prerequisite: Eu.ADVANCED_ORE_PROCESSING
                        }, {
                            recipe: Pu.SILVER,
                            prerequisite: Eu.ADVANCED_ORE_PROCESSING
                        }, {
                            recipe: Pu.IRON,
                            prerequisite: Eu.IRON
                        }, {
                            recipe: Pu.STEEL,
                            prerequisite: Eu.STEEL
                        }, {
                            recipe: Pu.SWORD,
                            prerequisite: Eu.SMITHY
                        }, {
                            recipe: Pu.LIGHT_ARMOR,
                            prerequisite: Eu.SMITHY
                        }, {
                            recipe: Pu.HEAVY_ARMOR,
                            prerequisite: Eu.SMITHY
                        }]
                    },
                    MINT: {
                        BASE_POWER: 5,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Produces coins from gold",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }, {
                            resource: vu.BRONZE,
                            amount: 10
                        }],
                        TEXT: "minting",
                        INPUT_RESOURCES: [{
                            resource: vu.GOLD,
                            amount: 1
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.COINS,
                            amount: 100
                        }]
                    }
                },
                VILLAGE: {
                    HUT: {
                        BASE_POWER: .5,
                        SIZE: 2,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Very primitive shelter but keeps rain and cold away",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.BRUSHWOOD,
                            amount: 10
                        }],
                        MAX_OCCUPANTS: 2
                    },
                    HOUSE: {
                        BASE_POWER: .7,
                        SIZE: 2,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Bigger and more durable shelter",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }],
                        MAX_OCCUPANTS: 6
                    },
                    WAREHOUSE: {
                        BASE_POWER: 0,
                        SIZE: 20,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Stores selected type of resources",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 5
                        }]
                    },
                    WORKSHOP: {
                        BASE_POWER: 5,
                        RESEARCH_POWER: 1,
                        CRAFTING_POWER: 1.5,
                        SIZE: 5,
                        COMPLEXITY: 15,
                        DESCRIPTION: "At the workshop workers can research new things or build complex things",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.BRUSHWOOD,
                            amount: 10
                        }]
                    },
                    MARKETPLACE: {
                        BASE_POWER: 1,
                        SIZE: 20,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Place for trading with other villages",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 20
                        }]
                    },
                    TAVERN: {
                        BASE_POWER: 1,
                        SIZE: 10,
                        COMPLEXITY: 20,
                        DESCRIPTION: "Meeting place",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 20
                        }, {
                            resource: vu.BRUSHWOOD,
                            amount: 20
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: 25
                        }, {
                            weather: xu.STORM,
                            effect: 25
                        }]
                    },
                    BAKERY: {
                        BASE_POWER: 10,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Bakes bread from flour",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.STONE,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }],
                        TEXT: "baking",
                        INPUT_RESOURCES: [{
                            resource: vu.FLOUR,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.BREAD,
                            amount: 1
                        }],
                        BUFF: {
                            name: "Bread oven",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 20
                            }]
                        }
                    },
                    TAILOR: {
                        BASE_POWER: 5,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Produces clothes from fabric",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }],
                        TEXT: "sewing",
                        INPUT_RESOURCES: [{
                            resource: vu.FABRIC,
                            amount: 3
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.CLOTHES,
                            amount: 1
                        }]
                    },
                    SHRINE: {
                        BASE_POWER: 1,
                        POPULATION: 8,
                        SIZE: 2,
                        COMPLEXITY: 8,
                        DESCRIPTION: "Place for prayer and offerings",
                        COST: [{
                            resource: vu.LOG,
                            amount: 5
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 5
                        }, {
                            resource: vu.VEGETABLE_SOUP,
                            amount: 5
                        }, {
                            resource: vu.MEAT_SOUP,
                            amount: 5
                        }]
                    },
                    CHURCH: {
                        BASE_POWER: 1,
                        POPULATION: 20,
                        SIZE: 10,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Place of prayer and contemplation",
                        COST: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 30
                        }],
                        BUFF: {
                            name: "Offering",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.COINS,
                                amount: 200
                            }]
                        }
                    }
                },
                FORT: {
                    BARRACKS: {
                        BASE_POWER: 0,
                        SIZE: 10,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Housing for troops",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }]
                    },
                    TRAINING_SQUARE: {
                        BASE_POWER: 10,
                        SIZE: 10,
                        COMPLEXITY: 3,
                        DESCRIPTION: "Place for training recruits",
                        COST: [{
                            resource: vu.STONE,
                            amount: 40
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -50
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }]
                    },
                    STOCKADE: {
                        BASE_POWER: 10,
                        SIZE: 50,
                        COMPLEXITY: 100,
                        DESCRIPTION: "Protective wall around the village to protect against attackers",
                        COST: [{
                            resource: vu.LOG,
                            amount: 100
                        }, {
                            resource: vu.STONE,
                            amount: 10
                        }],
                        DEFENSE: 50,
                        DURABILITY: 50
                    },
                    WOODEN_TOWER: {
                        BASE_POWER: 10,
                        SIZE: 10,
                        COMPLEXITY: 30,
                        DESCRIPTION: " Provide passive defense power",
                        COST: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }],
                        DEFENSE: 10,
                        DURABILITY: 50
                    },
                    STONE_TOWER: {
                        BASE_POWER: 10,
                        SIZE: 10,
                        COMPLEXITY: 30,
                        DESCRIPTION: "Provide passive defense power, more durable than wooden tower",
                        COST: [{
                            resource: vu.CUT_STONE,
                            amount: 40
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }],
                        DEFENSE: 20,
                        DURABILITY: 100
                    },
                    STASH: {
                        BASE_POWER: 1,
                        SIZE: 10,
                        COMPLEXITY: 30,
                        DESCRIPTION: "Complex hidden tunnels allow us to hide some resources in case of invasion",
                        COST: [{
                            resource: vu.LOG,
                            amount: 30
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.STONE_PICKAXE,
                            amount: 5
                        }]
                    }
                },
                FIELD: {
                    FARM: {
                        BASE_POWER: 20,
                        SIZE: 15,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Farm allows workers to work on fields, orchard and pastures",
                        COST: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }, {
                            resource: vu.STONE,
                            amount: 10
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -50
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }],
                        BUFF: {
                            name: "New tools",
                            effect: 5,
                            duration: 360,
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 5
                            }]
                        }
                    },
                    WINDMILL: {
                        BASE_POWER: 5,
                        SIZE: 10,
                        COMPLEXITY: 15,
                        DESCRIPTION: "Windmill turns wheat into flour",
                        COST: [{
                            resource: vu.LOG,
                            amount: 30
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.FABRIC,
                            amount: 20
                        }],
                        TEXT: "milling",
                        INPUT_RESOURCES: [{
                            resource: vu.WHEAT,
                            amount: 1
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.FLOUR,
                            amount: 1
                        }],
                        WEATHER: [{
                            weather: xu.WIND,
                            effect: 50
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }]
                    },
                    COTTON_MILL: {
                        BASE_POWER: 5,
                        SIZE: 5,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Spins cotton into fabric",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }],
                        TEXT: "spinning",
                        INPUT_RESOURCES: [{
                            resource: vu.COTTON,
                            amount: 2
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.FABRIC,
                            amount: 1
                        }]
                    },
                    BREWERY: {
                        BASE_POWER: 1,
                        SIZE: 15,
                        COMPLEXITY: 20,
                        DESCRIPTION: "Brews delicious beer",
                        COST: [{
                            resource: vu.LOG,
                            amount: 30
                        }, {
                            resource: vu.PLANK,
                            amount: 30
                        }, {
                            resource: vu.COPPER,
                            amount: 10
                        }],
                        TEXT: "brewing",
                        INPUT_RESOURCES: [{
                            resource: vu.BARLEY,
                            amount: 10
                        }, {
                            resource: vu.HOP,
                            amount: 5
                        }, {
                            resource: vu.FUEL,
                            amount: 3
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.BEER,
                            amount: 10
                        }]
                    },
                    FIELD: {
                        BASE_POWER: 1,
                        SIZE: 50,
                        COMPLEXITY: 1,
                        DESCRIPTION: "Various crops can be grown here",
                        COST: [{
                            resource: vu.STONE,
                            amount: 4
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: 50
                        }, {
                            weather: xu.SUN,
                            effect: 50
                        }, {
                            weather: xu.CLOUDS,
                            effect: -25
                        }]
                    },
                    BUTCHER: {
                        BASE_POWER: 5,
                        SIZE: 15,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Turns animals into meat",
                        COST: [{
                            resource: vu.LOG,
                            amount: 15
                        }, {
                            resource: vu.PLANK,
                            amount: 10
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 5
                        }]
                    },
                    ORCHARD: {
                        BASE_POWER: 1,
                        SIZE: 50,
                        COMPLEXITY: 1,
                        DESCRIPTION: "Various fruit trees and bushes can be grown here",
                        COST: [{
                            resource: vu.LOG,
                            amount: 5
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: 50
                        }, {
                            weather: xu.SUN,
                            effect: 50
                        }, {
                            weather: xu.CLOUDS,
                            effect: -25
                        }]
                    },
                    PASTURE: {
                        BASE_POWER: 1,
                        SIZE: 50,
                        COMPLEXITY: 3,
                        DESCRIPTION: "Many animals can be grown here",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }]
                    },
                    WINERY: {
                        BASE_POWER: 1,
                        SIZE: 30,
                        COMPLEXITY: 10,
                        DESCRIPTION: "Extracts and ferments grape juices",
                        COST: [{
                            resource: vu.LOG,
                            amount: 20
                        }, {
                            resource: vu.PLANK,
                            amount: 20
                        }, {
                            resource: vu.COPPER,
                            amount: 10
                        }],
                        TEXT: "fermenting",
                        INPUT_RESOURCES: [{
                            resource: vu.GRAPE,
                            amount: 35
                        }],
                        OUTPUT_RESOURCES: [{
                            resource: vu.WINE,
                            amount: 8
                        }]
                    }
                },
                SEA: {
                    FISHERS_HUT: {
                        BASE_POWER: 5,
                        SIZE: 2,
                        COMPLEXITY: 5,
                        DESCRIPTION: "Fishers catch fish in the sea",
                        COST: [{
                            resource: vu.LOG,
                            amount: 10
                        }, {
                            resource: vu.PLANK,
                            amount: 5
                        }, {
                            resource: vu.COPPER,
                            amount: 1
                        }],
                        WEATHER: [{
                            weather: xu.RAIN,
                            effect: -100
                        }, {
                            weather: xu.STORM,
                            effect: -100
                        }, {
                            weather: xu.WIND,
                            effect: 25
                        }]
                    },
                    SCHOOL_OF_FISH: {
                        BREED_CHANCE: 500,
                        BREED_AMOUNT: 10,
                        SPLIT_THRESHOLD: 400,
                        SPLIT_CHANCE: 100,
                        NEW_SCHOOL_CHANCE: 100,
                        NEW_SCHOOL_SIZE: 50
                    },
                    SHARKS: {
                        FEED_CHANCE: 15,
                        FEED_AMOUNT: 1,
                        BREED_THRESHOLD: 500,
                        BREED_CHANCE: 100,
                        DIE_THRESHOLD: 300,
                        DIE_CHANCE: 100
                    }
                },
                PLATEAU: {
                    STONEHENGE: {
                        BASE_POWER: 3,
                        SIZE: 50,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Huge rocks mark place for old rituals and scientific experiments",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [{
                            building: Ou.WORKSHOP,
                            value: 20
                        }],
                        RP: 20
                    },
                    PYRAMID: {
                        BASE_POWER: 3,
                        SIZE: 100,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Although it's just \"putting one rock on the other\", our construction worker's skill will be put to the test with this huge project",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 5
                        }],
                        BUILDING_EFFECTS: [{
                            building: Ou.CONSTRUCTION,
                            value: 10
                        }, {
                            building: Ou.DECONSTRUCTION,
                            value: 10
                        }],
                        RP: 20
                    },
                    HANGING_GARDEN: {
                        BASE_POWER: 3,
                        SIZE: 30,
                        COMPLEXITY: 0,
                        DESCRIPTION: "With all those plants that cover entire buildings we truly became masters of flora",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_AXE,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 75
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.WHEAT,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BARLEY,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.APPLE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.HOP,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COTTON,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.GRAPE,
                                amount: 100
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [{
                            building: Ou.FARM,
                            value: 15
                        }],
                        RP: 20
                    },
                    COLOSSUS: {
                        BASE_POWER: 3,
                        SIZE: 50,
                        COMPLEXITY: 0,
                        DESCRIPTION: "This giant statue watches over our troops both during defense and attack",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 75
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 75
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 75
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE,
                                amount: 75
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 75
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 100
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }],
                            progress: 10
                        }],
                        ARMY_EFFECTS: [{
                            troop: Iu.ALL,
                            value: 15
                        }],
                        RP: 20
                    },
                    UNDERGROUND_CITY: {
                        BASE_POWER: 3,
                        SIZE: 0,
                        COMPLEXITY: 0,
                        DESCRIPTION: "After connecting empty mines tunnels and repurposing them we will create entire underground city",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 20
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 20
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 20
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 50
                            }, {
                                resource: vu.CUT_STONE,
                                amount: 50
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [{
                            building: Ou.PIT_MINE,
                            value: 15
                        }, {
                            building: Ou.QUARRY,
                            value: 15
                        }, {
                            building: Ou.GEOLOGIST,
                            value: 15
                        }],
                        RP: 20
                    },
                    GREAT_LIGHTHOUSE: {
                        BASE_POWER: 3,
                        SIZE: 50,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Light from this building can be seen as far as anyone would like to ever travel",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [],
                        RP: 20
                    },
                    SACRED_GROVE: {
                        BASE_POWER: 3,
                        SIZE: 50,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Collection of the oldest and greatest forest fauna and flora in one place",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 100
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CHICKEN,
                                amount: 20
                            }, {
                                resource: vu.HORSE,
                                amount: 10
                            }, {
                                resource: vu.PIG,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 200
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 200
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 100
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CHICKEN,
                                amount: 20
                            }, {
                                resource: vu.HORSE,
                                amount: 10
                            }, {
                                resource: vu.PIG,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 100
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CHICKEN,
                                amount: 20
                            }, {
                                resource: vu.HORSE,
                                amount: 10
                            }, {
                                resource: vu.PIG,
                                amount: 10
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 100
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.BERRY,
                                amount: 200
                            }, {
                                resource: vu.MUSHROOM,
                                amount: 200
                            }],
                            progress: 10
                        }],
                        BUILDING_EFFECTS: [{
                            building: Ou.FORESTER,
                            value: 10
                        }, {
                            building: Ou.LOGGERS_HUT,
                            value: 10
                        }, {
                            building: Ou.HUNTER_LODGE,
                            value: 10
                        }, {
                            building: Ou.GATHERER,
                            value: 10
                        }],
                        RP: 20
                    },
                    ASCENSION_TEMPLE: {
                        BASE_POWER: 1.5,
                        SIZE: 100,
                        COMPLEXITY: 0,
                        DESCRIPTION: "Mystical place where your fate will be determined",
                        COST: [],
                        STAGES: [{
                            cost: [{
                                resource: vu.STONE_SHOVEL,
                                amount: 10
                            }, {
                                resource: vu.STONE_HAMMER,
                                amount: 10
                            }, {
                                resource: vu.STONE_PICKAXE,
                                amount: 10
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.LOG,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 5
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 50
                            }, {
                                resource: vu.IRON,
                                amount: 50
                            }, {
                                resource: vu.BRONZE,
                                amount: 50
                            }, {
                                resource: vu.GOLD,
                                amount: 50
                            }, {
                                resource: vu.SILVER,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 50
                            }, {
                                resource: vu.IRON,
                                amount: 50
                            }, {
                                resource: vu.BRONZE,
                                amount: 50
                            }, {
                                resource: vu.GOLD,
                                amount: 50
                            }, {
                                resource: vu.SILVER,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 50
                            }, {
                                resource: vu.IRON,
                                amount: 50
                            }, {
                                resource: vu.BRONZE,
                                amount: 50
                            }, {
                                resource: vu.GOLD,
                                amount: 50
                            }, {
                                resource: vu.SILVER,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.CUT_STONE,
                                amount: 100
                            }, {
                                resource: vu.PLANK,
                                amount: 100
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.COPPER,
                                amount: 50
                            }, {
                                resource: vu.IRON,
                                amount: 50
                            }, {
                                resource: vu.BRONZE,
                                amount: 50
                            }, {
                                resource: vu.GOLD,
                                amount: 50
                            }, {
                                resource: vu.SILVER,
                                amount: 50
                            }],
                            progress: 10
                        }, {
                            cost: [{
                                resource: vu.GOLD,
                                amount: 100
                            }, {
                                resource: vu.SILVER,
                                amount: 100
                            }],
                            progress: 10
                        }],
                        RP: 50
                    }
                },
                CONSTRUCTION_SITE: {
                    BASE_POWER: 10,
                    SIZE: 0,
                    COMPLEXITY: 0,
                    DESCRIPTION: "",
                    COST: [],
                    WEATHER: [{
                        weather: xu.RAIN,
                        effect: -75
                    }, {
                        weather: xu.STORM,
                        effect: -100
                    }]
                },
                DECONSTRUCTION_SITE: {
                    BASE_POWER: 10,
                    SIZE: 0,
                    COMPLEXITY: 0,
                    DESCRIPTION: "",
                    COST: [],
                    WEATHER: [{
                        weather: xu.RAIN,
                        effect: -75
                    }, {
                        weather: xu.STORM,
                        effect: -100
                    }]
                }
            },
            Xu = {
                getResource: function (e) {
                    var t = this.getResources().find(function (t) {
                        return t[0] === vu[e]
                    });
                    if (t) return t[1];
                    console.warn("Invalid resource: " + Au.prepareResourceName(e))
                },
                getResourcesByType: function (e) {
                    var t = this.getResources().filter(function (t) {
                        return t[1].TYPES.includes(e)
                    });
                    if (t) return t;
                    console.warn("Invalid resource type: " + Au.prepareResourceTypeName(e))
                },
                getResources: function () {
                    return Object.entries(this.RAW).concat(Object.entries(this.PROCESSED)).concat(Object.entries(this.FOOD)).concat(Object.entries(this.TOOLS))
                },
                DEFAULT_AMOUNT: 0,
                DEFAULT_LIMIT: 50,
                DEFAULT_VISIBLE: !1,
                DEFAULT_HIGHLIGHTED: !1,
                RAW: {
                    LOG: {
                        TYPES: [Cu.RAW, Cu.FUEL],
                        TRADE_VALUE: 2,
                        AMOUNT: 20,
                        LIMIT: 100,
                        VISIBLE: !0,
                        HIGHLIGHTED: !0,
                        FUEL_PRIORITY: 3,
                        POWER: 10
                    },
                    BRUSHWOOD: {
                        TYPES: [Cu.RAW, Cu.FUEL],
                        TRADE_VALUE: 1,
                        AMOUNT: 20,
                        LIMIT: 100,
                        VISIBLE: !0,
                        HIGHLIGHTED: !0,
                        FUEL_PRIORITY: 4,
                        POWER: 5
                    },
                    STONE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 2,
                        AMOUNT: 20,
                        LIMIT: 100,
                        VISIBLE: !0
                    },
                    FUR: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 3
                    },
                    WHEAT: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 2
                    },
                    BARLEY: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 3
                    },
                    HOP: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 3
                    },
                    COTTON: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 3
                    },
                    HAY: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 2
                    },
                    CHICKEN: {
                        TYPES: [Cu.RAW, Cu.ANIMAL],
                        LIMIT: 0,
                        SIZE: 2,
                        MEAT: 4,
                        REPRODUCTION_SPEED: 10,
                        BUTCHERING_DIFFICULTY: 1,
                        TRADE_VALUE: 20
                    },
                    COW: {
                        TYPES: [Cu.RAW, Cu.ANIMAL],
                        LIMIT: 0,
                        SIZE: 5,
                        MEAT: 30,
                        REPRODUCTION_SPEED: 1,
                        BUTCHERING_DIFFICULTY: 5,
                        TRADE_VALUE: 40
                    },
                    PIG: {
                        TYPES: [Cu.RAW, Cu.ANIMAL],
                        LIMIT: 0,
                        SIZE: 3,
                        MEAT: 15,
                        REPRODUCTION_SPEED: 5,
                        BUTCHERING_DIFFICULTY: 3,
                        TRADE_VALUE: 30
                    },
                    HORSE: {
                        TYPES: [Cu.RAW, Cu.ANIMAL],
                        LIMIT: 0,
                        SIZE: 5,
                        MEAT: 10,
                        REPRODUCTION_SPEED: 1,
                        BUTCHERING_DIFFICULTY: 5,
                        TRADE_VALUE: 50
                    },
                    COAL: {
                        TYPES: [Cu.RAW, Cu.FUEL],
                        TRADE_VALUE: 8,
                        FUEL_PRIORITY: 2,
                        POWER: 40
                    },
                    GOLD_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 40
                    },
                    SILVER_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 20
                    },
                    COPPER_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 13
                    },
                    TIN_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 20
                    },
                    IRON_ORE: {
                        TYPES: [Cu.RAW],
                        TRADE_VALUE: 40
                    }
                },
                PROCESSED: {
                    PLANK: {
                        TYPES: [Cu.PROCESSED, Cu.FUEL],
                        TRADE_VALUE: 3,
                        VISIBLE: !0,
                        FUEL_PRIORITY: 5,
                        POWER: 20
                    },
                    CUT_STONE: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 3
                    },
                    FUEL: {
                        TYPES: [Cu.PROCESSED, Cu.FUEL],
                        TRADE_VALUE: 3,
                        FUEL_PRIORITY: 1,
                        POWER: 12.5
                    },
                    FLOUR: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 3
                    },
                    FABRIC: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 7
                    },
                    LEATHER: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 4
                    },
                    COINS: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 1,
                        LIMIT: Number.MAX_SAFE_INTEGER
                    },
                    COPPER: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 32
                    },
                    GOLD: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 90
                    },
                    SILVER: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 45
                    },
                    TIN: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 45
                    },
                    BRONZE: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 50
                    },
                    IRON: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 135
                    },
                    STEEL: {
                        TYPES: [Cu.PROCESSED],
                        TRADE_VALUE: 190
                    }
                },
                FOOD: {
                    BERRY: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 2,
                        AMOUNT: 50,
                        LIMIT: 100,
                        VISIBLE: !0,
                        HIGHLIGHTED: !0,
                        POWER: 50
                    },
                    MUSHROOM: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 2,
                        AMOUNT: 50,
                        LIMIT: 100,
                        VISIBLE: !0,
                        HIGHLIGHTED: !0,
                        POWER: 50
                    },
                    FISH: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 3,
                        POWER: 75
                    },
                    APPLE: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 1,
                        POWER: 20
                    },
                    GRAPE: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 1,
                        POWER: 20
                    },
                    BREAD: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 10,
                        POWER: 300
                    },
                    MEAT: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 3,
                        POWER: 75
                    },
                    EGG: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 1,
                        POWER: 25
                    },
                    MILK: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 1,
                        POWER: 25
                    },
                    COOKED_MEAT: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 7,
                        POWER: 175
                    },
                    VEGETABLE_SOUP: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 8,
                        POWER: 225
                    },
                    MEAT_SOUP: {
                        TYPES: [Cu.FOOD, Cu.CONSUMABLE],
                        TRADE_VALUE: 8,
                        POWER: 225
                    },
                    BEER: {
                        TYPES: [Cu.FOOD],
                        TRADE_VALUE: 5
                    },
                    WINE: {
                        TYPES: [Cu.FOOD],
                        TRADE_VALUE: 5
                    }
                },
                TOOLS: {
                    CLOTHES: {
                        TYPES: [Cu.TOOLS],
                        VISIBLE: !0,
                        AMOUNT: 10,
                        TRADE_VALUE: 25
                    },
                    BOW: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_PICKAXE: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_SHOVEL: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_AXE: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_SPEAR: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    STONE_HAMMER: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 35
                    },
                    SWORD: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 190
                    },
                    WOODEN_SHIELD: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 30
                    },
                    LEATHER_ARMOR: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 50
                    },
                    LIGHT_ARMOR: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 400
                    },
                    HEAVY_ARMOR: {
                        TYPES: [Cu.TOOLS],
                        TRADE_VALUE: 550
                    }
                }
            },
            Ju = {
                getTroop: function (e) {
                    var t = Object.entries(this.TROOPS).find(function (t) {
                        return t[0] === Iu[e]
                    });
                    if (t) return t[1];
                    console.warn("Invalid troop: " + Au.prepareTroopName(e))
                },
                TROOPS: {
                    MILITIA: {
                        RECRUIT_TIME: 20,
                        STRENGTH: 1,
                        DEFENSE: 2,
                        COST: [{
                            resource: vu.FUR,
                            amount: 5
                        }]
                    },
                    SPEARMAN: {
                        RECRUIT_TIME: 50,
                        STRENGTH: 5,
                        DEFENSE: 2,
                        COST: [{
                            resource: vu.STONE_SPEAR,
                            amount: 1
                        }, {
                            resource: vu.LEATHER_ARMOR,
                            amount: 1
                        }]
                    },
                    ARCHER: {
                        RECRUIT_TIME: 50,
                        STRENGTH: 3,
                        DEFENSE: 4,
                        COST: [{
                            resource: vu.BOW,
                            amount: 1
                        }, {
                            resource: vu.LEATHER_ARMOR,
                            amount: 1
                        }]
                    },
                    SWORDSMAN: {
                        RECRUIT_TIME: 50,
                        STRENGTH: 10,
                        DEFENSE: 4,
                        COST: [{
                            resource: vu.SWORD,
                            amount: 1
                        }, {
                            resource: vu.WOODEN_SHIELD,
                            amount: 1
                        }, {
                            resource: vu.LEATHER_ARMOR,
                            amount: 1
                        }]
                    }
                },
                MISSIONS: {
                    TRAIN: {
                        TIME: 10,
                        DESCRIPTION: "Train your troops",
                        REQUIRED_STRENGTH: 0,
                        REQUIRED_DEFENSE: 0,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }],
                        FINISH: function (e, t, n) {
                            t.troops.forEach(function (n) {
                                var r = t.squadDefense + 2 * t.squadStrength;
                                e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Training", n[0].troop, 5, r), !1)
                            })
                        }
                    },
                    DEFEND: {
                        TIME: 20,
                        DESCRIPTION: "Protect your land and reduce chance for being invaded",
                        REQUIRED_STRENGTH: 0,
                        REQUIRED_DEFENSE: 20,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }, {
                            resource: vu.LOG,
                            amount: 10
                        }],
                        FINISH: function (e, t, n) {
                            e.getService(Nu.ARMY).decreaseInvasionThreat(t.squadDefense)
                        }
                    },
                    SPY: {
                        TIME: 20,
                        DESCRIPTION: "Try to find out military strength of the enemy",
                        REQUIRED_STRENGTH: 20,
                        REQUIRED_DEFENSE: 0,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }, {
                            resource: vu.CLOTHES,
                            amount: 1
                        }],
                        FINISH: function (e, t, n) {
                            for (var r = e.getService(Nu.ARMY).generateArmyOfPower(n / 10), i = function () {
                                    var n = e.getService(Nu.ARMY).getRandomTroop(r),
                                        i = e.getService(Nu.ARMY).getRandomTroop(t.troops),
                                        l = i.strength * e.getService(Nu.ARMY).getTroopEffectsMultiplier(i.troop) - n.defense,
                                        o = 50;
                                    l > 0 ? (o += 2 * l) > 90 && (o = 90) : (o -= 2 * l) < 10 && (o = 10), Mu.chance(o / 100) ? (r.find(function (e) {
                                        return e[0].troop === n.troop
                                    })[1] -= 1, r = r.filter(function (e) {
                                        return e[1] > 0
                                    })) : t.troops.find(function (e) {
                                        return e[0].troop === i.troop
                                    })[1] -= 1
                                }; r.length > 0 && e.getService(Nu.ARMY).hasTroops(t.troops);) i();
                            r.length > 0 ? e.getService(Nu.LOG).log("Our spies have been discovered and killed") : e.getService(Nu.LOG).log("Our spies discovered that enemy power is: " + this.enemyPower)
                        }
                    },
                    DIVERSION: {
                        TIME: 30,
                        DESCRIPTION: "We need to bring enemy power down",
                        REQUIRED_STRENGTH: 40,
                        REQUIRED_DEFENSE: 20,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }, {
                            resource: vu.CLOTHES,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 2
                        }],
                        FINISH: function (e, t, n) {
                            for (var r = e.getService(Nu.ARMY).generateArmyOfPower(n / 5), i = function () {
                                    var n = e.getService(Nu.ARMY).getRandomTroop(r),
                                        i = e.getService(Nu.ARMY).getRandomTroop(t.troops),
                                        l = i.strength * e.getService(Nu.ARMY).getTroopEffectsMultiplier(i.troop) - n.defense,
                                        o = 50;
                                    l > 0 ? (o += 2 * l) > 90 && (o = 90) : (o -= 2 * l) < 10 && (o = 10), Mu.chance(o / 100) ? (r.find(function (e) {
                                        return e[0].troop === n.troop
                                    })[1] -= 1, r = r.filter(function (e) {
                                        return e[1] > 0
                                    })) : t.troops.find(function (e) {
                                        return e[0].troop === i.troop
                                    })[1] -= 1
                                }; r.length > 0 && e.getService(Nu.ARMY).hasTroops(t.troops);) i();
                            r.length > 0 ? e.getService(Nu.LOG).log("Our diversion party has been discovered and killed") : (e.getService(Nu.LOG).log("Our diversion worked"), e.getService(Nu.ARMY).reduceEnemyPower(n / 10))
                        }
                    },
                    PLUNDER: {
                        TIME: 30,
                        DESCRIPTION: "Plunder your enemies",
                        REQUIRED_STRENGTH: 50,
                        REQUIRED_DEFENSE: 0,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 100
                        }],
                        FINISH: function (e, t, n) {
                            for (var r = e.getService(Nu.ARMY).generateArmyOfPower(n / 2), i = function () {
                                    var n = e.getService(Nu.ARMY).getRandomTroop(r),
                                        i = e.getService(Nu.ARMY).getRandomTroop(t.troops),
                                        l = i.strength * e.getService(Nu.ARMY).getTroopEffectsMultiplier(i.troop) - n.defense,
                                        o = 50;
                                    l > 0 ? (o += 2 * l) > 90 && (o = 90) : (o -= 2 * l) < 10 && (o = 10), Mu.chance(o / 100) ? (r.find(function (e) {
                                        return e[0].troop === n.troop
                                    })[1] -= 1, r = r.filter(function (e) {
                                        return e[1] > 0
                                    })) : t.troops.find(function (e) {
                                        return e[0].troop === i.troop
                                    })[1] -= 1
                                }; r.length > 0 && e.getService(Nu.ARMY).hasTroops(t.troops);) i();
                            if (r.length > 0) e.getService(Nu.LOG).log("Our plunder party has been defeated");
                            else {
                                t.squadStrength = 0, t.squadDefense = 0, t.troops.forEach(function (n) {
                                    t.squadStrength += n[0].strength * n[1] * e.getService(Nu.ARMY).getTroopEffectsMultiplier(n[0].troop), t.squadDefense += n[0].defense * n[1] * e.getService(Nu.ARMY).getTroopEffectsMultiplier(n[0].troop)
                                });
                                for (var l = e.getService(Nu.RESOURCES), o = 20 * t.squadStrength, u = new Map, s = "Loot:<br>", a = Array.from(l.getResources().values()).filter(function (e) {
                                        return e.isVisible()
                                    }).map(function (e) {
                                        return {
                                            item: e.resource,
                                            chance: e.prioritise ? 10 : 1
                                        }
                                    }); o > 0;) {
                                    var c, p = Mu.randomWeightedExcept(a, []),
                                        h = Xu.getResource(p);
                                    c = Mu.randomBetween(1, h.TRADE_VALUE < 10 ? 20 : h.TRADE_VALUE < 50 ? 10 : h.TRADE_VALUE < 300 ? 5 : 2), u.has(p) ? u.set(p, u.get(p) + c) : u.set(p, c), s += "&emsp;" + c + " " + Au.prepareResourceName(p) + "<br>", o -= c * h.TRADE_VALUE
                                }
                                e.getService(Nu.LOG).log(s), l.increaseResources(u, !0), e.getService(Nu.ARMY).reduceEnemyPower(t.squadStrength / 4)
                            }
                        }
                    },
                    EXPEDITION: {
                        TIME: 50,
                        DESCRIPTION: "Look for new land, other villages and treasures",
                        REQUIRED_STRENGTH: 25,
                        REQUIRED_DEFENSE: 25,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 200
                        }],
                        FINISH: function (e, t, n) {
                            var r = 0;
                            t.troops.forEach(function (e) {
                                return r += e[1]
                            });
                            var i = t.squadStrength + t.squadDefense,
                                l = Math.random();
                            l > .7 && (l = .7);
                            for (var o = 0, u = 0, s = 0; i > 0;) {
                                var a = Mu.randomBetween(1, 3);
                                1 === a ? o += 1 : 2 === a ? u += 1 : 3 === a && (s += 1), i -= 1
                            }
                            var c = "Discovered:<br>";
                            o > 0 && (e.getService(Nu.LAND).increaseLand(o, !0), c += "&emsp;" + o + " empty land"), u > 0 && (e.getService(Nu.LAND).increaseForest(u, !1), c += "&emsp;" + u + " forest"), s > 0 && (e.getService(Nu.LAND).increaseMountains(s), c += "&emsp;" + s + " mountains"), e.getService(Nu.LOG).log(c), t.troops.forEach(function (e) {
                                return e[1] = Math.floor(e[1] * (1 - l))
                            })
                        }
                    },
                    CONQUER: {
                        TIME: 100,
                        DESCRIPTION: "Conquer your enemies and claim their land",
                        REQUIRED_STRENGTH: 200,
                        REQUIRED_DEFENSE: 100,
                        COST: [{
                            resource: vu.FOOD,
                            amount: 200
                        }],
                        FINISH: function (e, t, n) {
                            for (var r = e.getService(Nu.ARMY).generateArmyOfPower(n), i = function () {
                                    var n = e.getService(Nu.ARMY).getRandomTroop(r),
                                        i = e.getService(Nu.ARMY).getRandomTroop(t.troops),
                                        l = i.strength * e.getService(Nu.ARMY).getTroopEffectsMultiplier(i.troop) - n.defense,
                                        o = 50;
                                    l > 0 ? (o += 2 * l) > 90 && (o = 90) : (o -= 2 * l) < 10 && (o = 10), Mu.chance(o / 100) ? (r.find(function (e) {
                                        return e[0].troop === n.troop
                                    })[1] -= 1, r = r.filter(function (e) {
                                        return e[1] > 0
                                    })) : t.troops.find(function (e) {
                                        return e[0].troop === i.troop
                                    })[1] -= 1
                                }; r.length > 0 && e.getService(Nu.ARMY).hasTroops(t.troops);) i();
                            if (r.length > 0) e.getService(Nu.LOG).log("Our plunder party has been defeated");
                            else {
                                t.squadStrength = 0, t.squadDefense = 0, t.troops.forEach(function (n) {
                                    t.squadStrength += n[0].strength * n[1] * e.getService(Nu.ARMY).getTroopEffectsMultiplier(n[0].troop), t.squadDefense += n[0].defense * n[1] * e.getService(Nu.ARMY).getTroopEffectsMultiplier(n[0].troop)
                                });
                                for (var l = t.squadStrength, o = 0, u = 0, s = 0; l > 0;) {
                                    var a = Mu.randomBetween(1, 3);
                                    1 === a ? o += 1 : 2 === a ? u += 1 : 3 === a && (s += 1), l -= 1
                                }
                                var c = "Conquered:<br>";
                                o > 0 && (e.getService(Nu.LAND).increaseLand(o, !0), c += "&emsp;" + o + " empty land"), u > 0 && (e.getService(Nu.LAND).increaseForest(u, !1), c += "&emsp;" + u + " forest"), s > 0 && (e.getService(Nu.LAND).increaseMountains(s), c += "&emsp;" + s + " mountains"), e.getService(Nu.LOG).log(c), e.getService(Nu.ARMY).reduceEnemyPower(t.squadStrength)
                            }
                        }
                    }
                }
            },
            es = {
                getCrop: function (e) {
                    var t = this.getCrops().find(function (t) {
                        return t[0] === Ru[e]
                    });
                    if (t) return t[1];
                    console.warn("Invalid crop: " + Au.prepareCropName(e))
                },
                getCrops: function () {
                    return Object.entries(this.FIELD).concat(Object.entries(this.ORCHARD))
                },
                FIELD: {
                    WHEAT: {
                        CROP: Ru.WHEAT,
                        GROWTH: 20,
                        YIELD_MULTIPLIER: 2
                    },
                    BARLEY: {
                        CROP: Ru.BARLEY,
                        GROWTH: 20,
                        YIELD_MULTIPLIER: 2,
                        PREREQUISITE: Eu.BARLEY
                    },
                    HAY: {
                        CROP: Ru.HAY,
                        GROWTH: 10,
                        YIELD_MULTIPLIER: 2
                    },
                    HOP: {
                        CROP: Ru.HOP,
                        GROWTH: 20,
                        YIELD_MULTIPLIER: 2,
                        PREREQUISITE: Eu.HOPS
                    },
                    COTTON: {
                        CROP: Ru.COTTON,
                        GROWTH: 20,
                        YIELD_MULTIPLIER: 2,
                        PREREQUISITE: Eu.COTTON
                    }
                },
                ORCHARD: {
                    BERRY: {
                        CROP: Ru.BERRY,
                        GROWTH: 25,
                        FRUITING: 50,
                        YIELD_MULTIPLIER: 1
                    },
                    GRAPE: {
                        CROP: Ru.GRAPE,
                        GROWTH: 50,
                        FRUITING: 50,
                        YIELD_MULTIPLIER: 1
                    },
                    APPLE: {
                        CROP: Ru.APPLE,
                        GROWTH: 100,
                        FRUITING: 100,
                        YIELD_MULTIPLIER: 1
                    }
                }
            },
            ts = {
                SCIENTIFIC_METHOD: {
                    CATEGORY: wu.SCIENCE,
                    COST: [],
                    RESEARCH_POINT: 5,
                    DESCRIPTION: "Maybe there is something we don't know about yet?",
                    PREREQUISITES: [],
                    FINISH: function (e) {
                        e.getService(Nu.LOG).log("New research projects unlocked")
                    }
                },
                FORESIGHT: {
                    CATEGORY: wu.SCIENCE,
                    COST: [],
                    RESEARCH_POINT: 20,
                    DESCRIPTION: "If only we knew what we don't know",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RESEARCH).increaseForesight(1), e.getService(Nu.LOG).log("Foresight level increased")
                    }
                },
                MANAGEMENT: {
                    CATEGORY: wu.GENERAL,
                    COST: [],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Maybe we could make some hard decisions which could help us survive?",
                    PREREQUISITES: [Su.FORESIGHT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.MANAGEMENT), e.getService(Nu.LOG).log("Management tab unlocked")
                    }
                },
                FISHING: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.BERRY,
                        amount: 20
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Could there be something edible in the water?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.SEA), e.getService(Nu.LOG).log("Sea unlocked"), e.getService(Nu.GAME).enable(Eu.FISHERS_HUT), e.getService(Nu.LOG).log("Fisher's hut invented")
                    }
                },
                ANIMALS: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.HAY,
                        amount: 20
                    }],
                    RESEARCH_POINT: 70,
                    DESCRIPTION: "Is it possible to breed animals near farms?",
                    PREREQUISITES: [Su.AGRICULTURE, Su.HUNTING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.PASTURE), e.getService(Nu.LOG).log("Pastures invented"), e.getService(Nu.GAME).enable(Eu.BUTCHER), e.getService(Nu.LOG).log("Butcher invented")
                    }
                },
                TRADE: {
                    CATEGORY: wu.GENERAL,
                    COST: [],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "If others have resources we need maybe we could trade with them?",
                    PREREQUISITES: [Su.MANAGEMENT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.MARKETPLACE), e.getService(Nu.LOG).log("Marketplace invented"), e.getService(Nu.RESOURCES).makeVisible(vu.COINS)
                    }
                },
                LEATHER: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.FUR,
                        amount: 20
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Could we use dead animals fur in our advantage?",
                    PREREQUISITES: [Su.HUNTING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.TANNERY), e.getService(Nu.LOG).log("Tannery invented"), e.getService(Nu.RECIPE).enable(Pu.LEATHER)
                    }
                },
                COTTON: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Maybe we can plant cotton?",
                    PREREQUISITES: [Su.AGRICULTURE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.COTTON), e.getService(Nu.LOG).log("Cotton planting unlocked"), e.getService(Nu.RESOURCES).makeVisible(vu.COTTON)
                    }
                },
                FABRIC: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.COTTON,
                        amount: 20
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Could we make fabric using cotton?",
                    PREREQUISITES: [Su.COTTON],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.COTTON_MILL), e.getService(Nu.LOG).log("Cotton mill invented"), e.getService(Nu.RECIPE).enable(Pu.FABRIC)
                    }
                },
                TAILORING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.FABRIC,
                        amount: 5
                    }, {
                        resource: vu.FUR,
                        amount: 10
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "How can me make new clothes?",
                    PREREQUISITES: [Su.FABRIC, Su.LEATHER],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.TAILOR), e.getService(Nu.LOG).log("Tailor invented"), e.getService(Nu.RECIPE).enable(Pu.CLOTHES_FABRIC), e.getService(Nu.RECIPE).enable(Pu.CLOTHES_FUR)
                    }
                },
                ENTERTAINMENT: {
                    CATEGORY: wu.GENERAL,
                    COST: [],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Could we be happier if we took time to relax?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.COOKING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.TAVERN), e.getService(Nu.LOG).log("Tavern invented"), e.getService(Nu.GAME).enable(Eu.BREWERY), e.getService(Nu.LOG).log("Brewery invented"), e.getService(Nu.GAME).enable(Eu.WINERY), e.getService(Nu.LOG).log("Winery invented"), e.getService(Nu.GAME).enable(Eu.BARLEY), e.getService(Nu.LOG).log("Barley planting unlocked"), e.getService(Nu.GAME).enable(Eu.HOPS), e.getService(Nu.LOG).log("Hops planting unlocked")
                    }
                },
                CALENDAR: {
                    CATEGORY: wu.SCIENCE,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Is there some pattern to seasons?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.CALENDAR), e.getService(Nu.LOG).log("We are now able to track years and seasons")
                    }
                },
                WEATHER: {
                    CATEGORY: wu.SCIENCE,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.PLANK,
                        amount: 10
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Would it be good to know the weather in advance?",
                    PREREQUISITES: [Su.FORESIGHT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.WEATHER), e.getService(Nu.LOG).log("We now can predict weather"), e.getService(Nu.WEATHER).increaseForecastPeriod(4)
                    }
                },
                AGRICULTURE: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.BERRY,
                        amount: 20
                    }, {
                        resource: vu.WHEAT,
                        amount: 20
                    }, {
                        resource: vu.STONE_SHOVEL,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Why should we risk looking for food in the forest if we can grow it it the open?",
                    PREREQUISITES: [Su.WEATHER, Su.CALENDAR, Su.STONE_SHOVEL],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.FIELD), e.getService(Nu.LOG).log("Field unlocked"), e.getService(Nu.GAME).enable(Eu.FARM), e.getService(Nu.LOG).log("Farm invented"), e.getService(Nu.RESOURCES).makeVisible(vu.WHEAT), e.getService(Nu.RESOURCES).makeVisible(vu.BARLEY), e.getService(Nu.RESOURCES).makeVisible(vu.HAY)
                    }
                },
                BOW: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.BRUSHWOOD,
                        amount: 20
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "Could we kill without coming closer?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.BOW)
                    }
                },
                HUNTING: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.LOG,
                        amount: 5
                    }, {
                        resource: vu.BRUSHWOOD,
                        amount: 5
                    }, {
                        resource: vu.STONE,
                        amount: 5
                    }, {
                        resource: vu.BOW,
                        amount: 2
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "What if hunted became the hunter?",
                    PREREQUISITES: [Su.BOW],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.HUNTER), e.getService(Nu.LOG).log("Hunter invented")
                    }
                },
                FIRE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.BRUSHWOOD,
                        amount: 20
                    }, {
                        resource: vu.STONE,
                        amount: 2
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Would it be useful if we could start fire on demand?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.FIRE), e.getService(Nu.RECIPE).enable(Pu.FUEL_BRUSHWOOD)
                    }
                },
                BIGGER_FIRE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.STONE,
                        amount: 2
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Could we make our fire bigger and last for longer?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.FIRE],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.FUEL_LOG)
                    }
                },
                COOKING: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.FUEL,
                        amount: 20
                    }, {
                        resource: vu.BERRY,
                        amount: 20
                    }, {
                        resource: vu.MUSHROOM,
                        amount: 20
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "What would happen if we heat up raw food?",
                    PREREQUISITES: [Su.FIRE],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.COOKED_MEAT), e.getService(Nu.RECIPE).enable(Pu.BREAD), e.getService(Nu.GAME).enable(Eu.BAKERY), e.getService(Nu.LOG).log("Bakery invented"), e.getService(Nu.RECIPE).enable(Pu.VEGETABLE_SOUP_BERRY), e.getService(Nu.RECIPE).enable(Pu.VEGETABLE_SOUP_MUSHROOM), e.getService(Nu.RECIPE).enable(Pu.MEAT_SOUP)
                    }
                },
                MORTAR: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE,
                        amount: 20
                    }],
                    RESEARCH_POINT: 20,
                    DESCRIPTION: "Would it be useful to ground things up?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.FLOUR)
                    }
                },
                STONE_SPEAR: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "We would have better chance of survival if we keep enemy at distance?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_SPEAR)
                    }
                },
                STONE_AXE: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "It's probably more effective to hit trees with sharp stone?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_AXE)
                    }
                },
                STONE_PICKAXE: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "Would stone win against stone?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_PICKAXE)
                    }
                },
                STONE_HAMMER: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "Can hitting with stone be easier?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_HAMMER)
                    }
                },
                STONE_SHOVEL: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE,
                        amount: 10
                    }, {
                        resource: vu.LOG,
                        amount: 5
                    }],
                    RESEARCH_POINT: 25,
                    DESCRIPTION: "It should be better to get your stone dirty and not your hands?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD],
                    FINISH: function (e) {
                        e.getService(Nu.RECIPE).enable(Pu.STONE_SHOVEL)
                    }
                },
                MINING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.STONE,
                        amount: 5
                    }, {
                        resource: vu.STONE_PICKAXE,
                        amount: 1
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "If we dig deep enough maybe there is something nice?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.STONE_PICKAXE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.MOUNTAINS), e.getService(Nu.LOG).log("Mountains unlocked")
                    }
                },
                PROSPECTING_FOR_ORE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE_PICKAXE,
                        amount: 10
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "There must be something useful under all this dirt",
                    PREREQUISITES: [Su.MINING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.GEOLOGIST), e.getService(Nu.LOG).log("Geologist invented")
                    }
                },
                ADVANCED_PROSPECTING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE_PICKAXE,
                        amount: 20
                    }],
                    RESEARCH_POINT: 75,
                    DESCRIPTION: "There must be something even more valuable under the ground?",
                    PREREQUISITES: [Su.PROSPECTING_FOR_ORE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.GOLD), e.getService(Nu.GAME).enable(Eu.SILVER)
                    }
                },
                MASTER_PROSPECTING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE_PICKAXE,
                        amount: 40
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Is there anything else to find?",
                    PREREQUISITES: [Su.ADVANCED_PROSPECTING],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.IRON)
                    }
                },
                PIT_MINE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.STONE,
                        amount: 20
                    }, {
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.STONE_PICKAXE,
                        amount: 10
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Could we get precious resources from under the ground?",
                    PREREQUISITES: [Su.PROSPECTING_FOR_ORE],
                    FLAG_PREREQUISITES: [Eu.R_QUARRY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.PIT_MINE), e.getService(Nu.LOG).log("Pit mine invented"), e.getService(Nu.RECIPE).enable(Pu.FUEL_COAL)
                    }
                },
                ORE_PROCESSING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.CUT_STONE,
                        amount: 40
                    }, {
                        resource: vu.STONE,
                        amount: 20
                    }, {
                        resource: vu.STONE_HAMMER,
                        amount: 10
                    }, {
                        resource: vu.COPPER_ORE,
                        amount: 20
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "What happens if we heat ore in fire?",
                    PREREQUISITES: [Su.PROSPECTING_FOR_ORE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.SMITHY), e.getService(Nu.LOG).log("Smithy invented")
                    }
                },
                ADVANCED_ORE_PROCESSING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.CUT_STONE,
                        amount: 40
                    }, {
                        resource: vu.STONE,
                        amount: 20
                    }, {
                        resource: vu.STONE_HAMMER,
                        amount: 5
                    }, {
                        resource: vu.GOLD_ORE,
                        amount: 5
                    }, {
                        resource: vu.SILVER_ORE,
                        amount: 5
                    }],
                    RESEARCH_POINT: 150,
                    DESCRIPTION: "What about heating other ores?",
                    PREREQUISITES: [Su.ADVANCED_PROSPECTING, Su.ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.ADVANCED_ORE_PROCESSING)
                    }
                },
                MASTER_ORE_PROCESSING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.CUT_STONE,
                        amount: 40
                    }, {
                        resource: vu.STONE,
                        amount: 20
                    }, {
                        resource: vu.STONE_HAMMER,
                        amount: 5
                    }, {
                        resource: vu.IRON_ORE,
                        amount: 10
                    }],
                    RESEARCH_POINT: 200,
                    DESCRIPTION: "Can we smelt any ore we want?",
                    PREREQUISITES: [Su.MASTER_PROSPECTING, Su.ADVANCED_ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.IRON)
                    }
                },
                METALLURGY: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.COPPER,
                        amount: 10
                    }, {
                        resource: vu.TIN,
                        amount: 10
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "What would happen if we mix two metals?",
                    PREREQUISITES: [Su.ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.BRONZE)
                    }
                },
                ADVANCED_METALLURGY: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.IRON,
                        amount: 10
                    }, {
                        resource: vu.COAL,
                        amount: 50
                    }],
                    RESEARCH_POINT: 200,
                    DESCRIPTION: "Could we mix iron with coal to make it stronger?",
                    PREREQUISITES: [Su.MASTER_ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.STEEL)
                    }
                },
                COINS_MINTING: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.GOLD,
                        amount: 10
                    }, {
                        resource: vu.SILVER,
                        amount: 20
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Maybe we can make our own coins?",
                    PREREQUISITES: [Su.ADVANCED_ORE_PROCESSING],
                    FLAG_PREREQUISITES: [Eu.R_SMITHY],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.MINT), e.getService(Nu.LOG).log("Mint invented")
                    }
                },
                HOUSE: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 50
                    }, {
                        resource: vu.PLANK,
                        amount: 50
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "What if huts were bigger?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.STONE_HAMMER, Su.STONE_SHOVEL],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.HOUSE), e.getService(Nu.LOG).log("House invented")
                    }
                },
                URBAN_PLANNING: {
                    CATEGORY: wu.SCIENCE,
                    COST: [],
                    RESEARCH_POINT: 200,
                    DESCRIPTION: "Maybe we could rearrange buildings?",
                    PREREQUISITES: [Su.HOUSE, Su.MANAGEMENT, Su.MATHEMATICS],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.URBAN_PLANNING)
                    }
                },
                WONDER_BUILDINGS: {
                    CATEGORY: wu.GENERAL,
                    COST: [],
                    RESEARCH_POINT: 300,
                    DESCRIPTION: "What if we built something remarkable?",
                    PREREQUISITES: [Su.HOUSE, Su.URBAN_PLANNING, Su.MATHEMATICS],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.PLATEAU), e.getService(Nu.LOG).log("Plateau unlocked")
                    }
                },
                SAWMILL: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 50
                    }, {
                        resource: vu.PLANK,
                        amount: 10
                    }, {
                        resource: vu.COPPER,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Is it possible to produce planks even faster?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.STONE_HAMMER, Su.STONE_AXE],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.SAWMILL), e.getService(Nu.LOG).log("Sawmill invented")
                    }
                },
                WINDMILL: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 50
                    }, {
                        resource: vu.PLANK,
                        amount: 10
                    }, {
                        resource: vu.COPPER,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Could we use wind to do hard work for us?",
                    PREREQUISITES: [Su.AGRICULTURE, Su.MORTAR, Su.MATHEMATICS],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.WINDMILL), e.getService(Nu.LOG).log("Windmill invented")
                    }
                },
                FORESTRY: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.BRUSHWOOD,
                        amount: 20
                    }, {
                        resource: vu.STONE_SHOVEL,
                        amount: 2
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Is there any reason why trees grow out of dirt?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.STONE_SHOVEL],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.FORESTER), e.getService(Nu.LOG).log("Forester invented")
                    }
                },
                BARRACKS: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.PLANK,
                        amount: 20
                    }, {
                        resource: vu.STONE_SPEAR,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "How can we make those of us more aggressive less of a threat to others?",
                    PREREQUISITES: [Su.SCIENTIFIC_METHOD, Su.CALENDAR, Su.STONE_SPEAR],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).isEnabled(Eu.FORT) || (e.getService(Nu.GAME).enable(Eu.FORT), e.getService(Nu.LOG).log("Fort unlocked")), e.getService(Nu.RECIPE).enable(Pu.WOODEN_SHIELD), e.getService(Nu.RECIPE).enable(Pu.LEATHER_ARMOR), e.getService(Nu.GAME).enable(Eu.BARRACKS), e.getService(Nu.LOG).log("Barracks invented")
                    }
                },
                STASH: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 20
                    }, {
                        resource: vu.PLANK,
                        amount: 10
                    }],
                    RESEARCH_POINT: 30,
                    DESCRIPTION: "Can we hide our goods somewhere?",
                    PREREQUISITES: [Su.FORESIGHT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).isEnabled(Eu.FORT) || (e.getService(Nu.GAME).enable(Eu.FORT), e.getService(Nu.LOG).log("Fort unlocked")), e.getService(Nu.GAME).enable(Eu.STASH)
                    }
                },
                WOODEN_DEFENCES: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 50
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Maybe we could use logs to defend ourselves?",
                    PREREQUISITES: [Su.BARRACKS],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.STOCKADE), e.getService(Nu.LOG).log("Stockade invented"), e.getService(Nu.GAME).enable(Eu.WOODEN_TOWER), e.getService(Nu.LOG).log("Wooden tower invented")
                    }
                },
                STONE_DEFENCES: {
                    CATEGORY: wu.MILITARY,
                    COST: [{
                        resource: vu.STONE,
                        amount: 50
                    }, {
                        resource: vu.CUT_STONE,
                        amount: 50
                    }],
                    RESEARCH_POINT: 200,
                    DESCRIPTION: "Maybe we could use stone to defend ourselves?",
                    PREREQUISITES: [Su.WOODEN_DEFENCES],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.STONE_TOWER), e.getService(Nu.LOG).log("Stone tower invented")
                    }
                },
                MATHEMATICS: {
                    CATEGORY: wu.SCIENCE,
                    COST: [{
                        resource: vu.FOOD,
                        amount: 1e3
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "What if we calculate things first?",
                    PREREQUISITES: [Su.FORESIGHT],
                    FINISH: function (e) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Mathematics", Ou.CONSTRUCTION, 10, -1))
                    }
                },
                FERTILIZER: {
                    CATEGORY: wu.AGRICULTURE,
                    COST: [{
                        resource: vu.FOOD,
                        amount: 3e3
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Could we reuse what animals produce?",
                    PREREQUISITES: [Su.ANIMALS],
                    FINISH: function (e) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Fertilizer", Ou.FIELD, 10, -1)), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Fertilizer", Ou.ORCHARD, 10, -1))
                    }
                },
                PICKAXE_DESIGN: {
                    CATEGORY: wu.TECHNOLOGY,
                    COST: [{
                        resource: vu.LOG,
                        amount: 10
                    }, {
                        resource: vu.CUT_STONE,
                        amount: 10
                    }, {
                        resource: vu.STONE_PICKAXE,
                        amount: 5
                    }],
                    RESEARCH_POINT: 100,
                    DESCRIPTION: "Maybe we could redesign our pickaxes?",
                    PREREQUISITES: [Su.MINING],
                    FINISH: function (e) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design", Ou.QUARRY, 10, -1)), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design", Ou.PIT_MINE, 10, -1)), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Pickaxe Design", Ou.GEOLOGIST, 10, -1))
                    }
                },
                TRADE_ROUTES: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.COINS,
                        amount: 400
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Is it possible to attract more merchants?",
                    PREREQUISITES: [Su.TRADE, Su.MATHEMATICS],
                    FINISH: function (e) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Trade Routes", Ou.MARKETPLACE, 15, -1))
                    }
                },
                BUFF_PRODUCTION: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.STONE_AXE,
                        amount: 2
                    }, {
                        resource: vu.STONE_SHOVEL,
                        amount: 2
                    }, {
                        resource: vu.STONE_PICKAXE,
                        amount: 2
                    }, {
                        resource: vu.STONE_HAMMER,
                        amount: 2
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Would people work better if we give them better tools?",
                    PREREQUISITES: [Su.MANAGEMENT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.BUFFS), e.getService(Nu.LOG).log("Production buffs invented")
                    }
                },
                HUMAN_RESOURCES: {
                    CATEGORY: wu.GENERAL,
                    COST: [{
                        resource: vu.FOOD,
                        amount: 5e3
                    }],
                    RESEARCH_POINT: 50,
                    DESCRIPTION: "Maybe we can optimize work?",
                    PREREQUISITES: [Su.MANAGEMENT],
                    FINISH: function (e) {
                        e.getService(Nu.GAME).enable(Eu.HUMAN_RESOURCES), e.getService(Nu.LOG).log("Human resources invented")
                    }
                }
            },
            ns = {
                START_QUEUE_SIZE: 2,
                RECIPES: {
                    PLANK: {
                        RESOURCE: vu.PLANK,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.LOG,
                            amount: 5
                        }],
                        CRAFTING: 5
                    },
                    CUT_STONE: {
                        RESOURCE: vu.CUT_STONE,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 10
                    },
                    LEATHER: {
                        RESOURCE: vu.LEATHER,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.FUR,
                            amount: 2
                        }],
                        CRAFTING: 10
                    },
                    STONE_AXE: {
                        RESOURCE: vu.STONE_AXE,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 2
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    STONE_PICKAXE: {
                        RESOURCE: vu.STONE_PICKAXE,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 5
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    STONE_SHOVEL: {
                        RESOURCE: vu.STONE_SHOVEL,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 5
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    STONE_SPEAR: {
                        RESOURCE: vu.STONE_SPEAR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 5
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    STONE_HAMMER: {
                        RESOURCE: vu.STONE_HAMMER,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 5
                        }, {
                            resource: vu.STONE,
                            amount: 5
                        }],
                        CRAFTING: 15
                    },
                    BOW: {
                        RESOURCE: vu.BOW,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 10
                        }, {
                            resource: vu.LOG,
                            amount: 10
                        }],
                        CRAFTING: 15
                    },
                    SWORD: {
                        RESOURCE: vu.SWORD,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COPPER,
                            amount: 5
                        }, {
                            resource: vu.LOG,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 5
                        }],
                        CRAFTING: 20
                    },
                    WOODEN_SHIELD: {
                        RESOURCE: vu.WOODEN_SHIELD,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.PLANK,
                            amount: 5
                        }, {
                            resource: vu.LOG,
                            amount: 2
                        }, {
                            resource: vu.LEATHER,
                            amount: 1
                        }],
                        CRAFTING: 20
                    },
                    LEATHER_ARMOR: {
                        RESOURCE: vu.LEATHER_ARMOR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.LEATHER,
                            amount: 10
                        }],
                        CRAFTING: 20
                    },
                    LIGHT_ARMOR: {
                        RESOURCE: vu.LIGHT_ARMOR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COPPER,
                            amount: 10
                        }, {
                            resource: vu.LEATHER,
                            amount: 5
                        }, {
                            resource: vu.FUEL,
                            amount: 10
                        }],
                        CRAFTING: 25
                    },
                    HEAVY_ARMOR: {
                        RESOURCE: vu.HEAVY_ARMOR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COPPER,
                            amount: 15
                        }, {
                            resource: vu.LEATHER,
                            amount: 5
                        }, {
                            resource: vu.FUEL,
                            amount: 10
                        }],
                        CRAFTING: 30
                    },
                    FUEL_BRUSHWOOD: {
                        RESOURCE: vu.FUEL,
                        AMOUNT: 2,
                        COST: [{
                            resource: vu.BRUSHWOOD,
                            amount: 5
                        }],
                        CRAFTING: 3
                    },
                    FUEL_LOG: {
                        RESOURCE: vu.FUEL,
                        AMOUNT: 4,
                        COST: [{
                            resource: vu.LOG,
                            amount: 4
                        }],
                        CRAFTING: 5
                    },
                    FUEL_COAL: {
                        RESOURCE: vu.FUEL,
                        AMOUNT: 8,
                        COST: [{
                            resource: vu.COAL,
                            amount: 2
                        }],
                        CRAFTING: 5
                    },
                    COOKED_MEAT: {
                        RESOURCE: vu.COOKED_MEAT,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.MEAT,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    FLOUR: {
                        RESOURCE: vu.FLOUR,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.WHEAT,
                            amount: 3
                        }],
                        CRAFTING: 3
                    },
                    BREAD: {
                        RESOURCE: vu.BREAD,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.FLOUR,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    VEGETABLE_SOUP_BERRY: {
                        RESOURCE: vu.VEGETABLE_SOUP,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.BERRY,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    VEGETABLE_SOUP_MUSHROOM: {
                        RESOURCE: vu.VEGETABLE_SOUP,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.MUSHROOM,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    MEAT_SOUP: {
                        RESOURCE: vu.MEAT_SOUP,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.MEAT,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 5
                    },
                    FABRIC: {
                        RESOURCE: vu.FABRIC,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COTTON,
                            amount: 2
                        }],
                        CRAFTING: 5
                    },
                    CLOTHES_FABRIC: {
                        RESOURCE: vu.CLOTHES,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.FABRIC,
                            amount: 10
                        }],
                        CRAFTING: 20
                    },
                    CLOTHES_FUR: {
                        RESOURCE: vu.CLOTHES,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.FUR,
                            amount: 15
                        }],
                        CRAFTING: 20
                    },
                    GOLD: {
                        RESOURCE: vu.GOLD,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.GOLD_ORE,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 10
                    },
                    SILVER: {
                        RESOURCE: vu.SILVER,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.SILVER_ORE,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 10
                    },
                    COPPER: {
                        RESOURCE: vu.COPPER,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.COPPER_ORE,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 20
                    },
                    TIN: {
                        RESOURCE: vu.TIN,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.TIN_ORE,
                            amount: 2
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 20
                    },
                    BRONZE: {
                        RESOURCE: vu.BRONZE,
                        AMOUNT: 2,
                        COST: [{
                            resource: vu.COPPER,
                            amount: 1
                        }, {
                            resource: vu.TIN,
                            amount: 1
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 30
                    },
                    IRON: {
                        RESOURCE: vu.IRON,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.IRON_ORE,
                            amount: 3
                        }, {
                            resource: vu.FUEL,
                            amount: 3
                        }],
                        CRAFTING: 30
                    },
                    STEEL: {
                        RESOURCE: vu.STEEL,
                        AMOUNT: 1,
                        COST: [{
                            resource: vu.IRON,
                            amount: 1
                        }, {
                            resource: vu.COAL,
                            amount: 5
                        }, {
                            resource: vu.FUEL,
                            amount: 1
                        }],
                        CRAFTING: 40
                    }
                }
            },
            rs = {
                getReligion: function (e) {
                    var t = Object.entries(this.RELIGIONS).find(function (t) {
                        return t[0] === _u[e]
                    });
                    if (t) return t[1];
                    console.warn("Invalid religion: " + Au.prepareReligionName(e))
                },
                RELIGIONS: {
                    NONE: {
                        FAITH_LEVEL: 0,
                        FAITH: 0,
                        TIME: 0,
                        OFFERING: []
                    },
                    NATURE: {
                        FAITH_LEVEL: 1,
                        FAITH: 20,
                        TIME: 10,
                        OFFERING: [{
                            resource: vu.LOG,
                            amount: 40
                        }, {
                            resource: vu.BERRY,
                            amount: 20
                        }, {
                            resource: vu.MUSHROOM,
                            amount: 20
                        }]
                    },
                    FERTILITY: {
                        FAITH_LEVEL: 1,
                        FAITH: 30,
                        TIME: 10,
                        OFFERING: [{
                            resource: vu.WHEAT,
                            amount: 40
                        }, {
                            resource: vu.BERRY,
                            amount: 40
                        }, {
                            resource: vu.APPLE,
                            amount: 40
                        }]
                    },
                    TECHNOLOGY: {
                        FAITH_LEVEL: 1,
                        FAITH: 40,
                        TIME: 10,
                        OFFERING: [{
                            resource: vu.PLANK,
                            amount: 20
                        }, {
                            resource: vu.CUT_STONE,
                            amount: 20
                        }, {
                            resource: vu.STONE_HAMMER,
                            amount: 5
                        }, {
                            resource: vu.STONE_PICKAXE,
                            amount: 5
                        }]
                    },
                    WAR: {
                        FAITH_LEVEL: 1,
                        FAITH: 50,
                        TIME: 10,
                        OFFERING: [{
                            resource: vu.STONE_SPEAR,
                            amount: 5
                        }, {
                            resource: vu.LEATHER_ARMOR,
                            amount: 5
                        }, {
                            resource: vu.FUR,
                            amount: 10
                        }, {
                            resource: vu.LEATHER,
                            amount: 10
                        }, {
                            resource: vu.FOOD,
                            amount: 1e3
                        }]
                    }
                },
                PRAYERS: {
                    BLESSING: {
                        FAITH: 50,
                        FAITH_LEVEL: 2,
                        RELIGION: _u.NONE,
                        DESCRIPTION: "May everything go according to our plans",
                        FINISH: function (e) {
                            var t = [];
                            Object.values(ku).filter(function (e) {
                                return !isNaN(e)
                            }).forEach(function (n) {
                                e.getServiceByRegion(n).getBuildings().forEach(function (e) {
                                    t.includes(e.getBuildingType()) || t.push(e.getBuildingType())
                                })
                            });
                            var n = Mu.randomExcept(t, [Ou.ALL, Ou.FIELD, Ou.ORCHARD]);
                            e.getService(Nu.LOG).log(Au.prepareBuildingName(n) + " blessed"), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Blessing", n, 25, ju / 2))
                        }
                    },
                    PREACH: {
                        FAITH: 20,
                        FAITH_LEVEL: 1,
                        RELIGION: _u.NONE,
                        DESCRIPTION: "We shall spread our beliefs to others",
                        FINISH: function (e) {
                            e.getService(Nu.RELIGION).increaseFaithLevel(1)
                        }
                    },
                    FAITH_SHIELD: {
                        FAITH: 50,
                        FAITH_LEVEL: 3,
                        RELIGION: _u.NONE,
                        DESCRIPTION: "Our faith will protect us from harm",
                        FINISH: function (e) {
                            var t = 25;
                            t += e.getService(Nu.RELIGION).getFaithLevel(), e.getService(Nu.RELIGION).increaseFaithShield(t)
                        }
                    },
                    SOLDIER_PRAYER: {
                        FAITH: 50,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.NONE,
                        DESCRIPTION: "We shall win any enemy with our faith",
                        FINISH: function (e) {
                            e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Soldier prayer", Iu.ALL, 20, 120))
                        }
                    },
                    FAITHFUL_RESEARCH: {
                        FAITH: 100,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.TECHNOLOGY,
                        DESCRIPTION: "We live to improve our knowledge",
                        FINISH: function (e) {
                            e.getService(Nu.RESEARCH).progressTech(100)
                        }
                    },
                    BABY_BOOM: {
                        FAITH: 100,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.FERTILITY,
                        DESCRIPTION: "May we have a lot of children",
                        FINISH: function (e) {
                            e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Baby boom", Ou.HUT, 100, ju / 2)), e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Baby boom", Ou.HOUSE, 100, ju / 2))
                        }
                    },
                    LIFE_CYCLE: {
                        FAITH: 100,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.NATURE,
                        DESCRIPTION: "We pray for all live to thrive",
                        FINISH: function (e) {
                            e.getService(Nu.EFFECTS).addNatureEffect(new Uu("Life cycle", 10, 5 * ju))
                        }
                    },
                    HOLY_WAR: {
                        FAITH: 100,
                        FAITH_LEVEL: 5,
                        RELIGION: _u.WAR,
                        DESCRIPTION: "The only true faith must be spread at all cost",
                        FINISH: function (e) {
                            e.getService(Nu.EFFECTS).addArmyEffect(new Lu("Holy War", Iu.ALL, 10, 5 * ju))
                        }
                    }
                }
            },
            is = {
                MOTIVATION_SPEECH: {
                    DESCRIPTION: "Use your royal position to motivate people to harder work. 25% production upgrade for all buildings for 1 year",
                    USAGES: 0,
                    MAX_USAGES: 0,
                    COST: 20,
                    RESET: function (e, t) {},
                    EFFECT: function (e, t) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Motivation speech", Ou.ALL, 25, ju)), e.getService(Nu.ROYAL).unlockCallback(t)
                    }
                },
                ROYAL_PROPHECY: {
                    DESCRIPTION: "Your royal blood allows prophets to look into the future. Unlocks certain research for each perk level",
                    USAGES: 0,
                    MAX_USAGES: 3,
                    COST: 50,
                    RESET: function (e, t) {
                        t.usages >= 1 && e.getService(Nu.RESEARCH).finishTech(Su.FIRE), t.usages >= 2 && e.getService(Nu.RESEARCH).finishTech(Su.COOKING), 3 === t.usages && e.getService(Nu.RESEARCH).finishTech(Su.MORTAR)
                    },
                    EFFECT: function (e, t) {
                        switch (t.usages) {
                            case 0:
                                e.getService(Nu.RESEARCH).finishTech(Su.FIRE);
                                break;
                            case 1:
                                e.getService(Nu.RESEARCH).finishTech(Su.COOKING);
                                break;
                            case 2:
                                e.getService(Nu.RESEARCH).finishTech(Su.MORTAR)
                        }
                        e.getService(Nu.ROYAL).unlockCallback(t)
                    }
                },
                HERITAGE: {
                    DESCRIPTION: "Your predecessors ruled better. You start with extra building (awarded after any soft reset or abdication)",
                    USAGES: 0,
                    MAX_USAGES: 2,
                    COST: 20,
                    RESET: function (e, t) {
                        t.usages >= 1 && e.getService(Nu.FOREST).addBuilding(Ou.GATHERER), 2 === t.usages && e.getService(Nu.VILLAGE).addBuilding(Ou.WORKSHOP)
                    },
                    EFFECT: function (e, t) {
                        e.getService(Nu.ROYAL).unlockCallback(t)
                    }
                },
                FAMILY_JEWELS: {
                    DESCRIPTION: "Your predecessors left you with more riches. You start with extra resources (awarded after any soft reset or abdication)",
                    USAGES: 0,
                    MAX_USAGES: 2,
                    COST: 20,
                    RESET: function (e, t) {
                        t.usages >= 1 && (e.getService(Nu.RESOURCES).increaseResource(vu.LOG, 20, !0), e.getService(Nu.RESOURCES).increaseResource(vu.BRUSHWOOD, 10, !0), e.getService(Nu.RESOURCES).increaseResource(vu.BERRY, 20, !0), e.getService(Nu.RESOURCES).increaseResource(vu.MUSHROOM, 20, !0)), 2 === t.usages && (e.getService(Nu.RESOURCES).increaseResource(vu.STONE, 30, !0), e.getService(Nu.RESOURCES).increaseResource(vu.PLANK, 20, !0), e.getService(Nu.RESOURCES).increaseResource(vu.FUEL, 5, !0), e.getService(Nu.RESOURCES).increaseResource(vu.LEATHER, 5, !0))
                    },
                    EFFECT: function (e, t) {
                        e.getService(Nu.ROYAL).unlockCallback(t)
                    }
                },
                KING_OF_THE_FOREST: {
                    DESCRIPTION: "You rule everything in the forests. You start with a few forest buildings unlocked (awarded after any soft reset or abdication)",
                    USAGES: 0,
                    MAX_USAGES: 1,
                    COST: 50,
                    RESET: function (e, t) {
                        1 === t.usages && (e.getService(Nu.FOREST).addBuilding(Ou.GATHERER), e.getService(Nu.FOREST).addBuilding(Ou.FORESTER), e.getService(Nu.FOREST).addBuilding(Ou.HUNTER_LODGE), e.getService(Nu.LAND).takeLand(2 * Zu.FOREST.GATHERER.SIZE + Zu.FOREST.HUNTER_LODGE.SIZE))
                    },
                    EFFECT: function (e, t) {
                        e.getService(Nu.ROYAL).unlockCallback(t)
                    }
                },
                KING_OF_THE_PEOPLE: {
                    DESCRIPTION: "People love you unconditionally. You start with House unlocked and built instead of huts (awarded after any soft reset or abdication)",
                    USAGES: 0,
                    MAX_USAGES: 1,
                    COST: 50,
                    RESET: function (e, t) {
                        1 === t.usages && (e.getService(Nu.RESEARCH).finishTech(Su.HOUSE), e.getService(Nu.VILLAGE).replaceWithHouses())
                    },
                    EFFECT: function (e, t) {
                        e.getService(Nu.ROYAL).unlockCallback(t)
                    }
                },
                KING_OF_THE_WAR: {
                    DESCRIPTION: "War is your game. You start with military unlocked and small army (awarded after any soft reset or abdication)",
                    USAGES: 0,
                    MAX_USAGES: 1,
                    COST: 50,
                    RESET: function (e, t) {
                        e.getService(Nu.GAME).enable(Eu.ARMY), e.getService(Nu.GAME).enable(Eu.FORT);
                        var n = e.getService(Nu.ARMY);
                        e.getService(Nu.FORT).addBuilding(Ou.BARRACKS), e.getService(Nu.FORT).addBuilding(Ou.BARRACKS), e.getService(Nu.LAND).takeLand(2 * Zu.FORT.BARRACKS.SIZE), n.addMilitia(20)
                    },
                    EFFECT: function (e, t) {
                        e.getService(Nu.ROYAL).unlockCallback(t)
                    }
                },
                CALL_TO_ARMS: {
                    DESCRIPTION: "We will fight till the last of us drops dead. You can convert up to 10 villagers to militia",
                    USAGES: 0,
                    MAX_USAGES: 0,
                    COST: 10,
                    RESET: function (e, t) {},
                    EFFECT: function (e, t) {
                        var n = e.getService(Nu.RESOURCES),
                            r = e.getService(Nu.MODAL),
                            i = e.getService(Nu.ARMY),
                            l = e.getService(Nu.ROYAL);
                        r.open(mu.INPUT), r.setModalText("How many villagers would you like to convert to militia?<br>" + n.getPeople() + " recruits available");
                        var o = r.registerForValueResponse().subscribe(function (e) {
                            if (o.unsubscribe(), null !== e && !isNaN(e)) {
                                var u = n.getPeople();
                                if (u > 10) return void r.info("You can only convert up to 10 villagers");
                                if (i.getFreeBarracks() < e) return void r.info("Not enough barracks space for so many militia");
                                if (e > u) return void r.info("Not enough recruits");
                                if (e <= 0) return void r.info("Invalid amount of recruits");
                                if (l.getRoyalPoints() < t.cost) return void r.info("Not enough royal points");
                                n.removeRecruit(Number(e)), i.addMilitia(Number(e)), l.unlockCallback(t)
                            }
                        })
                    }
                },
                UNITE_WITH_THE_PEOPLE: {
                    DESCRIPTION: "You step down from your throne and live with others. Permanent 20% upgrade to all buildings",
                    USAGES: 0,
                    MAX_USAGES: 0,
                    COST: 100,
                    RESET: function (e, t) {},
                    EFFECT: function (e, t) {
                        e.getService(Nu.EFFECTS).addBuildingEffect(new Du("Unite with the people", Ou.ALL, 20, -10)), e.getService(Nu.ROYAL).unlockCallback(t)
                    }
                }
            },
            ls = function () {
                return function () {}
            }(),
            os = function () {
                function e() {
                    this.title = "app"
                }
                return e.prototype.isIE = function () {
                    return -1 !== navigator.userAgent.indexOf("MSIE") || 1 == !!document.documentMode
                }, e.prototype.catchContextMenu = function (e) {
                    return !1
                }, e
            }(),
            us = function () {
                return function () {}
            }(),
            ss = new ye("Location Initialized"),
            as = function () {
                return function () {}
            }(),
            cs = new ye("appBaseHref"),
            ps = function () {
                function e(e) {
                    var n = this;
                    this._subject = new pn, this._platformStrategy = e;
                    var r = this._platformStrategy.getBaseHref();
                    this._baseHref = t.stripTrailingSlash(hs(r)), this._platformStrategy.onPopState(function (e) {
                        n._subject.emit({
                            url: n.path(!0),
                            pop: !0,
                            state: e.state,
                            type: e.type
                        })
                    })
                }
                var t;
                return t = e, e.prototype.path = function (e) {
                    return void 0 === e && (e = !1), this.normalize(this._platformStrategy.path(e))
                }, e.prototype.isCurrentPathEqualTo = function (e, n) {
                    return void 0 === n && (n = ""), this.path() == this.normalize(e + t.normalizeQueryParams(n))
                }, e.prototype.normalize = function (e) {
                    return t.stripTrailingSlash(function (e, t) {
                        return e && t.startsWith(e) ? t.substring(e.length) : t
                    }(this._baseHref, hs(e)))
                }, e.prototype.prepareExternalUrl = function (e) {
                    return e && "/" !== e[0] && (e = "/" + e), this._platformStrategy.prepareExternalUrl(e)
                }, e.prototype.go = function (e, t, n) {
                    void 0 === t && (t = ""), void 0 === n && (n = null), this._platformStrategy.pushState(n, "", e, t)
                }, e.prototype.replaceState = function (e, t, n) {
                    void 0 === t && (t = ""), void 0 === n && (n = null), this._platformStrategy.replaceState(n, "", e, t)
                }, e.prototype.forward = function () {
                    this._platformStrategy.forward()
                }, e.prototype.back = function () {
                    this._platformStrategy.back()
                }, e.prototype.subscribe = function (e, t, n) {
                    return this._subject.subscribe({
                        next: e,
                        error: t,
                        complete: n
                    })
                }, e.normalizeQueryParams = function (e) {
                    return e && "?" !== e[0] ? "?" + e : e
                }, e.joinWithSlash = function (e, t) {
                    if (0 == e.length) return t;
                    if (0 == t.length) return e;
                    var n = 0;
                    return e.endsWith("/") && n++, t.startsWith("/") && n++, 2 == n ? e + t.substring(1) : 1 == n ? e + t : e + "/" + t
                }, e.stripTrailingSlash = function (e) {
                    var t = e.match(/#|\?|$/),
                        n = t && t.index || e.length;
                    return e.slice(0, n - ("/" === e[n - 1] ? 1 : 0)) + e.slice(n)
                }, e
            }();

        function hs(e) {
            return e.replace(/\/index.html$/, "")
        }
        var ds = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r._platformLocation = t, r._baseHref = "", null != n && (r._baseHref = n), r
                }
                return i(t, e), t.prototype.onPopState = function (e) {
                    this._platformLocation.onPopState(e), this._platformLocation.onHashChange(e)
                }, t.prototype.getBaseHref = function () {
                    return this._baseHref
                }, t.prototype.path = function (e) {
                    void 0 === e && (e = !1);
                    var t = this._platformLocation.hash;
                    return null == t && (t = "#"), t.length > 0 ? t.substring(1) : t
                }, t.prototype.prepareExternalUrl = function (e) {
                    var t = ps.joinWithSlash(this._baseHref, e);
                    return t.length > 0 ? "#" + t : t
                }, t.prototype.pushState = function (e, t, n, r) {
                    var i = this.prepareExternalUrl(n + ps.normalizeQueryParams(r));
                    0 == i.length && (i = this._platformLocation.pathname), this._platformLocation.pushState(e, t, i)
                }, t.prototype.replaceState = function (e, t, n, r) {
                    var i = this.prepareExternalUrl(n + ps.normalizeQueryParams(r));
                    0 == i.length && (i = this._platformLocation.pathname), this._platformLocation.replaceState(e, t, i)
                }, t.prototype.forward = function () {
                    this._platformLocation.forward()
                }, t.prototype.back = function () {
                    this._platformLocation.back()
                }, t
            }(as),
            fs = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    if (r._platformLocation = t, null == n && (n = r._platformLocation.getBaseHrefFromDOM()), null == n) throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");
                    return r._baseHref = n, r
                }
                return i(t, e), t.prototype.onPopState = function (e) {
                    this._platformLocation.onPopState(e), this._platformLocation.onHashChange(e)
                }, t.prototype.getBaseHref = function () {
                    return this._baseHref
                }, t.prototype.prepareExternalUrl = function (e) {
                    return ps.joinWithSlash(this._baseHref, e)
                }, t.prototype.path = function (e) {
                    void 0 === e && (e = !1);
                    var t = this._platformLocation.pathname + ps.normalizeQueryParams(this._platformLocation.search),
                        n = this._platformLocation.hash;
                    return n && e ? "" + t + n : t
                }, t.prototype.pushState = function (e, t, n, r) {
                    var i = this.prepareExternalUrl(n + ps.normalizeQueryParams(r));
                    this._platformLocation.pushState(e, t, i)
                }, t.prototype.replaceState = function (e, t, n, r) {
                    var i = this.prepareExternalUrl(n + ps.normalizeQueryParams(r));
                    this._platformLocation.replaceState(e, t, i)
                }, t.prototype.forward = function () {
                    this._platformLocation.forward()
                }, t.prototype.back = function () {
                    this._platformLocation.back()
                }, t
            }(as),
            gs = void 0,
            vs = ["en", [["a", "p"], ["AM", "PM"], gs], [["AM", "PM"], gs, gs], [["S", "M", "T", "W", "T", "F", "S"], ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"]], gs, [["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"], ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]], gs, [["B", "A"], ["BC", "AD"], ["Before Christ", "Anno Domini"]], 0, [6, 0], ["M/d/yy", "MMM d, y", "MMMM d, y", "EEEE, MMMM d, y"], ["h:mm a", "h:mm:ss a", "h:mm:ss a z", "h:mm:ss a zzzz"], ["{1}, {0}", gs, "{1} 'at' {0}", gs], [".", ",", ";", "%", "+", "-", "E", "\xd7", "\u2030", "\u221e", "NaN", ":"], ["#,##0.###", "#,##0%", "\xa4#,##0.00", "#E0"], "$", "US Dollar", {}, function (e) {
                var t = Math.floor(Math.abs(e)),
                    n = e.toString().replace(/^[^.]*\.?/, "").length;
                return 1 === t && 0 === n ? 1 : 5
            }],
            ms = {},
            ys = function (e) {
                return e[e.Decimal = 0] = "Decimal", e[e.Percent = 1] = "Percent", e[e.Currency = 2] = "Currency", e[e.Scientific = 3] = "Scientific", e
            }({}),
            Ss = function (e) {
                return e[e.Zero = 0] = "Zero", e[e.One = 1] = "One", e[e.Two = 2] = "Two", e[e.Few = 3] = "Few", e[e.Many = 4] = "Many", e[e.Other = 5] = "Other", e
            }({}),
            Es = function (e) {
                return e[e.Decimal = 0] = "Decimal", e[e.Group = 1] = "Group", e[e.List = 2] = "List", e[e.PercentSign = 3] = "PercentSign", e[e.PlusSign = 4] = "PlusSign", e[e.MinusSign = 5] = "MinusSign", e[e.Exponential = 6] = "Exponential", e[e.SuperscriptingExponent = 7] = "SuperscriptingExponent", e[e.PerMille = 8] = "PerMille", e[e[1 / 0] = 9] = "Infinity", e[e.NaN = 10] = "NaN", e[e.TimeSeparator = 11] = "TimeSeparator", e[e.CurrencyDecimal = 12] = "CurrencyDecimal", e[e.CurrencyGroup = 13] = "CurrencyGroup", e
            }({});

        function Os(e, t) {
            var n = bs(e),
                r = n[13][t];
            if (void 0 === r) {
                if (t === Es.CurrencyDecimal) return n[13][Es.Decimal];
                if (t === Es.CurrencyGroup) return n[13][Es.Group]
            }
            return r
        }

        function bs(e) {
            var t = e.toLowerCase().replace(/_/g, "-"),
                n = ms[t];
            if (n) return n;
            var r = t.split("-")[0];
            if (n = ms[r]) return n;
            if ("en" === r) return vs;
            throw new Error('Missing locale data for the locale "' + e + '".')
        }
        var Ts = /^(\d+)?\.((\d+)(-(\d+))?)?$/;

        function Rs(e) {
            var t = parseInt(e);
            if (isNaN(t)) throw new Error("Invalid integer literal when parsing " + e);
            return t
        }
        var Cs = new ye("UseV4Plurals"),
            _s = function () {
                return function () {}
            }(),
            Is = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r.locale = t, r.deprecatedPluralFn = n, r
                }
                return i(t, e), t.prototype.getPluralCategory = function (e, t) {
                    switch (this.deprecatedPluralFn ? this.deprecatedPluralFn(t || this.locale, e) : function (e) {
                        return bs(e)[18]
                    }(t || this.locale)(e)) {
                        case Ss.Zero:
                            return "zero";
                        case Ss.One:
                            return "one";
                        case Ss.Two:
                            return "two";
                        case Ss.Few:
                            return "few";
                        case Ss.Many:
                            return "many";
                        default:
                            return "other"
                    }
                }, t
            }(_s),
            As = function () {
                function e(e, t, n, r) {
                    this._iterableDiffers = e, this._keyValueDiffers = t, this._ngEl = n, this._renderer = r, this._initialClasses = []
                }
                return Object.defineProperty(e.prototype, "klass", {
                    set: function (e) {
                        this._removeClasses(this._initialClasses), this._initialClasses = "string" == typeof e ? e.split(/\s+/) : [], this._applyClasses(this._initialClasses), this._applyClasses(this._rawClass)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClass", {
                    set: function (e) {
                        this._removeClasses(this._rawClass), this._applyClasses(this._initialClasses), this._iterableDiffer = null, this._keyValueDiffer = null, this._rawClass = "string" == typeof e ? e.split(/\s+/) : e, this._rawClass && (Xe(this._rawClass) ? this._iterableDiffer = this._iterableDiffers.find(this._rawClass).create() : this._keyValueDiffer = this._keyValueDiffers.find(this._rawClass).create())
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngDoCheck = function () {
                    if (this._iterableDiffer) {
                        var e = this._iterableDiffer.diff(this._rawClass);
                        e && this._applyIterableChanges(e)
                    } else if (this._keyValueDiffer) {
                        var t = this._keyValueDiffer.diff(this._rawClass);
                        t && this._applyKeyValueChanges(t)
                    }
                }, e.prototype._applyKeyValueChanges = function (e) {
                    var t = this;
                    e.forEachAddedItem(function (e) {
                        return t._toggleClass(e.key, e.currentValue)
                    }), e.forEachChangedItem(function (e) {
                        return t._toggleClass(e.key, e.currentValue)
                    }), e.forEachRemovedItem(function (e) {
                        e.previousValue && t._toggleClass(e.key, !1)
                    })
                }, e.prototype._applyIterableChanges = function (e) {
                    var t = this;
                    e.forEachAddedItem(function (e) {
                        if ("string" != typeof e.item) throw new Error("NgClass can only toggle CSS classes expressed as strings, got " + Me(e.item));
                        t._toggleClass(e.item, !0)
                    }), e.forEachRemovedItem(function (e) {
                        return t._toggleClass(e.item, !1)
                    })
                }, e.prototype._applyClasses = function (e) {
                    var t = this;
                    e && (Array.isArray(e) || e instanceof Set ? e.forEach(function (e) {
                        return t._toggleClass(e, !0)
                    }) : Object.keys(e).forEach(function (n) {
                        return t._toggleClass(n, !!e[n])
                    }))
                }, e.prototype._removeClasses = function (e) {
                    var t = this;
                    e && (Array.isArray(e) || e instanceof Set ? e.forEach(function (e) {
                        return t._toggleClass(e, !1)
                    }) : Object.keys(e).forEach(function (e) {
                        return t._toggleClass(e, !1)
                    }))
                }, e.prototype._toggleClass = function (e, t) {
                    var n = this;
                    (e = e.trim()) && e.split(/\s+/g).forEach(function (e) {
                        t ? n._renderer.addClass(n._ngEl.nativeElement, e) : n._renderer.removeClass(n._ngEl.nativeElement, e)
                    })
                }, e
            }(),
            ws = function () {
                function e(e, t, n, r) {
                    this.$implicit = e, this.ngForOf = t, this.index = n, this.count = r
                }
                return Object.defineProperty(e.prototype, "first", {
                    get: function () {
                        return 0 === this.index
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "last", {
                    get: function () {
                        return this.index === this.count - 1
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "even", {
                    get: function () {
                        return this.index % 2 == 0
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "odd", {
                    get: function () {
                        return !this.even
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }(),
            Ns = function () {
                function e(e, t, n) {
                    this._viewContainer = e, this._template = t, this._differs = n, this._ngForOfDirty = !0, this._differ = null
                }
                return Object.defineProperty(e.prototype, "ngForOf", {
                    set: function (e) {
                        this._ngForOf = e, this._ngForOfDirty = !0
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngForTrackBy", {
                    get: function () {
                        return this._trackByFn
                    },
                    set: function (e) {
                        Vt() && null != e && "function" != typeof e && console && console.warn && console.warn("trackBy must be a function, but received " + JSON.stringify(e) + ". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."), this._trackByFn = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngForTemplate", {
                    set: function (e) {
                        e && (this._template = e)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngDoCheck = function () {
                    if (this._ngForOfDirty) {
                        this._ngForOfDirty = !1;
                        var e = this._ngForOf;
                        if (!this._differ && e) try {
                            this._differ = this._differs.find(e).create(this.ngForTrackBy)
                        } catch (r) {
                            throw new Error("Cannot find a differ supporting object '" + e + "' of type '" + ((t = e).name || typeof t) + "'. NgFor only supports binding to Iterables such as Arrays.")
                        }
                    }
                    var t;
                    if (this._differ) {
                        var n = this._differ.diff(this._ngForOf);
                        n && this._applyChanges(n)
                    }
                }, e.prototype._applyChanges = function (e) {
                    var t = this,
                        n = [];
                    e.forEachOperation(function (e, r, i) {
                        if (null == e.previousIndex) {
                            var l = t._viewContainer.createEmbeddedView(t._template, new ws(null, t._ngForOf, -1, -1), i),
                                o = new Ps(e, l);
                            n.push(o)
                        } else null == i ? t._viewContainer.remove(r) : (l = t._viewContainer.get(r), t._viewContainer.move(l, i), o = new Ps(e, l), n.push(o))
                    });
                    for (var r = 0; r < n.length; r++) this._perViewChange(n[r].view, n[r].record);
                    r = 0;
                    for (var i = this._viewContainer.length; r < i; r++) {
                        var l = this._viewContainer.get(r);
                        l.context.index = r, l.context.count = i, l.context.ngForOf = this._ngForOf
                    }
                    e.forEachIdentityChange(function (e) {
                        t._viewContainer.get(e.currentIndex).context.$implicit = e.item
                    })
                }, e.prototype._perViewChange = function (e, t) {
                    e.context.$implicit = t.item
                }, e.ngTemplateContextGuard = function (e, t) {
                    return !0
                }, e
            }(),
            Ps = function () {
                return function (e, t) {
                    this.record = e, this.view = t
                }
            }(),
            Ds = function () {
                function e(e, t) {
                    this._viewContainer = e, this._context = new Ms, this._thenTemplateRef = null, this._elseTemplateRef = null, this._thenViewRef = null, this._elseViewRef = null, this._thenTemplateRef = t
                }
                return Object.defineProperty(e.prototype, "ngIf", {
                    set: function (e) {
                        this._context.$implicit = this._context.ngIf = e, this._updateView()
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngIfThen", {
                    set: function (e) {
                        ks("ngIfThen", e), this._thenTemplateRef = e, this._thenViewRef = null, this._updateView()
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngIfElse", {
                    set: function (e) {
                        ks("ngIfElse", e), this._elseTemplateRef = e, this._elseViewRef = null, this._updateView()
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._updateView = function () {
                    this._context.$implicit ? this._thenViewRef || (this._viewContainer.clear(), this._elseViewRef = null, this._thenTemplateRef && (this._thenViewRef = this._viewContainer.createEmbeddedView(this._thenTemplateRef, this._context))) : this._elseViewRef || (this._viewContainer.clear(), this._thenViewRef = null, this._elseTemplateRef && (this._elseViewRef = this._viewContainer.createEmbeddedView(this._elseTemplateRef, this._context)))
                }, e.ngTemplateGuard_ngIf = function (e, t) {
                    return !0
                }, e
            }(),
            Ms = function () {
                return function () {
                    this.$implicit = null, this.ngIf = null
                }
            }();

        function ks(e, t) {
            if (t && !t.createEmbeddedView) throw new Error(e + " must be a TemplateRef, but received '" + Me(t) + "'.")
        }
        var Ls = function () {
                function e(e, t) {
                    this._viewContainerRef = e, this._templateRef = t, this._created = !1
                }
                return e.prototype.create = function () {
                    this._created = !0, this._viewContainerRef.createEmbeddedView(this._templateRef)
                }, e.prototype.destroy = function () {
                    this._created = !1, this._viewContainerRef.clear()
                }, e.prototype.enforceState = function (e) {
                    e && !this._created ? this.create() : !e && this._created && this.destroy()
                }, e
            }(),
            xs = function () {
                function e() {
                    this._defaultUsed = !1, this._caseCount = 0, this._lastCaseCheckIndex = 0, this._lastCasesMatched = !1
                }
                return Object.defineProperty(e.prototype, "ngSwitch", {
                    set: function (e) {
                        this._ngSwitch = e, 0 === this._caseCount && this._updateDefaultCases(!0)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._addCase = function () {
                    return this._caseCount++
                }, e.prototype._addDefault = function (e) {
                    this._defaultViews || (this._defaultViews = []), this._defaultViews.push(e)
                }, e.prototype._matchCase = function (e) {
                    var t = e == this._ngSwitch;
                    return this._lastCasesMatched = this._lastCasesMatched || t, this._lastCaseCheckIndex++, this._lastCaseCheckIndex === this._caseCount && (this._updateDefaultCases(!this._lastCasesMatched), this._lastCaseCheckIndex = 0, this._lastCasesMatched = !1), t
                }, e.prototype._updateDefaultCases = function (e) {
                    if (this._defaultViews && e !== this._defaultUsed) {
                        this._defaultUsed = e;
                        for (var t = 0; t < this._defaultViews.length; t++) this._defaultViews[t].enforceState(e)
                    }
                }, e
            }(),
            Fs = function () {
                function e(e, t, n) {
                    this.ngSwitch = n, n._addCase(), this._view = new Ls(e, t)
                }
                return e.prototype.ngDoCheck = function () {
                    this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))
                }, e
            }(),
            Us = function () {
                function e(e, t, n) {
                    this._differs = e, this._ngEl = t, this._renderer = n
                }
                return Object.defineProperty(e.prototype, "ngStyle", {
                    set: function (e) {
                        this._ngStyle = e, !this._differ && e && (this._differ = this._differs.find(e).create())
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngDoCheck = function () {
                    if (this._differ) {
                        var e = this._differ.diff(this._ngStyle);
                        e && this._applyChanges(e)
                    }
                }, e.prototype._applyChanges = function (e) {
                    var t = this;
                    e.forEachRemovedItem(function (e) {
                        return t._setStyle(e.key, null)
                    }), e.forEachAddedItem(function (e) {
                        return t._setStyle(e.key, e.currentValue)
                    }), e.forEachChangedItem(function (e) {
                        return t._setStyle(e.key, e.currentValue)
                    })
                }, e.prototype._setStyle = function (e, t) {
                    var n = a(e.split("."), 2),
                        r = n[0],
                        i = n[1];
                    null != (t = null != t && i ? "" + t + i : t) ? this._renderer.setStyle(this._ngEl.nativeElement, r, t) : this._renderer.removeStyle(this._ngEl.nativeElement, r)
                }, e
            }();

        function Hs(e, t) {
            return Error("InvalidPipeArgument: '" + t + "' for pipe '" + Me(e) + "'")
        }
        var Gs = /(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,
            Bs = function () {
                function e() {}
                var t;
                return t = e, e.prototype.transform = function (e) {
                    if (!e) return e;
                    if ("string" != typeof e) throw Hs(t, e);
                    return e.replace(Gs, function (e) {
                        return e[0].toUpperCase() + e.substr(1).toLowerCase()
                    })
                }, e
            }(),
            Vs = function () {
                function e(e) {
                    this.differs = e, this.keyValues = []
                }
                return e.prototype.transform = function (e, t) {
                    var n = this;
                    if (void 0 === t && (t = Ws), !e || !(e instanceof Map) && "object" != typeof e) return null;
                    this.differ || (this.differ = this.differs.find(e).create());
                    var r = this.differ.diff(e);
                    return r && (this.keyValues = [], r.forEachItem(function (e) {
                        n.keyValues.push({
                            key: e.key,
                            value: e.currentValue
                        })
                    }), this.keyValues.sort(t)), this.keyValues
                }, e
            }();

        function Ws(e, t) {
            var n = e.key,
                r = t.key;
            if (n === r) return 0;
            if (void 0 === n) return 1;
            if (void 0 === r) return -1;
            if (null === n) return 1;
            if (null === r) return -1;
            if ("string" == typeof n && "string" == typeof r) return n < r ? -1 : 1;
            if ("number" == typeof n && "number" == typeof r) return n - r;
            if ("boolean" == typeof n && "boolean" == typeof r) return n < r ? -1 : 1;
            var i = String(n),
                l = String(r);
            return i == l ? 0 : i < l ? -1 : 1
        }
        var js = function () {
                function e(e) {
                    this._locale = e
                }
                var t;
                return t = e, e.prototype.transform = function (e, n, r) {
                    if (function (e) {
                            return null == e || "" === e || e != e
                        }(e)) return null;
                    r = r || this._locale;
                    try {
                        return function (e, t, n) {
                            return function (e, t, n, r, i, l, o) {
                                void 0 === o && (o = !1);
                                var u = "",
                                    s = !1;
                                if (isFinite(e)) {
                                    var a = function (t) {
                                        var n, r, i, l, o, u = Math.abs(e) + "",
                                            s = 0;
                                        for ((r = u.indexOf(".")) > -1 && (u = u.replace(".", "")), (i = u.search(/e/i)) > 0 ? (r < 0 && (r = i), r += +u.slice(i + 1), u = u.substring(0, i)) : r < 0 && (r = u.length), i = 0;
                                            "0" === u.charAt(i); i++);
                                        if (i === (o = u.length)) n = [0], r = 1;
                                        else {
                                            for (o--;
                                                "0" === u.charAt(o);) o--;
                                            for (r -= i, n = [], l = 0; i <= o; i++, l++) n[l] = Number(u.charAt(i))
                                        }
                                        return r > 22 && (n = n.splice(0, 21), s = r - 1, r = 1), {
                                            digits: n,
                                            exponent: s,
                                            integerLen: r
                                        }
                                    }();
                                    o && (a = function (e) {
                                        if (0 === e.digits[0]) return e;
                                        var t = e.digits.length - e.integerLen;
                                        return e.exponent ? e.exponent += 2 : (0 === t ? e.digits.push(0, 0) : 1 === t && e.digits.push(0), e.integerLen += 2), e
                                    }(a));
                                    var c = t.minInt,
                                        p = t.minFrac,
                                        h = t.maxFrac;
                                    if (l) {
                                        var d = l.match(Ts);
                                        if (null === d) throw new Error(l + " is not a valid digit info");
                                        var f = d[1],
                                            g = d[3],
                                            v = d[5];
                                        null != f && (c = Rs(f)), null != g && (p = Rs(g)), null != v ? h = Rs(v) : null != g && p > h && (h = p)
                                    }! function (e, t, n) {
                                        if (t > n) throw new Error("The minimum number of digits after fraction (" + t + ") is higher than the maximum (" + n + ").");
                                        var r = e.digits,
                                            i = r.length - e.integerLen,
                                            l = Math.min(Math.max(t, i), n),
                                            o = l + e.integerLen,
                                            u = r[o];
                                        if (o > 0) {
                                            r.splice(Math.max(e.integerLen, o));
                                            for (var s = o; s < r.length; s++) r[s] = 0
                                        } else {
                                            i = Math.max(0, i), e.integerLen = 1, r.length = Math.max(1, o = l + 1), r[0] = 0;
                                            for (var a = 1; a < o; a++) r[a] = 0
                                        }
                                        if (u >= 5)
                                            if (o - 1 < 0) {
                                                for (var c = 0; c > o; c--) r.unshift(0), e.integerLen++;
                                                r.unshift(1), e.integerLen++
                                            } else r[o - 1]++;
                                        for (; i < Math.max(0, l); i++) r.push(0);
                                        var p = 0 !== l,
                                            h = t + e.integerLen,
                                            d = r.reduceRight(function (e, t, n, r) {
                                                return r[n] = (t += e) < 10 ? t : t - 10, p && (0 === r[n] && n >= h ? r.pop() : p = !1), t >= 10 ? 1 : 0
                                            }, 0);
                                        d && (r.unshift(d), e.integerLen++)
                                    }(a, p, h);
                                    var m = a.digits,
                                        y = a.integerLen,
                                        S = a.exponent,
                                        E = [];
                                    for (s = m.every(function (e) {
                                            return !e
                                        }); y < c; y++) m.unshift(0);
                                    for (; y < 0; y++) m.unshift(0);
                                    y > 0 ? E = m.splice(y, m.length) : (E = m, m = [0]);
                                    var O = [];
                                    for (m.length >= t.lgSize && O.unshift(m.splice(-t.lgSize, m.length).join("")); m.length > t.gSize;) O.unshift(m.splice(-t.gSize, m.length).join(""));
                                    m.length && O.unshift(m.join("")), u = O.join(Os(n, r)), E.length && (u += Os(n, i) + E.join("")), S && (u += Os(n, Es.Exponential) + "+" + S)
                                } else u = Os(n, Es.Infinity);
                                return e < 0 && !s ? t.negPre + u + t.negSuf : t.posPre + u + t.posSuf
                            }(e, function (e, t) {
                                void 0 === t && (t = "-");
                                var n = {
                                        minInt: 1,
                                        minFrac: 0,
                                        maxFrac: 0,
                                        posPre: "",
                                        posSuf: "",
                                        negPre: "",
                                        negSuf: "",
                                        gSize: 0,
                                        lgSize: 0
                                    },
                                    r = e.split(";"),
                                    i = r[0],
                                    l = r[1],
                                    o = -1 !== i.indexOf(".") ? i.split(".") : [i.substring(0, i.lastIndexOf("0") + 1), i.substring(i.lastIndexOf("0") + 1)],
                                    u = o[0],
                                    s = o[1] || "";
                                n.posPre = u.substr(0, u.indexOf("#"));
                                for (var a = 0; a < s.length; a++) {
                                    var c = s.charAt(a);
                                    "0" === c ? n.minFrac = n.maxFrac = a + 1 : "#" === c ? n.maxFrac = a + 1 : n.posSuf += c
                                }
                                var p = u.split(",");
                                if (n.gSize = p[1] ? p[1].length : 0, n.lgSize = p[2] || p[1] ? (p[2] || p[1]).length : 0, l) {
                                    var h = i.length - n.posPre.length - n.posSuf.length,
                                        d = l.indexOf("#");
                                    n.negPre = l.substr(0, d).replace(/'/g, ""), n.negSuf = l.substr(d + h).replace(/'/g, "")
                                } else n.negPre = t + n.posPre, n.negSuf = n.posSuf;
                                return n
                            }(function (e, t) {
                                return bs(e)[14][t]
                            }(t, ys.Decimal), Os(t, Es.MinusSign)), t, Es.Group, Es.Decimal, n)
                        }(function (e) {
                            if ("string" == typeof e && !isNaN(Number(e) - parseFloat(e))) return Number(e);
                            if ("number" != typeof e) throw new Error(e + " is not a number");
                            return e
                        }(e), r, n)
                    } catch (i) {
                        throw Hs(t, i.message)
                    }
                }, e
            }(),
            Ys = function () {
                return function () {}
            }(),
            zs = new ye("DocumentToken"),
            Ks = "browser",
            qs = "server",
            Qs = function () {
                function e() {}
                return e.ngInjectableDef = ve({
                    providedIn: "root",
                    factory: function () {
                        return new $s(ze(zs), window, ze(Cn))
                    }
                }), e
            }(),
            $s = function () {
                function e(e, t, n) {
                    this.document = e, this.window = t, this.errorHandler = n, this.offset = function () {
                        return [0, 0]
                    }
                }
                return e.prototype.setOffset = function (e) {
                    this.offset = Array.isArray(e) ? function () {
                        return e
                    } : e
                }, e.prototype.getScrollPosition = function () {
                    return this.supportScrollRestoration() ? [this.window.scrollX, this.window.scrollY] : [0, 0]
                }, e.prototype.scrollToPosition = function (e) {
                    this.supportScrollRestoration() && this.window.scrollTo(e[0], e[1])
                }, e.prototype.scrollToAnchor = function (e) {
                    if (this.supportScrollRestoration()) {
                        e = this.window.CSS && this.window.CSS.escape ? this.window.CSS.escape(e) : e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g, "\\$1");
                        try {
                            var t = this.document.querySelector("#" + e);
                            if (t) return void this.scrollToElement(t);
                            var n = this.document.querySelector("[name='" + e + "']");
                            if (n) return void this.scrollToElement(n)
                        } catch (r) {
                            this.errorHandler.handleError(r)
                        }
                    }
                }, e.prototype.setHistoryScrollRestoration = function (e) {
                    if (this.supportScrollRestoration()) {
                        var t = this.window.history;
                        t && t.scrollRestoration && (t.scrollRestoration = e)
                    }
                }, e.prototype.scrollToElement = function (e) {
                    var t = e.getBoundingClientRect(),
                        n = t.left + this.window.pageXOffset,
                        r = t.top + this.window.pageYOffset,
                        i = this.offset();
                    this.window.scrollTo(n - i[0], r - i[1])
                }, e.prototype.supportScrollRestoration = function () {
                    try {
                        return !!this.window && !!this.window.scrollTo
                    } catch (e) {
                        return !1
                    }
                }, e
            }();

        function Zs() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            var n = e[e.length - 1];
            return F(n) ? (e.pop(), $(e, n)) : re(e)
        }
        var Xs = function (e) {
            function t(t) {
                var n = e.call(this) || this;
                return n._value = t, n
            }
            return i(t, e), Object.defineProperty(t.prototype, "value", {
                get: function () {
                    return this.getValue()
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype._subscribe = function (t) {
                var n = e.prototype._subscribe.call(this, t);
                return n && !n.closed && t.next(this._value), n
            }, t.prototype.getValue = function () {
                if (this.hasError) throw this.thrownError;
                if (this.closed) throw new D;
                return this._value
            }, t.prototype.next = function (t) {
                e.prototype.next.call(this, this._value = t)
            }, t
        }(L);

        function Js() {
            return Error.call(this), this.message = "no elements in sequence", this.name = "EmptyError", this
        }
        Js.prototype = Object.create(Error.prototype);
        var ea = Js,
            ta = {},
            na = function () {
                function e(e) {
                    this.resultSelector = e
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new ra(e, this.resultSelector))
                }, e
            }(),
            ra = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.resultSelector = n, r.active = 0, r.values = [], r.observables = [], r
                }
                return i(t, e), t.prototype._next = function (e) {
                    this.values.push(ta), this.observables.push(e)
                }, t.prototype._complete = function () {
                    var e = this.observables,
                        t = e.length;
                    if (0 === t) this.destination.complete();
                    else {
                        this.active = t, this.toRespond = t;
                        for (var n = 0; n < t; n++) {
                            var r = e[n];
                            this.add(Y(this, r, r, n))
                        }
                    }
                }, t.prototype.notifyComplete = function (e) {
                    0 == (this.active -= 1) && this.destination.complete()
                }, t.prototype.notifyNext = function (e, t, n, r, i) {
                    var l = this.values,
                        o = this.toRespond ? l[n] === ta ? --this.toRespond : this.toRespond : 0;
                    l[n] = t, 0 === o && (this.resultSelector ? this._tryResultSelector(l) : this.destination.next(l.slice()))
                }, t.prototype._tryResultSelector = function (e) {
                    var t;
                    try {
                        t = this.resultSelector.apply(this, e)
                    } catch (n) {
                        return void this.destination.error(n)
                    }
                    this.destination.next(t)
                }, t
            }(z),
            ia = new w(function (e) {
                return e.complete()
            });

        function la(e) {
            return e ? function (e) {
                return new w(function (t) {
                    return e.schedule(function () {
                        return t.complete()
                    })
                })
            }(e) : ia
        }

        function oa(e) {
            return new w(function (t) {
                var n;
                try {
                    n = e()
                } catch (r) {
                    return void t.error(r)
                }
                return (n ? Z(n) : la()).subscribe(t)
            })
        }

        function ua() {
            return ne(1)
        }

        function sa(e, t) {
            return function (n) {
                return n.lift(new aa(e, t))
            }
        }
        var aa = function () {
                function e(e, t) {
                    this.predicate = e, this.thisArg = t
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new ca(e, this.predicate, this.thisArg))
                }, e
            }(),
            ca = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, t) || this;
                    return i.predicate = n, i.thisArg = r, i.count = 0, i
                }
                return i(t, e), t.prototype._next = function (e) {
                    var t;
                    try {
                        t = this.predicate.call(this.thisArg, e, this.count++)
                    } catch (n) {
                        return void this.destination.error(n)
                    }
                    t && this.destination.next(e)
                }, t
            }(T);

        function pa() {
            return Error.call(this), this.message = "argument out of range", this.name = "ArgumentOutOfRangeError", this
        }
        pa.prototype = Object.create(Error.prototype);
        var ha = pa;

        function da(e) {
            return function (t) {
                return 0 === e ? la() : t.lift(new fa(e))
            }
        }
        var fa = function () {
                function e(e) {
                    if (this.total = e, this.total < 0) throw new ha
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new ga(e, this.total))
                }, e
            }(),
            ga = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.total = n, r.ring = new Array, r.count = 0, r
                }
                return i(t, e), t.prototype._next = function (e) {
                    var t = this.ring,
                        n = this.total,
                        r = this.count++;
                    t.length < n ? t.push(e) : t[r % n] = e
                }, t.prototype._complete = function () {
                    var e = this.destination,
                        t = this.count;
                    if (t > 0)
                        for (var n = this.count >= this.total ? this.total : this.count, r = this.ring, i = 0; i < n; i++) {
                            var l = t++ % n;
                            e.next(r[l])
                        }
                    e.complete()
                }, t
            }(T);

        function va(e) {
            return void 0 === e && (e = Sa),
                function (t) {
                    return t.lift(new ma(e))
                }
        }
        var ma = function () {
                function e(e) {
                    this.errorFactory = e
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new ya(e, this.errorFactory))
                }, e
            }(),
            ya = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.errorFactory = n, r.hasValue = !1, r
                }
                return i(t, e), t.prototype._next = function (e) {
                    this.hasValue = !0, this.destination.next(e)
                }, t.prototype._complete = function () {
                    if (this.hasValue) return this.destination.complete();
                    var e = void 0;
                    try {
                        e = this.errorFactory()
                    } catch (t) {
                        e = t
                    }
                    this.destination.error(e)
                }, t
            }(T);

        function Sa() {
            return new ea
        }

        function Ea(e) {
            return void 0 === e && (e = null),
                function (t) {
                    return t.lift(new Oa(e))
                }
        }
        var Oa = function () {
                function e(e) {
                    this.defaultValue = e
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new ba(e, this.defaultValue))
                }, e
            }(),
            ba = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.defaultValue = n, r.isEmpty = !0, r
                }
                return i(t, e), t.prototype._next = function (e) {
                    this.isEmpty = !1, this.destination.next(e)
                }, t.prototype._complete = function () {
                    this.isEmpty && this.destination.next(this.defaultValue), this.destination.complete()
                }, t
            }(T);

        function Ta(e, t) {
            var n = arguments.length >= 2;
            return function (r) {
                return r.pipe(e ? sa(function (t, n) {
                    return e(t, n, r)
                }) : te, da(1), n ? Ea(t) : va(function () {
                    return new ea
                }))
            }
        }

        function Ra(e) {
            return function (t) {
                var n = new Ca(e),
                    r = t.lift(n);
                return n.caught = r
            }
        }
        var Ca = function () {
                function e(e) {
                    this.selector = e
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new _a(e, this.selector, this.caught))
                }, e
            }(),
            _a = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, t) || this;
                    return i.selector = n, i.caught = r, i
                }
                return i(t, e), t.prototype.error = function (t) {
                    if (!this.isStopped) {
                        var n = void 0;
                        try {
                            n = this.selector(t, this.caught)
                        } catch (i) {
                            return void e.prototype.error.call(this, i)
                        }
                        this._unsubscribeAndRecycle();
                        var r = new U(this, void 0, void 0);
                        this.add(r), Y(this, n, void 0, void 0, r)
                    }
                }, t
            }(z);

        function Ia(e) {
            return function (t) {
                return 0 === e ? la() : t.lift(new Aa(e))
            }
        }
        var Aa = function () {
                function e(e) {
                    if (this.total = e, this.total < 0) throw new ha
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new wa(e, this.total))
                }, e
            }(),
            wa = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.total = n, r.count = 0, r
                }
                return i(t, e), t.prototype._next = function (e) {
                    var t = this.total,
                        n = ++this.count;
                    n <= t && (this.destination.next(e), n === t && (this.destination.complete(), this.unsubscribe()))
                }, t
            }(T);

        function Na(e, t) {
            var n = arguments.length >= 2;
            return function (r) {
                return r.pipe(e ? sa(function (t, n) {
                    return e(t, n, r)
                }) : te, Ia(1), n ? Ea(t) : va(function () {
                    return new ea
                }))
            }
        }
        var Pa = function () {
                function e(e, t, n) {
                    this.predicate = e, this.thisArg = t, this.source = n
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new Da(e, this.predicate, this.thisArg, this.source))
                }, e
            }(),
            Da = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t) || this;
                    return l.predicate = n, l.thisArg = r, l.source = i, l.index = 0, l.thisArg = r || l, l
                }
                return i(t, e), t.prototype.notifyComplete = function (e) {
                    this.destination.next(e), this.destination.complete()
                }, t.prototype._next = function (e) {
                    var t = !1;
                    try {
                        t = this.predicate.call(this.thisArg, e, this.index++, this.source)
                    } catch (n) {
                        return void this.destination.error(n)
                    }
                    t || this.notifyComplete(!1)
                }, t.prototype._complete = function () {
                    this.notifyComplete(!0)
                }, t
            }(T);

        function Ma(e, t) {
            return "function" == typeof t ? function (n) {
                return n.pipe(Ma(function (n, r) {
                    return Z(e(n, r)).pipe(K(function (e, i) {
                        return t(n, e, r, i)
                    }))
                }))
            } : function (t) {
                return t.lift(new ka(e))
            }
        }
        var ka = function () {
                function e(e) {
                    this.project = e
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new La(e, this.project))
                }, e
            }(),
            La = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.project = n, r.index = 0, r
                }
                return i(t, e), t.prototype._next = function (e) {
                    var t, n = this.index++;
                    try {
                        t = this.project(e, n)
                    } catch (r) {
                        return void this.destination.error(r)
                    }
                    this._innerSub(t, e, n)
                }, t.prototype._innerSub = function (e, t, n) {
                    var r = this.innerSubscription;
                    r && r.unsubscribe();
                    var i = new U(this, void 0, void 0);
                    this.destination.add(i), this.innerSubscription = Y(this, e, t, n, i)
                }, t.prototype._complete = function () {
                    var t = this.innerSubscription;
                    t && !t.closed || e.prototype._complete.call(this), this.unsubscribe()
                }, t.prototype._unsubscribe = function () {
                    this.innerSubscription = null
                }, t.prototype.notifyComplete = function (t) {
                    this.destination.remove(t), this.innerSubscription = null, this.isStopped && e.prototype._complete.call(this)
                }, t.prototype.notifyNext = function (e, t, n, r, i) {
                    this.destination.next(t)
                }, t
            }(z);

        function xa() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return ua()(Zs.apply(void 0, e))
        }

        function Fa() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            var n = e[e.length - 1];
            return F(n) ? (e.pop(), function (t) {
                return xa(e, t, n)
            }) : function (t) {
                return xa(e, t)
            }
        }

        function Ua(e, t) {
            var n = !1;
            return arguments.length >= 2 && (n = !0),
                function (r) {
                    return r.lift(new Ha(e, t, n))
                }
        }
        var Ha = function () {
                function e(e, t, n) {
                    void 0 === n && (n = !1), this.accumulator = e, this.seed = t, this.hasSeed = n
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new Ga(e, this.accumulator, this.seed, this.hasSeed))
                }, e
            }(),
            Ga = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t) || this;
                    return l.accumulator = n, l._seed = r, l.hasSeed = i, l.index = 0, l
                }
                return i(t, e), Object.defineProperty(t.prototype, "seed", {
                    get: function () {
                        return this._seed
                    },
                    set: function (e) {
                        this.hasSeed = !0, this._seed = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype._next = function (e) {
                    if (this.hasSeed) return this._tryNext(e);
                    this.seed = e, this.destination.next(e)
                }, t.prototype._tryNext = function (e) {
                    var t, n = this.index++;
                    try {
                        t = this.accumulator(this.seed, e, n)
                    } catch (r) {
                        this.destination.error(r)
                    }
                    this.seed = t, this.destination.next(t)
                }, t
            }(T);

        function Ba(e, t) {
            return X(e, t, 1)
        }

        function Va(e, t, n) {
            return function (r) {
                return r.lift(new Wa(e, t, n))
            }
        }
        var Wa = function () {
                function e(e, t, n) {
                    this.nextOrObserver = e, this.error = t, this.complete = n
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new ja(e, this.nextOrObserver, this.error, this.complete))
                }, e
            }(),
            ja = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t) || this;
                    return l._tapNext = _, l._tapError = _, l._tapComplete = _, l._tapError = r || _, l._tapComplete = i || _, d(n) ? (l._context = l, l._tapNext = n) : n && (l._context = n, l._tapNext = n.next || _, l._tapError = n.error || _, l._tapComplete = n.complete || _), l
                }
                return i(t, e), t.prototype._next = function (e) {
                    try {
                        this._tapNext.call(this._context, e)
                    } catch (t) {
                        return void this.destination.error(t)
                    }
                    this.destination.next(e)
                }, t.prototype._error = function (e) {
                    try {
                        this._tapError.call(this._context, e)
                    } catch (e) {
                        return void this.destination.error(e)
                    }
                    this.destination.error(e)
                }, t.prototype._complete = function () {
                    try {
                        this._tapComplete.call(this._context)
                    } catch (e) {
                        return void this.destination.error(e)
                    }
                    return this.destination.complete()
                }, t
            }(T),
            Ya = function () {
                function e(e) {
                    this.callback = e
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new za(e, this.callback))
                }, e
            }(),
            za = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.add(new v(n)), r
                }
                return i(t, e), t
            }(T),
            Ka = null;

        function qa() {
            return Ka
        }
        var Qa, $a = {
                class: "className",
                innerHtml: "innerHTML",
                readonly: "readOnly",
                tabindex: "tabIndex"
            },
            Za = {
                "\b": "Backspace",
                "\t": "Tab",
                "\x7f": "Delete",
                "\x1b": "Escape",
                Del: "Delete",
                Esc: "Escape",
                Left: "ArrowLeft",
                Right: "ArrowRight",
                Up: "ArrowUp",
                Down: "ArrowDown",
                Menu: "ContextMenu",
                Scroll: "ScrollLock",
                Win: "OS"
            },
            Xa = {
                A: "1",
                B: "2",
                C: "3",
                D: "4",
                E: "5",
                F: "6",
                G: "7",
                H: "8",
                I: "9",
                J: "*",
                K: "+",
                M: "-",
                N: ".",
                O: "/",
                "`": "0",
                "\x90": "NumLock"
            };
        Ie.Node && (Qa = Ie.Node.prototype.contains || function (e) {
            return !!(16 & this.compareDocumentPosition(e))
        });
        var Ja, ec = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), t.prototype.parse = function (e) {
                    throw new Error("parse not implemented")
                }, t.makeCurrent = function () {
                    var e;
                    e = new t, Ka || (Ka = e)
                }, t.prototype.hasProperty = function (e, t) {
                    return t in e
                }, t.prototype.setProperty = function (e, t, n) {
                    e[t] = n
                }, t.prototype.getProperty = function (e, t) {
                    return e[t]
                }, t.prototype.invoke = function (e, t, n) {
                    var r;
                    (r = e)[t].apply(r, c(n))
                }, t.prototype.logError = function (e) {
                    window.console && (console.error ? console.error(e) : console.log(e))
                }, t.prototype.log = function (e) {
                    window.console && window.console.log && window.console.log(e)
                }, t.prototype.logGroup = function (e) {
                    window.console && window.console.group && window.console.group(e)
                }, t.prototype.logGroupEnd = function () {
                    window.console && window.console.groupEnd && window.console.groupEnd()
                }, Object.defineProperty(t.prototype, "attrToPropMap", {
                    get: function () {
                        return $a
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.contains = function (e, t) {
                    return Qa.call(e, t)
                }, t.prototype.querySelector = function (e, t) {
                    return e.querySelector(t)
                }, t.prototype.querySelectorAll = function (e, t) {
                    return e.querySelectorAll(t)
                }, t.prototype.on = function (e, t, n) {
                    e.addEventListener(t, n, !1)
                }, t.prototype.onAndCancel = function (e, t, n) {
                    return e.addEventListener(t, n, !1),
                        function () {
                            e.removeEventListener(t, n, !1)
                        }
                }, t.prototype.dispatchEvent = function (e, t) {
                    e.dispatchEvent(t)
                }, t.prototype.createMouseEvent = function (e) {
                    var t = this.getDefaultDocument().createEvent("MouseEvent");
                    return t.initEvent(e, !0, !0), t
                }, t.prototype.createEvent = function (e) {
                    var t = this.getDefaultDocument().createEvent("Event");
                    return t.initEvent(e, !0, !0), t
                }, t.prototype.preventDefault = function (e) {
                    e.preventDefault(), e.returnValue = !1
                }, t.prototype.isPrevented = function (e) {
                    return e.defaultPrevented || null != e.returnValue && !e.returnValue
                }, t.prototype.getInnerHTML = function (e) {
                    return e.innerHTML
                }, t.prototype.getTemplateContent = function (e) {
                    return "content" in e && this.isTemplateElement(e) ? e.content : null
                }, t.prototype.getOuterHTML = function (e) {
                    return e.outerHTML
                }, t.prototype.nodeName = function (e) {
                    return e.nodeName
                }, t.prototype.nodeValue = function (e) {
                    return e.nodeValue
                }, t.prototype.type = function (e) {
                    return e.type
                }, t.prototype.content = function (e) {
                    return this.hasProperty(e, "content") ? e.content : e
                }, t.prototype.firstChild = function (e) {
                    return e.firstChild
                }, t.prototype.nextSibling = function (e) {
                    return e.nextSibling
                }, t.prototype.parentElement = function (e) {
                    return e.parentNode
                }, t.prototype.childNodes = function (e) {
                    return e.childNodes
                }, t.prototype.childNodesAsList = function (e) {
                    for (var t = e.childNodes, n = new Array(t.length), r = 0; r < t.length; r++) n[r] = t[r];
                    return n
                }, t.prototype.clearNodes = function (e) {
                    for (; e.firstChild;) e.removeChild(e.firstChild)
                }, t.prototype.appendChild = function (e, t) {
                    e.appendChild(t)
                }, t.prototype.removeChild = function (e, t) {
                    e.removeChild(t)
                }, t.prototype.replaceChild = function (e, t, n) {
                    e.replaceChild(t, n)
                }, t.prototype.remove = function (e) {
                    return e.parentNode && e.parentNode.removeChild(e), e
                }, t.prototype.insertBefore = function (e, t, n) {
                    e.insertBefore(n, t)
                }, t.prototype.insertAllBefore = function (e, t, n) {
                    n.forEach(function (n) {
                        return e.insertBefore(n, t)
                    })
                }, t.prototype.insertAfter = function (e, t, n) {
                    e.insertBefore(n, t.nextSibling)
                }, t.prototype.setInnerHTML = function (e, t) {
                    e.innerHTML = t
                }, t.prototype.getText = function (e) {
                    return e.textContent
                }, t.prototype.setText = function (e, t) {
                    e.textContent = t
                }, t.prototype.getValue = function (e) {
                    return e.value
                }, t.prototype.setValue = function (e, t) {
                    e.value = t
                }, t.prototype.getChecked = function (e) {
                    return e.checked
                }, t.prototype.setChecked = function (e, t) {
                    e.checked = t
                }, t.prototype.createComment = function (e) {
                    return this.getDefaultDocument().createComment(e)
                }, t.prototype.createTemplate = function (e) {
                    var t = this.getDefaultDocument().createElement("template");
                    return t.innerHTML = e, t
                }, t.prototype.createElement = function (e, t) {
                    return (t = t || this.getDefaultDocument()).createElement(e)
                }, t.prototype.createElementNS = function (e, t, n) {
                    return (n = n || this.getDefaultDocument()).createElementNS(e, t)
                }, t.prototype.createTextNode = function (e, t) {
                    return (t = t || this.getDefaultDocument()).createTextNode(e)
                }, t.prototype.createScriptTag = function (e, t, n) {
                    var r = (n = n || this.getDefaultDocument()).createElement("SCRIPT");
                    return r.setAttribute(e, t), r
                }, t.prototype.createStyleElement = function (e, t) {
                    var n = (t = t || this.getDefaultDocument()).createElement("style");
                    return this.appendChild(n, this.createTextNode(e, t)), n
                }, t.prototype.createShadowRoot = function (e) {
                    return e.createShadowRoot()
                }, t.prototype.getShadowRoot = function (e) {
                    return e.shadowRoot
                }, t.prototype.getHost = function (e) {
                    return e.host
                }, t.prototype.clone = function (e) {
                    return e.cloneNode(!0)
                }, t.prototype.getElementsByClassName = function (e, t) {
                    return e.getElementsByClassName(t)
                }, t.prototype.getElementsByTagName = function (e, t) {
                    return e.getElementsByTagName(t)
                }, t.prototype.classList = function (e) {
                    return Array.prototype.slice.call(e.classList, 0)
                }, t.prototype.addClass = function (e, t) {
                    e.classList.add(t)
                }, t.prototype.removeClass = function (e, t) {
                    e.classList.remove(t)
                }, t.prototype.hasClass = function (e, t) {
                    return e.classList.contains(t)
                }, t.prototype.setStyle = function (e, t, n) {
                    e.style[t] = n
                }, t.prototype.removeStyle = function (e, t) {
                    e.style[t] = ""
                }, t.prototype.getStyle = function (e, t) {
                    return e.style[t]
                }, t.prototype.hasStyle = function (e, t, n) {
                    var r = this.getStyle(e, t) || "";
                    return n ? r == n : r.length > 0
                }, t.prototype.tagName = function (e) {
                    return e.tagName
                }, t.prototype.attributeMap = function (e) {
                    for (var t = new Map, n = e.attributes, r = 0; r < n.length; r++) {
                        var i = n.item(r);
                        t.set(i.name, i.value)
                    }
                    return t
                }, t.prototype.hasAttribute = function (e, t) {
                    return e.hasAttribute(t)
                }, t.prototype.hasAttributeNS = function (e, t, n) {
                    return e.hasAttributeNS(t, n)
                }, t.prototype.getAttribute = function (e, t) {
                    return e.getAttribute(t)
                }, t.prototype.getAttributeNS = function (e, t, n) {
                    return e.getAttributeNS(t, n)
                }, t.prototype.setAttribute = function (e, t, n) {
                    e.setAttribute(t, n)
                }, t.prototype.setAttributeNS = function (e, t, n, r) {
                    e.setAttributeNS(t, n, r)
                }, t.prototype.removeAttribute = function (e, t) {
                    e.removeAttribute(t)
                }, t.prototype.removeAttributeNS = function (e, t, n) {
                    e.removeAttributeNS(t, n)
                }, t.prototype.templateAwareRoot = function (e) {
                    return this.isTemplateElement(e) ? this.content(e) : e
                }, t.prototype.createHtmlDocument = function () {
                    return document.implementation.createHTMLDocument("fakeTitle")
                }, t.prototype.getDefaultDocument = function () {
                    return document
                }, t.prototype.getBoundingClientRect = function (e) {
                    try {
                        return e.getBoundingClientRect()
                    } catch (t) {
                        return {
                            top: 0,
                            bottom: 0,
                            left: 0,
                            right: 0,
                            width: 0,
                            height: 0
                        }
                    }
                }, t.prototype.getTitle = function (e) {
                    return e.title
                }, t.prototype.setTitle = function (e, t) {
                    e.title = t || ""
                }, t.prototype.elementMatches = function (e, t) {
                    return !!this.isElementNode(e) && (e.matches && e.matches(t) || e.msMatchesSelector && e.msMatchesSelector(t) || e.webkitMatchesSelector && e.webkitMatchesSelector(t))
                }, t.prototype.isTemplateElement = function (e) {
                    return this.isElementNode(e) && "TEMPLATE" === e.nodeName
                }, t.prototype.isTextNode = function (e) {
                    return e.nodeType === Node.TEXT_NODE
                }, t.prototype.isCommentNode = function (e) {
                    return e.nodeType === Node.COMMENT_NODE
                }, t.prototype.isElementNode = function (e) {
                    return e.nodeType === Node.ELEMENT_NODE
                }, t.prototype.hasShadowRoot = function (e) {
                    return null != e.shadowRoot && e instanceof HTMLElement
                }, t.prototype.isShadowRoot = function (e) {
                    return e instanceof DocumentFragment
                }, t.prototype.importIntoDoc = function (e) {
                    return document.importNode(this.templateAwareRoot(e), !0)
                }, t.prototype.adoptNode = function (e) {
                    return document.adoptNode(e)
                }, t.prototype.getHref = function (e) {
                    return e.getAttribute("href")
                }, t.prototype.getEventKey = function (e) {
                    var t = e.key;
                    if (null == t) {
                        if (null == (t = e.keyIdentifier)) return "Unidentified";
                        t.startsWith("U+") && (t = String.fromCharCode(parseInt(t.substring(2), 16)), 3 === e.location && Xa.hasOwnProperty(t) && (t = Xa[t]))
                    }
                    return Za[t] || t
                }, t.prototype.getGlobalEventTarget = function (e, t) {
                    return "window" === t ? window : "document" === t ? e : "body" === t ? e.body : null
                }, t.prototype.getHistory = function () {
                    return window.history
                }, t.prototype.getLocation = function () {
                    return window.location
                }, t.prototype.getBaseHref = function (e) {
                    var t, n = tc || (tc = document.querySelector("base")) ? tc.getAttribute("href") : null;
                    return null == n ? null : (t = n, Ja || (Ja = document.createElement("a")), Ja.setAttribute("href", t), "/" === Ja.pathname.charAt(0) ? Ja.pathname : "/" + Ja.pathname)
                }, t.prototype.resetBaseElement = function () {
                    tc = null
                }, t.prototype.getUserAgent = function () {
                    return window.navigator.userAgent
                }, t.prototype.setData = function (e, t, n) {
                    this.setAttribute(e, "data-" + t, n)
                }, t.prototype.getData = function (e, t) {
                    return this.getAttribute(e, "data-" + t)
                }, t.prototype.getComputedStyle = function (e) {
                    return getComputedStyle(e)
                }, t.prototype.supportsWebAnimation = function () {
                    return "function" == typeof Element.prototype.animate
                }, t.prototype.performanceNow = function () {
                    return window.performance && window.performance.now ? window.performance.now() : (new Date).getTime()
                }, t.prototype.supportsCookies = function () {
                    return !0
                }, t.prototype.getCookie = function (e) {
                    return function (e, t) {
                        var n, r;
                        t = encodeURIComponent(t);
                        try {
                            for (var i = s(e.split(";")), l = i.next(); !l.done; l = i.next()) {
                                var o = l.value,
                                    u = o.indexOf("="),
                                    c = a(-1 == u ? [o, ""] : [o.slice(0, u), o.slice(u + 1)], 2),
                                    p = c[1];
                                if (c[0].trim() === t) return decodeURIComponent(p)
                            }
                        } catch (h) {
                            n = {
                                error: h
                            }
                        } finally {
                            try {
                                l && !l.done && (r = i.return) && r.call(i)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        return null
                    }(document.cookie, e)
                }, t.prototype.setCookie = function (e, t) {
                    document.cookie = encodeURIComponent(e) + "=" + encodeURIComponent(t)
                }, t
            }(function (e) {
                function t() {
                    var t = e.call(this) || this;
                    t._animationPrefix = null, t._transitionEnd = null;
                    try {
                        var n = t.createElement("div", document);
                        if (null != t.getStyle(n, "animationName")) t._animationPrefix = "";
                        else
                            for (var r = ["Webkit", "Moz", "O", "ms"], i = 0; i < r.length; i++)
                                if (null != t.getStyle(n, r[i] + "AnimationName")) {
                                    t._animationPrefix = "-" + r[i].toLowerCase() + "-";
                                    break
                                } var l = {
                            WebkitTransition: "webkitTransitionEnd",
                            MozTransition: "transitionend",
                            OTransition: "oTransitionEnd otransitionend",
                            transition: "transitionend"
                        };
                        Object.keys(l).forEach(function (e) {
                            null != t.getStyle(n, e) && (t._transitionEnd = l[e])
                        })
                    } catch (o) {
                        t._animationPrefix = null, t._transitionEnd = null
                    }
                    return t
                }
                return i(t, e), t.prototype.getDistributedNodes = function (e) {
                    return e.getDistributedNodes()
                }, t.prototype.resolveAndSetHref = function (e, t, n) {
                    e.href = null == n ? t : t + "/../" + n
                }, t.prototype.supportsDOMEvents = function () {
                    return !0
                }, t.prototype.supportsNativeShadowDOM = function () {
                    return "function" == typeof document.body.createShadowRoot
                }, t.prototype.getAnimationPrefix = function () {
                    return this._animationPrefix ? this._animationPrefix : ""
                }, t.prototype.getTransitionEnd = function () {
                    return this._transitionEnd ? this._transitionEnd : ""
                }, t.prototype.supportsAnimation = function () {
                    return null != this._animationPrefix && null != this._transitionEnd
                }, t
            }(function () {
                function e() {
                    this.resourceLoaderType = null
                }
                return Object.defineProperty(e.prototype, "attrToPropMap", {
                    get: function () {
                        return this._attrToPropMap
                    },
                    set: function (e) {
                        this._attrToPropMap = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }())),
            tc = null,
            nc = zs;

        function rc() {
            return !!window.history.pushState
        }
        var ic = function (e) {
                function t(t) {
                    var n = e.call(this) || this;
                    return n._doc = t, n._init(), n
                }
                var n;
                return i(t, e), t.prototype._init = function () {
                    this.location = qa().getLocation(), this._history = qa().getHistory()
                }, t.prototype.getBaseHrefFromDOM = function () {
                    return qa().getBaseHref(this._doc)
                }, t.prototype.onPopState = function (e) {
                    qa().getGlobalEventTarget(this._doc, "window").addEventListener("popstate", e, !1)
                }, t.prototype.onHashChange = function (e) {
                    qa().getGlobalEventTarget(this._doc, "window").addEventListener("hashchange", e, !1)
                }, Object.defineProperty(t.prototype, "pathname", {
                    get: function () {
                        return this.location.pathname
                    },
                    set: function (e) {
                        this.location.pathname = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "search", {
                    get: function () {
                        return this.location.search
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "hash", {
                    get: function () {
                        return this.location.hash
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.pushState = function (e, t, n) {
                    rc() ? this._history.pushState(e, t, n) : this.location.hash = n
                }, t.prototype.replaceState = function (e, t, n) {
                    rc() ? this._history.replaceState(e, t, n) : this.location.hash = n
                }, t.prototype.forward = function () {
                    this._history.forward()
                }, t.prototype.back = function () {
                    this._history.back()
                }, o([(n = He(nc), function (e, t) {
                    n(e, t, 0)
                }), u("design:paramtypes", [Object])], t)
            }(us),
            lc = new ye("TRANSITION_ID"),
            oc = [{
                provide: An,
                useFactory: function (e, t, n) {
                    return function () {
                        n.get(wn).donePromise.then(function () {
                            var n = qa();
                            Array.prototype.slice.apply(n.querySelectorAll(t, "style[ng-transition]")).filter(function (t) {
                                return n.getAttribute(t, "ng-transition") === e
                            }).forEach(function (e) {
                                return n.remove(e)
                            })
                        })
                    }
                },
                deps: [lc, nc, lt],
                multi: !0
            }],
            uc = function () {
                function e() {}
                return e.init = function () {
                    var t;
                    t = new e, ur = t
                }, e.prototype.addToWindow = function (e) {
                    Ie.getAngularTestability = function (t, n) {
                        void 0 === n && (n = !0);
                        var r = e.findTestabilityInTree(t, n);
                        if (null == r) throw new Error("Could not find testability for element.");
                        return r
                    }, Ie.getAllAngularTestabilities = function () {
                        return e.getAllTestabilities()
                    }, Ie.getAllAngularRootElements = function () {
                        return e.getAllRootElements()
                    }, Ie.frameworkStabilizers || (Ie.frameworkStabilizers = []), Ie.frameworkStabilizers.push(function (e) {
                        var t = Ie.getAllAngularTestabilities(),
                            n = t.length,
                            r = !1,
                            i = function (t) {
                                r = r || t, 0 == --n && e(r)
                            };
                        t.forEach(function (e) {
                            e.whenStable(i)
                        })
                    })
                }, e.prototype.findTestabilityInTree = function (e, t, n) {
                    if (null == t) return null;
                    var r = e.getTestability(t);
                    return null != r ? r : n ? qa().isShadowRoot(t) ? this.findTestabilityInTree(e, qa().getHost(t), !0) : this.findTestabilityInTree(e, qa().parentElement(t), !0) : null
                }, e
            }();

        function sc(e, t) {
            "undefined" != typeof COMPILED && COMPILED || ((Ie.ng = Ie.ng || {})[e] = t)
        }
        var ac = {
            ApplicationRef: fr,
            NgZone: Zn
        };

        function cc(e) {
            return wr(e)
        }
        var pc = new ye("EventManagerPlugins"),
            hc = function () {
                function e(e, t) {
                    var n = this;
                    this._zone = t, this._eventNameToPlugin = new Map, e.forEach(function (e) {
                        return e.manager = n
                    }), this._plugins = e.slice().reverse()
                }
                return e.prototype.addEventListener = function (e, t, n) {
                    return this._findPluginFor(t).addEventListener(e, t, n)
                }, e.prototype.addGlobalEventListener = function (e, t, n) {
                    return this._findPluginFor(t).addGlobalEventListener(e, t, n)
                }, e.prototype.getZone = function () {
                    return this._zone
                }, e.prototype._findPluginFor = function (e) {
                    var t = this._eventNameToPlugin.get(e);
                    if (t) return t;
                    for (var n = this._plugins, r = 0; r < n.length; r++) {
                        var i = n[r];
                        if (i.supports(e)) return this._eventNameToPlugin.set(e, i), i
                    }
                    throw new Error("No event manager plugin found for event " + e)
                }, e
            }(),
            dc = function () {
                function e(e) {
                    this._doc = e
                }
                return e.prototype.addGlobalEventListener = function (e, t, n) {
                    var r = qa().getGlobalEventTarget(this._doc, e);
                    if (!r) throw new Error("Unsupported event target " + r + " for event " + t);
                    return this.addEventListener(r, t, n)
                }, e
            }(),
            fc = function () {
                function e() {
                    this._stylesSet = new Set
                }
                return e.prototype.addStyles = function (e) {
                    var t = this,
                        n = new Set;
                    e.forEach(function (e) {
                        t._stylesSet.has(e) || (t._stylesSet.add(e), n.add(e))
                    }), this.onStylesAdded(n)
                }, e.prototype.onStylesAdded = function (e) {}, e.prototype.getAllStyles = function () {
                    return Array.from(this._stylesSet)
                }, e
            }(),
            gc = function (e) {
                function t(t) {
                    var n = e.call(this) || this;
                    return n._doc = t, n._hostNodes = new Set, n._styleNodes = new Set, n._hostNodes.add(t.head), n
                }
                return i(t, e), t.prototype._addStylesToHost = function (e, t) {
                    var n = this;
                    e.forEach(function (e) {
                        var r = n._doc.createElement("style");
                        r.textContent = e, n._styleNodes.add(t.appendChild(r))
                    })
                }, t.prototype.addHost = function (e) {
                    this._addStylesToHost(this._stylesSet, e), this._hostNodes.add(e)
                }, t.prototype.removeHost = function (e) {
                    this._hostNodes.delete(e)
                }, t.prototype.onStylesAdded = function (e) {
                    var t = this;
                    this._hostNodes.forEach(function (n) {
                        return t._addStylesToHost(e, n)
                    })
                }, t.prototype.ngOnDestroy = function () {
                    this._styleNodes.forEach(function (e) {
                        return qa().remove(e)
                    })
                }, t
            }(fc),
            vc = {
                svg: "http://www.w3.org/2000/svg",
                xhtml: "http://www.w3.org/1999/xhtml",
                xlink: "http://www.w3.org/1999/xlink",
                xml: "http://www.w3.org/XML/1998/namespace",
                xmlns: "http://www.w3.org/2000/xmlns/"
            },
            mc = /%COMP%/g,
            yc = "_nghost-%COMP%",
            Sc = "_ngcontent-%COMP%";

        function Ec(e, t, n) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                Array.isArray(i) ? Ec(e, i, n) : (i = i.replace(mc, e), n.push(i))
            }
            return n
        }

        function Oc(e) {
            return function (t) {
                !1 === e(t) && (t.preventDefault(), t.returnValue = !1)
            }
        }
        var bc = function () {
                function e(e, t, n) {
                    this.eventManager = e, this.sharedStylesHost = t, this.appId = n, this.rendererByCompId = new Map, this.defaultRenderer = new Tc(e)
                }
                return e.prototype.createRenderer = function (e, t) {
                    if (!e || !t) return this.defaultRenderer;
                    switch (t.encapsulation) {
                        case Ue.Emulated:
                            var n = this.rendererByCompId.get(t.id);
                            return n || (n = new Ic(this.eventManager, this.sharedStylesHost, t, this.appId), this.rendererByCompId.set(t.id, n)), n.applyToHost(e), n;
                        case Ue.Native:
                        case Ue.ShadowDom:
                            return new Ac(this.eventManager, this.sharedStylesHost, e, t);
                        default:
                            if (!this.rendererByCompId.has(t.id)) {
                                var r = Ec(t.id, t.styles, []);
                                this.sharedStylesHost.addStyles(r), this.rendererByCompId.set(t.id, this.defaultRenderer)
                            }
                            return this.defaultRenderer
                    }
                }, e.prototype.begin = function () {}, e.prototype.end = function () {}, e
            }(),
            Tc = function () {
                function e(e) {
                    this.eventManager = e, this.data = Object.create(null)
                }
                return e.prototype.destroy = function () {}, e.prototype.createElement = function (e, t) {
                    return t ? document.createElementNS(vc[t], e) : document.createElement(e)
                }, e.prototype.createComment = function (e) {
                    return document.createComment(e)
                }, e.prototype.createText = function (e) {
                    return document.createTextNode(e)
                }, e.prototype.appendChild = function (e, t) {
                    e.appendChild(t)
                }, e.prototype.insertBefore = function (e, t, n) {
                    e && e.insertBefore(t, n)
                }, e.prototype.removeChild = function (e, t) {
                    e && e.removeChild(t)
                }, e.prototype.selectRootElement = function (e, t) {
                    var n = "string" == typeof e ? document.querySelector(e) : e;
                    if (!n) throw new Error('The selector "' + e + '" did not match any elements');
                    return t || (n.textContent = ""), n
                }, e.prototype.parentNode = function (e) {
                    return e.parentNode
                }, e.prototype.nextSibling = function (e) {
                    return e.nextSibling
                }, e.prototype.setAttribute = function (e, t, n, r) {
                    if (r) {
                        t = r + ":" + t;
                        var i = vc[r];
                        i ? e.setAttributeNS(i, t, n) : e.setAttribute(t, n)
                    } else e.setAttribute(t, n)
                }, e.prototype.removeAttribute = function (e, t, n) {
                    if (n) {
                        var r = vc[n];
                        r ? e.removeAttributeNS(r, t) : e.removeAttribute(n + ":" + t)
                    } else e.removeAttribute(t)
                }, e.prototype.addClass = function (e, t) {
                    e.classList.add(t)
                }, e.prototype.removeClass = function (e, t) {
                    e.classList.remove(t)
                }, e.prototype.setStyle = function (e, t, n, r) {
                    r & kt.DashCase ? e.style.setProperty(t, n, r & kt.Important ? "important" : "") : e.style[t] = n
                }, e.prototype.removeStyle = function (e, t, n) {
                    n & kt.DashCase ? e.style.removeProperty(t) : e.style[t] = ""
                }, e.prototype.setProperty = function (e, t, n) {
                    Cc(t, "property"), e[t] = n
                }, e.prototype.setValue = function (e, t) {
                    e.nodeValue = t
                }, e.prototype.listen = function (e, t, n) {
                    return Cc(t, "listener"), "string" == typeof e ? this.eventManager.addGlobalEventListener(e, t, Oc(n)) : this.eventManager.addEventListener(e, t, Oc(n))
                }, e
            }(),
            Rc = "@".charCodeAt(0);

        function Cc(e, t) {
            if (e.charCodeAt(0) === Rc) throw new Error("Found the synthetic " + t + " " + e + '. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')
        }
        var _c, Ic = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t) || this;
                    l.component = r;
                    var o = Ec(i + "-" + r.id, r.styles, []);
                    return n.addStyles(o), l.contentAttr = Sc.replace(mc, i + "-" + r.id), l.hostAttr = yc.replace(mc, i + "-" + r.id), l
                }
                return i(t, e), t.prototype.applyToHost = function (t) {
                    e.prototype.setAttribute.call(this, t, this.hostAttr, "")
                }, t.prototype.createElement = function (t, n) {
                    var r = e.prototype.createElement.call(this, t, n);
                    return e.prototype.setAttribute.call(this, r, this.contentAttr, ""), r
                }, t
            }(Tc),
            Ac = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t) || this;
                    l.sharedStylesHost = n, l.hostEl = r, l.component = i, l.shadowRoot = i.encapsulation === Ue.ShadowDom ? r.attachShadow({
                        mode: "open"
                    }) : r.createShadowRoot(), l.sharedStylesHost.addHost(l.shadowRoot);
                    for (var o = Ec(i.id, i.styles, []), u = 0; u < o.length; u++) {
                        var s = document.createElement("style");
                        s.textContent = o[u], l.shadowRoot.appendChild(s)
                    }
                    return l
                }
                return i(t, e), t.prototype.nodeOrShadowRoot = function (e) {
                    return e === this.hostEl ? this.shadowRoot : e
                }, t.prototype.destroy = function () {
                    this.sharedStylesHost.removeHost(this.shadowRoot)
                }, t.prototype.appendChild = function (t, n) {
                    return e.prototype.appendChild.call(this, this.nodeOrShadowRoot(t), n)
                }, t.prototype.insertBefore = function (t, n, r) {
                    return e.prototype.insertBefore.call(this, this.nodeOrShadowRoot(t), n, r)
                }, t.prototype.removeChild = function (t, n) {
                    return e.prototype.removeChild.call(this, this.nodeOrShadowRoot(t), n)
                }, t.prototype.parentNode = function (t) {
                    return this.nodeOrShadowRoot(e.prototype.parentNode.call(this, this.nodeOrShadowRoot(t)))
                }, t
            }(Tc),
            wc = "undefined" != typeof Zone && Zone.__symbol__ || function (e) {
                return "__zone_symbol__" + e
            },
            Nc = wc("addEventListener"),
            Pc = wc("removeEventListener"),
            Dc = {},
            Mc = "__zone_symbol__propagationStopped";
        "undefined" != typeof Zone && Zone[wc("BLACK_LISTED_EVENTS")] && (_c = {});
        var kc = function (e) {
                return !!_c && _c.hasOwnProperty(e)
            },
            Lc = function (e) {
                var t = Dc[e.type];
                if (t) {
                    var n = this[t];
                    if (n) {
                        var r = [e];
                        if (1 === n.length) return (o = n[0]).zone !== Zone.current ? o.zone.run(o.handler, this, r) : o.handler.apply(this, r);
                        for (var i = n.slice(), l = 0; l < i.length && !0 !== e[Mc]; l++) {
                            var o;
                            (o = i[l]).zone !== Zone.current ? o.zone.run(o.handler, this, r) : o.handler.apply(this, r)
                        }
                    }
                }
            },
            xc = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, t) || this;
                    return i.ngZone = n, r && function (e) {
                        return e === qs
                    }(r) || i.patchEvent(), i
                }
                return i(t, e), t.prototype.patchEvent = function () {
                    if ("undefined" != typeof Event && Event && Event.prototype && !Event.prototype.__zone_symbol__stopImmediatePropagation) {
                        var e = Event.prototype.__zone_symbol__stopImmediatePropagation = Event.prototype.stopImmediatePropagation;
                        Event.prototype.stopImmediatePropagation = function () {
                            this && (this[Mc] = !0), e && e.apply(this, arguments)
                        }
                    }
                }, t.prototype.supports = function (e) {
                    return !0
                }, t.prototype.addEventListener = function (e, t, n) {
                    var r = this,
                        i = n;
                    if (!e[Nc] || Zn.isInAngularZone() && !kc(t)) e.addEventListener(t, i, !1);
                    else {
                        var l = Dc[t];
                        l || (l = Dc[t] = wc("ANGULAR" + t + "FALSE"));
                        var o = e[l],
                            u = o && o.length > 0;
                        o || (o = e[l] = []);
                        var s = kc(t) ? Zone.root : Zone.current;
                        if (0 === o.length) o.push({
                            zone: s,
                            handler: i
                        });
                        else {
                            for (var a = !1, c = 0; c < o.length; c++)
                                if (o[c].handler === i) {
                                    a = !0;
                                    break
                                } a || o.push({
                                zone: s,
                                handler: i
                            })
                        }
                        u || e[Nc](t, Lc, !1)
                    }
                    return function () {
                        return r.removeEventListener(e, t, i)
                    }
                }, t.prototype.removeEventListener = function (e, t, n) {
                    var r = e[Pc];
                    if (!r) return e.removeEventListener.apply(e, [t, n, !1]);
                    var i = Dc[t],
                        l = i && e[i];
                    if (!l) return e.removeEventListener.apply(e, [t, n, !1]);
                    for (var o = !1, u = 0; u < l.length; u++)
                        if (l[u].handler === n) {
                            o = !0, l.splice(u, 1);
                            break
                        } o ? 0 === l.length && r.apply(e, [t, Lc, !1]) : e.removeEventListener.apply(e, [t, n, !1])
                }, t
            }(dc),
            Fc = {
                pan: !0,
                panstart: !0,
                panmove: !0,
                panend: !0,
                pancancel: !0,
                panleft: !0,
                panright: !0,
                panup: !0,
                pandown: !0,
                pinch: !0,
                pinchstart: !0,
                pinchmove: !0,
                pinchend: !0,
                pinchcancel: !0,
                pinchin: !0,
                pinchout: !0,
                press: !0,
                pressup: !0,
                rotate: !0,
                rotatestart: !0,
                rotatemove: !0,
                rotateend: !0,
                rotatecancel: !0,
                swipe: !0,
                swipeleft: !0,
                swiperight: !0,
                swipeup: !0,
                swipedown: !0,
                tap: !0
            },
            Uc = new ye("HammerGestureConfig"),
            Hc = new ye("HammerLoader"),
            Gc = function () {
                function e() {
                    this.events = [], this.overrides = {}
                }
                return e.prototype.buildHammer = function (e) {
                    var t = new Hammer(e, this.options);
                    for (var n in t.get("pinch").set({
                            enable: !0
                        }), t.get("rotate").set({
                            enable: !0
                        }), this.overrides) t.get(n).set(this.overrides[n]);
                    return t
                }, e
            }(),
            Bc = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t) || this;
                    return l._config = n, l.console = r, l.loader = i, l
                }
                return i(t, e), t.prototype.supports = function (e) {
                    return !(!Fc.hasOwnProperty(e.toLowerCase()) && !this.isCustomEvent(e) || !window.Hammer && !this.loader && (this.console.warn('The "' + e + '" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'), 1))
                }, t.prototype.addEventListener = function (e, t, n) {
                    var r = this,
                        i = this.manager.getZone();
                    if (t = t.toLowerCase(), !window.Hammer && this.loader) {
                        var l = !1,
                            o = function () {
                                l = !0
                            };
                        return this.loader().then(function () {
                                if (!window.Hammer) return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."), void(o = function () {});
                                l || (o = r.addEventListener(e, t, n))
                            }).catch(function () {
                                r.console.warn('The "' + t + '" event cannot be bound because the custom Hammer.JS loader failed.'), o = function () {}
                            }),
                            function () {
                                o()
                            }
                    }
                    return i.runOutsideAngular(function () {
                        var l = r._config.buildHammer(e),
                            o = function (e) {
                                i.runGuarded(function () {
                                    n(e)
                                })
                            };
                        return l.on(t, o),
                            function () {
                                l.off(t, o), "function" == typeof l.destroy && l.destroy()
                            }
                    })
                }, t.prototype.isCustomEvent = function (e) {
                    return this._config.events.indexOf(e) > -1
                }, t
            }(dc),
            Vc = ["alt", "control", "meta", "shift"],
            Wc = {
                alt: function (e) {
                    return e.altKey
                },
                control: function (e) {
                    return e.ctrlKey
                },
                meta: function (e) {
                    return e.metaKey
                },
                shift: function (e) {
                    return e.shiftKey
                }
            },
            jc = function (e) {
                function t(t) {
                    return e.call(this, t) || this
                }
                var n;
                return i(t, e), n = t, t.prototype.supports = function (e) {
                    return null != n.parseEventName(e)
                }, t.prototype.addEventListener = function (e, t, r) {
                    var i = n.parseEventName(t),
                        l = n.eventCallback(i.fullKey, r, this.manager.getZone());
                    return this.manager.getZone().runOutsideAngular(function () {
                        return qa().onAndCancel(e, i.domEventName, l)
                    })
                }, t.parseEventName = function (e) {
                    var t = e.toLowerCase().split("."),
                        r = t.shift();
                    if (0 === t.length || "keydown" !== r && "keyup" !== r) return null;
                    var i = n._normalizeKey(t.pop()),
                        l = "";
                    if (Vc.forEach(function (e) {
                            var n = t.indexOf(e);
                            n > -1 && (t.splice(n, 1), l += e + ".")
                        }), l += i, 0 != t.length || 0 === i.length) return null;
                    var o = {};
                    return o.domEventName = r, o.fullKey = l, o
                }, t.getEventFullKey = function (e) {
                    var t = "",
                        n = qa().getEventKey(e);
                    return " " === (n = n.toLowerCase()) ? n = "space" : "." === n && (n = "dot"), Vc.forEach(function (r) {
                        r != n && (0, Wc[r])(e) && (t += r + ".")
                    }), t += n
                }, t.eventCallback = function (e, t, r) {
                    return function (i) {
                        n.getEventFullKey(i) === e && r.runGuarded(function () {
                            return t(i)
                        })
                    }
                }, t._normalizeKey = function (e) {
                    switch (e) {
                        case "esc":
                            return "escape";
                        default:
                            return e
                    }
                }, t
            }(dc),
            Yc = function () {
                return function () {}
            }(),
            zc = function (e) {
                function t(t) {
                    var n = e.call(this) || this;
                    return n._doc = t, n
                }
                return i(t, e), t.prototype.sanitize = function (e, t) {
                    if (null == t) return null;
                    switch (e) {
                        case Ft.NONE:
                            return t;
                        case Ft.HTML:
                            return t instanceof qc ? t.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(t, "HTML"), function (e, t) {
                                var n = null;
                                try {
                                    Qt = Qt || new Wt(e);
                                    var r = t ? String(t) : "";
                                    n = Qt.getInertBodyElement(r);
                                    var i = 5,
                                        l = r;
                                    do {
                                        if (0 === i) throw new Error("Failed to sanitize html because the input is unstable");
                                        i--, r = l, l = n.innerHTML, n = Qt.getInertBodyElement(r)
                                    } while (r !== l);
                                    var o = new on,
                                        u = o.sanitizeChildren(cn(n) || n);
                                    return Vt() && o.sanitizedSomething && console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"), u
                                } finally {
                                    if (n)
                                        for (var s = cn(n) || n; s.firstChild;) s.removeChild(s.firstChild)
                                }
                            }(this._doc, String(t)));
                        case Ft.STYLE:
                            return t instanceof Qc ? t.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(t, "Style"), function (e) {
                                if (!(e = String(e).trim())) return "";
                                var t = e.match(gn);
                                return t && zt(t[1]) === t[1] || e.match(fn) && function (e) {
                                    for (var t = !0, n = !0, r = 0; r < e.length; r++) {
                                        var i = e.charAt(r);
                                        "'" === i && n ? t = !t : '"' === i && t && (n = !n)
                                    }
                                    return t && n
                                }(e) ? e : (Vt() && console.warn("WARNING: sanitizing unsafe style value " + e + " (see http://g.co/ng/security#xss)."), "unsafe")
                            }(t));
                        case Ft.SCRIPT:
                            if (t instanceof $c) return t.changingThisBreaksApplicationSecurity;
                            throw this.checkNotSafeValue(t, "Script"), new Error("unsafe value used in a script context");
                        case Ft.URL:
                            return t instanceof Xc || t instanceof Zc ? t.changingThisBreaksApplicationSecurity : (this.checkNotSafeValue(t, "URL"), zt(String(t)));
                        case Ft.RESOURCE_URL:
                            if (t instanceof Xc) return t.changingThisBreaksApplicationSecurity;
                            throw this.checkNotSafeValue(t, "ResourceURL"), new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");
                        default:
                            throw new Error("Unexpected SecurityContext " + e + " (see http://g.co/ng/security#xss)")
                    }
                }, t.prototype.checkNotSafeValue = function (e, t) {
                    if (e instanceof Kc) throw new Error("Required a safe " + t + ", got a " + e.getTypeName() + " (see http://g.co/ng/security#xss)")
                }, t.prototype.bypassSecurityTrustHtml = function (e) {
                    return new qc(e)
                }, t.prototype.bypassSecurityTrustStyle = function (e) {
                    return new Qc(e)
                }, t.prototype.bypassSecurityTrustScript = function (e) {
                    return new $c(e)
                }, t.prototype.bypassSecurityTrustUrl = function (e) {
                    return new Zc(e)
                }, t.prototype.bypassSecurityTrustResourceUrl = function (e) {
                    return new Xc(e)
                }, t
            }(Yc),
            Kc = function () {
                function e(e) {
                    this.changingThisBreaksApplicationSecurity = e
                }
                return e.prototype.toString = function () {
                    return "SafeValue must use [property]=binding: " + this.changingThisBreaksApplicationSecurity + " (see http://g.co/ng/security#xss)"
                }, e
            }(),
            qc = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), t.prototype.getTypeName = function () {
                    return "HTML"
                }, t
            }(Kc),
            Qc = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), t.prototype.getTypeName = function () {
                    return "Style"
                }, t
            }(Kc),
            $c = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), t.prototype.getTypeName = function () {
                    return "Script"
                }, t
            }(Kc),
            Zc = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), t.prototype.getTypeName = function () {
                    return "URL"
                }, t
            }(Kc),
            Xc = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), t.prototype.getTypeName = function () {
                    return "ResourceURL"
                }, t
            }(Kc),
            Jc = cr(zr, "browser", [{
                provide: kn,
                useValue: Ks
            }, {
                provide: Mn,
                useValue: function () {
                    ec.makeCurrent(), uc.init()
                },
                multi: !0
            }, {
                provide: us,
                useClass: ic,
                deps: [nc]
            }, {
                provide: nc,
                useFactory: function () {
                    return document
                },
                deps: []
            }]);

        function ep() {
            return new Cn
        }
        var tp = function () {
            function e(e) {
                if (e) throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")
            }
            var t;
            return t = e, e.withServerTransition = function (e) {
                return {
                    ngModule: t,
                    providers: [{
                        provide: Nn,
                        useValue: e.appId
                    }, {
                        provide: lc,
                        useExisting: Nn
                    }, oc]
                }
            }, e
        }();
        "undefined" != typeof window && window;
        var np = function () {
                return function (e, t) {
                    this.id = e, this.url = t
                }
            }(),
            rp = function (e) {
                function t(t, n, r, i) {
                    void 0 === r && (r = "imperative"), void 0 === i && (i = null);
                    var l = e.call(this, t, n) || this;
                    return l.navigationTrigger = r, l.restoredState = i, l
                }
                return i(t, e), t.prototype.toString = function () {
                    return "NavigationStart(id: " + this.id + ", url: '" + this.url + "')"
                }, t
            }(np),
            ip = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, t, n) || this;
                    return i.urlAfterRedirects = r, i
                }
                return i(t, e), t.prototype.toString = function () {
                    return "NavigationEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "')"
                }, t
            }(np),
            lp = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, t, n) || this;
                    return i.reason = r, i
                }
                return i(t, e), t.prototype.toString = function () {
                    return "NavigationCancel(id: " + this.id + ", url: '" + this.url + "')"
                }, t
            }(np),
            op = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, t, n) || this;
                    return i.error = r, i
                }
                return i(t, e), t.prototype.toString = function () {
                    return "NavigationError(id: " + this.id + ", url: '" + this.url + "', error: " + this.error + ")"
                }, t
            }(np),
            up = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t, n) || this;
                    return l.urlAfterRedirects = r, l.state = i, l
                }
                return i(t, e), t.prototype.toString = function () {
                    return "RoutesRecognized(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")"
                }, t
            }(np),
            sp = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t, n) || this;
                    return l.urlAfterRedirects = r, l.state = i, l
                }
                return i(t, e), t.prototype.toString = function () {
                    return "GuardsCheckStart(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")"
                }, t
            }(np),
            ap = function (e) {
                function t(t, n, r, i, l) {
                    var o = e.call(this, t, n) || this;
                    return o.urlAfterRedirects = r, o.state = i, o.shouldActivate = l, o
                }
                return i(t, e), t.prototype.toString = function () {
                    return "GuardsCheckEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ", shouldActivate: " + this.shouldActivate + ")"
                }, t
            }(np),
            cp = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t, n) || this;
                    return l.urlAfterRedirects = r, l.state = i, l
                }
                return i(t, e), t.prototype.toString = function () {
                    return "ResolveStart(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")"
                }, t
            }(np),
            pp = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, t, n) || this;
                    return l.urlAfterRedirects = r, l.state = i, l
                }
                return i(t, e), t.prototype.toString = function () {
                    return "ResolveEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")"
                }, t
            }(np),
            hp = function () {
                function e(e) {
                    this.route = e
                }
                return e.prototype.toString = function () {
                    return "RouteConfigLoadStart(path: " + this.route.path + ")"
                }, e
            }(),
            dp = function () {
                function e(e) {
                    this.route = e
                }
                return e.prototype.toString = function () {
                    return "RouteConfigLoadEnd(path: " + this.route.path + ")"
                }, e
            }(),
            fp = function () {
                function e(e) {
                    this.snapshot = e
                }
                return e.prototype.toString = function () {
                    return "ChildActivationStart(path: '" + (this.snapshot.routeConfig && this.snapshot.routeConfig.path || "") + "')"
                }, e
            }(),
            gp = function () {
                function e(e) {
                    this.snapshot = e
                }
                return e.prototype.toString = function () {
                    return "ChildActivationEnd(path: '" + (this.snapshot.routeConfig && this.snapshot.routeConfig.path || "") + "')"
                }, e
            }(),
            vp = function () {
                function e(e) {
                    this.snapshot = e
                }
                return e.prototype.toString = function () {
                    return "ActivationStart(path: '" + (this.snapshot.routeConfig && this.snapshot.routeConfig.path || "") + "')"
                }, e
            }(),
            mp = function () {
                function e(e) {
                    this.snapshot = e
                }
                return e.prototype.toString = function () {
                    return "ActivationEnd(path: '" + (this.snapshot.routeConfig && this.snapshot.routeConfig.path || "") + "')"
                }, e
            }(),
            yp = function () {
                function e(e, t, n) {
                    this.routerEvent = e, this.position = t, this.anchor = n
                }
                return e.prototype.toString = function () {
                    return "Scroll(anchor: '" + this.anchor + "', position: '" + (this.position ? this.position[0] + ", " + this.position[1] : null) + "')"
                }, e
            }(),
            Sp = function () {
                return function () {}
            }(),
            Ep = "primary",
            Op = function () {
                function e(e) {
                    this.params = e || {}
                }
                return e.prototype.has = function (e) {
                    return this.params.hasOwnProperty(e)
                }, e.prototype.get = function (e) {
                    if (this.has(e)) {
                        var t = this.params[e];
                        return Array.isArray(t) ? t[0] : t
                    }
                    return null
                }, e.prototype.getAll = function (e) {
                    if (this.has(e)) {
                        var t = this.params[e];
                        return Array.isArray(t) ? t : [t]
                    }
                    return []
                }, Object.defineProperty(e.prototype, "keys", {
                    get: function () {
                        return Object.keys(this.params)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }();

        function bp(e) {
            return new Op(e)
        }
        var Tp = "ngNavigationCancelingError";

        function Rp(e) {
            var t = Error("NavigationCancelingError: " + e);
            return t[Tp] = !0, t
        }

        function Cp(e, t, n) {
            var r = n.path.split("/");
            if (r.length > e.length) return null;
            if ("full" === n.pathMatch && (t.hasChildren() || r.length < e.length)) return null;
            for (var i = {}, l = 0; l < r.length; l++) {
                var o = r[l],
                    u = e[l];
                if (o.startsWith(":")) i[o.substring(1)] = u;
                else if (o !== u.path) return null
            }
            return {
                consumed: e.slice(0, r.length),
                posParams: i
            }
        }
        var _p = function () {
            return function (e, t) {
                this.routes = e, this.module = t
            }
        }();

        function Ip(e, t) {
            void 0 === t && (t = "");
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                Ap(r, wp(t, r))
            }
        }

        function Ap(e, t) {
            if (!e) throw new Error("\n      Invalid configuration of route '" + t + "': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");
            if (Array.isArray(e)) throw new Error("Invalid configuration of route '" + t + "': Array cannot be specified");
            if (!e.component && !e.children && !e.loadChildren && e.outlet && e.outlet !== Ep) throw new Error("Invalid configuration of route '" + t + "': a componentless route without children or loadChildren cannot have a named outlet set");
            if (e.redirectTo && e.children) throw new Error("Invalid configuration of route '" + t + "': redirectTo and children cannot be used together");
            if (e.redirectTo && e.loadChildren) throw new Error("Invalid configuration of route '" + t + "': redirectTo and loadChildren cannot be used together");
            if (e.children && e.loadChildren) throw new Error("Invalid configuration of route '" + t + "': children and loadChildren cannot be used together");
            if (e.redirectTo && e.component) throw new Error("Invalid configuration of route '" + t + "': redirectTo and component cannot be used together");
            if (e.path && e.matcher) throw new Error("Invalid configuration of route '" + t + "': path and matcher cannot be used together");
            if (void 0 === e.redirectTo && !e.component && !e.children && !e.loadChildren) throw new Error("Invalid configuration of route '" + t + "'. One of the following must be provided: component, redirectTo, children or loadChildren");
            if (void 0 === e.path && void 0 === e.matcher) throw new Error("Invalid configuration of route '" + t + "': routes must have either a path or a matcher specified");
            if ("string" == typeof e.path && "/" === e.path.charAt(0)) throw new Error("Invalid configuration of route '" + t + "': path cannot start with a slash");
            if ("" === e.path && void 0 !== e.redirectTo && void 0 === e.pathMatch) throw new Error("Invalid configuration of route '{path: \"" + t + '", redirectTo: "' + e.redirectTo + "\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");
            if (void 0 !== e.pathMatch && "full" !== e.pathMatch && "prefix" !== e.pathMatch) throw new Error("Invalid configuration of route '" + t + "': pathMatch can only be set to 'prefix' or 'full'");
            e.children && Ip(e.children, t)
        }

        function wp(e, t) {
            return t ? e || t.path ? e && !t.path ? e + "/" : !e && t.path ? t.path : e + "/" + t.path : "" : e
        }

        function Np(e) {
            var t = e.children && e.children.map(Np),
                n = t ? l({}, e, {
                    children: t
                }) : l({}, e);
            return !n.component && (t || n.loadChildren) && n.outlet && n.outlet !== Ep && (n.component = Sp), n
        }

        function Pp(e, t) {
            var n, r = Object.keys(e),
                i = Object.keys(t);
            if (r.length != i.length) return !1;
            for (var l = 0; l < r.length; l++)
                if (e[n = r[l]] !== t[n]) return !1;
            return !0
        }

        function Dp(e) {
            return Array.prototype.concat.apply([], e)
        }

        function Mp(e) {
            return e.length > 0 ? e[e.length - 1] : null
        }

        function kp(e, t) {
            for (var n in e) e.hasOwnProperty(n) && t(e[n], n)
        }

        function Lp(e) {
            return In(e) ? e : _n(e) ? Z(Promise.resolve(e)) : Zs(e)
        }

        function xp(e, t, n) {
            return n ? function (e, t) {
                return Pp(e, t)
            }(e.queryParams, t.queryParams) && function e(t, n) {
                if (!Gp(t.segments, n.segments)) return !1;
                if (t.numberOfChildren !== n.numberOfChildren) return !1;
                for (var r in n.children) {
                    if (!t.children[r]) return !1;
                    if (!e(t.children[r], n.children[r])) return !1
                }
                return !0
            }(e.root, t.root) : function (e, t) {
                return Object.keys(t).length <= Object.keys(e).length && Object.keys(t).every(function (n) {
                    return t[n] === e[n]
                })
            }(e.queryParams, t.queryParams) && function e(t, n) {
                return function t(n, r, i) {
                    if (n.segments.length > i.length) return !!Gp(o = n.segments.slice(0, i.length), i) && !r.hasChildren();
                    if (n.segments.length === i.length) {
                        if (!Gp(n.segments, i)) return !1;
                        for (var l in r.children) {
                            if (!n.children[l]) return !1;
                            if (!e(n.children[l], r.children[l])) return !1
                        }
                        return !0
                    }
                    var o = i.slice(0, n.segments.length),
                        u = i.slice(n.segments.length);
                    return !!Gp(n.segments, o) && !!n.children[Ep] && t(n.children[Ep], r, u)
                }(t, n, n.segments)
            }(e.root, t.root)
        }
        var Fp = function () {
                function e(e, t, n) {
                    this.root = e, this.queryParams = t, this.fragment = n
                }
                return Object.defineProperty(e.prototype, "queryParamMap", {
                    get: function () {
                        return this._queryParamMap || (this._queryParamMap = bp(this.queryParams)), this._queryParamMap
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.toString = function () {
                    return jp.serialize(this)
                }, e
            }(),
            Up = function () {
                function e(e, t) {
                    var n = this;
                    this.segments = e, this.children = t, this.parent = null, kp(t, function (e, t) {
                        return e.parent = n
                    })
                }
                return e.prototype.hasChildren = function () {
                    return this.numberOfChildren > 0
                }, Object.defineProperty(e.prototype, "numberOfChildren", {
                    get: function () {
                        return Object.keys(this.children).length
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.toString = function () {
                    return Yp(this)
                }, e
            }(),
            Hp = function () {
                function e(e, t) {
                    this.path = e, this.parameters = t
                }
                return Object.defineProperty(e.prototype, "parameterMap", {
                    get: function () {
                        return this._parameterMap || (this._parameterMap = bp(this.parameters)), this._parameterMap
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.toString = function () {
                    return Zp(this)
                }, e
            }();

        function Gp(e, t) {
            return e.length === t.length && e.every(function (e, n) {
                return e.path === t[n].path
            })
        }

        function Bp(e, t) {
            var n = [];
            return kp(e.children, function (e, r) {
                r === Ep && (n = n.concat(t(e, r)))
            }), kp(e.children, function (e, r) {
                r !== Ep && (n = n.concat(t(e, r)))
            }), n
        }
        var Vp = function () {
                return function () {}
            }(),
            Wp = function () {
                function e() {}
                return e.prototype.parse = function (e) {
                    var t = new nh(e);
                    return new Fp(t.parseRootSegment(), t.parseQueryParams(), t.parseFragment())
                }, e.prototype.serialize = function (e) {
                    var t, n;
                    return "/" + function e(t, n) {
                        if (!t.hasChildren()) return Yp(t);
                        if (n) {
                            var r = t.children[Ep] ? e(t.children[Ep], !1) : "",
                                i = [];
                            return kp(t.children, function (t, n) {
                                n !== Ep && i.push(n + ":" + e(t, !1))
                            }), i.length > 0 ? r + "(" + i.join("//") + ")" : r
                        }
                        var l = Bp(t, function (n, r) {
                            return r === Ep ? [e(t.children[Ep], !1)] : [r + ":" + e(n, !1)]
                        });
                        return Yp(t) + "/(" + l.join("//") + ")"
                    }(e.root, !0) + (t = e.queryParams, (n = Object.keys(t).map(function (e) {
                        var n = t[e];
                        return Array.isArray(n) ? n.map(function (t) {
                            return Kp(e) + "=" + Kp(t)
                        }).join("&") : Kp(e) + "=" + Kp(n)
                    })).length ? "?" + n.join("&") : "") + ("string" == typeof e.fragment ? "#" + encodeURI(e.fragment) : "")
                }, e
            }(),
            jp = new Wp;

        function Yp(e) {
            return e.segments.map(function (e) {
                return Zp(e)
            }).join("/")
        }

        function zp(e) {
            return encodeURIComponent(e).replace(/%40/g, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",")
        }

        function Kp(e) {
            return zp(e).replace(/%3B/gi, ";")
        }

        function qp(e) {
            return zp(e).replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/%26/gi, "&")
        }

        function Qp(e) {
            return decodeURIComponent(e)
        }

        function $p(e) {
            return Qp(e.replace(/\+/g, "%20"))
        }

        function Zp(e) {
            return "" + qp(e.path) + (t = e.parameters, Object.keys(t).map(function (e) {
                return ";" + qp(e) + "=" + qp(t[e])
            }).join(""));
            var t
        }
        var Xp = /^[^\/()?;=#]+/;

        function Jp(e) {
            var t = e.match(Xp);
            return t ? t[0] : ""
        }
        var eh = /^[^=?&#]+/,
            th = /^[^?&#]+/,
            nh = function () {
                function e(e) {
                    this.url = e, this.remaining = e
                }
                return e.prototype.parseRootSegment = function () {
                    return this.consumeOptional("/"), "" === this.remaining || this.peekStartsWith("?") || this.peekStartsWith("#") ? new Up([], {}) : new Up([], this.parseChildren())
                }, e.prototype.parseQueryParams = function () {
                    var e = {};
                    if (this.consumeOptional("?"))
                        do {
                            this.parseQueryParam(e)
                        } while (this.consumeOptional("&"));
                    return e
                }, e.prototype.parseFragment = function () {
                    return this.consumeOptional("#") ? decodeURIComponent(this.remaining) : null
                }, e.prototype.parseChildren = function () {
                    if ("" === this.remaining) return {};
                    this.consumeOptional("/");
                    var e = [];
                    for (this.peekStartsWith("(") || e.push(this.parseSegment()); this.peekStartsWith("/") && !this.peekStartsWith("//") && !this.peekStartsWith("/(");) this.capture("/"), e.push(this.parseSegment());
                    var t = {};
                    this.peekStartsWith("/(") && (this.capture("/"), t = this.parseParens(!0));
                    var n = {};
                    return this.peekStartsWith("(") && (n = this.parseParens(!1)), (e.length > 0 || Object.keys(t).length > 0) && (n[Ep] = new Up(e, t)), n
                }, e.prototype.parseSegment = function () {
                    var e = Jp(this.remaining);
                    if ("" === e && this.peekStartsWith(";")) throw new Error("Empty path url segment cannot have parameters: '" + this.remaining + "'.");
                    return this.capture(e), new Hp(Qp(e), this.parseMatrixParams())
                }, e.prototype.parseMatrixParams = function () {
                    for (var e = {}; this.consumeOptional(";");) this.parseParam(e);
                    return e
                }, e.prototype.parseParam = function (e) {
                    var t = Jp(this.remaining);
                    if (t) {
                        this.capture(t);
                        var n = "";
                        if (this.consumeOptional("=")) {
                            var r = Jp(this.remaining);
                            r && this.capture(n = r)
                        }
                        e[Qp(t)] = Qp(n)
                    }
                }, e.prototype.parseQueryParam = function (e) {
                    var t, n = (t = this.remaining.match(eh)) ? t[0] : "";
                    if (n) {
                        this.capture(n);
                        var r = "";
                        if (this.consumeOptional("=")) {
                            var i = function (e) {
                                var t = e.match(th);
                                return t ? t[0] : ""
                            }(this.remaining);
                            i && this.capture(r = i)
                        }
                        var l = $p(n),
                            o = $p(r);
                        if (e.hasOwnProperty(l)) {
                            var u = e[l];
                            Array.isArray(u) || (e[l] = u = [u]), u.push(o)
                        } else e[l] = o
                    }
                }, e.prototype.parseParens = function (e) {
                    var t = {};
                    for (this.capture("("); !this.consumeOptional(")") && this.remaining.length > 0;) {
                        var n = Jp(this.remaining),
                            r = this.remaining[n.length];
                        if ("/" !== r && ")" !== r && ";" !== r) throw new Error("Cannot parse url '" + this.url + "'");
                        var i = void 0;
                        n.indexOf(":") > -1 ? (i = n.substr(0, n.indexOf(":")), this.capture(i), this.capture(":")) : e && (i = Ep);
                        var l = this.parseChildren();
                        t[i] = 1 === Object.keys(l).length ? l[Ep] : new Up([], l), this.consumeOptional("//")
                    }
                    return t
                }, e.prototype.peekStartsWith = function (e) {
                    return this.remaining.startsWith(e)
                }, e.prototype.consumeOptional = function (e) {
                    return !!this.peekStartsWith(e) && (this.remaining = this.remaining.substring(e.length), !0)
                }, e.prototype.capture = function (e) {
                    if (!this.consumeOptional(e)) throw new Error('Expected "' + e + '".')
                }, e
            }(),
            rh = function () {
                function e(e) {
                    this._root = e
                }
                return Object.defineProperty(e.prototype, "root", {
                    get: function () {
                        return this._root.value
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.parent = function (e) {
                    var t = this.pathFromRoot(e);
                    return t.length > 1 ? t[t.length - 2] : null
                }, e.prototype.children = function (e) {
                    var t = ih(e, this._root);
                    return t ? t.children.map(function (e) {
                        return e.value
                    }) : []
                }, e.prototype.firstChild = function (e) {
                    var t = ih(e, this._root);
                    return t && t.children.length > 0 ? t.children[0].value : null
                }, e.prototype.siblings = function (e) {
                    var t = lh(e, this._root);
                    return t.length < 2 ? [] : t[t.length - 2].children.map(function (e) {
                        return e.value
                    }).filter(function (t) {
                        return t !== e
                    })
                }, e.prototype.pathFromRoot = function (e) {
                    return lh(e, this._root).map(function (e) {
                        return e.value
                    })
                }, e
            }();

        function ih(e, t) {
            var n, r;
            if (e === t.value) return t;
            try {
                for (var i = s(t.children), l = i.next(); !l.done; l = i.next()) {
                    var o = ih(e, l.value);
                    if (o) return o
                }
            } catch (u) {
                n = {
                    error: u
                }
            } finally {
                try {
                    l && !l.done && (r = i.return) && r.call(i)
                } finally {
                    if (n) throw n.error
                }
            }
            return null
        }

        function lh(e, t) {
            var n, r;
            if (e === t.value) return [t];
            try {
                for (var i = s(t.children), l = i.next(); !l.done; l = i.next()) {
                    var o = lh(e, l.value);
                    if (o.length) return o.unshift(t), o
                }
            } catch (u) {
                n = {
                    error: u
                }
            } finally {
                try {
                    l && !l.done && (r = i.return) && r.call(i)
                } finally {
                    if (n) throw n.error
                }
            }
            return []
        }
        var oh = function () {
            function e(e, t) {
                this.value = e, this.children = t
            }
            return e.prototype.toString = function () {
                return "TreeNode(" + this.value + ")"
            }, e
        }();

        function uh(e) {
            var t = {};
            return e && e.children.forEach(function (e) {
                return t[e.value.outlet] = e
            }), t
        }
        var sh = function (e) {
            function t(t, n) {
                var r = e.call(this, t) || this;
                return r.snapshot = n, fh(r, t), r
            }
            return i(t, e), t.prototype.toString = function () {
                return this.snapshot.toString()
            }, t
        }(rh);

        function ah(e, t) {
            var n = function (e, t) {
                    var n = new hh([], {}, {}, "", {}, Ep, t, null, e.root, -1, {});
                    return new dh("", new oh(n, []))
                }(e, t),
                r = new Xs([new Hp("", {})]),
                i = new Xs({}),
                l = new Xs({}),
                o = new Xs({}),
                u = new Xs(""),
                s = new ch(r, i, o, u, l, Ep, t, n.root);
            return s.snapshot = n.root, new sh(new oh(s, []), n)
        }
        var ch = function () {
            function e(e, t, n, r, i, l, o, u) {
                this.url = e, this.params = t, this.queryParams = n, this.fragment = r, this.data = i, this.outlet = l, this.component = o, this._futureSnapshot = u
            }
            return Object.defineProperty(e.prototype, "routeConfig", {
                get: function () {
                    return this._futureSnapshot.routeConfig
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "root", {
                get: function () {
                    return this._routerState.root
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "parent", {
                get: function () {
                    return this._routerState.parent(this)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "firstChild", {
                get: function () {
                    return this._routerState.firstChild(this)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "children", {
                get: function () {
                    return this._routerState.children(this)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "pathFromRoot", {
                get: function () {
                    return this._routerState.pathFromRoot(this)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "paramMap", {
                get: function () {
                    return this._paramMap || (this._paramMap = this.params.pipe(K(function (e) {
                        return bp(e)
                    }))), this._paramMap
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "queryParamMap", {
                get: function () {
                    return this._queryParamMap || (this._queryParamMap = this.queryParams.pipe(K(function (e) {
                        return bp(e)
                    }))), this._queryParamMap
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.toString = function () {
                return this.snapshot ? this.snapshot.toString() : "Future(" + this._futureSnapshot + ")"
            }, e
        }();

        function ph(e, t) {
            void 0 === t && (t = "emptyOnly");
            var n = e.pathFromRoot,
                r = 0;
            if ("always" !== t)
                for (r = n.length - 1; r >= 1;) {
                    var i = n[r],
                        o = n[r - 1];
                    if (i.routeConfig && "" === i.routeConfig.path) r--;
                    else {
                        if (o.component) break;
                        r--
                    }
                }
            return function (e) {
                return e.reduce(function (e, t) {
                    return {
                        params: l({}, e.params, t.params),
                        data: l({}, e.data, t.data),
                        resolve: l({}, e.resolve, t._resolvedData)
                    }
                }, {
                    params: {},
                    data: {},
                    resolve: {}
                })
            }(n.slice(r))
        }
        var hh = function () {
                function e(e, t, n, r, i, l, o, u, s, a, c) {
                    this.url = e, this.params = t, this.queryParams = n, this.fragment = r, this.data = i, this.outlet = l, this.component = o, this.routeConfig = u, this._urlSegment = s, this._lastPathIndex = a, this._resolve = c
                }
                return Object.defineProperty(e.prototype, "root", {
                    get: function () {
                        return this._routerState.root
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "parent", {
                    get: function () {
                        return this._routerState.parent(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "firstChild", {
                    get: function () {
                        return this._routerState.firstChild(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "children", {
                    get: function () {
                        return this._routerState.children(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "pathFromRoot", {
                    get: function () {
                        return this._routerState.pathFromRoot(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "paramMap", {
                    get: function () {
                        return this._paramMap || (this._paramMap = bp(this.params)), this._paramMap
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "queryParamMap", {
                    get: function () {
                        return this._queryParamMap || (this._queryParamMap = bp(this.queryParams)), this._queryParamMap
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.toString = function () {
                    return "Route(url:'" + this.url.map(function (e) {
                        return e.toString()
                    }).join("/") + "', path:'" + (this.routeConfig ? this.routeConfig.path : "") + "')"
                }, e
            }(),
            dh = function (e) {
                function t(t, n) {
                    var r = e.call(this, n) || this;
                    return r.url = t, fh(r, n), r
                }
                return i(t, e), t.prototype.toString = function () {
                    return gh(this._root)
                }, t
            }(rh);

        function fh(e, t) {
            t.value._routerState = e, t.children.forEach(function (t) {
                return fh(e, t)
            })
        }

        function gh(e) {
            var t = e.children.length > 0 ? " { " + e.children.map(gh).join(", ") + " } " : "";
            return "" + e.value + t
        }

        function vh(e) {
            if (e.snapshot) {
                var t = e.snapshot,
                    n = e._futureSnapshot;
                e.snapshot = n, Pp(t.queryParams, n.queryParams) || e.queryParams.next(n.queryParams), t.fragment !== n.fragment && e.fragment.next(n.fragment), Pp(t.params, n.params) || e.params.next(n.params),
                    function (e, t) {
                        if (e.length !== t.length) return !1;
                        for (var n = 0; n < e.length; ++n)
                            if (!Pp(e[n], t[n])) return !1;
                        return !0
                    }(t.url, n.url) || e.url.next(n.url), Pp(t.data, n.data) || e.data.next(n.data)
            } else e.snapshot = e._futureSnapshot, e.data.next(e._futureSnapshot.data)
        }

        function mh(e, t) {
            var n, r;
            return Pp(e.params, t.params) && Gp(n = e.url, r = t.url) && n.every(function (e, t) {
                return Pp(e.parameters, r[t].parameters)
            }) && !(!e.parent != !t.parent) && (!e.parent || mh(e.parent, t.parent))
        }

        function yh(e) {
            return "object" == typeof e && null != e && !e.outlets && !e.segmentPath
        }

        function Sh(e, t, n, r, i) {
            var l = {};
            return r && kp(r, function (e, t) {
                l[t] = Array.isArray(e) ? e.map(function (e) {
                    return "" + e
                }) : "" + e
            }), new Fp(n.root === e ? t : function e(t, n, r) {
                var i = {};
                return kp(t.children, function (t, l) {
                    i[l] = t === n ? r : e(t, n, r)
                }), new Up(t.segments, i)
            }(n.root, e, t), l, i)
        }
        var Eh = function () {
                function e(e, t, n) {
                    if (this.isAbsolute = e, this.numberOfDoubleDots = t, this.commands = n, e && n.length > 0 && yh(n[0])) throw new Error("Root segment cannot have matrix parameters");
                    var r = n.find(function (e) {
                        return "object" == typeof e && null != e && e.outlets
                    });
                    if (r && r !== Mp(n)) throw new Error("{outlets:{}} has to be the last command")
                }
                return e.prototype.toRoot = function () {
                    return this.isAbsolute && 1 === this.commands.length && "/" == this.commands[0]
                }, e
            }(),
            Oh = function () {
                return function (e, t, n) {
                    this.segmentGroup = e, this.processChildren = t, this.index = n
                }
            }();

        function bh(e) {
            return "object" == typeof e && null != e && e.outlets ? e.outlets[Ep] : "" + e
        }

        function Th(e, t, n) {
            if (e || (e = new Up([], {})), 0 === e.segments.length && e.hasChildren()) return Rh(e, t, n);
            var r = function (e, t, n) {
                    for (var r = 0, i = t, l = {
                            match: !1,
                            pathIndex: 0,
                            commandIndex: 0
                        }; i < e.segments.length;) {
                        if (r >= n.length) return l;
                        var o = e.segments[i],
                            u = bh(n[r]),
                            s = r < n.length - 1 ? n[r + 1] : null;
                        if (i > 0 && void 0 === u) break;
                        if (u && s && "object" == typeof s && void 0 === s.outlets) {
                            if (!Ah(u, s, o)) return l;
                            r += 2
                        } else {
                            if (!Ah(u, {}, o)) return l;
                            r++
                        }
                        i++
                    }
                    return {
                        match: !0,
                        pathIndex: i,
                        commandIndex: r
                    }
                }(e, t, n),
                i = n.slice(r.commandIndex);
            if (r.match && r.pathIndex < e.segments.length) {
                var l = new Up(e.segments.slice(0, r.pathIndex), {});
                return l.children[Ep] = new Up(e.segments.slice(r.pathIndex), e.children), Rh(l, 0, i)
            }
            return r.match && 0 === i.length ? new Up(e.segments, {}) : r.match && !e.hasChildren() ? Ch(e, t, n) : r.match ? Rh(e, 0, i) : Ch(e, t, n)
        }

        function Rh(e, t, n) {
            if (0 === n.length) return new Up(e.segments, {});
            var r = function (e) {
                    var t, n;
                    return "object" != typeof e[0] ? ((t = {})[Ep] = e, t) : void 0 === e[0].outlets ? ((n = {})[Ep] = e, n) : e[0].outlets
                }(n),
                i = {};
            return kp(r, function (n, r) {
                null !== n && (i[r] = Th(e.children[r], t, n))
            }), kp(e.children, function (e, t) {
                void 0 === r[t] && (i[t] = e)
            }), new Up(e.segments, i)
        }

        function Ch(e, t, n) {
            for (var r = e.segments.slice(0, t), i = 0; i < n.length;) {
                if ("object" == typeof n[i] && void 0 !== n[i].outlets) {
                    var l = _h(n[i].outlets);
                    return new Up(r, l)
                }
                if (0 === i && yh(n[0])) r.push(new Hp(e.segments[t].path, n[0])), i++;
                else {
                    var o = bh(n[i]),
                        u = i < n.length - 1 ? n[i + 1] : null;
                    o && u && yh(u) ? (r.push(new Hp(o, Ih(u))), i += 2) : (r.push(new Hp(o, {})), i++)
                }
            }
            return new Up(r, {})
        }

        function _h(e) {
            var t = {};
            return kp(e, function (e, n) {
                null !== e && (t[n] = Ch(new Up([], {}), 0, e))
            }), t
        }

        function Ih(e) {
            var t = {};
            return kp(e, function (e, n) {
                return t[n] = "" + e
            }), t
        }

        function Ah(e, t, n) {
            return e == n.path && Pp(t, n.parameters)
        }
        var wh = function () {
            function e(e, t, n, r) {
                this.routeReuseStrategy = e, this.futureState = t, this.currState = n, this.forwardEvent = r
            }
            return e.prototype.activate = function (e) {
                var t = this.futureState._root,
                    n = this.currState ? this.currState._root : null;
                this.deactivateChildRoutes(t, n, e), vh(this.futureState.root), this.activateChildRoutes(t, n, e)
            }, e.prototype.deactivateChildRoutes = function (e, t, n) {
                var r = this,
                    i = uh(t);
                e.children.forEach(function (e) {
                    var t = e.value.outlet;
                    r.deactivateRoutes(e, i[t], n), delete i[t]
                }), kp(i, function (e, t) {
                    r.deactivateRouteAndItsChildren(e, n)
                })
            }, e.prototype.deactivateRoutes = function (e, t, n) {
                var r = e.value,
                    i = t ? t.value : null;
                if (r === i)
                    if (r.component) {
                        var l = n.getContext(r.outlet);
                        l && this.deactivateChildRoutes(e, t, l.children)
                    } else this.deactivateChildRoutes(e, t, n);
                else i && this.deactivateRouteAndItsChildren(t, n)
            }, e.prototype.deactivateRouteAndItsChildren = function (e, t) {
                this.routeReuseStrategy.shouldDetach(e.value.snapshot) ? this.detachAndStoreRouteSubtree(e, t) : this.deactivateRouteAndOutlet(e, t)
            }, e.prototype.detachAndStoreRouteSubtree = function (e, t) {
                var n = t.getContext(e.value.outlet);
                if (n && n.outlet) {
                    var r = n.outlet.detach(),
                        i = n.children.onOutletDeactivated();
                    this.routeReuseStrategy.store(e.value.snapshot, {
                        componentRef: r,
                        route: e,
                        contexts: i
                    })
                }
            }, e.prototype.deactivateRouteAndOutlet = function (e, t) {
                var n = this,
                    r = t.getContext(e.value.outlet);
                if (r) {
                    var i = uh(e),
                        l = e.value.component ? r.children : t;
                    kp(i, function (e, t) {
                        return n.deactivateRouteAndItsChildren(e, l)
                    }), r.outlet && (r.outlet.deactivate(), r.children.onOutletDeactivated())
                }
            }, e.prototype.activateChildRoutes = function (e, t, n) {
                var r = this,
                    i = uh(t);
                e.children.forEach(function (e) {
                    r.activateRoutes(e, i[e.value.outlet], n), r.forwardEvent(new mp(e.value.snapshot))
                }), e.children.length && this.forwardEvent(new gp(e.value.snapshot))
            }, e.prototype.activateRoutes = function (e, t, n) {
                var r = e.value,
                    i = t ? t.value : null;
                if (vh(r), r === i)
                    if (r.component) {
                        var l = n.getOrCreateContext(r.outlet);
                        this.activateChildRoutes(e, t, l.children)
                    } else this.activateChildRoutes(e, t, n);
                else if (r.component)
                    if (l = n.getOrCreateContext(r.outlet), this.routeReuseStrategy.shouldAttach(r.snapshot)) {
                        var o = this.routeReuseStrategy.retrieve(r.snapshot);
                        this.routeReuseStrategy.store(r.snapshot, null), l.children.onOutletReAttached(o.contexts), l.attachRef = o.componentRef, l.route = o.route.value, l.outlet && l.outlet.attach(o.componentRef, o.route.value), Nh(o.route)
                    } else {
                        var u = function (e) {
                                for (var t = r.snapshot.parent; t; t = t.parent) {
                                    var n = t.routeConfig;
                                    if (n && n._loadedConfig) return n._loadedConfig;
                                    if (n && n.component) return null
                                }
                                return null
                            }(),
                            s = u ? u.module.componentFactoryResolver : null;
                        l.attachRef = null, l.route = r, l.resolver = s, l.outlet && l.outlet.activateWith(r, s), this.activateChildRoutes(e, null, l.children)
                    }
                else this.activateChildRoutes(e, null, n)
            }, e
        }();

        function Nh(e) {
            vh(e.value), e.children.forEach(Nh)
        }

        function Ph(e) {
            return "function" == typeof e
        }

        function Dh(e) {
            return e instanceof Fp
        }
        var Mh = function () {
                return function (e) {
                    this.segmentGroup = e || null
                }
            }(),
            kh = function () {
                return function (e) {
                    this.urlTree = e
                }
            }();

        function Lh(e) {
            return new w(function (t) {
                return t.error(new Mh(e))
            })
        }

        function xh(e) {
            return new w(function (t) {
                return t.error(new kh(e))
            })
        }

        function Fh(e) {
            return new w(function (t) {
                return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '" + e + "'"))
            })
        }
        var Uh = function () {
            function e(e, t, n, r, i) {
                this.configLoader = t, this.urlSerializer = n, this.urlTree = r, this.config = i, this.allowRedirects = !0, this.ngModule = e.get(At)
            }
            return e.prototype.apply = function () {
                var e = this;
                return this.expandSegmentGroup(this.ngModule, this.config, this.urlTree.root, Ep).pipe(K(function (t) {
                    return e.createUrlTree(t, e.urlTree.queryParams, e.urlTree.fragment)
                })).pipe(Ra(function (t) {
                    if (t instanceof kh) return e.allowRedirects = !1, e.match(t.urlTree);
                    if (t instanceof Mh) throw e.noMatchError(t);
                    throw t
                }))
            }, e.prototype.match = function (e) {
                var t = this;
                return this.expandSegmentGroup(this.ngModule, this.config, e.root, Ep).pipe(K(function (n) {
                    return t.createUrlTree(n, e.queryParams, e.fragment)
                })).pipe(Ra(function (e) {
                    if (e instanceof Mh) throw t.noMatchError(e);
                    throw e
                }))
            }, e.prototype.noMatchError = function (e) {
                return new Error("Cannot match any routes. URL Segment: '" + e.segmentGroup + "'")
            }, e.prototype.createUrlTree = function (e, t, n) {
                var r, i = e.segments.length > 0 ? new Up([], ((r = {})[Ep] = e, r)) : e;
                return new Fp(i, t, n)
            }, e.prototype.expandSegmentGroup = function (e, t, n, r) {
                return 0 === n.segments.length && n.hasChildren() ? this.expandChildren(e, t, n).pipe(K(function (e) {
                    return new Up([], e)
                })) : this.expandSegment(e, n, t, n.segments, r, !0)
            }, e.prototype.expandChildren = function (e, t, n) {
                var r = this;
                return function (n, i) {
                    if (0 === Object.keys(n).length) return Zs({});
                    var l = [],
                        o = [],
                        u = {};
                    return kp(n, function (n, i) {
                        var s, a, c = (s = i, a = n, r.expandSegmentGroup(e, t, a, s)).pipe(K(function (e) {
                            return u[i] = e
                        }));
                        i === Ep ? l.push(c) : o.push(c)
                    }), Zs.apply(null, l.concat(o)).pipe(ua(), Ta(), K(function () {
                        return u
                    }))
                }(n.children)
            }, e.prototype.expandSegment = function (e, t, n, r, i, l) {
                var o = this;
                return Zs.apply(void 0, c(n)).pipe(K(function (u) {
                    return o.expandSegmentAgainstRoute(e, t, n, u, r, i, l).pipe(Ra(function (e) {
                        if (e instanceof Mh) return Zs(null);
                        throw e
                    }))
                }), ua(), Na(function (e) {
                    return !!e
                }), Ra(function (e, n) {
                    if (e instanceof ea || "EmptyError" === e.name) {
                        if (o.noLeftoversInUrl(t, r, i)) return Zs(new Up([], {}));
                        throw new Mh(t)
                    }
                    throw e
                }))
            }, e.prototype.noLeftoversInUrl = function (e, t, n) {
                return 0 === t.length && !e.children[n]
            }, e.prototype.expandSegmentAgainstRoute = function (e, t, n, r, i, l, o) {
                return Vh(r) !== l ? Lh(t) : void 0 === r.redirectTo ? this.matchSegmentAgainstRoute(e, t, r, i) : o && this.allowRedirects ? this.expandSegmentAgainstRouteUsingRedirect(e, t, n, r, i, l) : Lh(t)
            }, e.prototype.expandSegmentAgainstRouteUsingRedirect = function (e, t, n, r, i, l) {
                return "**" === r.path ? this.expandWildCardWithParamsAgainstRouteUsingRedirect(e, n, r, l) : this.expandRegularSegmentAgainstRouteUsingRedirect(e, t, n, r, i, l)
            }, e.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect = function (e, t, n, r) {
                var i = this,
                    l = this.applyRedirectCommands([], n.redirectTo, {});
                return n.redirectTo.startsWith("/") ? xh(l) : this.lineralizeSegments(n, l).pipe(X(function (n) {
                    var l = new Up(n, {});
                    return i.expandSegment(e, l, t, n, r, !1)
                }))
            }, e.prototype.expandRegularSegmentAgainstRouteUsingRedirect = function (e, t, n, r, i, l) {
                var o = this,
                    u = Hh(t, r, i),
                    s = u.consumedSegments,
                    a = u.lastChild,
                    c = u.positionalParamSegments;
                if (!u.matched) return Lh(t);
                var p = this.applyRedirectCommands(s, r.redirectTo, c);
                return r.redirectTo.startsWith("/") ? xh(p) : this.lineralizeSegments(r, p).pipe(X(function (r) {
                    return o.expandSegment(e, t, n, r.concat(i.slice(a)), l, !1)
                }))
            }, e.prototype.matchSegmentAgainstRoute = function (e, t, n, r) {
                var i = this;
                if ("**" === n.path) return n.loadChildren ? this.configLoader.load(e.injector, n).pipe(K(function (e) {
                    return n._loadedConfig = e, new Up(r, {})
                })) : Zs(new Up(r, {}));
                var o = Hh(t, n, r),
                    u = o.consumedSegments,
                    a = o.lastChild;
                if (!o.matched) return Lh(t);
                var c = r.slice(a);
                return this.getChildConfig(e, n, r).pipe(X(function (e) {
                    var n = e.module,
                        r = e.routes,
                        o = function (e, t, n, r) {
                            return n.length > 0 && function (e, t, n) {
                                return r.some(function (n) {
                                    return Bh(e, t, n) && Vh(n) !== Ep
                                })
                            }(e, n) ? {
                                segmentGroup: Gh(new Up(t, function (e, t) {
                                    var n, r, i = {};
                                    i[Ep] = t;
                                    try {
                                        for (var l = s(e), o = l.next(); !o.done; o = l.next()) {
                                            var u = o.value;
                                            "" === u.path && Vh(u) !== Ep && (i[Vh(u)] = new Up([], {}))
                                        }
                                    } catch (a) {
                                        n = {
                                            error: a
                                        }
                                    } finally {
                                        try {
                                            o && !o.done && (r = l.return) && r.call(l)
                                        } finally {
                                            if (n) throw n.error
                                        }
                                    }
                                    return i
                                }(r, new Up(n, e.children)))),
                                slicedSegments: []
                            } : 0 === n.length && function (e, t, n) {
                                return r.some(function (n) {
                                    return Bh(e, t, n)
                                })
                            }(e, n) ? {
                                segmentGroup: Gh(new Up(e.segments, function (e, t, n, r) {
                                    var i, o, u = {};
                                    try {
                                        for (var a = s(n), c = a.next(); !c.done; c = a.next()) {
                                            var p = c.value;
                                            Bh(e, t, p) && !r[Vh(p)] && (u[Vh(p)] = new Up([], {}))
                                        }
                                    } catch (h) {
                                        i = {
                                            error: h
                                        }
                                    } finally {
                                        try {
                                            c && !c.done && (o = a.return) && o.call(a)
                                        } finally {
                                            if (i) throw i.error
                                        }
                                    }
                                    return l({}, r, u)
                                }(e, n, r, e.children))),
                                slicedSegments: n
                            } : {
                                segmentGroup: e,
                                slicedSegments: n
                            }
                        }(t, u, c, r),
                        a = o.segmentGroup,
                        p = o.slicedSegments;
                    return 0 === p.length && a.hasChildren() ? i.expandChildren(n, r, a).pipe(K(function (e) {
                        return new Up(u, e)
                    })) : 0 === r.length && 0 === p.length ? Zs(new Up(u, {})) : i.expandSegment(n, a, r, p, Ep, !0).pipe(K(function (e) {
                        return new Up(u.concat(e.segments), e.children)
                    }))
                }))
            }, e.prototype.getChildConfig = function (e, t, n) {
                var r = this;
                return t.children ? Zs(new _p(t.children, e)) : t.loadChildren ? void 0 !== t._loadedConfig ? Zs(t._loadedConfig) : function (e, t, n) {
                    var r, i = t.canLoad;
                    return i && 0 !== i.length ? Z(i).pipe(K(function (r) {
                        var i, l = e.get(r);
                        if (function (e) {
                                return e && Ph(e.canLoad)
                            }(l)) i = l.canLoad(t, n);
                        else {
                            if (!Ph(l)) throw new Error("Invalid CanLoad guard");
                            i = l(t, n)
                        }
                        return Lp(i)
                    })).pipe(ua(), (r = function (e) {
                        return !0 === e
                    }, function (e) {
                        return e.lift(new Pa(r, void 0, e))
                    })) : Zs(!0)
                }(e.injector, t, n).pipe(X(function (n) {
                    return n ? r.configLoader.load(e.injector, t).pipe(K(function (e) {
                        return t._loadedConfig = e, e
                    })) : function (e) {
                        return new w(function (t) {
                            return t.error(Rp("Cannot load children because the guard of the route \"path: '" + e.path + "'\" returned false"))
                        })
                    }(t)
                })) : Zs(new _p([], e))
            }, e.prototype.lineralizeSegments = function (e, t) {
                for (var n = [], r = t.root;;) {
                    if (n = n.concat(r.segments), 0 === r.numberOfChildren) return Zs(n);
                    if (r.numberOfChildren > 1 || !r.children[Ep]) return Fh(e.redirectTo);
                    r = r.children[Ep]
                }
            }, e.prototype.applyRedirectCommands = function (e, t, n) {
                return this.applyRedirectCreatreUrlTree(t, this.urlSerializer.parse(t), e, n)
            }, e.prototype.applyRedirectCreatreUrlTree = function (e, t, n, r) {
                var i = this.createSegmentGroup(e, t.root, n, r);
                return new Fp(i, this.createQueryParams(t.queryParams, this.urlTree.queryParams), t.fragment)
            }, e.prototype.createQueryParams = function (e, t) {
                var n = {};
                return kp(e, function (e, r) {
                    if ("string" == typeof e && e.startsWith(":")) {
                        var i = e.substring(1);
                        n[r] = t[i]
                    } else n[r] = e
                }), n
            }, e.prototype.createSegmentGroup = function (e, t, n, r) {
                var i = this,
                    l = this.createSegments(e, t.segments, n, r),
                    o = {};
                return kp(t.children, function (t, l) {
                    o[l] = i.createSegmentGroup(e, t, n, r)
                }), new Up(l, o)
            }, e.prototype.createSegments = function (e, t, n, r) {
                var i = this;
                return t.map(function (t) {
                    return t.path.startsWith(":") ? i.findPosParam(e, t, r) : i.findOrReturn(t, n)
                })
            }, e.prototype.findPosParam = function (e, t, n) {
                var r = n[t.path.substring(1)];
                if (!r) throw new Error("Cannot redirect to '" + e + "'. Cannot find '" + t.path + "'.");
                return r
            }, e.prototype.findOrReturn = function (e, t) {
                var n, r, i = 0;
                try {
                    for (var l = s(t), o = l.next(); !o.done; o = l.next()) {
                        var u = o.value;
                        if (u.path === e.path) return t.splice(i), u;
                        i++
                    }
                } catch (a) {
                    n = {
                        error: a
                    }
                } finally {
                    try {
                        o && !o.done && (r = l.return) && r.call(l)
                    } finally {
                        if (n) throw n.error
                    }
                }
                return e
            }, e
        }();

        function Hh(e, t, n) {
            if ("" === t.path) return "full" === t.pathMatch && (e.hasChildren() || n.length > 0) ? {
                matched: !1,
                consumedSegments: [],
                lastChild: 0,
                positionalParamSegments: {}
            } : {
                matched: !0,
                consumedSegments: [],
                lastChild: 0,
                positionalParamSegments: {}
            };
            var r = (t.matcher || Cp)(n, e, t);
            return r ? {
                matched: !0,
                consumedSegments: r.consumed,
                lastChild: r.consumed.length,
                positionalParamSegments: r.posParams
            } : {
                matched: !1,
                consumedSegments: [],
                lastChild: 0,
                positionalParamSegments: {}
            }
        }

        function Gh(e) {
            if (1 === e.numberOfChildren && e.children[Ep]) {
                var t = e.children[Ep];
                return new Up(e.segments.concat(t.segments), t.children)
            }
            return e
        }

        function Bh(e, t, n) {
            return (!(e.hasChildren() || t.length > 0) || "full" !== n.pathMatch) && "" === n.path && void 0 !== n.redirectTo
        }

        function Vh(e) {
            return e.outlet || Ep
        }
        var Wh = function () {
                return function (e) {
                    this.path = e, this.route = this.path[this.path.length - 1]
                }
            }(),
            jh = function () {
                return function (e, t) {
                    this.component = e, this.route = t
                }
            }();

        function Yh(e, t, n) {
            var r = function (e) {
                if (!e) return null;
                for (var t = e.parent; t; t = t.parent) {
                    var n = t.routeConfig;
                    if (n && n._loadedConfig) return n._loadedConfig
                }
                return null
            }(t);
            return (r ? r.module.injector : n).get(e)
        }

        function zh(e, t, n, r, i) {
            void 0 === i && (i = {
                canDeactivateChecks: [],
                canActivateChecks: []
            });
            var l = uh(t);
            return e.children.forEach(function (e) {
                ! function (e, t, n, r, i) {
                    void 0 === i && (i = {
                        canDeactivateChecks: [],
                        canActivateChecks: []
                    });
                    var l = e.value,
                        o = t ? t.value : null,
                        u = n ? n.getContext(e.value.outlet) : null;
                    if (o && l.routeConfig === o.routeConfig) {
                        var s = function (e, t, n) {
                            if ("function" == typeof n) return n(e, t);
                            switch (n) {
                                case "pathParamsChange":
                                    return !Gp(e.url, t.url);
                                case "pathParamsOrQueryParamsChange":
                                    return !Gp(e.url, t.url) || !Pp(e.queryParams, t.queryParams);
                                case "always":
                                    return !0;
                                case "paramsOrQueryParamsChange":
                                    return !mh(e, t) || !Pp(e.queryParams, t.queryParams);
                                case "paramsChange":
                                default:
                                    return !mh(e, t)
                            }
                        }(o, l, l.routeConfig.runGuardsAndResolvers);
                        s ? i.canActivateChecks.push(new Wh(r)) : (l.data = o.data, l._resolvedData = o._resolvedData), zh(e, t, l.component ? u ? u.children : null : n, r, i), s && i.canDeactivateChecks.push(new jh(u && u.outlet && u.outlet.component || null, o))
                    } else o && Kh(t, u, i), i.canActivateChecks.push(new Wh(r)), zh(e, null, l.component ? u ? u.children : null : n, r, i)
                }(e, l[e.value.outlet], n, r.concat([e.value]), i), delete l[e.value.outlet]
            }), kp(l, function (e, t) {
                return Kh(e, n.getContext(t), i)
            }), i
        }

        function Kh(e, t, n) {
            var r = uh(e),
                i = e.value;
            kp(r, function (e, r) {
                Kh(e, i.component ? t ? t.children.getContext(r) : null : t, n)
            }), n.canDeactivateChecks.push(new jh(i.component && t && t.outlet && t.outlet.isActivated ? t.outlet.component : null, i))
        }
        var qh = Symbol("INITIAL_VALUE");

        function Qh() {
            return Ma(function (e) {
                return (function () {
                    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                    var n = null,
                        r = null;
                    return F(e[e.length - 1]) && (r = e.pop()), "function" == typeof e[e.length - 1] && (n = e.pop()), 1 === e.length && p(e[0]) && (e = e[0]), re(e, r).lift(new na(n))
                }).apply(void 0, c(e.map(function (e) {
                    return e.pipe(Ia(1), Fa(qh))
                }))).pipe(Ua(function (e, t) {
                    var n = !1;
                    return t.reduce(function (e, r, i) {
                        if (e !== qh) return e;
                        if (r === qh && (n = !0), !n) {
                            if (!1 === r) return r;
                            if (i === t.length - 1 || Dh(r)) return r
                        }
                        return e
                    }, e)
                }, qh), sa(function (e) {
                    return e !== qh
                }), K(function (e) {
                    return Dh(e) ? e : !0 === e
                }), Ia(1))
            })
        }

        function $h(e, t) {
            return null !== e && t && t(new vp(e)), Zs(!0)
        }

        function Zh(e, t) {
            return null !== e && t && t(new fp(e)), Zs(!0)
        }

        function Xh(e, t, n) {
            var r = t.routeConfig ? t.routeConfig.canActivate : null;
            return r && 0 !== r.length ? Zs(r.map(function (r) {
                return oa(function () {
                    var i, l = Yh(r, t, n);
                    if (function (e) {
                            return e && Ph(e.canActivate)
                        }(l)) i = Lp(l.canActivate(t, e));
                    else {
                        if (!Ph(l)) throw new Error("Invalid CanActivate guard");
                        i = Lp(l(t, e))
                    }
                    return i.pipe(Na())
                })
            })).pipe(Qh()) : Zs(!0)
        }

        function Jh(e, t, n) {
            var r = t[t.length - 1],
                i = t.slice(0, t.length - 1).reverse().map(function (e) {
                    return function (e) {
                        var t = e.routeConfig ? e.routeConfig.canActivateChild : null;
                        return t && 0 !== t.length ? {
                            node: e,
                            guards: t
                        } : null
                    }(e)
                }).filter(function (e) {
                    return null !== e
                }).map(function (t) {
                    return oa(function () {
                        return Zs(t.guards.map(function (i) {
                            var l, o = Yh(i, t.node, n);
                            if (function (e) {
                                    return e && Ph(e.canActivateChild)
                                }(o)) l = Lp(o.canActivateChild(r, e));
                            else {
                                if (!Ph(o)) throw new Error("Invalid CanActivateChild guard");
                                l = Lp(o(r, e))
                            }
                            return l.pipe(Na())
                        })).pipe(Qh())
                    })
                });
            return Zs(i).pipe(Qh())
        }
        var ed = function () {
                return function () {}
            }(),
            td = function () {
                function e(e, t, n, r, i, l) {
                    this.rootComponentType = e, this.config = t, this.urlTree = n, this.url = r, this.paramsInheritanceStrategy = i, this.relativeLinkResolution = l
                }
                return e.prototype.recognize = function () {
                    try {
                        var e = id(this.urlTree.root, [], [], this.config, this.relativeLinkResolution).segmentGroup,
                            t = this.processSegmentGroup(this.config, e, Ep),
                            n = new hh([], Object.freeze({}), Object.freeze(l({}, this.urlTree.queryParams)), this.urlTree.fragment, {}, Ep, this.rootComponentType, null, this.urlTree.root, -1, {}),
                            r = new oh(n, t),
                            i = new dh(this.url, r);
                        return this.inheritParamsAndData(i._root), Zs(i)
                    } catch (o) {
                        return new w(function (e) {
                            return e.error(o)
                        })
                    }
                }, e.prototype.inheritParamsAndData = function (e) {
                    var t = this,
                        n = e.value,
                        r = ph(n, this.paramsInheritanceStrategy);
                    n.params = Object.freeze(r.params), n.data = Object.freeze(r.data), e.children.forEach(function (e) {
                        return t.inheritParamsAndData(e)
                    })
                }, e.prototype.processSegmentGroup = function (e, t, n) {
                    return 0 === t.segments.length && t.hasChildren() ? this.processChildren(e, t) : this.processSegment(e, t, t.segments, n)
                }, e.prototype.processChildren = function (e, t) {
                    var n, r = this,
                        i = Bp(t, function (t, n) {
                            return r.processSegmentGroup(e, t, n)
                        });
                    return n = {}, i.forEach(function (e) {
                        var t = n[e.value.outlet];
                        if (t) {
                            var r = t.url.map(function (e) {
                                    return e.toString()
                                }).join("/"),
                                i = e.value.url.map(function (e) {
                                    return e.toString()
                                }).join("/");
                            throw new Error("Two segments cannot have the same outlet name: '" + r + "' and '" + i + "'.")
                        }
                        n[e.value.outlet] = e.value
                    }), i.sort(function (e, t) {
                        return e.value.outlet === Ep ? -1 : t.value.outlet === Ep ? 1 : e.value.outlet.localeCompare(t.value.outlet)
                    }), i
                }, e.prototype.processSegment = function (e, t, n, r) {
                    var i, l;
                    try {
                        for (var o = s(e), u = o.next(); !u.done; u = o.next()) {
                            var a = u.value;
                            try {
                                return this.processSegmentAgainstRoute(a, t, n, r)
                            } catch (c) {
                                if (!(c instanceof ed)) throw c
                            }
                        }
                    } catch (p) {
                        i = {
                            error: p
                        }
                    } finally {
                        try {
                            u && !u.done && (l = o.return) && l.call(o)
                        } finally {
                            if (i) throw i.error
                        }
                    }
                    if (this.noLeftoversInUrl(t, n, r)) return [];
                    throw new ed
                }, e.prototype.noLeftoversInUrl = function (e, t, n) {
                    return 0 === t.length && !e.children[n]
                }, e.prototype.processSegmentAgainstRoute = function (e, t, n, r) {
                    if (e.redirectTo) throw new ed;
                    if ((e.outlet || Ep) !== r) throw new ed;
                    var i, o = [],
                        u = [];
                    if ("**" === e.path) {
                        var s = n.length > 0 ? Mp(n).parameters : {};
                        i = new hh(n, s, Object.freeze(l({}, this.urlTree.queryParams)), this.urlTree.fragment, ud(e), r, e.component, e, nd(t), rd(t) + n.length, sd(e))
                    } else {
                        var a = function (e, t, n) {
                            if ("" === t.path) {
                                if ("full" === t.pathMatch && (e.hasChildren() || n.length > 0)) throw new ed;
                                return {
                                    consumedSegments: [],
                                    lastChild: 0,
                                    parameters: {}
                                }
                            }
                            var r = (t.matcher || Cp)(n, e, t);
                            if (!r) throw new ed;
                            var i = {};
                            kp(r.posParams, function (e, t) {
                                i[t] = e.path
                            });
                            var o = r.consumed.length > 0 ? l({}, i, r.consumed[r.consumed.length - 1].parameters) : i;
                            return {
                                consumedSegments: r.consumed,
                                lastChild: r.consumed.length,
                                parameters: o
                            }
                        }(t, e, n);
                        o = a.consumedSegments, u = n.slice(a.lastChild), i = new hh(o, a.parameters, Object.freeze(l({}, this.urlTree.queryParams)), this.urlTree.fragment, ud(e), r, e.component, e, nd(t), rd(t) + o.length, sd(e))
                    }
                    var c = function (e) {
                            return e.children ? e.children : e.loadChildren ? e._loadedConfig.routes : []
                        }(e),
                        p = id(t, o, u, c, this.relativeLinkResolution),
                        h = p.segmentGroup,
                        d = p.slicedSegments;
                    if (0 === d.length && h.hasChildren()) {
                        var f = this.processChildren(c, h);
                        return [new oh(i, f)]
                    }
                    if (0 === c.length && 0 === d.length) return [new oh(i, [])];
                    var g = this.processSegment(c, h, d, Ep);
                    return [new oh(i, g)]
                }, e
            }();

        function nd(e) {
            for (var t = e; t._sourceSegment;) t = t._sourceSegment;
            return t
        }

        function rd(e) {
            for (var t = e, n = t._segmentIndexShift ? t._segmentIndexShift : 0; t._sourceSegment;) n += (t = t._sourceSegment)._segmentIndexShift ? t._segmentIndexShift : 0;
            return n - 1
        }

        function id(e, t, n, r, i) {
            if (n.length > 0 && function (e, t, n) {
                    return r.some(function (n) {
                        return ld(e, t, n) && od(n) !== Ep
                    })
                }(e, n)) {
                var o = new Up(t, function (e, t, n, r) {
                    var i, l, o = {};
                    o[Ep] = r, r._sourceSegment = e, r._segmentIndexShift = t.length;
                    try {
                        for (var u = s(n), a = u.next(); !a.done; a = u.next()) {
                            var c = a.value;
                            if ("" === c.path && od(c) !== Ep) {
                                var p = new Up([], {});
                                p._sourceSegment = e, p._segmentIndexShift = t.length, o[od(c)] = p
                            }
                        }
                    } catch (h) {
                        i = {
                            error: h
                        }
                    } finally {
                        try {
                            a && !a.done && (l = u.return) && l.call(u)
                        } finally {
                            if (i) throw i.error
                        }
                    }
                    return o
                }(e, t, r, new Up(n, e.children)));
                return o._sourceSegment = e, o._segmentIndexShift = t.length, {
                    segmentGroup: o,
                    slicedSegments: []
                }
            }
            if (0 === n.length && function (e, t, n) {
                    return r.some(function (n) {
                        return ld(e, t, n)
                    })
                }(e, n)) {
                var u = new Up(e.segments, function (e, t, n, r, i, o) {
                    var u, a, c = {};
                    try {
                        for (var p = s(r), h = p.next(); !h.done; h = p.next()) {
                            var d = h.value;
                            if (ld(e, n, d) && !i[od(d)]) {
                                var f = new Up([], {});
                                f._sourceSegment = e, f._segmentIndexShift = "legacy" === o ? e.segments.length : t.length, c[od(d)] = f
                            }
                        }
                    } catch (g) {
                        u = {
                            error: g
                        }
                    } finally {
                        try {
                            h && !h.done && (a = p.return) && a.call(p)
                        } finally {
                            if (u) throw u.error
                        }
                    }
                    return l({}, i, c)
                }(e, t, n, r, e.children, i));
                return u._sourceSegment = e, u._segmentIndexShift = t.length, {
                    segmentGroup: u,
                    slicedSegments: n
                }
            }
            var a = new Up(e.segments, e.children);
            return a._sourceSegment = e, a._segmentIndexShift = t.length, {
                segmentGroup: a,
                slicedSegments: n
            }
        }

        function ld(e, t, n) {
            return (!(e.hasChildren() || t.length > 0) || "full" !== n.pathMatch) && "" === n.path && void 0 === n.redirectTo
        }

        function od(e) {
            return e.outlet || Ep
        }

        function ud(e) {
            return e.data || {}
        }

        function sd(e) {
            return e.resolve || {}
        }

        function ad(e, t, n, r) {
            var i = Yh(e, t, r);
            return Lp(i.resolve ? i.resolve(t, n) : i(t, n))
        }

        function cd(e) {
            return function (t) {
                return t.pipe(Ma(function (t) {
                    var n = e(t);
                    return n ? Z(n).pipe(K(function () {
                        return t
                    })) : Z([t])
                }))
            }
        }
        var pd = function () {
                return function () {}
            }(),
            hd = function () {
                function e() {}
                return e.prototype.shouldDetach = function (e) {
                    return !1
                }, e.prototype.store = function (e, t) {}, e.prototype.shouldAttach = function (e) {
                    return !1
                }, e.prototype.retrieve = function (e) {
                    return null
                }, e.prototype.shouldReuseRoute = function (e, t) {
                    return e.routeConfig === t.routeConfig
                }, e
            }(),
            dd = new ye("ROUTES"),
            fd = function () {
                function e(e, t, n, r) {
                    this.loader = e, this.compiler = t, this.onLoadStartListener = n, this.onLoadEndListener = r
                }
                return e.prototype.load = function (e, t) {
                    var n = this;
                    return this.onLoadStartListener && this.onLoadStartListener(t), this.loadModuleFactory(t.loadChildren).pipe(K(function (r) {
                        n.onLoadEndListener && n.onLoadEndListener(t);
                        var i = r.create(e);
                        return new _p(Dp(i.injector.get(dd)).map(Np), i)
                    }))
                }, e.prototype.loadModuleFactory = function (e) {
                    var t = this;
                    return "string" == typeof e ? Z(this.loader.load(e)) : Lp(e()).pipe(X(function (e) {
                        return e instanceof wt ? Zs(e) : Z(t.compiler.compileModuleAsync(e))
                    }))
                }, e
            }(),
            gd = function () {
                return function () {}
            }(),
            vd = function () {
                function e() {}
                return e.prototype.shouldProcessUrl = function (e) {
                    return !0
                }, e.prototype.extract = function (e) {
                    return e
                }, e.prototype.merge = function (e, t) {
                    return e
                }, e
            }();

        function md(e) {
            throw e
        }

        function yd(e, t, n) {
            return t.parse("/")
        }

        function Sd(e, t) {
            return Zs(null)
        }
        var Ed = function () {
                function e(e, t, n, r, i, l, o, u) {
                    var s = this;
                    this.rootComponentType = e, this.urlSerializer = t, this.rootContexts = n, this.location = r, this.config = u, this.lastSuccessfulNavigation = null, this.currentNavigation = null, this.navigationId = 0, this.isNgZoneEnabled = !1, this.events = new L, this.errorHandler = md, this.malformedUriErrorHandler = yd, this.navigated = !1, this.lastSuccessfulId = -1, this.hooks = {
                        beforePreactivation: Sd,
                        afterPreactivation: Sd
                    }, this.urlHandlingStrategy = new vd, this.routeReuseStrategy = new hd, this.onSameUrlNavigation = "ignore", this.paramsInheritanceStrategy = "emptyOnly", this.urlUpdateStrategy = "deferred", this.relativeLinkResolution = "legacy", this.ngModule = i.get(At), this.console = i.get(xn);
                    var a = i.get(Zn);
                    this.isNgZoneEnabled = a instanceof Zn, this.resetConfig(u), this.currentUrlTree = new Fp(new Up([], {}), {}, null), this.rawUrlTree = this.currentUrlTree, this.browserUrlTree = this.currentUrlTree, this.configLoader = new fd(l, o, function (e) {
                        return s.triggerEvent(new hp(e))
                    }, function (e) {
                        return s.triggerEvent(new dp(e))
                    }), this.routerState = ah(this.currentUrlTree, this.rootComponentType), this.transitions = new Xs({
                        id: 0,
                        currentUrlTree: this.currentUrlTree,
                        currentRawUrl: this.currentUrlTree,
                        extractedUrl: this.urlHandlingStrategy.extract(this.currentUrlTree),
                        urlAfterRedirects: this.urlHandlingStrategy.extract(this.currentUrlTree),
                        rawUrl: this.currentUrlTree,
                        extras: {},
                        resolve: null,
                        reject: null,
                        promise: Promise.resolve(!0),
                        source: "imperative",
                        restoredState: null,
                        currentSnapshot: this.routerState.snapshot,
                        targetSnapshot: null,
                        currentRouterState: this.routerState,
                        targetRouterState: null,
                        guards: {
                            canActivateChecks: [],
                            canDeactivateChecks: []
                        },
                        guardsResult: null
                    }), this.navigations = this.setupNavigations(this.transitions), this.processNavigations()
                }
                return e.prototype.setupNavigations = function (e) {
                    var t = this,
                        n = this.events;
                    return e.pipe(sa(function (e) {
                        return 0 !== e.id
                    }), K(function (e) {
                        return l({}, e, {
                            extractedUrl: t.urlHandlingStrategy.extract(e.rawUrl)
                        })
                    }), Ma(function (e) {
                        var r, i, o, u, a = !1,
                            c = !1;
                        return Zs(e).pipe(Va(function (e) {
                            t.currentNavigation = {
                                id: e.id,
                                initialUrl: e.currentRawUrl,
                                extractedUrl: e.extractedUrl,
                                trigger: e.source,
                                extras: e.extras,
                                previousNavigation: t.lastSuccessfulNavigation ? l({}, t.lastSuccessfulNavigation, {
                                    previousNavigation: null
                                }) : null
                            }
                        }), Ma(function (e) {
                            var r, i, o, u, s = !t.navigated || e.extractedUrl.toString() !== t.browserUrlTree.toString();
                            if (("reload" === t.onSameUrlNavigation || s) && t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl)) return Zs(e).pipe(Ma(function (e) {
                                var r = t.transitions.getValue();
                                return n.next(new rp(e.id, t.serializeUrl(e.extractedUrl), e.source, e.restoredState)), r !== t.transitions.getValue() ? ia : [e]
                            }), Ma(function (e) {
                                return Promise.resolve(e)
                            }), (r = t.ngModule.injector, i = t.configLoader, o = t.urlSerializer, u = t.config, function (e) {
                                return e.pipe(Ma(function (e) {
                                    return function (t, n, r, i, l) {
                                        return new Uh(t, n, r, e.extractedUrl, l).apply()
                                    }(r, i, o, 0, u).pipe(K(function (t) {
                                        return l({}, e, {
                                            urlAfterRedirects: t
                                        })
                                    }))
                                }))
                            }), Va(function (e) {
                                t.currentNavigation = l({}, t.currentNavigation, {
                                    finalUrl: e.urlAfterRedirects
                                })
                            }), function (e, n, r, i, o) {
                                return function (r) {
                                    return r.pipe(X(function (r) {
                                        return function (e, t, n, r, i, l) {
                                            return void 0 === i && (i = "emptyOnly"), void 0 === l && (l = "legacy"), new td(e, t, n, r, i, l).recognize()
                                        }(e, n, r.urlAfterRedirects, (u = r.urlAfterRedirects, t.serializeUrl(u)), i, o).pipe(K(function (e) {
                                            return l({}, r, {
                                                targetSnapshot: e
                                            })
                                        }));
                                        var u
                                    }))
                                }
                            }(t.rootComponentType, t.config, 0, t.paramsInheritanceStrategy, t.relativeLinkResolution), Va(function (e) {
                                "eager" === t.urlUpdateStrategy && (e.extras.skipLocationChange || t.setBrowserUrl(e.urlAfterRedirects, !!e.extras.replaceUrl, e.id), t.browserUrlTree = e.urlAfterRedirects)
                            }), Va(function (e) {
                                var r = new up(e.id, t.serializeUrl(e.extractedUrl), t.serializeUrl(e.urlAfterRedirects), e.targetSnapshot);
                                n.next(r)
                            }));
                            if (s && t.rawUrlTree && t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)) {
                                var a = e.extractedUrl,
                                    c = e.source,
                                    p = e.restoredState,
                                    h = e.extras,
                                    d = new rp(e.id, t.serializeUrl(a), c, p);
                                n.next(d);
                                var f = ah(a, t.rootComponentType).snapshot;
                                return Zs(l({}, e, {
                                    targetSnapshot: f,
                                    urlAfterRedirects: a,
                                    extras: l({}, h, {
                                        skipLocationChange: !1,
                                        replaceUrl: !1
                                    })
                                }))
                            }
                            return t.rawUrlTree = e.rawUrl, e.resolve(null), ia
                        }), cd(function (e) {
                            var n = e.extras;
                            return t.hooks.beforePreactivation(e.targetSnapshot, {
                                navigationId: e.id,
                                appliedUrlTree: e.extractedUrl,
                                rawUrlTree: e.rawUrl,
                                skipLocationChange: !!n.skipLocationChange,
                                replaceUrl: !!n.replaceUrl
                            })
                        }), Va(function (e) {
                            var n = new sp(e.id, t.serializeUrl(e.extractedUrl), t.serializeUrl(e.urlAfterRedirects), e.targetSnapshot);
                            t.triggerEvent(n)
                        }), K(function (e) {
                            return l({}, e, {
                                guards: (n = e.targetSnapshot, r = e.currentSnapshot, i = t.rootContexts, o = n._root, zh(o, r ? r._root : null, i, [o.value]))
                            });
                            var n, r, i, o
                        }), function (e, t) {
                            return function (n) {
                                return n.pipe(X(function (n) {
                                    var r = n.targetSnapshot,
                                        i = n.currentSnapshot,
                                        o = n.guards,
                                        u = o.canActivateChecks,
                                        s = o.canDeactivateChecks;
                                    return 0 === s.length && 0 === u.length ? Zs(l({}, n, {
                                        guardsResult: !0
                                    })) : function (e, t, n, r) {
                                        return Z(s).pipe(X(function (e) {
                                            return function (e, t, n, r, i) {
                                                var l = t && t.routeConfig ? t.routeConfig.canDeactivate : null;
                                                return l && 0 !== l.length ? Zs(l.map(function (l) {
                                                    var o, u = Yh(l, t, i);
                                                    if (function (e) {
                                                            return e && Ph(e.canDeactivate)
                                                        }(u)) o = Lp(u.canDeactivate(e, t, n, r));
                                                    else {
                                                        if (!Ph(u)) throw new Error("Invalid CanDeactivate guard");
                                                        o = Lp(u(e, t, n, r))
                                                    }
                                                    return o.pipe(Na())
                                                })).pipe(Qh()) : Zs(!0)
                                            }(e.component, e.route, n, t, r)
                                        }), Na(function (e) {
                                            return !0 !== e
                                        }, !0))
                                    }(0, r, i, e).pipe(X(function (n) {
                                        return n && "boolean" == typeof n ? function (e, t, n, r) {
                                            return Z(u).pipe(Ba(function (t) {
                                                return Z([Zh(t.route.parent, r), $h(t.route, r), Jh(e, t.path, n), Xh(e, t.route, n)]).pipe(ua(), Na(function (e) {
                                                    return !0 !== e
                                                }, !0))
                                            }), Na(function (e) {
                                                return !0 !== e
                                            }, !0))
                                        }(r, 0, e, t) : Zs(n)
                                    }), K(function (e) {
                                        return l({}, n, {
                                            guardsResult: e
                                        })
                                    }))
                                }))
                            }
                        }(t.ngModule.injector, function (e) {
                            return t.triggerEvent(e)
                        }), Va(function (e) {
                            if (Dh(e.guardsResult)) {
                                var n = Rp('Redirecting to "' + t.serializeUrl(e.guardsResult) + '"');
                                throw n.url = e.guardsResult, n
                            }
                        }), Va(function (e) {
                            var n = new ap(e.id, t.serializeUrl(e.extractedUrl), t.serializeUrl(e.urlAfterRedirects), e.targetSnapshot, !!e.guardsResult);
                            t.triggerEvent(n)
                        }), sa(function (e) {
                            if (!e.guardsResult) {
                                t.resetUrlToCurrentUrlTree();
                                var r = new lp(e.id, t.serializeUrl(e.extractedUrl), "");
                                return n.next(r), e.resolve(!1), !1
                            }
                            return !0
                        }), cd(function (e) {
                            if (e.guards.canActivateChecks.length) return Zs(e).pipe(Va(function (e) {
                                var n = new cp(e.id, t.serializeUrl(e.extractedUrl), t.serializeUrl(e.urlAfterRedirects), e.targetSnapshot);
                                t.triggerEvent(n)
                            }), (n = t.paramsInheritanceStrategy, r = t.ngModule.injector, function (e) {
                                return e.pipe(X(function (e) {
                                    var t = e.targetSnapshot,
                                        i = e.guards.canActivateChecks;
                                    return i.length ? Z(i).pipe(Ba(function (e) {
                                        return function (e, n, r, i) {
                                            return function (e, t, n, r) {
                                                var i = Object.keys(e);
                                                if (0 === i.length) return Zs({});
                                                if (1 === i.length) {
                                                    var l = i[0];
                                                    return ad(e[l], t, n, r).pipe(K(function (e) {
                                                        var t;
                                                        return (t = {})[l] = e, t
                                                    }))
                                                }
                                                var o = {};
                                                return Z(i).pipe(X(function (i) {
                                                    return ad(e[i], t, n, r).pipe(K(function (e) {
                                                        return o[i] = e, e
                                                    }))
                                                })).pipe(Ta(), K(function () {
                                                    return o
                                                }))
                                            }(e._resolve, e, t, i).pipe(K(function (t) {
                                                return e._resolvedData = t, e.data = l({}, e.data, ph(e, r).resolve), null
                                            }))
                                        }(e.route, 0, n, r)
                                    }), function (e, t) {
                                        return arguments.length >= 2 ? function (t) {
                                            return I(Ua(e, void 0), da(1), Ea(void 0))(t)
                                        } : function (t) {
                                            return I(Ua(function (t, n, r) {
                                                return e(t)
                                            }), da(1))(t)
                                        }
                                    }(function (e, t) {
                                        return e
                                    }), K(function (t) {
                                        return e
                                    })) : Zs(e)
                                }))
                            }), Va(function (e) {
                                var n = new pp(e.id, t.serializeUrl(e.extractedUrl), t.serializeUrl(e.urlAfterRedirects), e.targetSnapshot);
                                t.triggerEvent(n)
                            }));
                            var n, r
                        }), cd(function (e) {
                            var n = e.extras;
                            return t.hooks.afterPreactivation(e.targetSnapshot, {
                                navigationId: e.id,
                                appliedUrlTree: e.extractedUrl,
                                rawUrlTree: e.rawUrl,
                                skipLocationChange: !!n.skipLocationChange,
                                replaceUrl: !!n.replaceUrl
                            })
                        }), K(function (e) {
                            var n, r, i, o = (i = function e(t, n, r) {
                                if (r && t.shouldReuseRoute(n.value, r.value.snapshot)) {
                                    (a = r.value)._futureSnapshot = n.value;
                                    var i = function (t, n, r) {
                                        return n.children.map(function (n) {
                                            var i, l;
                                            try {
                                                for (var o = s(r.children), u = o.next(); !u.done; u = o.next()) {
                                                    var a = u.value;
                                                    if (t.shouldReuseRoute(a.value.snapshot, n.value)) return e(t, n, a)
                                                }
                                            } catch (c) {
                                                i = {
                                                    error: c
                                                }
                                            } finally {
                                                try {
                                                    u && !u.done && (l = o.return) && l.call(o)
                                                } finally {
                                                    if (i) throw i.error
                                                }
                                            }
                                            return e(t, n)
                                        })
                                    }(t, n, r);
                                    return new oh(a, i)
                                }
                                var l = t.retrieve(n.value);
                                if (l) {
                                    var o = l.route;
                                    return function e(t, n) {
                                        if (t.value.routeConfig !== n.value.routeConfig) throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");
                                        if (t.children.length !== n.children.length) throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");
                                        n.value._futureSnapshot = t.value;
                                        for (var r = 0; r < t.children.length; ++r) e(t.children[r], n.children[r])
                                    }(n, o), o
                                }
                                var u, a = new ch(new Xs((u = n.value).url), new Xs(u.params), new Xs(u.queryParams), new Xs(u.fragment), new Xs(u.data), u.outlet, u.component, u);
                                return i = n.children.map(function (n) {
                                    return e(t, n)
                                }), new oh(a, i)
                            }(t.routeReuseStrategy, (n = e.targetSnapshot)._root, (r = e.currentRouterState) ? r._root : void 0), new sh(i, n));
                            return l({}, e, {
                                targetRouterState: o
                            })
                        }), Va(function (e) {
                            t.currentUrlTree = e.urlAfterRedirects, t.rawUrlTree = t.urlHandlingStrategy.merge(t.currentUrlTree, e.rawUrl), t.routerState = e.targetRouterState, "deferred" === t.urlUpdateStrategy && (e.extras.skipLocationChange || t.setBrowserUrl(t.rawUrlTree, !!e.extras.replaceUrl, e.id, e.extras.state), t.browserUrlTree = e.urlAfterRedirects)
                        }), (i = t.rootContexts, o = t.routeReuseStrategy, u = function (e) {
                            return t.triggerEvent(e)
                        }, K(function (e) {
                            return new wh(o, e.targetRouterState, e.currentRouterState, u).activate(i), e
                        })), Va({
                            next: function () {
                                a = !0
                            },
                            complete: function () {
                                a = !0
                            }
                        }), (r = function () {
                            if (!a && !c) {
                                t.resetUrlToCurrentUrlTree();
                                var r = new lp(e.id, t.serializeUrl(e.extractedUrl), "Navigation ID " + e.id + " is not equal to the current navigation id " + t.navigationId);
                                n.next(r), e.resolve(!1)
                            }
                            t.currentNavigation = null
                        }, function (e) {
                            return e.lift(new Ya(r))
                        }), Ra(function (r) {
                            if (c = !0, (u = r) && u[Tp]) {
                                var i = Dh(r.url);
                                i || (t.navigated = !0, t.resetStateAndUrl(e.currentRouterState, e.currentUrlTree, e.rawUrl));
                                var l = new lp(e.id, t.serializeUrl(e.extractedUrl), r.message);
                                n.next(l), e.resolve(!1), i && t.navigateByUrl(r.url)
                            } else {
                                t.resetStateAndUrl(e.currentRouterState, e.currentUrlTree, e.rawUrl);
                                var o = new op(e.id, t.serializeUrl(e.extractedUrl), r);
                                n.next(o);
                                try {
                                    e.resolve(t.errorHandler(r))
                                } catch (s) {
                                    e.reject(s)
                                }
                            }
                            var u;
                            return ia
                        }))
                    }))
                }, e.prototype.resetRootComponentType = function (e) {
                    this.rootComponentType = e, this.routerState.root.component = this.rootComponentType
                }, e.prototype.getTransition = function () {
                    return this.transitions.value
                }, e.prototype.setTransition = function (e) {
                    this.transitions.next(l({}, this.getTransition(), e))
                }, e.prototype.initialNavigation = function () {
                    this.setUpLocationChangeListener(), 0 === this.navigationId && this.navigateByUrl(this.location.path(!0), {
                        replaceUrl: !0
                    })
                }, e.prototype.setUpLocationChangeListener = function () {
                    var e = this;
                    this.locationSubscription || (this.locationSubscription = this.location.subscribe(function (t) {
                        var n = e.parseUrl(t.url),
                            r = "popstate" === t.type ? "popstate" : "hashchange",
                            i = t.state && t.state.navigationId ? t.state : null;
                        setTimeout(function () {
                            e.scheduleNavigation(n, r, i, {
                                replaceUrl: !0
                            })
                        }, 0)
                    }))
                }, Object.defineProperty(e.prototype, "url", {
                    get: function () {
                        return this.serializeUrl(this.currentUrlTree)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.getCurrentNavigation = function () {
                    return this.currentNavigation
                }, e.prototype.triggerEvent = function (e) {
                    this.events.next(e)
                }, e.prototype.resetConfig = function (e) {
                    Ip(e), this.config = e.map(Np), this.navigated = !1, this.lastSuccessfulId = -1
                }, e.prototype.ngOnDestroy = function () {
                    this.dispose()
                }, e.prototype.dispose = function () {
                    this.locationSubscription && (this.locationSubscription.unsubscribe(), this.locationSubscription = null)
                }, e.prototype.createUrlTree = function (e, t) {
                    void 0 === t && (t = {});
                    var n = t.relativeTo,
                        r = t.queryParams,
                        i = t.fragment,
                        o = t.preserveQueryParams,
                        u = t.queryParamsHandling,
                        s = t.preserveFragment;
                    Vt() && o && console && console.warn && console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");
                    var a = n || this.routerState.root,
                        p = s ? this.currentUrlTree.fragment : i,
                        h = null;
                    if (u) switch (u) {
                        case "merge":
                            h = l({}, this.currentUrlTree.queryParams, r);
                            break;
                        case "preserve":
                            h = this.currentUrlTree.queryParams;
                            break;
                        default:
                            h = r || null
                    } else h = o ? this.currentUrlTree.queryParams : r || null;
                    return null !== h && (h = this.removeEmptyProps(h)),
                        function (e, t, n, r, i) {
                            if (0 === n.length) return Sh(t.root, t.root, t, r, i);
                            var l = function (e) {
                                if ("string" == typeof e[0] && 1 === e.length && "/" === e[0]) return new Eh(!0, 0, e);
                                var t = 0,
                                    n = !1,
                                    r = e.reduce(function (e, r, i) {
                                        if ("object" == typeof r && null != r) {
                                            if (r.outlets) {
                                                var l = {};
                                                return kp(r.outlets, function (e, t) {
                                                    l[t] = "string" == typeof e ? e.split("/") : e
                                                }), c(e, [{
                                                    outlets: l
                                                }])
                                            }
                                            if (r.segmentPath) return c(e, [r.segmentPath])
                                        }
                                        return "string" != typeof r ? c(e, [r]) : 0 === i ? (r.split("/").forEach(function (r, i) {
                                            0 == i && "." === r || (0 == i && "" === r ? n = !0 : ".." === r ? t++ : "" != r && e.push(r))
                                        }), e) : c(e, [r])
                                    }, []);
                                return new Eh(n, t, r)
                            }(n);
                            if (l.toRoot()) return Sh(t.root, new Up([], {}), t, r, i);
                            var o = function (e, n, r) {
                                    if (e.isAbsolute) return new Oh(t.root, !0, 0);
                                    if (-1 === r.snapshot._lastPathIndex) return new Oh(r.snapshot._urlSegment, !0, 0);
                                    var i = yh(e.commands[0]) ? 0 : 1;
                                    return function (t, n, l) {
                                        for (var o = r.snapshot._urlSegment, u = r.snapshot._lastPathIndex + i, s = e.numberOfDoubleDots; s > u;) {
                                            if (s -= u, !(o = o.parent)) throw new Error("Invalid number of '../'");
                                            u = o.segments.length
                                        }
                                        return new Oh(o, !1, u - s)
                                    }()
                                }(l, 0, e),
                                u = o.processChildren ? Rh(o.segmentGroup, o.index, l.commands) : Th(o.segmentGroup, o.index, l.commands);
                            return Sh(o.segmentGroup, u, t, r, i)
                        }(a, this.currentUrlTree, e, h, p)
                }, e.prototype.navigateByUrl = function (e, t) {
                    void 0 === t && (t = {
                        skipLocationChange: !1
                    }), Vt() && this.isNgZoneEnabled && !Zn.isInAngularZone() && this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");
                    var n = Dh(e) ? e : this.parseUrl(e),
                        r = this.urlHandlingStrategy.merge(n, this.rawUrlTree);
                    return this.scheduleNavigation(r, "imperative", null, t)
                }, e.prototype.navigate = function (e, t) {
                    return void 0 === t && (t = {
                            skipLocationChange: !1
                        }),
                        function (e) {
                            for (var t = 0; t < e.length; t++) {
                                var n = e[t];
                                if (null == n) throw new Error("The requested path contains " + n + " segment at index " + t)
                            }
                        }(e), this.navigateByUrl(this.createUrlTree(e, t), t)
                }, e.prototype.serializeUrl = function (e) {
                    return this.urlSerializer.serialize(e)
                }, e.prototype.parseUrl = function (e) {
                    var t;
                    try {
                        t = this.urlSerializer.parse(e)
                    } catch (n) {
                        t = this.malformedUriErrorHandler(n, this.urlSerializer, e)
                    }
                    return t
                }, e.prototype.isActive = function (e, t) {
                    if (Dh(e)) return xp(this.currentUrlTree, e, t);
                    var n = this.parseUrl(e);
                    return xp(this.currentUrlTree, n, t)
                }, e.prototype.removeEmptyProps = function (e) {
                    return Object.keys(e).reduce(function (t, n) {
                        var r = e[n];
                        return null != r && (t[n] = r), t
                    }, {})
                }, e.prototype.processNavigations = function () {
                    var e = this;
                    this.navigations.subscribe(function (t) {
                        e.navigated = !0, e.lastSuccessfulId = t.id, e.events.next(new ip(t.id, e.serializeUrl(t.extractedUrl), e.serializeUrl(e.currentUrlTree))), e.lastSuccessfulNavigation = e.currentNavigation, e.currentNavigation = null, t.resolve(!0)
                    }, function (t) {
                        e.console.warn("Unhandled Navigation Error: ")
                    })
                }, e.prototype.scheduleNavigation = function (e, t, n, r) {
                    var i = this.getTransition();
                    if (i && "imperative" !== t && "imperative" === i.source && i.rawUrl.toString() === e.toString()) return Promise.resolve(!0);
                    if (i && "hashchange" == t && "popstate" === i.source && i.rawUrl.toString() === e.toString()) return Promise.resolve(!0);
                    if (i && "popstate" == t && "hashchange" === i.source && i.rawUrl.toString() === e.toString()) return Promise.resolve(!0);
                    var l = null,
                        o = null,
                        u = new Promise(function (e, t) {
                            l = e, o = t
                        }),
                        s = ++this.navigationId;
                    return this.setTransition({
                        id: s,
                        source: t,
                        restoredState: n,
                        currentUrlTree: this.currentUrlTree,
                        currentRawUrl: this.rawUrlTree,
                        rawUrl: e,
                        extras: r,
                        resolve: l,
                        reject: o,
                        promise: u,
                        currentSnapshot: this.routerState.snapshot,
                        currentRouterState: this.routerState
                    }), u.catch(function (e) {
                        return Promise.reject(e)
                    })
                }, e.prototype.setBrowserUrl = function (e, t, n, r) {
                    var i = this.urlSerializer.serialize(e);
                    r = r || {}, this.location.isCurrentPathEqualTo(i) || t ? this.location.replaceState(i, "", l({}, r, {
                        navigationId: n
                    })) : this.location.go(i, "", l({}, r, {
                        navigationId: n
                    }))
                }, e.prototype.resetStateAndUrl = function (e, t, n) {
                    this.routerState = e, this.currentUrlTree = t, this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, n), this.resetUrlToCurrentUrlTree()
                }, e.prototype.resetUrlToCurrentUrlTree = function () {
                    this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree), "", {
                        navigationId: this.lastSuccessfulId
                    })
                }, e
            }(),
            Od = function () {
                function e(e, t, n) {
                    var r = this;
                    this.router = e, this.route = t, this.locationStrategy = n, this.commands = [], this.subscription = e.events.subscribe(function (e) {
                        e instanceof ip && r.updateTargetUrlAndHref()
                    })
                }
                return Object.defineProperty(e.prototype, "routerLink", {
                    set: function (e) {
                        this.commands = null != e ? Array.isArray(e) ? e : [e] : []
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "preserveQueryParams", {
                    set: function (e) {
                        Vt() && console && console.warn && console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."), this.preserve = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngOnChanges = function (e) {
                    this.updateTargetUrlAndHref()
                }, e.prototype.ngOnDestroy = function () {
                    this.subscription.unsubscribe()
                }, e.prototype.onClick = function (e, t, n, r) {
                    if (0 !== e || t || n || r) return !0;
                    if ("string" == typeof this.target && "_self" != this.target) return !0;
                    var i = {
                        skipLocationChange: bd(this.skipLocationChange),
                        replaceUrl: bd(this.replaceUrl),
                        state: this.state
                    };
                    return this.router.navigateByUrl(this.urlTree, i), !1
                }, e.prototype.updateTargetUrlAndHref = function () {
                    this.href = this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))
                }, Object.defineProperty(e.prototype, "urlTree", {
                    get: function () {
                        return this.router.createUrlTree(this.commands, {
                            relativeTo: this.route,
                            queryParams: this.queryParams,
                            fragment: this.fragment,
                            preserveQueryParams: bd(this.preserve),
                            queryParamsHandling: this.queryParamsHandling,
                            preserveFragment: bd(this.preserveFragment)
                        })
                    },
                    enumerable: !0,
                    configurable: !0
                }), o([yn("attr.target"), mn(), u("design:type", String)], e.prototype, "target", void 0), e
            }();

        function bd(e) {
            return "" === e || !!e
        }
        var Td = function () {
                function e(e, t, n, r) {
                    var i = this;
                    this.router = e, this.element = t, this.renderer = n, this.cdr = r, this.classes = [], this.isActive = !1, this.routerLinkActiveOptions = {
                        exact: !1
                    }, this.subscription = e.events.subscribe(function (e) {
                        e instanceof ip && i.update()
                    })
                }
                return e.prototype.ngAfterContentInit = function () {
                    var e = this;
                    this.links.changes.subscribe(function (t) {
                        return e.update()
                    }), this.linksWithHrefs.changes.subscribe(function (t) {
                        return e.update()
                    }), this.update()
                }, Object.defineProperty(e.prototype, "routerLinkActive", {
                    set: function (e) {
                        var t = Array.isArray(e) ? e : e.split(" ");
                        this.classes = t.filter(function (e) {
                            return !!e
                        })
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngOnChanges = function (e) {
                    this.update()
                }, e.prototype.ngOnDestroy = function () {
                    this.subscription.unsubscribe()
                }, e.prototype.update = function () {
                    var e = this;
                    this.links && this.linksWithHrefs && this.router.navigated && Promise.resolve().then(function () {
                        var t = e.hasActiveLinks();
                        e.isActive !== t && (e.isActive = t, e.classes.forEach(function (n) {
                            t ? e.renderer.addClass(e.element.nativeElement, n) : e.renderer.removeClass(e.element.nativeElement, n)
                        }))
                    })
                }, e.prototype.isLinkActive = function (e) {
                    var t = this;
                    return function (n) {
                        return e.isActive(n.urlTree, t.routerLinkActiveOptions.exact)
                    }
                }, e.prototype.hasActiveLinks = function () {
                    return this.links.some(this.isLinkActive(this.router)) || this.linksWithHrefs.some(this.isLinkActive(this.router))
                }, e
            }(),
            Rd = function () {
                return function () {
                    this.outlet = null, this.route = null, this.resolver = null, this.children = new Cd, this.attachRef = null
                }
            }(),
            Cd = function () {
                function e() {
                    this.contexts = new Map
                }
                return e.prototype.onChildOutletCreated = function (e, t) {
                    var n = this.getOrCreateContext(e);
                    n.outlet = t, this.contexts.set(e, n)
                }, e.prototype.onChildOutletDestroyed = function (e) {
                    var t = this.getContext(e);
                    t && (t.outlet = null)
                }, e.prototype.onOutletDeactivated = function () {
                    var e = this.contexts;
                    return this.contexts = new Map, e
                }, e.prototype.onOutletReAttached = function (e) {
                    this.contexts = e
                }, e.prototype.getOrCreateContext = function (e) {
                    var t = this.getContext(e);
                    return t || (t = new Rd, this.contexts.set(e, t)), t
                }, e.prototype.getContext = function (e) {
                    return this.contexts.get(e) || null
                }, e
            }(),
            _d = function () {
                function e(e, t, n, r, i) {
                    this.parentContexts = e, this.location = t, this.resolver = n, this.changeDetector = i, this.activated = null, this._activatedRoute = null, this.activateEvents = new pn, this.deactivateEvents = new pn, this.name = r || Ep, e.onChildOutletCreated(this.name, this)
                }
                return e.prototype.ngOnDestroy = function () {
                    this.parentContexts.onChildOutletDestroyed(this.name)
                }, e.prototype.ngOnInit = function () {
                    if (!this.activated) {
                        var e = this.parentContexts.getContext(this.name);
                        e && e.route && (e.attachRef ? this.attach(e.attachRef, e.route) : this.activateWith(e.route, e.resolver || null))
                    }
                }, Object.defineProperty(e.prototype, "isActivated", {
                    get: function () {
                        return !!this.activated
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "component", {
                    get: function () {
                        if (!this.activated) throw new Error("Outlet is not activated");
                        return this.activated.instance
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "activatedRoute", {
                    get: function () {
                        if (!this.activated) throw new Error("Outlet is not activated");
                        return this._activatedRoute
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "activatedRouteData", {
                    get: function () {
                        return this._activatedRoute ? this._activatedRoute.snapshot.data : {}
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.detach = function () {
                    if (!this.activated) throw new Error("Outlet is not activated");
                    this.location.detach();
                    var e = this.activated;
                    return this.activated = null, this._activatedRoute = null, e
                }, e.prototype.attach = function (e, t) {
                    this.activated = e, this._activatedRoute = t, this.location.insert(e.hostView)
                }, e.prototype.deactivate = function () {
                    if (this.activated) {
                        var e = this.component;
                        this.activated.destroy(), this.activated = null, this._activatedRoute = null, this.deactivateEvents.emit(e)
                    }
                }, e.prototype.activateWith = function (e, t) {
                    if (this.isActivated) throw new Error("Cannot activate an already activated outlet");
                    this._activatedRoute = e;
                    var n = (t = t || this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),
                        r = this.parentContexts.getOrCreateContext(this.name).children,
                        i = new Id(e, r, this.location.injector);
                    this.activated = this.location.createComponent(n, this.location.length, i), this.changeDetector.markForCheck(), this.activateEvents.emit(this.activated.instance)
                }, e
            }(),
            Id = function () {
                function e(e, t, n) {
                    this.route = e, this.childContexts = t, this.parent = n
                }
                return e.prototype.get = function (e, t) {
                    return e === ch ? this.route : e === Cd ? this.childContexts : this.parent.get(e, t)
                }, e
            }(),
            Ad = function () {
                return function () {}
            }(),
            wd = function () {
                function e() {}
                return e.prototype.preload = function (e, t) {
                    return t().pipe(Ra(function () {
                        return Zs(null)
                    }))
                }, e
            }(),
            Nd = function () {
                function e() {}
                return e.prototype.preload = function (e, t) {
                    return Zs(null)
                }, e
            }(),
            Pd = function () {
                function e(e, t, n, r, i) {
                    this.router = e, this.injector = r, this.preloadingStrategy = i, this.loader = new fd(t, n, function (t) {
                        return e.triggerEvent(new hp(t))
                    }, function (t) {
                        return e.triggerEvent(new dp(t))
                    })
                }
                return e.prototype.setUpPreloading = function () {
                    var e = this;
                    this.subscription = this.router.events.pipe(sa(function (e) {
                        return e instanceof ip
                    }), Ba(function () {
                        return e.preload()
                    })).subscribe(function () {})
                }, e.prototype.preload = function () {
                    var e = this.injector.get(At);
                    return this.processRoutes(e, this.router.config)
                }, e.prototype.ngOnDestroy = function () {
                    this.subscription.unsubscribe()
                }, e.prototype.processRoutes = function (e, t) {
                    var n, r, i = [];
                    try {
                        for (var l = s(t), o = l.next(); !o.done; o = l.next()) {
                            var u = o.value;
                            if (u.loadChildren && !u.canLoad && u._loadedConfig) {
                                var a = u._loadedConfig;
                                i.push(this.processRoutes(a.module, a.routes))
                            } else u.loadChildren && !u.canLoad ? i.push(this.preloadConfig(e, u)) : u.children && i.push(this.processRoutes(e, u.children))
                        }
                    } catch (c) {
                        n = {
                            error: c
                        }
                    } finally {
                        try {
                            o && !o.done && (r = l.return) && r.call(l)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                    return Z(i).pipe(ne(), K(function (e) {}))
                }, e.prototype.preloadConfig = function (e, t) {
                    var n = this;
                    return this.preloadingStrategy.preload(t, function () {
                        return n.loader.load(e.injector, t).pipe(X(function (e) {
                            return t._loadedConfig = e, n.processRoutes(e.module, e.routes)
                        }))
                    })
                }, e
            }(),
            Dd = function () {
                function e(e, t, n) {
                    void 0 === n && (n = {}), this.router = e, this.viewportScroller = t, this.options = n, this.lastId = 0, this.lastSource = "imperative", this.restoredId = 0, this.store = {}, n.scrollPositionRestoration = n.scrollPositionRestoration || "disabled", n.anchorScrolling = n.anchorScrolling || "disabled"
                }
                return e.prototype.init = function () {
                    "disabled" !== this.options.scrollPositionRestoration && this.viewportScroller.setHistoryScrollRestoration("manual"), this.routerEventsSubscription = this.createScrollEvents(), this.scrollEventsSubscription = this.consumeScrollEvents()
                }, e.prototype.createScrollEvents = function () {
                    var e = this;
                    return this.router.events.subscribe(function (t) {
                        t instanceof rp ? (e.store[e.lastId] = e.viewportScroller.getScrollPosition(), e.lastSource = t.navigationTrigger, e.restoredId = t.restoredState ? t.restoredState.navigationId : 0) : t instanceof ip && (e.lastId = t.id, e.scheduleScrollEvent(t, e.router.parseUrl(t.urlAfterRedirects).fragment))
                    })
                }, e.prototype.consumeScrollEvents = function () {
                    var e = this;
                    return this.router.events.subscribe(function (t) {
                        t instanceof yp && (t.position ? "top" === e.options.scrollPositionRestoration ? e.viewportScroller.scrollToPosition([0, 0]) : "enabled" === e.options.scrollPositionRestoration && e.viewportScroller.scrollToPosition(t.position) : t.anchor && "enabled" === e.options.anchorScrolling ? e.viewportScroller.scrollToAnchor(t.anchor) : "disabled" !== e.options.scrollPositionRestoration && e.viewportScroller.scrollToPosition([0, 0]))
                    })
                }, e.prototype.scheduleScrollEvent = function (e, t) {
                    this.router.triggerEvent(new yp(e, "popstate" === this.lastSource ? this.store[this.restoredId] : null, t))
                }, e.prototype.ngOnDestroy = function () {
                    this.routerEventsSubscription && this.routerEventsSubscription.unsubscribe(), this.scrollEventsSubscription && this.scrollEventsSubscription.unsubscribe()
                }, e
            }(),
            Md = new ye("ROUTER_CONFIGURATION"),
            kd = new ye("ROUTER_FORROOT_GUARD"),
            Ld = [ps, {
                provide: Vp,
                useClass: Wp
            }, {
                provide: Ed,
                useFactory: Vd,
                deps: [fr, Vp, Cd, ps, lt, vn, jn, dd, Md, [gd, new Ge], [pd, new Ge]]
            }, Cd, {
                provide: ch,
                useFactory: Wd,
                deps: [Ed]
            }, {
                provide: vn,
                useClass: Sr
            }, Pd, Nd, wd, {
                provide: Md,
                useValue: {
                    enableTracing: !1
                }
            }];

        function xd() {
            return new ar("Router", Ed)
        }
        var Fd = function () {
            function e(e, t) {}
            var t;
            return t = e, e.forRoot = function (e, n) {
                return {
                    ngModule: t,
                    providers: [Ld, Bd(e), {
                        provide: kd,
                        useFactory: Gd,
                        deps: [[Ed, new Ge, new Ve]]
                    }, {
                        provide: Md,
                        useValue: n || {}
                    }, {
                        provide: as,
                        useFactory: Hd,
                        deps: [us, [new He(cs), new Ge], Md]
                    }, {
                        provide: Dd,
                        useFactory: Ud,
                        deps: [Ed, Qs, Md]
                    }, {
                        provide: Ad,
                        useExisting: n && n.preloadingStrategy ? n.preloadingStrategy : Nd
                    }, {
                        provide: ar,
                        multi: !0,
                        useFactory: xd
                    }, [jd, {
                        provide: An,
                        multi: !0,
                        useFactory: Yd,
                        deps: [jd]
                    }, {
                        provide: Kd,
                        useFactory: zd,
                        deps: [jd]
                    }, {
                        provide: Ln,
                        multi: !0,
                        useExisting: Kd
                    }]]
                }
            }, e.forChild = function (e) {
                return {
                    ngModule: t,
                    providers: [Bd(e)]
                }
            }, e
        }();

        function Ud(e, t, n) {
            return n.scrollOffset && t.setOffset(n.scrollOffset), new Dd(e, t, n)
        }

        function Hd(e, t, n) {
            return void 0 === n && (n = {}), n.useHash ? new ds(e, t) : new fs(e, t)
        }

        function Gd(e) {
            if (e) throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");
            return "guarded"
        }

        function Bd(e) {
            return [{
                provide: Re,
                multi: !0,
                useValue: e
            }, {
                provide: dd,
                multi: !0,
                useValue: e
            }]
        }

        function Vd(e, t, n, r, i, l, o, u, s, a, c) {
            void 0 === s && (s = {});
            var p = new Ed(null, t, n, r, i, l, o, Dp(u));
            if (a && (p.urlHandlingStrategy = a), c && (p.routeReuseStrategy = c), s.errorHandler && (p.errorHandler = s.errorHandler), s.malformedUriErrorHandler && (p.malformedUriErrorHandler = s.malformedUriErrorHandler), s.enableTracing) {
                var h = qa();
                p.events.subscribe(function (e) {
                    h.logGroup("Router Event: " + e.constructor.name), h.log(e.toString()), h.log(e), h.logGroupEnd()
                })
            }
            return s.onSameUrlNavigation && (p.onSameUrlNavigation = s.onSameUrlNavigation), s.paramsInheritanceStrategy && (p.paramsInheritanceStrategy = s.paramsInheritanceStrategy), s.urlUpdateStrategy && (p.urlUpdateStrategy = s.urlUpdateStrategy), s.relativeLinkResolution && (p.relativeLinkResolution = s.relativeLinkResolution), p
        }

        function Wd(e) {
            return e.routerState.root
        }
        var jd = function () {
            function e(e) {
                this.injector = e, this.initNavigation = !1, this.resultOfPreactivationDone = new L
            }
            return e.prototype.appInitializer = function () {
                var e = this;
                return this.injector.get(ss, Promise.resolve(null)).then(function () {
                    var t = null,
                        n = new Promise(function (e) {
                            return t = e
                        }),
                        r = e.injector.get(Ed),
                        i = e.injector.get(Md);
                    if (e.isLegacyDisabled(i) || e.isLegacyEnabled(i)) t(!0);
                    else if ("disabled" === i.initialNavigation) r.setUpLocationChangeListener(), t(!0);
                    else {
                        if ("enabled" !== i.initialNavigation) throw new Error("Invalid initialNavigation options: '" + i.initialNavigation + "'");
                        r.hooks.afterPreactivation = function () {
                            return e.initNavigation ? Zs(null) : (e.initNavigation = !0, t(!0), e.resultOfPreactivationDone)
                        }, r.initialNavigation()
                    }
                    return n
                })
            }, e.prototype.bootstrapListener = function (e) {
                var t = this.injector.get(Md),
                    n = this.injector.get(Pd),
                    r = this.injector.get(Dd),
                    i = this.injector.get(Ed),
                    l = this.injector.get(fr);
                e === l.components[0] && (this.isLegacyEnabled(t) ? i.initialNavigation() : this.isLegacyDisabled(t) && i.setUpLocationChangeListener(), n.setUpPreloading(), r.init(), i.resetRootComponentType(l.componentTypes[0]), this.resultOfPreactivationDone.next(null), this.resultOfPreactivationDone.complete())
            }, e.prototype.isLegacyEnabled = function (e) {
                return "legacy_enabled" === e.initialNavigation || !0 === e.initialNavigation || void 0 === e.initialNavigation
            }, e.prototype.isLegacyDisabled = function (e) {
                return "legacy_disabled" === e.initialNavigation || !1 === e.initialNavigation
            }, e
        }();

        function Yd(e) {
            return e.appInitializer.bind(e)
        }

        function zd(e) {
            return e.bootstrapListener.bind(e)
        }
        var Kd = new ye("Router Initializer"),
            qd = gi({
                encapsulation: 2,
                styles: [],
                data: {}
            });

        function Qd(e) {
            return so(0, [(e()(), Yi(0, 16777216, null, null, 1, "router-outlet", [], null, null, null, null, null)), Ml(1, 212992, null, 0, _d, [Cd, Or, Ct, [8, null], Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }

        function $d(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "ng-component", [], null, null, null, Qd, qd)), Ml(1, 49152, null, 0, Sp, [], null, null)], null, null)
        }
        var Zd = al("ng-component", Sp, $d, {}, {}, []),
            Xd = function () {
                function e(e) {
                    this.router = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.goToVillage = function () {
                    this.router.navigate(["/village"])
                }, e
            }(),
            Jd = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:10px;font-size:4vw;text-align:center}button[_ngcontent-%COMP%]{font-size:1.5vw}"]],
                data: {}
            });

        function ef(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), lo(-1, null, ["  "])), (e()(), Yi(2, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.goToVillage() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function tf(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-not-found", [], null, null, null, ef, Jd)), Ml(1, 114688, null, 0, Xd, [Ed], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var nf = al("app-not-found", Xd, tf, {}, {}, []),
            rf = function () {
                function e() {
                    this.margin = "0"
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getTitle = function () {
                    return this.title ? this.title : "Food" === this.name ? "Food nutrition" : Au.titleCase(this.name).replace("_", " ")
                }, e.prototype.getPath = function () {
                    var e = "assets/";
                    return this.path && (e += this.path + "/"), e
                }, e
            }(),
            lf = gi({
                encapsulation: 0,
                styles: [["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:17px}#wrapper[_ngcontent-%COMP%]{display:inline-block;height:17px;margin:0;padding:0}img[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;height:17px;width:17px}"]],
                data: {}
            });

        function of (e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "img", [["class", "resourceIcon"], ["draggable", "false"], ["onerror", "if (this.src !== 'assets/question_mark.svg') this.src = 'assets/question_mark.svg';"]], [[8, "src", 4], [8, "title", 0], [8, "alt", 0]], null, null, null, null)), Ml(2, 278528, null, 0, Us, [Vr, Nt, Lt], {
                ngStyle: [0, "ngStyle"]
            }, null), ro(3, {
                margin: 0
            })], function (e, t) {
                var n = e(t, 3, 0, t.component.margin);
                e(t, 2, 0, n)
            }, function (e, t) {
                var n = t.component;
                e(t, 1, 0, Vi(1, "", n.getPath() + n.name.replace(" ", "_").toLowerCase(), ".svg"), Vi(1, "", n.getTitle(), ""), Vi(1, "", n.name, ""))
            })
        }

        function uf(e, t) {
            return new w(function (n) {
                var r = e.length;
                if (0 !== r)
                    for (var i = new Array(r), l = 0, o = 0, u = function (u) {
                            var s = Z(e[u]),
                                a = !1;
                            n.add(s.subscribe({
                                next: function (e) {
                                    a || (a = !0, o++), i[u] = e
                                },
                                error: function (e) {
                                    return n.error(e)
                                },
                                complete: function () {
                                    ++l !== r && a || (o === r && n.next(t ? t.reduce(function (e, t, n) {
                                        return e[t] = i[n], e
                                    }, {}) : i), n.complete())
                                }
                            }))
                        }, s = 0; s < r; s++) u(s);
                else n.complete()
            })
        }
        var sf = function () {
                function e() {}
                return Object.defineProperty(e.prototype, "value", {
                    get: function () {
                        return this.control ? this.control.value : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "valid", {
                    get: function () {
                        return this.control ? this.control.valid : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "invalid", {
                    get: function () {
                        return this.control ? this.control.invalid : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "pending", {
                    get: function () {
                        return this.control ? this.control.pending : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "disabled", {
                    get: function () {
                        return this.control ? this.control.disabled : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "enabled", {
                    get: function () {
                        return this.control ? this.control.enabled : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "errors", {
                    get: function () {
                        return this.control ? this.control.errors : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "pristine", {
                    get: function () {
                        return this.control ? this.control.pristine : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "dirty", {
                    get: function () {
                        return this.control ? this.control.dirty : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "touched", {
                    get: function () {
                        return this.control ? this.control.touched : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "status", {
                    get: function () {
                        return this.control ? this.control.status : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "untouched", {
                    get: function () {
                        return this.control ? this.control.untouched : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "statusChanges", {
                    get: function () {
                        return this.control ? this.control.statusChanges : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "valueChanges", {
                    get: function () {
                        return this.control ? this.control.valueChanges : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "path", {
                    get: function () {
                        return null
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.reset = function (e) {
                    void 0 === e && (e = void 0), this.control && this.control.reset(e)
                }, e.prototype.hasError = function (e, t) {
                    return !!this.control && this.control.hasError(e, t)
                }, e.prototype.getError = function (e, t) {
                    return this.control ? this.control.getError(e, t) : null
                }, e
            }(),
            af = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), Object.defineProperty(t.prototype, "formDirective", {
                    get: function () {
                        return null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "path", {
                    get: function () {
                        return null
                    },
                    enumerable: !0,
                    configurable: !0
                }), t
            }(sf);

        function cf(e) {
            return null == e || 0 === e.length
        }
        var pf = /^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,
            hf = function () {
                function e() {}
                return e.min = function (e) {
                    return function (t) {
                        if (cf(t.value) || cf(e)) return null;
                        var n = parseFloat(t.value);
                        return !isNaN(n) && n < e ? {
                            min: {
                                min: e,
                                actual: t.value
                            }
                        } : null
                    }
                }, e.max = function (e) {
                    return function (t) {
                        if (cf(t.value) || cf(e)) return null;
                        var n = parseFloat(t.value);
                        return !isNaN(n) && n > e ? {
                            max: {
                                max: e,
                                actual: t.value
                            }
                        } : null
                    }
                }, e.required = function (e) {
                    return cf(e.value) ? {
                        required: !0
                    } : null
                }, e.requiredTrue = function (e) {
                    return !0 === e.value ? null : {
                        required: !0
                    }
                }, e.email = function (e) {
                    return cf(e.value) ? null : pf.test(e.value) ? null : {
                        email: !0
                    }
                }, e.minLength = function (e) {
                    return function (t) {
                        if (cf(t.value)) return null;
                        var n = t.value ? t.value.length : 0;
                        return n < e ? {
                            minlength: {
                                requiredLength: e,
                                actualLength: n
                            }
                        } : null
                    }
                }, e.maxLength = function (e) {
                    return function (t) {
                        var n = t.value ? t.value.length : 0;
                        return n > e ? {
                            maxlength: {
                                requiredLength: e,
                                actualLength: n
                            }
                        } : null
                    }
                }, e.pattern = function (t) {
                    return t ? ("string" == typeof t ? (r = "", "^" !== t.charAt(0) && (r += "^"), r += t, "$" !== t.charAt(t.length - 1) && (r += "$"), n = new RegExp(r)) : (r = t.toString(), n = t), function (e) {
                        if (cf(e.value)) return null;
                        var t = e.value;
                        return n.test(t) ? null : {
                            pattern: {
                                requiredPattern: r,
                                actualValue: t
                            }
                        }
                    }) : e.nullValidator;
                    var n, r
                }, e.nullValidator = function (e) {
                    return null
                }, e.compose = function (e) {
                    if (!e) return null;
                    var t = e.filter(df);
                    return 0 == t.length ? null : function (e) {
                        return gf(function (e, n) {
                            return t.map(function (t) {
                                return t(e)
                            })
                        }(e))
                    }
                }, e.composeAsync = function (e) {
                    if (!e) return null;
                    var t = e.filter(df);
                    return 0 == t.length ? null : function (e) {
                        return function () {
                            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                            if (1 === e.length) {
                                var n = e[0];
                                if (p(n)) return uf(n, null);
                                if (h(n) && Object.getPrototypeOf(n) === Object.prototype) {
                                    var r = Object.keys(n);
                                    return uf(r.map(function (e) {
                                        return n[e]
                                    }), r)
                                }
                            }
                            if ("function" == typeof e[e.length - 1]) {
                                var i = e.pop();
                                return uf(e = 1 === e.length && p(e[0]) ? e[0] : e, null).pipe(K(function (e) {
                                    return i.apply(void 0, e)
                                }))
                            }
                            return uf(e, null)
                        }(function (e, n) {
                            return t.map(function (t) {
                                return t(e)
                            })
                        }(e).map(ff)).pipe(K(gf))
                    }
                }, e
            }();

        function df(e) {
            return null != e
        }

        function ff(e) {
            var t = _n(e) ? Z(e) : e;
            if (!In(t)) throw new Error("Expected validator to return Promise or Observable.");
            return t
        }

        function gf(e) {
            var t = e.reduce(function (e, t) {
                return null != t ? l({}, e, t) : e
            }, {});
            return 0 === Object.keys(t).length ? null : t
        }
        var vf = new ye("NgValueAccessor"),
            mf = function () {
                function e(e, t) {
                    this._renderer = e, this._elementRef = t, this.onChange = function (e) {}, this.onTouched = function () {}
                }
                return e.prototype.writeValue = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "checked", e)
                }, e.prototype.registerOnChange = function (e) {
                    this.onChange = e
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e
            }(),
            yf = new ye("CompositionEventMode"),
            Sf = function () {
                function e(e, t, n) {
                    var r;
                    this._renderer = e, this._elementRef = t, this._compositionMode = n, this.onChange = function (e) {}, this.onTouched = function () {}, this._composing = !1, null == this._compositionMode && (this._compositionMode = (r = qa() ? qa().getUserAgent() : "", !/android (\d+)/.test(r.toLowerCase())))
                }
                return e.prototype.writeValue = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "value", null == e ? "" : e)
                }, e.prototype.registerOnChange = function (e) {
                    this.onChange = e
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e.prototype._handleInput = function (e) {
                    (!this._compositionMode || this._compositionMode && !this._composing) && this.onChange(e)
                }, e.prototype._compositionStart = function () {
                    this._composing = !0
                }, e.prototype._compositionEnd = function (e) {
                    this._composing = !1, this._compositionMode && this.onChange(e)
                }, e
            }();

        function Ef(e) {
            return e.validate ? function (t) {
                return e.validate(t)
            } : e
        }

        function Of(e) {
            return e.validate ? function (t) {
                return e.validate(t)
            } : e
        }
        var bf = function () {
            function e(e, t) {
                this._renderer = e, this._elementRef = t, this.onChange = function (e) {}, this.onTouched = function () {}
            }
            return e.prototype.writeValue = function (e) {
                this._renderer.setProperty(this._elementRef.nativeElement, "value", null == e ? "" : e)
            }, e.prototype.registerOnChange = function (e) {
                this.onChange = function (t) {
                    e("" == t ? null : parseFloat(t))
                }
            }, e.prototype.registerOnTouched = function (e) {
                this.onTouched = e
            }, e.prototype.setDisabledState = function (e) {
                this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
            }, e
        }();

        function Tf() {
            throw new Error("unimplemented")
        }
        var Rf = function (e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t._parent = null, t.name = null, t.valueAccessor = null, t._rawValidators = [], t._rawAsyncValidators = [], t
                }
                return i(t, e), Object.defineProperty(t.prototype, "validator", {
                    get: function () {
                        return Tf()
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "asyncValidator", {
                    get: function () {
                        return Tf()
                    },
                    enumerable: !0,
                    configurable: !0
                }), t
            }(sf),
            Cf = function () {
                function e() {
                    this._accessors = []
                }
                return e.prototype.add = function (e, t) {
                    this._accessors.push([e, t])
                }, e.prototype.remove = function (e) {
                    for (var t = this._accessors.length - 1; t >= 0; --t)
                        if (this._accessors[t][1] === e) return void this._accessors.splice(t, 1)
                }, e.prototype.select = function (e) {
                    var t = this;
                    this._accessors.forEach(function (n) {
                        t._isSameGroup(n, e) && n[1] !== e && n[1].fireUncheck(e.value)
                    })
                }, e.prototype._isSameGroup = function (e, t) {
                    return !!e[0].control && e[0]._parent === t._control._parent && e[1].name === t.name
                }, e
            }(),
            _f = function () {
                function e(e, t, n, r) {
                    this._renderer = e, this._elementRef = t, this._registry = n, this._injector = r, this.onChange = function () {}, this.onTouched = function () {}
                }
                return e.prototype.ngOnInit = function () {
                    this._control = this._injector.get(Rf), this._checkName(), this._registry.add(this._control, this)
                }, e.prototype.ngOnDestroy = function () {
                    this._registry.remove(this)
                }, e.prototype.writeValue = function (e) {
                    this._state = e === this.value, this._renderer.setProperty(this._elementRef.nativeElement, "checked", this._state)
                }, e.prototype.registerOnChange = function (e) {
                    var t = this;
                    this._fn = e, this.onChange = function () {
                        e(t.value), t._registry.select(t)
                    }
                }, e.prototype.fireUncheck = function (e) {
                    this.writeValue(e)
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e.prototype._checkName = function () {
                    this.name && this.formControlName && this.name !== this.formControlName && this._throwNameError(), !this.name && this.formControlName && (this.name = this.formControlName)
                }, e.prototype._throwNameError = function () {
                    throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')
                }, e
            }(),
            If = function () {
                function e(e, t) {
                    this._renderer = e, this._elementRef = t, this.onChange = function (e) {}, this.onTouched = function () {}
                }
                return e.prototype.writeValue = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "value", parseFloat(e))
                }, e.prototype.registerOnChange = function (e) {
                    this.onChange = function (t) {
                        e("" == t ? null : parseFloat(t))
                    }
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e
            }(),
            Af = '\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',
            wf = '\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';

        function Nf(e, t) {
            return null == e ? "" + t : (t && "object" == typeof t && (t = "Object"), (e + ": " + t).slice(0, 50))
        }
        var Pf = function () {
                function e(e, t) {
                    this._renderer = e, this._elementRef = t, this._optionMap = new Map, this._idCounter = 0, this.onChange = function (e) {}, this.onTouched = function () {}, this._compareWith = De
                }
                return Object.defineProperty(e.prototype, "compareWith", {
                    set: function (e) {
                        if ("function" != typeof e) throw new Error("compareWith must be a function, but received " + JSON.stringify(e));
                        this._compareWith = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.writeValue = function (e) {
                    this.value = e;
                    var t = this._getOptionId(e);
                    null == t && this._renderer.setProperty(this._elementRef.nativeElement, "selectedIndex", -1);
                    var n = Nf(t, e);
                    this._renderer.setProperty(this._elementRef.nativeElement, "value", n)
                }, e.prototype.registerOnChange = function (e) {
                    var t = this;
                    this.onChange = function (n) {
                        t.value = t._getOptionValue(n), e(t.value)
                    }
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e.prototype._registerOption = function () {
                    return (this._idCounter++).toString()
                }, e.prototype._getOptionId = function (e) {
                    var t, n;
                    try {
                        for (var r = s(Array.from(this._optionMap.keys())), i = r.next(); !i.done; i = r.next()) {
                            var l = i.value;
                            if (this._compareWith(this._optionMap.get(l), e)) return l
                        }
                    } catch (o) {
                        t = {
                            error: o
                        }
                    } finally {
                        try {
                            i && !i.done && (n = r.return) && n.call(r)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    return null
                }, e.prototype._getOptionValue = function (e) {
                    var t = function (e) {
                        return e.split(":")[0]
                    }(e);
                    return this._optionMap.has(t) ? this._optionMap.get(t) : e
                }, e
            }(),
            Df = function () {
                function e(e, t, n) {
                    this._element = e, this._renderer = t, this._select = n, this._select && (this.id = this._select._registerOption())
                }
                return Object.defineProperty(e.prototype, "ngValue", {
                    set: function (e) {
                        null != this._select && (this._select._optionMap.set(this.id, e), this._setElementValue(Nf(this.id, e)), this._select.writeValue(this._select.value))
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "value", {
                    set: function (e) {
                        this._setElementValue(e), this._select && this._select.writeValue(this._select.value)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._setElementValue = function (e) {
                    this._renderer.setProperty(this._element.nativeElement, "value", e)
                }, e.prototype.ngOnDestroy = function () {
                    this._select && (this._select._optionMap.delete(this.id), this._select.writeValue(this._select.value))
                }, e
            }();

        function Mf(e, t) {
            return null == e ? "" + t : ("string" == typeof t && (t = "'" + t + "'"), t && "object" == typeof t && (t = "Object"), (e + ": " + t).slice(0, 50))
        }
        var kf = function () {
                function e(e, t) {
                    this._renderer = e, this._elementRef = t, this._optionMap = new Map, this._idCounter = 0, this.onChange = function (e) {}, this.onTouched = function () {}, this._compareWith = De
                }
                return Object.defineProperty(e.prototype, "compareWith", {
                    set: function (e) {
                        if ("function" != typeof e) throw new Error("compareWith must be a function, but received " + JSON.stringify(e));
                        this._compareWith = e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.writeValue = function (e) {
                    var t, n = this;
                    if (this.value = e, Array.isArray(e)) {
                        var r = e.map(function (e) {
                            return n._getOptionId(e)
                        });
                        t = function (e, t) {
                            e._setSelected(r.indexOf(t.toString()) > -1)
                        }
                    } else t = function (e, t) {
                        e._setSelected(!1)
                    };
                    this._optionMap.forEach(t)
                }, e.prototype.registerOnChange = function (e) {
                    var t = this;
                    this.onChange = function (n) {
                        var r = [];
                        if (n.hasOwnProperty("selectedOptions"))
                            for (var i = n.selectedOptions, l = 0; l < i.length; l++) {
                                var o = i.item(l),
                                    u = t._getOptionValue(o.value);
                                r.push(u)
                            } else
                                for (i = n.options, l = 0; l < i.length; l++)(o = i.item(l)).selected && (u = t._getOptionValue(o.value), r.push(u));
                        t.value = r, e(r)
                    }
                }, e.prototype.registerOnTouched = function (e) {
                    this.onTouched = e
                }, e.prototype.setDisabledState = function (e) {
                    this._renderer.setProperty(this._elementRef.nativeElement, "disabled", e)
                }, e.prototype._registerOption = function (e) {
                    var t = (this._idCounter++).toString();
                    return this._optionMap.set(t, e), t
                }, e.prototype._getOptionId = function (e) {
                    var t, n;
                    try {
                        for (var r = s(Array.from(this._optionMap.keys())), i = r.next(); !i.done; i = r.next()) {
                            var l = i.value;
                            if (this._compareWith(this._optionMap.get(l)._value, e)) return l
                        }
                    } catch (o) {
                        t = {
                            error: o
                        }
                    } finally {
                        try {
                            i && !i.done && (n = r.return) && n.call(r)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    return null
                }, e.prototype._getOptionValue = function (e) {
                    var t = function (e) {
                        return e.split(":")[0]
                    }(e);
                    return this._optionMap.has(t) ? this._optionMap.get(t)._value : e
                }, e
            }(),
            Lf = function () {
                function e(e, t, n) {
                    this._element = e, this._renderer = t, this._select = n, this._select && (this.id = this._select._registerOption(this))
                }
                return Object.defineProperty(e.prototype, "ngValue", {
                    set: function (e) {
                        null != this._select && (this._value = e, this._setElementValue(Mf(this.id, e)), this._select.writeValue(this._select.value))
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "value", {
                    set: function (e) {
                        this._select ? (this._value = e, this._setElementValue(Mf(this.id, e)), this._select.writeValue(this._select.value)) : this._setElementValue(e)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._setElementValue = function (e) {
                    this._renderer.setProperty(this._element.nativeElement, "value", e)
                }, e.prototype._setSelected = function (e) {
                    this._renderer.setProperty(this._element.nativeElement, "selected", e)
                }, e.prototype.ngOnDestroy = function () {
                    this._select && (this._select._optionMap.delete(this.id), this._select.writeValue(this._select.value))
                }, e
            }();

        function xf(e, t) {
            return c(t.path, [e])
        }

        function Ff(e, t) {
            e || Hf(t, "Cannot find control with"), t.valueAccessor || Hf(t, "No value accessor for form control with"), e.validator = hf.compose([e.validator, t.validator]), e.asyncValidator = hf.composeAsync([e.asyncValidator, t.asyncValidator]), t.valueAccessor.writeValue(e.value),
                function (e, t) {
                    t.valueAccessor.registerOnChange(function (n) {
                        e._pendingValue = n, e._pendingChange = !0, e._pendingDirty = !0, "change" === e.updateOn && Uf(e, t)
                    })
                }(e, t),
                function (e, t) {
                    e.registerOnChange(function (e, n) {
                        t.valueAccessor.writeValue(e), n && t.viewToModelUpdate(e)
                    })
                }(e, t),
                function (e, t) {
                    t.valueAccessor.registerOnTouched(function () {
                        e._pendingTouched = !0, "blur" === e.updateOn && e._pendingChange && Uf(e, t), "submit" !== e.updateOn && e.markAsTouched()
                    })
                }(e, t), t.valueAccessor.setDisabledState && e.registerOnDisabledChange(function (e) {
                    t.valueAccessor.setDisabledState(e)
                }), t._rawValidators.forEach(function (t) {
                    t.registerOnValidatorChange && t.registerOnValidatorChange(function () {
                        return e.updateValueAndValidity()
                    })
                }), t._rawAsyncValidators.forEach(function (t) {
                    t.registerOnValidatorChange && t.registerOnValidatorChange(function () {
                        return e.updateValueAndValidity()
                    })
                })
        }

        function Uf(e, t) {
            e._pendingDirty && e.markAsDirty(), e.setValue(e._pendingValue, {
                emitModelToViewChange: !1
            }), t.viewToModelUpdate(e._pendingValue), e._pendingChange = !1
        }

        function Hf(e, t) {
            var n;
            throw n = e.path.length > 1 ? "path: '" + e.path.join(" -> ") + "'" : e.path[0] ? "name: '" + e.path + "'" : "unspecified name attribute", new Error(t + " " + n)
        }

        function Gf(e) {
            return null != e ? hf.compose(e.map(Ef)) : null
        }

        function Bf(e) {
            return null != e ? hf.composeAsync(e.map(Of)) : null
        }
        var Vf = [mf, If, bf, Pf, kf, _f],
            Wf = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), t.prototype.ngOnInit = function () {
                    this._checkParentType(), this.formDirective.addFormGroup(this)
                }, t.prototype.ngOnDestroy = function () {
                    this.formDirective && this.formDirective.removeFormGroup(this)
                }, Object.defineProperty(t.prototype, "control", {
                    get: function () {
                        return this.formDirective.getFormGroup(this)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "path", {
                    get: function () {
                        return xf(this.name, this._parent)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "formDirective", {
                    get: function () {
                        return this._parent ? this._parent.formDirective : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "validator", {
                    get: function () {
                        return Gf(this._validators)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "asyncValidator", {
                    get: function () {
                        return Bf(this._asyncValidators)
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype._checkParentType = function () {}, t
            }(af),
            jf = function (e) {
                function t(t) {
                    return e.call(this, t) || this
                }
                return i(t, e), t
            }(function () {
                function e(e) {
                    this._cd = e
                }
                return Object.defineProperty(e.prototype, "ngClassUntouched", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.untouched
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassTouched", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.touched
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassPristine", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.pristine
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassDirty", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.dirty
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassValid", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.valid
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassInvalid", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.invalid
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "ngClassPending", {
                    get: function () {
                        return !!this._cd.control && this._cd.control.pending
                    },
                    enumerable: !0,
                    configurable: !0
                }), e
            }());

        function Yf(e) {
            var t = Kf(e) ? e.validators : e;
            return Array.isArray(t) ? Gf(t) : t || null
        }

        function zf(e, t) {
            var n = Kf(t) ? t.asyncValidators : e;
            return Array.isArray(n) ? Bf(n) : n || null
        }

        function Kf(e) {
            return null != e && !Array.isArray(e) && "object" == typeof e
        }
        var qf, Qf = function () {
                function e(e, t) {
                    this.validator = e, this.asyncValidator = t, this._onCollectionChange = function () {}, this.pristine = !0, this.touched = !1, this._onDisabledChange = []
                }
                return Object.defineProperty(e.prototype, "parent", {
                    get: function () {
                        return this._parent
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "valid", {
                    get: function () {
                        return "VALID" === this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "invalid", {
                    get: function () {
                        return "INVALID" === this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "pending", {
                    get: function () {
                        return "PENDING" == this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "disabled", {
                    get: function () {
                        return "DISABLED" === this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "enabled", {
                    get: function () {
                        return "DISABLED" !== this.status
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "dirty", {
                    get: function () {
                        return !this.pristine
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "untouched", {
                    get: function () {
                        return !this.touched
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "updateOn", {
                    get: function () {
                        return this._updateOn ? this._updateOn : this.parent ? this.parent.updateOn : "change"
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.setValidators = function (e) {
                    this.validator = Yf(e)
                }, e.prototype.setAsyncValidators = function (e) {
                    this.asyncValidator = zf(e)
                }, e.prototype.clearValidators = function () {
                    this.validator = null
                }, e.prototype.clearAsyncValidators = function () {
                    this.asyncValidator = null
                }, e.prototype.markAsTouched = function (e) {
                    void 0 === e && (e = {}), this.touched = !0, this._parent && !e.onlySelf && this._parent.markAsTouched(e)
                }, e.prototype.markAsUntouched = function (e) {
                    void 0 === e && (e = {}), this.touched = !1, this._pendingTouched = !1, this._forEachChild(function (e) {
                        e.markAsUntouched({
                            onlySelf: !0
                        })
                    }), this._parent && !e.onlySelf && this._parent._updateTouched(e)
                }, e.prototype.markAsDirty = function (e) {
                    void 0 === e && (e = {}), this.pristine = !1, this._parent && !e.onlySelf && this._parent.markAsDirty(e)
                }, e.prototype.markAsPristine = function (e) {
                    void 0 === e && (e = {}), this.pristine = !0, this._pendingDirty = !1, this._forEachChild(function (e) {
                        e.markAsPristine({
                            onlySelf: !0
                        })
                    }), this._parent && !e.onlySelf && this._parent._updatePristine(e)
                }, e.prototype.markAsPending = function (e) {
                    void 0 === e && (e = {}), this.status = "PENDING", !1 !== e.emitEvent && this.statusChanges.emit(this.status), this._parent && !e.onlySelf && this._parent.markAsPending(e)
                }, e.prototype.disable = function (e) {
                    void 0 === e && (e = {}), this.status = "DISABLED", this.errors = null, this._forEachChild(function (t) {
                        t.disable(l({}, e, {
                            onlySelf: !0
                        }))
                    }), this._updateValue(), !1 !== e.emitEvent && (this.valueChanges.emit(this.value), this.statusChanges.emit(this.status)), this._updateAncestors(e), this._onDisabledChange.forEach(function (e) {
                        return e(!0)
                    })
                }, e.prototype.enable = function (e) {
                    void 0 === e && (e = {}), this.status = "VALID", this._forEachChild(function (t) {
                        t.enable(l({}, e, {
                            onlySelf: !0
                        }))
                    }), this.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: e.emitEvent
                    }), this._updateAncestors(e), this._onDisabledChange.forEach(function (e) {
                        return e(!1)
                    })
                }, e.prototype._updateAncestors = function (e) {
                    this._parent && !e.onlySelf && (this._parent.updateValueAndValidity(e), this._parent._updatePristine(), this._parent._updateTouched())
                }, e.prototype.setParent = function (e) {
                    this._parent = e
                }, e.prototype.updateValueAndValidity = function (e) {
                    void 0 === e && (e = {}), this._setInitialStatus(), this._updateValue(), this.enabled && (this._cancelExistingSubscription(), this.errors = this._runValidator(), this.status = this._calculateStatus(), "VALID" !== this.status && "PENDING" !== this.status || this._runAsyncValidator(e.emitEvent)), !1 !== e.emitEvent && (this.valueChanges.emit(this.value), this.statusChanges.emit(this.status)), this._parent && !e.onlySelf && this._parent.updateValueAndValidity(e)
                }, e.prototype._updateTreeValidity = function (e) {
                    void 0 === e && (e = {
                        emitEvent: !0
                    }), this._forEachChild(function (t) {
                        return t._updateTreeValidity(e)
                    }), this.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: e.emitEvent
                    })
                }, e.prototype._setInitialStatus = function () {
                    this.status = this._allControlsDisabled() ? "DISABLED" : "VALID"
                }, e.prototype._runValidator = function () {
                    return this.validator ? this.validator(this) : null
                }, e.prototype._runAsyncValidator = function (e) {
                    var t = this;
                    if (this.asyncValidator) {
                        this.status = "PENDING";
                        var n = ff(this.asyncValidator(this));
                        this._asyncValidationSubscription = n.subscribe(function (n) {
                            return t.setErrors(n, {
                                emitEvent: e
                            })
                        })
                    }
                }, e.prototype._cancelExistingSubscription = function () {
                    this._asyncValidationSubscription && this._asyncValidationSubscription.unsubscribe()
                }, e.prototype.setErrors = function (e, t) {
                    void 0 === t && (t = {}), this.errors = e, this._updateControlsErrors(!1 !== t.emitEvent)
                }, e.prototype.get = function (e) {
                    return function (e, t, n) {
                        return null == t ? null : (t instanceof Array || (t = t.split(".")), t instanceof Array && 0 === t.length ? null : t.reduce(function (e, t) {
                            return e instanceof Zf ? e.controls.hasOwnProperty(t) ? e.controls[t] : null : e instanceof Xf && e.at(t) || null
                        }, e))
                    }(this, e)
                }, e.prototype.getError = function (e, t) {
                    var n = t ? this.get(t) : this;
                    return n && n.errors ? n.errors[e] : null
                }, e.prototype.hasError = function (e, t) {
                    return !!this.getError(e, t)
                }, Object.defineProperty(e.prototype, "root", {
                    get: function () {
                        for (var e = this; e._parent;) e = e._parent;
                        return e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype._updateControlsErrors = function (e) {
                    this.status = this._calculateStatus(), e && this.statusChanges.emit(this.status), this._parent && this._parent._updateControlsErrors(e)
                }, e.prototype._initObservables = function () {
                    this.valueChanges = new pn, this.statusChanges = new pn
                }, e.prototype._calculateStatus = function () {
                    return this._allControlsDisabled() ? "DISABLED" : this.errors ? "INVALID" : this._anyControlsHaveStatus("PENDING") ? "PENDING" : this._anyControlsHaveStatus("INVALID") ? "INVALID" : "VALID"
                }, e.prototype._anyControlsHaveStatus = function (e) {
                    return this._anyControls(function (t) {
                        return t.status === e
                    })
                }, e.prototype._anyControlsDirty = function () {
                    return this._anyControls(function (e) {
                        return e.dirty
                    })
                }, e.prototype._anyControlsTouched = function () {
                    return this._anyControls(function (e) {
                        return e.touched
                    })
                }, e.prototype._updatePristine = function (e) {
                    void 0 === e && (e = {}), this.pristine = !this._anyControlsDirty(), this._parent && !e.onlySelf && this._parent._updatePristine(e)
                }, e.prototype._updateTouched = function (e) {
                    void 0 === e && (e = {}), this.touched = this._anyControlsTouched(), this._parent && !e.onlySelf && this._parent._updateTouched(e)
                }, e.prototype._isBoxedValue = function (e) {
                    return "object" == typeof e && null !== e && 2 === Object.keys(e).length && "value" in e && "disabled" in e
                }, e.prototype._registerOnCollectionChange = function (e) {
                    this._onCollectionChange = e
                }, e.prototype._setUpdateStrategy = function (e) {
                    Kf(e) && null != e.updateOn && (this._updateOn = e.updateOn)
                }, e
            }(),
            $f = function (e) {
                function t(t, n, r) {
                    void 0 === t && (t = null);
                    var i = e.call(this, Yf(n), zf(r, n)) || this;
                    return i._onChange = [], i._applyFormState(t), i._setUpdateStrategy(n), i.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: !1
                    }), i._initObservables(), i
                }
                return i(t, e), t.prototype.setValue = function (e, t) {
                    var n = this;
                    void 0 === t && (t = {}), this.value = this._pendingValue = e, this._onChange.length && !1 !== t.emitModelToViewChange && this._onChange.forEach(function (e) {
                        return e(n.value, !1 !== t.emitViewToModelChange)
                    }), this.updateValueAndValidity(t)
                }, t.prototype.patchValue = function (e, t) {
                    void 0 === t && (t = {}), this.setValue(e, t)
                }, t.prototype.reset = function (e, t) {
                    void 0 === e && (e = null), void 0 === t && (t = {}), this._applyFormState(e), this.markAsPristine(t), this.markAsUntouched(t), this.setValue(this.value, t), this._pendingChange = !1
                }, t.prototype._updateValue = function () {}, t.prototype._anyControls = function (e) {
                    return !1
                }, t.prototype._allControlsDisabled = function () {
                    return this.disabled
                }, t.prototype.registerOnChange = function (e) {
                    this._onChange.push(e)
                }, t.prototype._clearChangeFns = function () {
                    this._onChange = [], this._onDisabledChange = [], this._onCollectionChange = function () {}
                }, t.prototype.registerOnDisabledChange = function (e) {
                    this._onDisabledChange.push(e)
                }, t.prototype._forEachChild = function (e) {}, t.prototype._syncPendingControls = function () {
                    return !("submit" !== this.updateOn || (this._pendingDirty && this.markAsDirty(), this._pendingTouched && this.markAsTouched(), !this._pendingChange) || (this.setValue(this._pendingValue, {
                        onlySelf: !0,
                        emitModelToViewChange: !1
                    }), 0))
                }, t.prototype._applyFormState = function (e) {
                    this._isBoxedValue(e) ? (this.value = this._pendingValue = e.value, e.disabled ? this.disable({
                        onlySelf: !0,
                        emitEvent: !1
                    }) : this.enable({
                        onlySelf: !0,
                        emitEvent: !1
                    })) : this.value = this._pendingValue = e
                }, t
            }(Qf),
            Zf = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, Yf(n), zf(r, n)) || this;
                    return i.controls = t, i._initObservables(), i._setUpdateStrategy(n), i._setUpControls(), i.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: !1
                    }), i
                }
                return i(t, e), t.prototype.registerControl = function (e, t) {
                    return this.controls[e] ? this.controls[e] : (this.controls[e] = t, t.setParent(this), t._registerOnCollectionChange(this._onCollectionChange), t)
                }, t.prototype.addControl = function (e, t) {
                    this.registerControl(e, t), this.updateValueAndValidity(), this._onCollectionChange()
                }, t.prototype.removeControl = function (e) {
                    this.controls[e] && this.controls[e]._registerOnCollectionChange(function () {}), delete this.controls[e], this.updateValueAndValidity(), this._onCollectionChange()
                }, t.prototype.setControl = function (e, t) {
                    this.controls[e] && this.controls[e]._registerOnCollectionChange(function () {}), delete this.controls[e], t && this.registerControl(e, t), this.updateValueAndValidity(), this._onCollectionChange()
                }, t.prototype.contains = function (e) {
                    return this.controls.hasOwnProperty(e) && this.controls[e].enabled
                }, t.prototype.setValue = function (e, t) {
                    var n = this;
                    void 0 === t && (t = {}), this._checkAllValuesPresent(e), Object.keys(e).forEach(function (r) {
                        n._throwIfControlMissing(r), n.controls[r].setValue(e[r], {
                            onlySelf: !0,
                            emitEvent: t.emitEvent
                        })
                    }), this.updateValueAndValidity(t)
                }, t.prototype.patchValue = function (e, t) {
                    var n = this;
                    void 0 === t && (t = {}), Object.keys(e).forEach(function (r) {
                        n.controls[r] && n.controls[r].patchValue(e[r], {
                            onlySelf: !0,
                            emitEvent: t.emitEvent
                        })
                    }), this.updateValueAndValidity(t)
                }, t.prototype.reset = function (e, t) {
                    void 0 === e && (e = {}), void 0 === t && (t = {}), this._forEachChild(function (n, r) {
                        n.reset(e[r], {
                            onlySelf: !0,
                            emitEvent: t.emitEvent
                        })
                    }), this.updateValueAndValidity(t), this._updatePristine(t), this._updateTouched(t)
                }, t.prototype.getRawValue = function () {
                    return this._reduceChildren({}, function (e, t, n) {
                        return e[n] = t instanceof $f ? t.value : t.getRawValue(), e
                    })
                }, t.prototype._syncPendingControls = function () {
                    var e = this._reduceChildren(!1, function (e, t) {
                        return !!t._syncPendingControls() || e
                    });
                    return e && this.updateValueAndValidity({
                        onlySelf: !0
                    }), e
                }, t.prototype._throwIfControlMissing = function (e) {
                    if (!Object.keys(this.controls).length) throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");
                    if (!this.controls[e]) throw new Error("Cannot find form control with name: " + e + ".")
                }, t.prototype._forEachChild = function (e) {
                    var t = this;
                    Object.keys(this.controls).forEach(function (n) {
                        return e(t.controls[n], n)
                    })
                }, t.prototype._setUpControls = function () {
                    var e = this;
                    this._forEachChild(function (t) {
                        t.setParent(e), t._registerOnCollectionChange(e._onCollectionChange)
                    })
                }, t.prototype._updateValue = function () {
                    this.value = this._reduceValue()
                }, t.prototype._anyControls = function (e) {
                    var t = this,
                        n = !1;
                    return this._forEachChild(function (r, i) {
                        n = n || t.contains(i) && e(r)
                    }), n
                }, t.prototype._reduceValue = function () {
                    var e = this;
                    return this._reduceChildren({}, function (t, n, r) {
                        return (n.enabled || e.disabled) && (t[r] = n.value), t
                    })
                }, t.prototype._reduceChildren = function (e, t) {
                    var n = e;
                    return this._forEachChild(function (e, r) {
                        n = t(n, e, r)
                    }), n
                }, t.prototype._allControlsDisabled = function () {
                    var e, t;
                    try {
                        for (var n = s(Object.keys(this.controls)), r = n.next(); !r.done; r = n.next())
                            if (this.controls[r.value].enabled) return !1
                    } catch (i) {
                        e = {
                            error: i
                        }
                    } finally {
                        try {
                            r && !r.done && (t = n.return) && t.call(n)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    return Object.keys(this.controls).length > 0 || this.disabled
                }, t.prototype._checkAllValuesPresent = function (e) {
                    this._forEachChild(function (t, n) {
                        if (void 0 === e[n]) throw new Error("Must supply a value for form control with name: '" + n + "'.")
                    })
                }, t
            }(Qf),
            Xf = function (e) {
                function t(t, n, r) {
                    var i = e.call(this, Yf(n), zf(r, n)) || this;
                    return i.controls = t, i._initObservables(), i._setUpdateStrategy(n), i._setUpControls(), i.updateValueAndValidity({
                        onlySelf: !0,
                        emitEvent: !1
                    }), i
                }
                return i(t, e), t.prototype.at = function (e) {
                    return this.controls[e]
                }, t.prototype.push = function (e) {
                    this.controls.push(e), this._registerControl(e), this.updateValueAndValidity(), this._onCollectionChange()
                }, t.prototype.insert = function (e, t) {
                    this.controls.splice(e, 0, t), this._registerControl(t), this.updateValueAndValidity()
                }, t.prototype.removeAt = function (e) {
                    this.controls[e] && this.controls[e]._registerOnCollectionChange(function () {}), this.controls.splice(e, 1), this.updateValueAndValidity()
                }, t.prototype.setControl = function (e, t) {
                    this.controls[e] && this.controls[e]._registerOnCollectionChange(function () {}), this.controls.splice(e, 1), t && (this.controls.splice(e, 0, t), this._registerControl(t)), this.updateValueAndValidity(), this._onCollectionChange()
                }, Object.defineProperty(t.prototype, "length", {
                    get: function () {
                        return this.controls.length
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.setValue = function (e, t) {
                    var n = this;
                    void 0 === t && (t = {}), this._checkAllValuesPresent(e), e.forEach(function (e, r) {
                        n._throwIfControlMissing(r), n.at(r).setValue(e, {
                            onlySelf: !0,
                            emitEvent: t.emitEvent
                        })
                    }), this.updateValueAndValidity(t)
                }, t.prototype.patchValue = function (e, t) {
                    var n = this;
                    void 0 === t && (t = {}), e.forEach(function (e, r) {
                        n.at(r) && n.at(r).patchValue(e, {
                            onlySelf: !0,
                            emitEvent: t.emitEvent
                        })
                    }), this.updateValueAndValidity(t)
                }, t.prototype.reset = function (e, t) {
                    void 0 === e && (e = []), void 0 === t && (t = {}), this._forEachChild(function (n, r) {
                        n.reset(e[r], {
                            onlySelf: !0,
                            emitEvent: t.emitEvent
                        })
                    }), this.updateValueAndValidity(t), this._updatePristine(t), this._updateTouched(t)
                }, t.prototype.getRawValue = function () {
                    return this.controls.map(function (e) {
                        return e instanceof $f ? e.value : e.getRawValue()
                    })
                }, t.prototype._syncPendingControls = function () {
                    var e = this.controls.reduce(function (e, t) {
                        return !!t._syncPendingControls() || e
                    }, !1);
                    return e && this.updateValueAndValidity({
                        onlySelf: !0
                    }), e
                }, t.prototype._throwIfControlMissing = function (e) {
                    if (!this.controls.length) throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");
                    if (!this.at(e)) throw new Error("Cannot find form control at index " + e)
                }, t.prototype._forEachChild = function (e) {
                    this.controls.forEach(function (t, n) {
                        e(t, n)
                    })
                }, t.prototype._updateValue = function () {
                    var e = this;
                    this.value = this.controls.filter(function (t) {
                        return t.enabled || e.disabled
                    }).map(function (e) {
                        return e.value
                    })
                }, t.prototype._anyControls = function (e) {
                    return this.controls.some(function (t) {
                        return t.enabled && e(t)
                    })
                }, t.prototype._setUpControls = function () {
                    var e = this;
                    this._forEachChild(function (t) {
                        return e._registerControl(t)
                    })
                }, t.prototype._checkAllValuesPresent = function (e) {
                    this._forEachChild(function (t, n) {
                        if (void 0 === e[n]) throw new Error("Must supply a value for form control at index: " + n + ".")
                    })
                }, t.prototype._allControlsDisabled = function () {
                    var e, t;
                    try {
                        for (var n = s(this.controls), r = n.next(); !r.done; r = n.next())
                            if (r.value.enabled) return !1
                    } catch (i) {
                        e = {
                            error: i
                        }
                    } finally {
                        try {
                            r && !r.done && (t = n.return) && t.call(n)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    return this.controls.length > 0 || this.disabled
                }, t.prototype._registerControl = function (e) {
                    e.setParent(this), e._registerOnCollectionChange(this._onCollectionChange)
                }, t
            }(Qf),
            Jf = Promise.resolve(null),
            eg = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r.submitted = !1, r._directives = [], r.ngSubmit = new pn, r.form = new Zf({}, Gf(t), Bf(n)), r
                }
                return i(t, e), t.prototype.ngAfterViewInit = function () {
                    this._setUpdateStrategy()
                }, Object.defineProperty(t.prototype, "formDirective", {
                    get: function () {
                        return this
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "control", {
                    get: function () {
                        return this.form
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "path", {
                    get: function () {
                        return []
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "controls", {
                    get: function () {
                        return this.form.controls
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.addControl = function (e) {
                    var t = this;
                    Jf.then(function () {
                        var n = t._findContainer(e.path);
                        e.control = n.registerControl(e.name, e.control), Ff(e.control, e), e.control.updateValueAndValidity({
                            emitEvent: !1
                        }), t._directives.push(e)
                    })
                }, t.prototype.getControl = function (e) {
                    return this.form.get(e.path)
                }, t.prototype.removeControl = function (e) {
                    var t = this;
                    Jf.then(function () {
                        var n, r, i = t._findContainer(e.path);
                        i && i.removeControl(e.name), (r = (n = t._directives).indexOf(e)) > -1 && n.splice(r, 1)
                    })
                }, t.prototype.addFormGroup = function (e) {
                    var t = this;
                    Jf.then(function () {
                        var n = t._findContainer(e.path),
                            r = new Zf({});
                        (function (e, t) {
                            null == e && Hf(t, "Cannot find control with"), e.validator = hf.compose([e.validator, t.validator]), e.asyncValidator = hf.composeAsync([e.asyncValidator, t.asyncValidator])
                        })(r, e), n.registerControl(e.name, r), r.updateValueAndValidity({
                            emitEvent: !1
                        })
                    })
                }, t.prototype.removeFormGroup = function (e) {
                    var t = this;
                    Jf.then(function () {
                        var n = t._findContainer(e.path);
                        n && n.removeControl(e.name)
                    })
                }, t.prototype.getFormGroup = function (e) {
                    return this.form.get(e.path)
                }, t.prototype.updateModel = function (e, t) {
                    var n = this;
                    Jf.then(function () {
                        n.form.get(e.path).setValue(t)
                    })
                }, t.prototype.setValue = function (e) {
                    this.control.setValue(e)
                }, t.prototype.onSubmit = function (e) {
                    return this.submitted = !0, t = this._directives, this.form._syncPendingControls(), t.forEach(function (e) {
                        var t = e.control;
                        "submit" === t.updateOn && t._pendingChange && (e.viewToModelUpdate(t._pendingValue), t._pendingChange = !1)
                    }), this.ngSubmit.emit(e), !1;
                    var t
                }, t.prototype.onReset = function () {
                    this.resetForm()
                }, t.prototype.resetForm = function (e) {
                    void 0 === e && (e = void 0), this.form.reset(e), this.submitted = !1
                }, t.prototype._setUpdateStrategy = function () {
                    this.options && null != this.options.updateOn && (this.form._updateOn = this.options.updateOn)
                }, t.prototype._findContainer = function (e) {
                    return e.pop(), e.length ? this.form.get(e) : this.form
                }, t
            }(af),
            tg = function () {
                function e() {}
                return e.modelParentException = function () {
                    throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')
                }, e.formGroupNameException = function () {
                    throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      " + Af + "\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      " + wf)
                }, e.missingNameException = function () {
                    throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')
                }, e.modelGroupParentException = function () {
                    throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      " + Af + "\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      " + wf)
                }, e.ngFormWarning = function () {
                    console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")
                }, e
            }(),
            ng = new ye("NgFormSelectorWarning"),
            rg = function (e) {
                function t(t, n, r) {
                    var i = e.call(this) || this;
                    return i._parent = t, i._validators = n, i._asyncValidators = r, i
                }
                var n;
                return i(t, e), n = t, t.prototype._checkParentType = function () {
                    this._parent instanceof n || this._parent instanceof eg || tg.modelGroupParentException()
                }, t
            }(Wf),
            ig = Promise.resolve(null),
            lg = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this) || this;
                    return l.control = new $f, l._registered = !1, l.update = new pn, l._parent = t, l._rawValidators = n || [], l._rawAsyncValidators = r || [], l.valueAccessor = function (e, t) {
                        if (!t) return null;
                        Array.isArray(t) || Hf(e, "Value accessor was not provided as an array for form control with");
                        var n = void 0,
                            r = void 0,
                            i = void 0;
                        return t.forEach(function (t) {
                            var l;
                            t.constructor === Sf ? n = t : (l = t, Vf.some(function (e) {
                                return l.constructor === e
                            }) ? (r && Hf(e, "More than one built-in value accessor matches form control with"), r = t) : (i && Hf(e, "More than one custom value accessor matches form control with"), i = t))
                        }), i || r || n || (Hf(e, "No valid value accessor for form control with"), null)
                    }(l, i), l
                }
                return i(t, e), t.prototype.ngOnChanges = function (e) {
                    this._checkForErrors(), this._registered || this._setUpControl(), "isDisabled" in e && this._updateDisabled(e),
                        function (e, t) {
                            if (!e.hasOwnProperty("model")) return !1;
                            var n = e.model;
                            return !!n.isFirstChange() || !De(t, n.currentValue)
                        }(e, this.viewModel) && (this._updateValue(this.model), this.viewModel = this.model)
                }, t.prototype.ngOnDestroy = function () {
                    this.formDirective && this.formDirective.removeControl(this)
                }, Object.defineProperty(t.prototype, "path", {
                    get: function () {
                        return this._parent ? xf(this.name, this._parent) : [this.name]
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "formDirective", {
                    get: function () {
                        return this._parent ? this._parent.formDirective : null
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "validator", {
                    get: function () {
                        return Gf(this._rawValidators)
                    },
                    enumerable: !0,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "asyncValidator", {
                    get: function () {
                        return Bf(this._rawAsyncValidators)
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.viewToModelUpdate = function (e) {
                    this.viewModel = e, this.update.emit(e)
                }, t.prototype._setUpControl = function () {
                    this._setUpdateStrategy(), this._isStandalone() ? this._setUpStandalone() : this.formDirective.addControl(this), this._registered = !0
                }, t.prototype._setUpdateStrategy = function () {
                    this.options && null != this.options.updateOn && (this.control._updateOn = this.options.updateOn)
                }, t.prototype._isStandalone = function () {
                    return !this._parent || !(!this.options || !this.options.standalone)
                }, t.prototype._setUpStandalone = function () {
                    Ff(this.control, this), this.control.updateValueAndValidity({
                        emitEvent: !1
                    })
                }, t.prototype._checkForErrors = function () {
                    this._isStandalone() || this._checkParentType(), this._checkName()
                }, t.prototype._checkParentType = function () {
                    !(this._parent instanceof rg) && this._parent instanceof Wf ? tg.formGroupNameException() : this._parent instanceof rg || this._parent instanceof eg || tg.modelParentException()
                }, t.prototype._checkName = function () {
                    this.options && this.options.name && (this.name = this.options.name), this._isStandalone() || this.name || tg.missingNameException()
                }, t.prototype._updateValue = function (e) {
                    var t = this;
                    ig.then(function () {
                        t.control.setValue(e, {
                            emitViewToModelChange: !1
                        })
                    })
                }, t.prototype._updateDisabled = function (e) {
                    var t = this,
                        n = e.isDisabled.currentValue,
                        r = "" === n || n && "false" !== n;
                    ig.then(function () {
                        r && !t.control.disabled ? t.control.disable() : !r && t.control.disabled && t.control.enable()
                    })
                }, t
            }(Rf),
            og = function () {
                return function () {}
            }(),
            ug = function () {
                function e() {}
                var t;
                return t = e, e.withConfig = function (e) {
                    return {
                        ngModule: t,
                        providers: [{
                            provide: ng,
                            useValue: e.warnOnDeprecatedNgFormSelector
                        }]
                    }
                }, e
            }(),
            sg = function () {
                function e(e, t, n, r, i, l, o, u, s) {
                    this.resource = e, this.name = t, this.amount = n, this.limit = r, this.reserved = i, this.resourceTypes = l, this.visible = o, this.highlighted = u, this.prioritise = s
                }
                return e.prototype.toJSON = function () {
                    return {
                        amount: this.amount,
                        limit: this.limit,
                        visible: this.visible,
                        highlighted: this.highlighted,
                        reserved: this.reserved,
                        prioritise: this.prioritise
                    }
                }, e.prototype.addResource = function (e) {
                    return this.amount + e > this.limit ? (this.amount = this.limit, this.amount) : (this.amount += e, this.amount)
                }, e.prototype.removeResource = function (e) {
                    return this.amount - e > 0 && (this.amount -= e, !0)
                }, e.prototype.getResource = function () {
                    return this.resource
                }, e.prototype.getName = function () {
                    return this.name
                }, e.prototype.getAmount = function () {
                    return this.amount
                }, e.prototype.getLimit = function () {
                    return this.limit
                }, e.prototype.getResourceTypes = function () {
                    return this.resourceTypes
                }, e.prototype.hasResourceType = function (e) {
                    return this.resourceTypes.indexOf(e) > -1
                }, e.prototype.isVisible = function () {
                    return this.visible
                }, e.prototype.toggleVisible = function () {
                    return this.visible = !this.visible, this.visible
                }, e.prototype.isHighlighted = function () {
                    return this.highlighted
                }, e.prototype.toggleHighlighted = function () {
                    return this.highlighted = !this.highlighted, this.highlighted
                }, e
            }(),
            ag = function () {
                function e() {
                    this.amount = 0, this.limit = 0, this.reserved = 0, this.resourceTypes = [], this.visible = !1, this.highlighted = !1, this.prioritise = !1
                }
                return e.prototype.forResource = function (e) {
                    return this.resource = e, this
                }, e.prototype.withName = function (e) {
                    return this.name = e, this
                }, e.prototype.withAmount = function (e) {
                    return this.amount = e, this
                }, e.prototype.withLimit = function (e) {
                    return this.limit = e, this
                }, e.prototype.withReserved = function (e) {
                    return this.reserved = e, this
                }, e.prototype.withResourceTypes = function (e) {
                    var t = this;
                    return e.forEach(function (e) {
                        return t.resourceTypes.push(e)
                    }), this
                }, e.prototype.withResourceType = function (e) {
                    return this.resourceTypes.push(e), this
                }, e.prototype.withVisible = function (e) {
                    return this.visible = e, this
                }, e.prototype.withHighlighted = function (e) {
                    return this.highlighted = e, this
                }, e.prototype.withPrioritise = function (e) {
                    return this.prioritise = e, this
                }, e.prototype.build = function () {
                    var e = new sg(this.resource, this.name, this.amount, this.limit, this.reserved, this.resourceTypes, this.visible, this.highlighted, this.prioritise);
                    return this.resource = void 0, this.name = void 0, this.amount = 0, this.limit = 0, this.reserved = 0, this.resourceTypes = [], this.visible = !1, this.highlighted = !1, this.prioritise = !1, e
                }, e
            }(),
            cg = function () {
                return function (e, t, n) {
                    this.message = e, this.day = n, this.type = t
                }
            }(),
            pg = function () {
                function e() {
                    this.services = new Map
                }
                return e.prototype.addService = function (e, t) {
                    this.services.set(e, t)
                }, e.prototype.getService = function (e) {
                    return this.services.get(e)
                }, e.prototype.getServiceByRegion = function (e) {
                    switch (e) {
                        case ku.VILLAGE:
                            return this.services.get(Nu.VILLAGE);
                        case ku.FORT:
                            return this.services.get(Nu.FORT);
                        case ku.FIELD:
                            return this.services.get(Nu.FIELD);
                        case ku.FOREST:
                            return this.services.get(Nu.FOREST);
                        case ku.MOUNTAINS:
                            return this.services.get(Nu.MOUNTAINS);
                        case ku.SEA:
                            return this.services.get(Nu.SEA);
                        case ku.PLATEAU:
                            return this.services.get(Nu.PLATEAU);
                        default:
                            console.error("Region service not found for [" + ku[e] + "]")
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            hg = function (e) {
                return e[e.AUTO_SAVE_STATUS = 0] = "AUTO_SAVE_STATUS", e[e.AUTO_SAVE_PERIOD = 1] = "AUTO_SAVE_PERIOD", e[e.METRIC = 2] = "METRIC", e[e.SAVE_LOGS = 3] = "SAVE_LOGS", e[e.SOUND = 4] = "SOUND", e[e.SOUND_VOLUME = 5] = "SOUND_VOLUME", e
            }({}),
            dg = function () {
                function e() {
                    this.optionsSubject = new L, this.options = new Map
                }
                return e.prototype.init = function () {
                    this.options.set(hg.AUTO_SAVE_STATUS, !0), this.options.set(hg.AUTO_SAVE_PERIOD, 5), this.options.set(hg.METRIC, !0), this.options.set(hg.SAVE_LOGS, !1), this.options.set(hg.SOUND, !0), this.options.set(hg.SOUND_VOLUME, 100), this.optionsSubject.next()
                }, e.prototype.load = function (e) {
                    this.options = new Map(JSON.parse(e.options)), this.optionsSubject.next()
                }, e.prototype.save = function () {
                    return {
                        options: JSON.stringify(Array.from(this.options.entries()))
                    }
                }, e.prototype.reset = function (e, t) {
                    e && this.init()
                }, e.prototype.registerForOptionsChange = function () {
                    return this.optionsSubject.asObservable()
                }, e.prototype.setOption = function (e, t) {
                    this.options.set(e, t), this.optionsSubject.next()
                }, e.prototype.setOptions = function (e) {
                    for (var t = 0, n = e; t < n.length; t++) {
                        var r = n[t];
                        this.options.set(r.option, r.value)
                    }
                    this.optionsSubject.next()
                }, e.prototype.getOption = function (e) {
                    return this.options.get(e)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            fg = function (e) {
                return e[e.LOG = 0] = "LOG", e[e.WARNING = 1] = "WARNING", e[e.SUCCESS = 2] = "SUCCESS", e
            }({}),
            gg = function (e) {
                return e[e.SPRING = 0] = "SPRING", e[e.SUMMER = 1] = "SUMMER", e[e.AUTUMN = 2] = "AUTUMN", e[e.WINTER = 3] = "WINTER", e
            }({}),
            vg = function () {
                function e(e) {
                    this.servicesService = e, this.daySubject = new L, this.year = 1, this.day = 1, this.tickInDay = 0, this.season = gg.SPRING, e.addService(Nu.CALENDAR, this)
                }
                return e.prototype.load = function (e) {
                    this.day = e.day, this.year = e.year, this.season = e.season, this.tickInDay = e.tickInDay
                }, e.prototype.save = function () {
                    return {
                        day: this.day,
                        year: this.year,
                        season: this.season,
                        tickInDay: this.tickInDay
                    }
                }, e.prototype.reset = function (e, t) {
                    this.day = 1, this.tickInDay = 0, this.season = gg.SPRING, e ? this.year = 1 : this.year += 1
                }, e.prototype.tick = function (e) {
                    this.tickInDay += 1, 11 === this.tickInDay && (this.tickInDay = 0, this.day += 1, this.day === ju + 1 && (this.day = 1, this.year += 1, this.servicesService.getService(Nu.GAME).isEnabled(Eu.CALENDAR) && this.servicesService.getService(Nu.LOG).success("New Year!")), this.daySubject.next(this.day)), this.day >= 1 && this.day <= ju / 4 ? this.season = gg.SPRING : this.day > ju / 4 && this.day <= ju / 2 ? this.season = gg.SUMMER : this.day > ju / 2 && this.day <= ju / 4 * 3 ? this.season = gg.AUTUMN : this.day > ju / 4 * 3 && this.day <= ju && (this.season = gg.WINTER)
                }, e.prototype.getDay = function () {
                    return this.day
                }, e.prototype.getYear = function () {
                    return this.year
                }, e.prototype.getSeason = function () {
                    return this.season
                }, e.prototype.getAbsoluteDay = function () {
                    return (this.year - 1) * ju + this.day
                }, e.prototype.getSeasonForAbsoluteDay = function (e) {
                    var t = (e - 1) % ju + 1;
                    return t >= 1 && t <= ju / 4 ? gg.SPRING : t > ju / 4 && t <= ju / 2 ? gg.SUMMER : t > ju / 2 && t <= ju / 4 * 3 ? gg.AUTUMN : t > ju / 4 * 3 && t <= ju ? gg.WINTER : void 0
                }, e.prototype.registerForDayChange = function () {
                    return this.daySubject.asObservable()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            mg = function () {
                function e(e, t, n) {
                    this.servicesService = e, this.calendarService = t, this.optionsService = n, this.entries = [], this.servicesService.addService(Nu.LOG, this), this.logSubject = new L
                }
                return e.prototype.log = function (e) {
                    this.entries.push(new cg(e, fg.LOG, this.calendarService.getDay())), this.logSubject.next()
                }, e.prototype.warning = function (e) {
                    this.entries.push(new cg(e, fg.WARNING, this.calendarService.getDay())), this.logSubject.next()
                }, e.prototype.success = function (e) {
                    this.entries.push(new cg(e, fg.SUCCESS, this.calendarService.getDay())), this.logSubject.next()
                }, e.prototype.registerForLogs = function () {
                    return this.logSubject.asObservable()
                }, e.prototype.getEntries = function () {
                    return this.entries
                }, e.prototype.clearEntries = function () {
                    this.entries = [], this.logSubject.next()
                }, e.prototype.load = function (e) {
                    this.entries = e.logs
                }, e.prototype.reset = function (e, t) {
                    this.entries = []
                }, e.prototype.save = function () {
                    return this.optionsService.getOption(hg.SAVE_LOGS) ? {
                        logs: this.entries
                    } : {
                        logs: []
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(vg), ze(dg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }();
        ! function (e) {
            e.ERROR_1 = "ERROR_1: Copying failed", e.ERROR_2 = "ERROR_2: Resource limit below 0", e.ERROR_3 = "ERROR_3: Workers below 0", e.ERROR_4 = "ERROR_4: Population Cap below 0", e.ERROR_5 = "ERROR_5: ", e.ERROR_6 = "ERROR_6: ", e.ERROR_7 = "ERROR_7: ", e.ERROR_8 = "ERROR_8: "
        }(qf || (qf = {}));
        var yg = function () {
                function e(e) {
                    this.servicesService = e, this.textSubject = new L, this.missionSubject = new L, this.missionResponseSubject = new L, this.buildingSubject = new L, this.tutorialSubject = new L, this.tutorialResponseSubject = new L, this.valueSubject = new L, this.onOpenSubject = new L, this.confirmationSubject = new L, this.closeSubject = new L, this.valueResponseSubject = new L, this.regionSubject = new L, this.modals = [], this.servicesService.addService(Nu.MODAL, this)
                }
                return e.prototype.add = function (e) {
                    this.modals.push(e)
                }, e.prototype.remove = function (e) {
                    this.modals = this.modals.filter(function (t) {
                        return t.id !== e
                    })
                }, e.prototype.open = function (e) {
                    this.modals.find(function (t) {
                        return t.id === e
                    }).open(), e === mu.EXPORT && this.onOpenSubject.next()
                }, e.prototype.close = function (e) {
                    this.modals.find(function (t) {
                        return t.id === e
                    }).close(), this.closeSubject.next()
                }, e.prototype.registerForText = function () {
                    return this.textSubject.asObservable()
                }, e.prototype.registerForOnOpen = function () {
                    return this.onOpenSubject.asObservable()
                }, e.prototype.registerForConfirmation = function () {
                    return this.confirmationSubject.asObservable()
                }, e.prototype.sendConfirmationResult = function (e) {
                    this.confirmationSubject.next(e)
                }, e.prototype.setModalText = function (e) {
                    this.textSubject.next(e)
                }, e.prototype.registerForRegion = function () {
                    return this.regionSubject.asObservable()
                }, e.prototype.setRegion = function (e) {
                    this.regionSubject.next(e)
                }, e.prototype.registerForCloseModal = function () {
                    return this.closeSubject.asObservable()
                }, e.prototype.sendCloseSignal = function () {
                    this.closeSubject.next()
                }, e.prototype.registerForValue = function () {
                    return this.valueSubject.asObservable()
                }, e.prototype.setModalValue = function (e) {
                    this.valueSubject.next(e)
                }, e.prototype.sendValueInput = function (e) {
                    this.valueResponseSubject.next(e)
                }, e.prototype.registerForValueResponse = function () {
                    return this.valueResponseSubject.asObservable()
                }, e.prototype.registerForMission = function () {
                    return this.missionSubject.asObservable()
                }, e.prototype.registerForMissionResponse = function () {
                    return this.missionResponseSubject.asObservable()
                }, e.prototype.registerForBuilding = function () {
                    return this.buildingSubject.asObservable()
                }, e.prototype.setMission = function (e) {
                    this.missionSubject.next(e)
                }, e.prototype.sendMissionResponse = function (e) {
                    this.missionResponseSubject.next(e)
                }, e.prototype.setBuilding = function (e) {
                    this.buildingSubject.next(e)
                }, e.prototype.info = function (e) {
                    this.open(mu.INFO), this.setModalText(e)
                }, e.prototype.openTutorialModal = function (e) {
                    var t = this.modals.find(function (e) {
                        return e.id === mu.TUTORIAL
                    });
                    t.close(), t.openTutorialWindow(e)
                }, e.prototype.registerForTutorial = function () {
                    return this.tutorialSubject.asObservable()
                }, e.prototype.setTutorial = function (e) {
                    this.tutorialSubject.next(e)
                }, e.prototype.registerForTutorialResponse = function () {
                    return this.tutorialResponseSubject.asObservable()
                }, e.prototype.sendTutorialResponse = function (e) {
                    this.tutorialResponseSubject.next(e)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Sg = function () {
                function e(e, t) {
                    this.modalService = e, this.router = t, this.tutorialsEnabled = !1, this.villageTutorialState = 0, this.forestTutorialState = 0, this.resourcesTutorialState = 0
                }
                return e.prototype.load = function (e) {
                    this.villageTutorialState = void 0 !== e.villageTutorialState ? e.villageTutorialState : 0, this.forestTutorialState = void 0 !== e.forestTutorialState ? e.forestTutorialState : 0, this.resourcesTutorialState = void 0 !== e.resourcesTutorialState ? e.resourcesTutorialState : 0
                }, e.prototype.save = function () {
                    return {
                        villageTutorialState: this.villageTutorialState,
                        forestTutorialState: this.forestTutorialState,
                        resourcesTutorialState: this.resourcesTutorialState
                    }
                }, e.prototype.reset = function (e, t) {}, e.prototype.checkRegionTutorial = function (e) {
                    var t = this;
                    if (this.tutorialsEnabled) switch (e) {
                        case ku.VILLAGE:
                            if (0 === this.villageTutorialState) {
                                this.modalService.setTutorial(zu), this.modalService.openTutorialModal(zu[0].position);
                                var n = this.modalService.registerForTutorialResponse().subscribe(function (e) {
                                    n.unsubscribe(), t.villageTutorialState = e
                                })
                            }
                            break;
                        case ku.FOREST:
                            if (0 === this.forestTutorialState) {
                                this.modalService.setTutorial(Ku), this.modalService.openTutorialModal(Ku[0].position);
                                var r = this.modalService.registerForTutorialResponse().subscribe(function (e) {
                                    r.unsubscribe(), t.forestTutorialState = e
                                })
                            }
                    }
                }, e.prototype.checkResourcesTutorial = function () {
                    var e = this;
                    if (0 === this.resourcesTutorialState) {
                        this.modalService.setTutorial(qu), this.modalService.openTutorialModal(qu[0].position);
                        var t = this.modalService.registerForTutorialResponse().subscribe(function (n) {
                            t.unsubscribe(), e.resourcesTutorialState = n
                        })
                    }
                }, e.prototype.enableTutorials = function () {
                    this.tutorialsEnabled = !0
                }, e.prototype.resetTutorials = function () {
                    this.villageTutorialState = 0, this.forestTutorialState = 0, this.resourcesTutorialState = 0, this.router.url.endsWith("village") ? this.checkRegionTutorial(ku.VILLAGE) : this.router.url.endsWith("forest") ? this.checkRegionTutorial(ku.FOREST) : this.router.url.endsWith("resources") ? this.checkResourcesTutorial() : this.modalService.info("Tutorials have been enabled")
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(yg), ze(Ed))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Eg = function () {
                function e(e, t, n) {
                    this.servicesService = e, this.modalService = t, this.tutorialsService = n, this.flags = [], this.gameState = 0, this.abdicationLevel = 0, this.devMessage = Number.MAX_SAFE_INTEGER, this.demolishReturn = Zu.DEMOLITION_RETURN, this.servicesService.addService(Nu.GAME, this)
                }
                return e.prototype.init = function () {
                    var e = this;
                    Hu.production ? this.flags = [] : (this.flags = [], Object.values(Eu).filter(function (e) {
                        return !isNaN(e)
                    }).forEach(function (t) {
                        return e.flags.push(t)
                    }), this.disable(Eu.COTTON))
                }, e.prototype.load = function (e) {
                    this.flags = e.flags, this.gameState = e.gameState, this.demolishReturn = e.demolishReturn, this.devMessage = e.devMessage, this.abdicationLevel = e.abdicationLevel
                }, e.prototype.save = function () {
                    return {
                        flags: this.flags,
                        gameState: this.gameState,
                        demolishReturn: this.demolishReturn,
                        devMessage: this.devMessage,
                        abdicationLevel: this.abdicationLevel
                    }
                }, e.prototype.reset = function (e, t) {
                    this.flags = [], this.gameState = 0, this.demolishReturn = Zu.DEMOLITION_RETURN, this.init(), e && (this.devMessage = Number.MAX_SAFE_INTEGER, this.abdicationLevel = 0), t && (this.abdicationLevel = 0)
                }, e.prototype.isEnabled = function (e) {
                    return this.flags.includes(e)
                }, e.prototype.enable = function (e) {
                    this.flags.includes(e) || this.flags.push(e)
                }, e.prototype.disable = function (e) {
                    this.flags.includes(e) && this.flags.splice(this.flags.indexOf(e), 1)
                }, e.prototype.setGameState = function (e) {
                    this.gameState = e
                }, e.prototype.getGameState = function () {
                    return this.gameState
                }, e.prototype.tick = function (e) {
                    0 === this.getGameState() && (this.displayWelcomeModal(), this.addStartBoost(), this.tutorialsService.checkRegionTutorial(ku.VILLAGE), this.setGameState(1)), this.displayDevMessage()
                }, e.prototype.displayWelcomeModal = function () {
                    var e = this;
                    this.modalService.info(Gu);
                    var t = this.modalService.registerForCloseModal().subscribe(function () {
                        e.devMessage === Number.MAX_SAFE_INTEGER && (e.devMessage = 0), t.unsubscribe()
                    })
                }, e.prototype.displayDevMessage = function () {
                    var e = Bu.length;
                    this.devMessage < e && (this.showDevNotes(), this.devMessage = e)
                }, e.prototype.showDevNotes = function () {
                    this.modalService.open(mu.CHANGELOG)
                }, e.prototype.addStartBoost = function () {
                    Vu && this.servicesService.getService(Nu.EFFECTS).addBuildingEffect(Vu)
                }, e.prototype.getAbdicationLevel = function () {
                    return this.abdicationLevel
                }, e.prototype.incrementAbdicationLevel = function () {
                    this.abdicationLevel += 1
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(yg), ze(Sg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Og = function () {
                return function (e, t, n, r, i, l, o) {
                    this.perk = e, this.usages = t, this.maxUsages = n, this.description = r, this.cost = i, this.reset = l, this.effect = o
                }
            }(),
            bg = function () {
                function e(e, t) {
                    this.modalService = e, this.servicesService = t, this.royalPoints = 0, this.perks = [], this.servicesService.addService(Nu.ROYAL, this), this.initPerks()
                }
                return e.prototype.initPerks = function () {
                    var e = this;
                    this.perks = [], Object.entries(is).forEach(function (t) {
                        e.perks.push(new Og(yu[t[0]], t[1].USAGES, t[1].MAX_USAGES, t[1].DESCRIPTION, t[1].COST, t[1].RESET, t[1].EFFECT))
                    })
                }, e.prototype.load = function (e) {
                    var t = this;
                    this.royalPoints = e.royalPoints, e.progress.forEach(function (e) {
                        var n = t.perks.find(function (t) {
                            return t.perk === e[0]
                        });
                        n && (n.usages = e[1])
                    })
                }, e.prototype.save = function () {
                    var e = [];
                    return this.perks.forEach(function (t) {
                        return e.push([t.perk, t.usages])
                    }), {
                        royalPoints: this.royalPoints,
                        progress: e
                    }
                }, e.prototype.reset = function (e, t) {
                    var n = this;
                    e ? (this.royalPoints = 0, this.initPerks()) : this.perks.forEach(function (e) {
                        e.reset && e.usages > 0 && e.reset(n.servicesService, e)
                    })
                }, e.prototype.getRoyalPoints = function () {
                    return this.royalPoints
                }, e.prototype.buyRoyalPoints = function () {
                    this.modalService.open(mu.ROYAL)
                }, e.prototype.increaseRoyalPoints = function (e) {
                    this.royalPoints += e
                }, e.prototype.getRoyalPerks = function () {
                    return this.perks
                }, e.prototype.unlock = function (e) {
                    (0 === e.maxUsages || e.usages < e.maxUsages) && (this.royalPoints >= e.cost ? this.perks.find(function (t) {
                        return e === t
                    }).effect(this.servicesService, e) : this.modalService.info("Not enough Royal Points!<br>" + e.cost + " RP required but only " + this.royalPoints + " available"))
                }, e.prototype.unlockCallback = function (e) {
                    this.royalPoints -= Number(e.cost), e.usages += 1
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(yg), ze(pg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Tg = function () {
                function e(e, t, n, r) {
                    this.servicesService = e, this.modalService = t, this.royalService = n, this.logService = r, e.addService(Nu.KONGREGATE, this);
                    try {
                        kongregateAPI.loadAPI(function () {
                            window.kongregate = kongregateAPI.getAPI();
                            var e = [],
                                t = function (t) {
                                    if (t.success) {
                                        var r = e.find(function (e) {
                                            return e[0] === t.id
                                        });
                                        r && n.increaseRoyalPoints(r[1])
                                    }
                                };
                            window.kongregate.mtx.requestUserItemList(null, function (n) {
                                if (n.success)
                                    for (var r = 0; r < n.data.length; r++) {
                                        var i = n.data[r];
                                        e.push([i.id, Number(i.identifier.replace("rp_pack", ""))]), window.kongregate.mtx.useItemInstance(i.id, t)
                                    }
                            })
                        })
                    } catch (i) {
                        console.error(i)
                    }
                }
                return e.prototype.isSet = function () {
                    return !!window.kongregate
                }, e.prototype.isAvailable = function () {
                    return window.kongregate && 0 !== this.getUserId()
                }, e.prototype.submitStat = function (e, t) {
                    window.kongregate.stats.submit(e, t)
                }, e.prototype.getUsername = function () {
                    if (this.isSet()) return window.kongregate.services.getUsername()
                }, e.prototype.getUserId = function () {
                    if (this.isSet()) return window.kongregate.services.getUserId()
                }, e.prototype.buyItem = function (e) {
                    var t = this.modalService,
                        n = this.royalService,
                        r = this.logService,
                        i = [],
                        l = function (e) {
                            if (e.success) {
                                var t = i.find(function (t) {
                                    return t[0] === e.id
                                });
                                t && (n.increaseRoyalPoints(t[1]), r.log("Added " + t[1] + " Royal Points"))
                            }
                        },
                        o = function (e) {
                            if (e.success)
                                for (var t = 0; t < e.data.length; t++) {
                                    var n = e.data[t];
                                    i.push([n.id, Number(n.identifier.replace("rp_pack", ""))]), window.kongregate.mtx.useItemInstance(n.id, l)
                                }
                        };
                    window.kongregate.mtx.purchaseItems([e], function (e) {
                        e.success && (t.close(mu.ROYAL), window.kongregate.mtx.requestUserItemList(null, o))
                    })
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(yg), ze(bg), ze(mg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Rg = function () {
                function e(e) {
                    this.happiness = Yu, e.addService(Nu.HAPPINESS, this)
                }
                return e.prototype.load = function (e) {
                    this.happiness = e.happiness
                }, e.prototype.save = function () {
                    return {
                        happiness: this.happiness
                    }
                }, e.prototype.reset = function (e, t) {
                    this.happiness = Yu
                }, e.prototype.tick = function (e) {}, e.prototype.getHappiness = function () {
                    return this.happiness
                }, e.prototype.getHappinessEffect = function () {
                    return this.happiness >= 0 && this.happiness <= 10 ? -25 : this.happiness > 10 && this.happiness <= 40 ? -10 : this.happiness > 40 && this.happiness <= 60 ? 0 : this.happiness > 60 && this.happiness <= 90 ? 25 : this.happiness > 90 && this.happiness <= 100 ? 50 : void 0
                }, e.prototype.increaseHappiness = function (e) {
                    this.happiness += e, this.happiness > 100 && (this.happiness = 100)
                }, e.prototype.decreaseHappiness = function (e) {
                    this.happiness -= e, this.happiness < 0 && (this.happiness = 0)
                }, e.prototype.resetHappiness = function () {
                    this.happiness = Yu
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Cg = function () {
                function e(e, t, n, r, i, l) {
                    this.logService = e, this.servicesService = t, this.gameService = n, this.modalService = r, this.happinessService = i, this.kongregateService = l, this.resources = new Map, this.populationScore = 0, this.resourcesSubject = new L, this.callbacks = new Map, this.servicesService.addService(Nu.RESOURCES, this), this.init()
                }
                return e.prototype.init = function () {
                    var e = this,
                        t = new ag;
                    Xu.getResources().forEach(function (n) {
                        e.resources.set(vu[n[0]], t.forResource(vu[n[0]]).withName(Au.prepareResourceName(vu[n[0]])).withAmount(void 0 !== n[1].AMOUNT ? n[1].AMOUNT : Xu.DEFAULT_AMOUNT).withLimit(void 0 !== n[1].LIMIT ? n[1].LIMIT : Xu.DEFAULT_LIMIT).withResourceTypes(n[1].TYPES).withResourceType(Cu.ALL).withVisible(void 0 !== n[1].VISIBLE ? n[1].VISIBLE : Xu.DEFAULT_VISIBLE).withHighlighted(void 0 !== n[1].HIGHLIGHTED ? n[1].HIGHLIGHTED : Xu.DEFAULT_HIGHLIGHTED).build())
                    }), this.people = 1, this.workers = 0, this.populationCap = 1, Hu.production || this.resources.forEach(function (e) {
                        return e.visible = !0
                    })
                }, e.prototype.getResource = function (e) {
                    return this.resources.get(e)
                }, e.prototype.makeVisible = function (e) {
                    this.resources.get(e).visible = !0
                }, e.prototype.increaseResource = function (e, t, n) {
                    void 0 === n && (n = !1);
                    var r = this.resources.get(e);
                    if (r.getResourceTypes().includes(Cu.ANIMAL)) {
                        var i = this.servicesService.getServiceByRegion(ku.FIELD).getBuildings().filter(function (e) {
                                return e.getBuildingType() === Ou.PASTURE
                            }).map(function (e) {
                                return e
                            }).filter(function (t) {
                                return t.getResourceType() === e
                            }),
                            l = 0;
                        if (i.forEach(function (e) {
                                return l += e.getMaxAnimals() - e.getAnimals()
                            }), t > l && !n) return !1;
                        for (; t > 0 && l > 0;)
                            for (var o = 0, u = i; o < u.length; o++) {
                                for (var s = u[o]; s.getAnimals() < s.getMaxAnimals() && t > 0;) s.increaseAnimal(1), r.amount += 1, t -= 1;
                                if (0 === t) return !0
                            }
                        return !0
                    }
                    return !(!n && r.amount + t > r.limit || (r.amount += t, r.amount > r.limit && (r.amount = r.limit), this.resourcesSubject.next(this.resources), r.isVisible() || (r.toggleVisible(), this.logService.log("New resource discovered: " + Au.prepareResourceName(e))), 0))
                }, e.prototype.decreaseResource = function (e, t, n) {
                    if (void 0 === n && (n = !1), e === vu.FOOD) return this.getFoodValue(n) >= t && (this.getFood(t, n), !0);
                    var r = this.resources.get(e);
                    if (r.getResourceTypes().includes(Cu.ANIMAL)) {
                        var i = this.servicesService.getServiceByRegion(ku.FIELD).getBuildings().filter(function (e) {
                                return e.getBuildingType() === Ou.PASTURE
                            }).map(function (e) {
                                return e
                            }).filter(function (t) {
                                return t.getResourceType() === e && t.getAnimals() > 0
                            }),
                            l = 0;
                        if (i.forEach(function (e) {
                                return l += e.getAnimals()
                            }), l >= t) {
                            for (var o = 0, u = i; o < u.length; o++) {
                                for (var s = u[o]; t > 0 && s.getAnimals() > 0;) s.decreaseAnimal(1), r.amount -= 1, t -= 1;
                                if (0 === t) return !0
                            }
                            return !0
                        }
                        return !1
                    }
                    return 0 !== this.hasResource(e, t, n) ? (this.resourcesSubject.next(this.resources), !1) : (r.amount -= t, this.resourcesSubject.next(this.resources), !0)
                }, e.prototype.hasResource = function (e, t, n) {
                    if (void 0 === n && (n = !1), e === vu.FOOD) return this.getFoodValue(n) >= t ? 0 : t - this.getFoodValue(n);
                    var r = this.resources.get(e);
                    return n ? r.amount >= t ? 0 : t - this.resources.get(e).amount : r.amount - r.reserved >= t ? 0 : t - (r.amount - r.reserved)
                }, e.prototype.hasLimit = function (e) {
                    return this.resources.get(e).amount < this.resources.get(e).limit
                }, e.prototype.decreaseResources = function (e, t, n) {
                    void 0 === t && (t = !1), void 0 === n && (n = 1);
                    for (var r = "", i = !0, l = 0, o = Array.from(e); l < o.length; l++) {
                        var u = o[l],
                            s = this.hasResource(p = u[0], u[1] * n, t);
                        0 !== s && (r += "Missing " + s + " " + Au.prepareResourceName(p) + "<br>", i = !1)
                    }
                    if (!i) return this.modalService.info(r), !1;
                    for (var a = 0, c = Array.from(e); a < c.length; a++) {
                        var p, h = c[a];
                        this.decreaseResource(p = h[0], h[1] * n, t)
                    }
                    return !0
                }, e.prototype.hasResources = function (e, t) {
                    void 0 === t && (t = !1);
                    for (var n = !0, r = 0, i = Array.from(e); r < i.length; r++) {
                        var l = i[r];
                        0 !== this.hasResource(l[0], l[1], t) && (n = !1)
                    }
                    return n
                }, e.prototype.increaseLimit = function (e, t) {
                    this.resources.forEach(function (n) {
                        n.getResourceTypes().includes(e) && !n.getResourceTypes().includes(Cu.ANIMAL) && (n.limit += t)
                    })
                }, e.prototype.increaseResourceLimit = function (e, t) {
                    this.resources.get(e).limit += t
                }, e.prototype.decreaseLimit = function (e, t) {
                    this.resources.forEach(function (n) {
                        n.getResourceTypes().includes(e) && !n.getResourceTypes().includes(Cu.ANIMAL) && (n.limit -= t, n.limit < 0 && (n.limit = 0, console.error(qf.ERROR_2, n.getResource(), n.limit)), n.amount > n.limit && (n.amount = n.limit))
                    })
                }, e.prototype.decreaseResourceLimit = function (e, t) {
                    var n = this.resources.get(e);
                    n.limit -= t, n.limit < 0 && (n.limit = 0, console.error(qf.ERROR_2, n.getResource(), n.limit)), n.amount > n.limit && (n.amount = n.limit)
                }, e.prototype.getResources = function () {
                    return this.resources
                }, e.prototype.save = function () {
                    var e = "[";
                    return this.resources.forEach(function (t) {
                        e += "[" + t.resource + "," + JSON.stringify(t) + "],"
                    }), {
                        resources: e = e.slice(0, -1) + "]",
                        people: this.people,
                        workers: this.workers,
                        populationCap: this.populationCap
                    }
                }, e.prototype.load = function (e) {
                    var t = this;
                    JSON.parse(e.resources).forEach(function (e) {
                        t.resources.get(e[0]).amount = e[1].amount, t.resources.get(e[0]).limit = e[1].limit, t.resources.get(e[0]).reserved = e[1].reserved, t.resources.get(e[0]).visible = e[1].visible, t.resources.get(e[0]).highlighted = e[1].highlighted, t.resources.get(e[0]).prioritise = e[1].prioritise
                    }), this.people = e.people, this.workers = e.workers, this.populationCap = e.populationCap, this.resourcesSubject.next(this.resources)
                }, e.prototype.reset = function (e, t) {
                    this.resources = new Map, this.people = 1, this.workers = 0, this.populationCap = 1, this.populationScore = 0, this.init(), this.resourcesSubject.next(this.resources)
                }, e.prototype.registerForResourcesChange = function () {
                    return this.resourcesSubject.asObservable()
                }, e.prototype.createPeople = function (e) {
                    this.people += e
                }, e.prototype.removePeople = function (e) {
                    if (this.people -= e, this.people - e < 0)
                        for (; this.people < 0;) {
                            var t = Math.floor(Math.random() * this.callbacks.size);
                            Array.from(this.callbacks.values())[t].fireRandomWorker()
                        }
                }, e.prototype.hireWorker = function () {
                    return this.people > 0 && (this.people -= 1, this.workers += 1, !0)
                }, e.prototype.fireWorker = function (e) {
                    void 0 === e && (e = 1), 0 === this.workers && console.error(qf.ERROR_3), this.workers -= e, this.people += e
                }, e.prototype.getPeople = function () {
                    return this.people
                }, e.prototype.getWorkers = function () {
                    return this.workers
                }, e.prototype.getPopulationCap = function () {
                    return this.populationCap
                }, e.prototype.increasePopulationCap = function (e) {
                    return this.populationCap += e
                }, e.prototype.decreasePopulationCap = function (e) {
                    return this.populationCap - e < 0 && console.error(qf.ERROR_4), this.populationCap -= e
                }, e.prototype.addCallback = function (e, t) {
                    this.callbacks.set(t, e)
                }, e.prototype.tick = function (e) {
                    this.kongregateService.isAvailable() && this.getTotalPeople() > this.populationScore && (this.populationScore = this.getTotalPeople(), this.kongregateService.submitStat("Population", this.populationScore)), 1 === this.getTotalPeople() && this.happinessService.resetHappiness(), this.people + this.workers >= Zu.VILLAGE.SHRINE.POPULATION && (this.gameService.isEnabled(Eu.SHRINE) || (this.gameService.enable(Eu.SHRINE), this.logService.log("Shrine unlocked"))), this.people + this.workers >= Zu.VILLAGE.CHURCH.POPULATION && (this.gameService.isEnabled(Eu.CHURCH) || (this.gameService.enable(Eu.CHURCH), this.logService.log("Church unlocked")))
                }, e.prototype.getRandomFood = function (e) {
                    var t;
                    if (void 0 === e && (e = !1), (t = e ? Array.from(this.resources.entries()).filter(function (e) {
                            return e[1].resourceTypes.includes(Cu.CONSUMABLE) && e[1].amount > 0
                        }) : Array.from(this.resources.entries()).filter(function (e) {
                            return e[1].resourceTypes.includes(Cu.CONSUMABLE) && e[1].amount - e[1].reserved > 0
                        })).length > 0) {
                        var n = t[Math.floor(Math.random() * t.length)];
                        return this.decreaseResource(n[0], 1), Xu.getResource(n[0]).POWER
                    }
                    return 0
                }, e.prototype.getFood = function (e, t) {
                    for (void 0 === t && (t = !1); e > 0;) e -= this.getRandomFood(t)
                }, e.prototype.getFoodValue = function (e) {
                    void 0 === e && (e = !1);
                    var t = 0;
                    return e ? Array.from(this.resources.entries()).filter(function (e) {
                        return e[1].resourceTypes.includes(Cu.FOOD) && e[1].amount > 0
                    }).forEach(function (e) {
                        return t += Xu.getResource(e[0]).POWER * e[1].amount
                    }) : Array.from(this.resources.entries()).filter(function (e) {
                        return e[1].resourceTypes.includes(Cu.FOOD) && e[1].amount - e[1].reserved > 0
                    }).forEach(function (e) {
                        return t += Xu.getResource(e[0]).POWER * (e[1].amount - e[1].reserved)
                    }), t
                }, e.prototype.getResourceTypes = function (e) {
                    return this.resources.get(e).getResourceTypes()
                }, e.prototype.increaseResources = function (e, t) {
                    void 0 === t && (t = !1);
                    for (var n = 0, r = Array.from(e); n < r.length; n++) {
                        var i = r[n];
                        this.increaseResource(i[0], i[1], t)
                    }
                }, e.prototype.removeRecruit = function (e) {
                    return this.people >= e && this.callbacks.get(ku.VILLAGE).removeRecruit(e)
                }, e.prototype.getFuel = function () {
                    for (var e = 0, t = Xu.getResourcesByType(Cu.FUEL).sort(function (e, t) {
                            return e[1].FUEL_PRIORITY - t[1].FUEL_PRIORITY
                        }); e < t.length; e++) {
                        var n = t[e];
                        if (this.decreaseResource(vu[String(n[0])], 1)) return n[1].POWER
                    }
                    return 0
                }, e.prototype.getTotalPeople = function () {
                    return this.people + this.workers
                }, e.prototype.getResourcesValue = function () {
                    var e = 0;
                    return this.resources.forEach(function (t) {
                        t.amount > 0 && (e += Xu.getResource(t.resource).TRADE_VALUE * t.getAmount())
                    }), e
                }, e.prototype.blindResourceIncrease = function (e, t) {
                    this.resources.get(e).amount += t
                }, e.prototype.blindResourceDecrease = function (e, t) {
                    this.resources.get(e).amount -= t
                }, e.prototype.updateAnimals = function () {
                    var e = Array.from(this.getResources().values()).filter(function (e) {
                            return e.getResourceTypes().includes(Cu.ANIMAL)
                        }),
                        t = this.servicesService.getServiceByRegion(ku.FIELD).getBuildings().filter(function (e) {
                            return e.getBuildingType() === Ou.PASTURE
                        }).map(function (e) {
                            return e
                        });
                    e.forEach(function (e) {
                        t.filter(function (t) {
                            return t.getResourceType() === e.resource && t.getAnimals() > 0
                        });
                        var n = 0;
                        t.forEach(function (e) {
                            return n += e.getAnimals()
                        }), e.amount = n
                    })
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(mg), ze(pg), ze(Eg), ze(yg), ze(Rg), ze(Tg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            _g = function () {
                function e(e, t, n, r) {
                    this.resourcesService = e, this.modalService = t, this.tutorialService = n, this.gameService = r, this.filterText = ""
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.categories = Object.keys(Cu), this.categories = [Cu[Cu.RAW], Cu[Cu.PROCESSED], Cu[Cu.FOOD], Cu[Cu.TOOLS]], this.resources = this.resourcesService.getResources(), this.resourcesService.registerForResourcesChange().subscribe(function (t) {
                        e.resources = t
                    }), this.tutorialService.checkResourcesTutorial()
                }, e.prototype.getResourcesList = function (e) {
                    var t = this;
                    return Array.from(this.resourcesService.getResources().entries()).filter(function (n) {
                        return n[1].getResourceTypes().includes(Cu[e]) && Au.prepareResourceName(n[1].getResource()).toLowerCase().includes(t.filterText)
                    }).map(function (e) {
                        return e[1]
                    })
                }, e.prototype.openManageModal = function (e) {
                    this.modalService.open(mu.INPUT), this.modalService.setModalText("Set amount of restricted resources that can be used only by your direct action and not by automatic building action"), this.modalService.setModalValue(e.reserved);
                    var t = this.modalService.registerForValueResponse().subscribe(function (n) {
                        null === n || isNaN(n) || (e.reserved = Number(n)), t.unsubscribe()
                    })
                }, e.prototype.isMarketEnabled = function () {
                    return this.gameService.isEnabled(Eu.MARKET)
                }, e.prototype.highlightResource = function (e) {
                    e.highlighted ? e.highlighted = !1 : Array.from(this.resourcesService.getResources().values()).filter(function (e) {
                        return e.highlighted
                    }).length < 7 ? e.highlighted = !0 : this.modalService.info("Too many highlighted resources")
                }, e.prototype.isNotCoins = function (e) {
                    return e.resource !== vu.COINS
                }, e
            }(),
            Ig = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em;margin:.7%;text-align:center}#resourcesTitle[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:1.3em;font-weight:bolder;vertical-align:middle}#center[_ngcontent-%COMP%]{flex:10 0 auto}.side[_ngcontent-%COMP%]{flex:0 0 25%;font-size:.6em;width:15%;margin:3px;display:inline-block}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:94%;text-align:center}.category[_ngcontent-%COMP%]{text-align:left;flex:1 0 0;display:flex;flex-direction:column;border:1px solid #000}.resource[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:3px;width:100%;vertical-align:middle}.title[_ngcontent-%COMP%]{text-align:center;padding:2px 0;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.highlight[_ngcontent-%COMP%]{flex:1 0 auto;text-align:right;margin-right:3px}.highlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}.manage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15px;width:15px}.greyout[_ngcontent-%COMP%]{opacity:.3}.prioritise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15px;width:15px}.full[_ngcontent-%COMP%]{font-weight:600}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function Ag(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getAmount(),
                    r = t.parent.parent.context.$implicit.getLimit();
                e(t, 1, 0, n, r)
            })
        }

        function wg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getAmount(),
                    r = t.parent.parent.context.$implicit.getLimit();
                e(t, 1, 0, n, r)
            })
        }

        function Ng(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getAmount();
                e(t, 1, 0, n)
            })
        }

        function Pg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 3, "span", [["class", "prioritise"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = 0 != (e.parent.parent.context.$implicit.prioritise = !e.parent.parent.context.$implicit.prioritise) && r), r
            }, null, null)), Ml(2, 278528, null, 0, As, [Br, Vr, Nt, Lt], {
                klass: [0, "klass"],
                ngClass: [1, "ngClass"]
            }, null), ro(3, {
                greyout: 0
            }), (e()(), Yi(4, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/trade.svg"], ["title", "prioritise on market"]], null, null, null, null, null))], function (e, t) {
                var n = e(t, 3, 0, !t.parent.parent.context.$implicit.prioritise);
                e(t, 2, 0, "prioritise", n)
            }, null)
        }

        function Dg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 20, "div", [["class", "resource"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 8, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Ag)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, wg)), Ml(7, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Ng)), Ml(9, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(10, 0, null, null, 10, "span", [["class", "highlight"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 3, "span", [["class", "manage"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openManageModal(e.parent.context.$implicit) && r), r
            }, null, null)), Ml(12, 278528, null, 0, As, [Br, Vr, Nt, Lt], {
                klass: [0, "klass"],
                ngClass: [1, "ngClass"]
            }, null), ro(13, {
                greyout: 0
            }), (e()(), Yi(14, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/manage.svg"]], [[8, "title", 0]], null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Pg)), Ml(16, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(17, 0, null, null, 3, "span", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.highlightResource(e.parent.context.$implicit) && r), r
            }, null, null)), Ml(18, 278528, null, 0, As, [Br, Vr, Nt, Lt], {
                ngClass: [0, "ngClass"]
            }, null), ro(19, {
                greyout: 0
            }), (e()(), Yi(20, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/eye.svg"], ["title", "add to header"]], null, null, null, null, null))], function (e, t) {
                var n = t.component,
                    r = t.parent.context.$implicit.getName();
                e(t, 3, 0, r, "resources");
                var i = t.parent.context.$implicit.getAmount() === t.parent.context.$implicit.getLimit();
                e(t, 5, 0, i);
                var l = n.isNotCoins(t.parent.context.$implicit) && t.parent.context.$implicit.getAmount() !== t.parent.context.$implicit.getLimit();
                e(t, 7, 0, l), e(t, 9, 0, !n.isNotCoins(t.parent.context.$implicit));
                var o = e(t, 13, 0, 0 === t.parent.context.$implicit.reserved);
                e(t, 12, 0, "manage", o), e(t, 16, 0, n.isMarketEnabled());
                var u = e(t, 19, 0, !t.parent.context.$implicit.highlighted);
                e(t, 18, 0, u)
            }, function (e, t) {
                e(t, 14, 0, Vi(1, "reserved: ", t.parent.context.$implicit.reserved, ""))
            })
        }

        function Mg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Dg)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.context.$implicit.visible)
            }, null)
        }

        function kg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [["class", "category"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, Mg)), Ml(4, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 4, 0, t.component.getResourcesList(t.context.$implicit))
            }, function (e, t) {
                e(t, 2, 0, t.context.$implicit)
            })
        }

        function Lg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 13, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 9, "span", [["id", "resourcesTitle"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 0, "span", [["class", "side"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "span", [["id", "center"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(5, 0, null, null, 5, "input", [["class", "side"], ["placeholder", "filter"], ["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 6)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 6).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 6)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 6)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(6, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(8, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(10, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(11, 0, null, null, 2, "div", [["id", "categories"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, kg)), Ml(13, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 8, 0, n.filterText), e(t, 13, 0, n.categories)
            }, function (e, t) {
                e(t, 5, 0, El(t, 10).ngClassUntouched, El(t, 10).ngClassTouched, El(t, 10).ngClassPristine, El(t, 10).ngClassDirty, El(t, 10).ngClassValid, El(t, 10).ngClassInvalid, El(t, 10).ngClassPending)
            })
        }

        function xg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-resources", [], null, null, null, Lg, Ig)), Ml(1, 114688, null, 0, _g, [Cg, yg, Sg, Eg], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var Fg = al("app-resources", _g, xg, {}, {}, []),
            Ug = function () {
                function e(e) {
                    this.servicesService = e, this.rations = Qu.FOOD_RATIONS, this.clothes = Qu.CLOTHES_RATIONS, this.alcohol = Qu.ALCOHOL_RATIONS, this.furClothes = Qu.ALLOW_FUR_CLOTHES, this.foodNutrition = Qu.SHOW_FOOD_NUTRITION, this.complexWorkers = !1, e.addService(Nu.MANAGEMENT, this)
                }
                return e.prototype.load = function (e) {
                    this.rations = e.rations, this.clothes = e.clothes, this.alcohol = e.alcohol, this.furClothes = e.furClothes, this.foodNutrition = e.foodNutrition, this.complexWorkers = e.complexWorkers
                }, e.prototype.save = function () {
                    return {
                        rations: this.rations,
                        clothes: this.clothes,
                        alcohol: this.alcohol,
                        furClothes: this.furClothes,
                        foodNutrition: this.foodNutrition,
                        complexWorkers: this.complexWorkers
                    }
                }, e.prototype.reset = function (e, t) {
                    this.rations = Qu.FOOD_RATIONS, this.clothes = Qu.CLOTHES_RATIONS, this.alcohol = Qu.ALCOHOL_RATIONS, this.furClothes = Qu.ALLOW_FUR_CLOTHES, this.foodNutrition = Qu.SHOW_FOOD_NUTRITION, this.complexWorkers = !1
                }, e.prototype.getRations = function () {
                    return this.rations
                }, e.prototype.getClothesRations = function () {
                    return this.clothes
                }, e.prototype.getAlcoholRations = function () {
                    return this.alcohol
                }, e.prototype.setRations = function (e) {
                    this.rations = e
                }, e.prototype.setClothesRations = function (e) {
                    this.clothes = e
                }, e.prototype.setAlcoholRations = function (e) {
                    this.alcohol = e
                }, e.prototype.toggleFurClothes = function () {
                    this.furClothes = !this.furClothes
                }, e.prototype.getFurClothes = function () {
                    return this.furClothes
                }, e.prototype.toggleFoodNutrition = function () {
                    this.foodNutrition = !this.foodNutrition
                }, e.prototype.getFoodNutrition = function () {
                    return this.foodNutrition
                }, e.prototype.toggleComplexWorkers = function () {
                    this.complexWorkers = !this.complexWorkers
                }, e.prototype.getComplexWorkers = function () {
                    return this.complexWorkers
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Hg = function () {
                function e(e, t, n) {
                    var r = this;
                    this.servicesService = e, this.calendarService = t, this.logService = n, this.buildingEffects = [], this.natureEffects = [], this.armyEffects = [], e.addService(Nu.EFFECTS, this), this.daySubscription = t.registerForDayChange().subscribe(function (e) {
                        r.buildingEffects.forEach(function (e) {
                            e.duration > 0 && (e.duration -= 1)
                        }), r.armyEffects.forEach(function (e) {
                            e.duration > 0 && (e.duration -= 1)
                        }), r.natureEffects.forEach(function (e) {
                            e.duration > 0 && (e.duration -= 1)
                        })
                    })
                }
                return e.prototype.load = function (e) {
                    var t = this;
                    this.buildingEffects = [], e.buildingEffects.forEach(function (e) {
                        t.buildingEffects.push(new Du(e.name, e.building, e.effect, e.duration))
                    }), this.armyEffects = [], e.armyEffects.forEach(function (e) {
                        t.armyEffects.push(new Lu(e.name, e.troop, e.effect, e.duration))
                    }), this.natureEffects = [], e.natureEffects.forEach(function (e) {
                        t.natureEffects.push(new Uu(e.name, e.effect, e.duration))
                    })
                }, e.prototype.save = function () {
                    return {
                        buildingEffects: this.buildingEffects,
                        armyEffects: this.armyEffects,
                        natureEffects: this.natureEffects
                    }
                }, e.prototype.reset = function (e, t) {
                    e ? (this.buildingEffects = [], this.armyEffects = [], this.natureEffects = []) : (this.buildingEffects = this.buildingEffects.filter(function (e) {
                        return e.isPermanent()
                    }), this.armyEffects = this.armyEffects.filter(function (e) {
                        return e.isPermanent()
                    }), this.natureEffects = this.natureEffects.filter(function (e) {
                        return e.isPermanent()
                    }))
                }, e.prototype.tick = function (e) {
                    this.buildingEffects = this.buildingEffects.filter(function (e) {
                        return 0 !== e.duration
                    }), this.armyEffects = this.armyEffects.filter(function (e) {
                        return 0 !== e.duration
                    }), this.natureEffects = this.natureEffects.filter(function (e) {
                        return 0 !== e.duration
                    })
                }, e.prototype.getBuildingEffectsValue = function (e, t, n) {
                    void 0 === t && (t = !1), void 0 === n && (n = -1);
                    var r = 0;
                    return n > 0 ? this.buildingEffects.filter(function (t) {
                        return t.building === e || t.building === Ou.ALL
                    }).filter(function (e) {
                        return e.isPermanent() === t
                    }).filter(function (e) {
                        return !e.isBuff() || e.isBuff() && e.buff === n
                    }).forEach(function (e) {
                        return r += e.effect
                    }) : this.buildingEffects.filter(function (t) {
                        return t.building === e || t.building === Ou.ALL
                    }).filter(function (e) {
                        return e.isPermanent() === t
                    }).forEach(function (e) {
                        return r += e.effect
                    }), r
                }, e.prototype.getBuildingEffects = function (e, t) {
                    return void 0 === t && (t = -1), e ? t > 0 ? this.buildingEffects.filter(function (t) {
                        return t.building === e || t.building === Ou.ALL
                    }).filter(function (e) {
                        return e.buff === t
                    }) : this.buildingEffects.filter(function (t) {
                        return t.building === e || t.building === Ou.ALL
                    }) : this.buildingEffects
                }, e.prototype.getNatureEffectsValue = function () {
                    var e = 0;
                    return this.natureEffects.forEach(function (t) {
                        return e += t.effect
                    }), e
                }, e.prototype.getNatureEffects = function () {
                    return this.natureEffects
                }, e.prototype.addNatureEffect = function (e) {
                    this.natureEffects.push(e)
                }, e.prototype.addBuildingEffect = function (e, t) {
                    if (void 0 === t && (t = !0), this.buildingEffects.push(e), t) {
                        var n = e.name;
                        e.isPermanent() ? n += " will permanently affect " : n += " will affect ", n += e.building === Ou.ALL ? "all buildings with " : Au.prepareBuildingName(e.building) + " with ", n += e.effect > 0 ? "+" + e.effect + "%" : e.effect + "%", n += e.building === Ou.ALL ? " of their base power" : " of its base power", e.isPermanent() || (n += " for " + e.duration + " days"), this.logService.log(n)
                    }
                }, e.prototype.addArmyEffect = function (e, t) {
                    if (void 0 === t && (t = !0), this.armyEffects.push(e), t) {
                        var n = e.name;
                        e.isPermanent() ? n += " will permanently affect " : n += " will affect ", n += e.troop === Iu.ALL ? "all troops with " : Au.prepareTroopName(e.troop) + " with ", n += e.effect > 0 ? "+" + e.effect + "%" : e.effect + "%", n += e.troop === Iu.ALL ? " of their base strength and defense" : " of its base strength and defense", e.isPermanent() || (n += " for " + e.duration + " days"), this.logService.log(n)
                    }
                }, e.prototype.getArmyEffects = function () {
                    return this.armyEffects
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(vg), ze(mg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Gg = function () {
                function e(e, t, n) {
                    this.managementService = e, this.effectsService = t, this.gameService = n
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getRations = function () {
                    return this.managementService.getRations()
                }, e.prototype.changeFoodValue = function (e) {
                    this.managementService.setRations(e.target.value)
                }, e.prototype.changeClothesValue = function (e) {
                    this.managementService.setClothesRations(e.target.value)
                }, e.prototype.changeAlcoholValue = function (e) {
                    this.managementService.setAlcoholRations(e.target.value)
                }, e.prototype.getClothesRations = function () {
                    return this.managementService.getClothesRations()
                }, e.prototype.getAlcoholRations = function () {
                    return this.managementService.getAlcoholRations()
                }, e.prototype.getBuildingsEffects = function () {
                    return this.effectsService.getBuildingEffects().filter(function (e) {
                        return !e.isBuff()
                    }).sort(function (e, t) {
                        return e.isPermanent() && !t.isPermanent() ? -1 : e.isPermanent() && t.isPermanent() ? 0 : !e.isPermanent() && t.isPermanent() ? 1 : void 0
                    })
                }, e.prototype.getArmyEffects = function () {
                    return this.effectsService.getArmyEffects()
                }, e.prototype.getBuildingName = function (e) {
                    return Au.prepareBuildingName(e)
                }, e.prototype.getTroopName = function (e) {
                    return Au.prepareTroopName(e)
                }, e.prototype.updateFurClothes = function () {
                    this.managementService.toggleFurClothes()
                }, e.prototype.getFurClothes = function () {
                    return this.managementService.getFurClothes()
                }, e.prototype.updateFoodNutrition = function () {
                    this.managementService.toggleFoodNutrition()
                }, e.prototype.getFoodNutrition = function () {
                    return this.managementService.getFoodNutrition()
                }, e.prototype.updateComplexWorkers = function () {
                    this.managementService.toggleComplexWorkers()
                }, e.prototype.getComplexWorkers = function () {
                    return this.managementService.getComplexWorkers()
                }, e.prototype.isHREnabled = function () {
                    return this.gameService.isEnabled(Eu.HUMAN_RESOURCES)
                }, e
            }(),
            Bg = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:99%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.label[_ngcontent-%COMP%]{display:inline-block;width:80px}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}#buildingEffects[_ngcontent-%COMP%]{height:45%;border:1px solid #000}#armyEffects[_ngcontent-%COMP%]{height:29%;border:1px solid #000}.rows[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.row[_ngcontent-%COMP%]{display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto;border-right:1px solid #000}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;width:98.3%;flex-direction:row;text-align:center;font-size:.9em}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){flex:0 0 35%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){flex:0 0 13%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){flex:0 0 15%}.positive[_ngcontent-%COMP%]{color:#006400}.negative[_ngcontent-%COMP%]{color:#8b0000}"]],
                data: {}
            });

        function Vg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "input", [["type", "checkbox"]], [[8, "checked", 0]], [[null, "change"]], function (e, t, n) {
                var r = !0;
                return "change" === t && (r = !1 !== e.component.updateComplexWorkers() && r), r
            }, null, null)), (e()(), lo(-1, null, ["  "]))], null, function (e, t) {
                e(t, 1, 0, t.component.getComplexWorkers())
            })
        }

        function Wg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "positive"]], null, null, null, null, null)), (e()(), lo(1, null, ["+", "% "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.effect)
            })
        }

        function jg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "negative"]], null, null, null, null, null)), (e()(), lo(1, null, ["", "% "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.effect)
            })
        }

        function Yg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, ["", " "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.duration)
            })
        }

        function zg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["permanent"]))], null, null)
        }

        function Kg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "div", [["class", "row"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(2, null, ["", "."])), (e()(), Yi(3, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(4, null, ["", ""])), (e()(), Yi(5, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(6, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, Wg)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, jg)), Ml(10, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Yg)), Ml(12, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, zg)), Ml(14, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                e(t, 8, 0, t.context.$implicit.effect >= 0), e(t, 10, 0, t.context.$implicit.effect < 0), e(t, 12, 0, t.context.$implicit.duration > 0), e(t, 14, 0, t.context.$implicit.duration < 0)
            }, function (e, t) {
                var n = t.component;
                e(t, 2, 0, t.context.index + 1), e(t, 4, 0, t.context.$implicit.name), e(t, 6, 0, n.getBuildingName(t.context.$implicit.building))
            })
        }

        function qg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "positive"]], null, null, null, null, null)), (e()(), lo(1, null, ["+", "% "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.effect)
            })
        }

        function Qg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "negative"]], null, null, null, null, null)), (e()(), lo(1, null, ["", "% "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.effect)
            })
        }

        function $g(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, ["", " "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.duration)
            })
        }

        function Zg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["permanent"]))], null, null)
        }

        function Xg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "div", [["class", "row"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(2, null, ["", "."])), (e()(), Yi(3, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(4, null, ["", ""])), (e()(), Yi(5, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(6, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, qg)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Qg)), Ml(10, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, $g)), Ml(12, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Zg)), Ml(14, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                e(t, 8, 0, t.context.$implicit.effect >= 0), e(t, 10, 0, t.context.$implicit.effect < 0), e(t, 12, 0, t.context.$implicit.duration > 0), e(t, 14, 0, t.context.$implicit.duration < 0)
            }, function (e, t) {
                var n = t.component;
                e(t, 2, 0, t.context.index + 1), e(t, 4, 0, t.context.$implicit.name), e(t, 6, 0, n.getTroopName(t.context.$implicit.troop))
            })
        }

        function Jg(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 62, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(4, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 6, "div", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "span", [["class", "label"]], null, null, null, null, null)), (e()(), lo(9, null, ["food: ", ""])), (e()(), Yi(10, 0, null, null, 1, "div", [["class", "slidecontainer"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 0, "input", [["class", "slider"], ["max", "4"], ["min", "1"], ["type", "range"], ["value", "2"]], [[8, "value", 0]], [[null, "change"]], function (e, t, n) {
                var r = !0;
                return "change" === t && (r = !1 !== e.component.changeFoodValue(n) && r), r
            }, null, null)), (e()(), Yi(12, 0, null, null, 0, "input", [["type", "checkbox"]], [[8, "checked", 0]], [[null, "change"]], function (e, t, n) {
                var r = !0;
                return "change" === t && (r = !1 !== e.component.updateFoodNutrition() && r), r
            }, null, null)), (e()(), lo(-1, null, [" show total food nutrition in village tab "])), (e()(), Yi(14, 0, null, null, 6, "div", [], null, null, null, null, null)), (e()(), Yi(15, 0, null, null, 1, "span", [["class", "label"]], null, null, null, null, null)), (e()(), lo(16, null, ["clothes: ", ""])), (e()(), Yi(17, 0, null, null, 1, "div", [["class", "slidecontainer"]], null, null, null, null, null)), (e()(), Yi(18, 0, null, null, 0, "input", [["class", "slider"], ["max", "4"], ["min", "1"], ["type", "range"], ["value", "2"]], [[8, "value", 0]], [[null, "change"]], function (e, t, n) {
                var r = !0;
                return "change" === t && (r = !1 !== e.component.changeClothesValue(n) && r), r
            }, null, null)), (e()(), Yi(19, 0, null, null, 0, "input", [["type", "checkbox"]], [[8, "checked", 0]], [[null, "change"]], function (e, t, n) {
                var r = !0;
                return "change" === t && (r = !1 !== e.component.updateFurClothes() && r), r
            }, null, null)), (e()(), lo(-1, null, [" allow fur when no clothes available "])), (e()(), Yi(21, 0, null, null, 1, "span", [["class", "label"]], null, null, null, null, null)), (e()(), lo(22, null, ["alcohol: ", ""])), (e()(), Yi(23, 0, null, null, 1, "div", [["class", "slidecontainer"]], null, null, null, null, null)), (e()(), Yi(24, 0, null, null, 0, "input", [["class", "slider"], ["max", "4"], ["min", "1"], ["type", "range"], ["value", "1"]], [[8, "value", 0]], [[null, "change"]], function (e, t, n) {
                var r = !0;
                return "change" === t && (r = !1 !== e.component.changeAlcoholValue(n) && r), r
            }, null, null)), (e()(), Yi(25, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Vg)), Ml(27, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(31, 0, null, null, 14, "div", [["id", "buildingEffects"]], null, null, null, null, null)), (e()(), Yi(32, 0, null, null, 10, "div", [["class", "headers"]], null, null, null, null, null)), (e()(), Yi(33, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["#"])), (e()(), Yi(35, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["name"])), (e()(), Yi(37, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["building"])), (e()(), Yi(39, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["effect"])), (e()(), Yi(41, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["duration"])), (e()(), Yi(43, 0, null, null, 2, "div", [["class", "rows"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Kg)), Ml(45, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(46, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(48, 0, null, null, 14, "div", [["id", "armyEffects"]], null, null, null, null, null)), (e()(), Yi(49, 0, null, null, 10, "div", [["class", "headers"]], null, null, null, null, null)), (e()(), Yi(50, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["#"])), (e()(), Yi(52, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["name"])), (e()(), Yi(54, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["building"])), (e()(), Yi(56, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["effect"])), (e()(), Yi(58, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["duration"])), (e()(), Yi(60, 0, null, null, 2, "div", [["class", "rows"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Xg)), Ml(62, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 27, 0, n.isHREnabled()), e(t, 45, 0, n.getBuildingsEffects()), e(t, 62, 0, n.getArmyEffects())
            }, function (e, t) {
                var n = t.component;
                e(t, 9, 0, .5 * n.getRations()), e(t, 11, 0, n.getRations()), e(t, 12, 0, n.getFoodNutrition()), e(t, 16, 0, n.getClothesRations()), e(t, 18, 0, n.getClothesRations()), e(t, 19, 0, n.getFurClothes()), e(t, 22, 0, n.getAlcoholRations()), e(t, 24, 0, n.getAlcoholRations())
            })
        }

        function ev(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-management", [], null, null, null, Jg, Bg)), Ml(1, 114688, null, 0, Gg, [Ug, Hg, Eg], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var tv, nv = al("app-management", Gg, ev, {}, {}, []),
            rv = function () {
                function e() {}
                return e.prototype.onmousemove = function (e) {
                    var t = document.getElementById(this.elementId);
                    if (t) {
                        var n = e.clientX;
                        t.style.top = e.clientY + 20 + "px", t.style.left = n + 20 + "px"
                    }
                }, e
            }(),
            iv = function () {
                function e(e, t, n, r, i, l) {
                    void 0 === l && (l = !1), this.canceled = !1, this.id = e, this.resource = t, this.amount = n, this.cost = r, this.craftingDifficulty = i, this.available = l
                }
                return e.prototype.getResource = function () {
                    return this.resource
                }, e
            }(),
            lv = function () {
                function e(e, t) {
                    this.servicesService = e, this.resourcesService = t, this.recipes = [], e.addService(Nu.RECIPE, this), this.initRecipes()
                }
                return e.prototype.initRecipes = function () {
                    var e = this;
                    this.recipes = [], Object.entries(ns.RECIPES).forEach(function (t) {
                        var n = new Map;
                        t[1].COST.forEach(function (e) {
                            return n.set(e.resource, e.amount)
                        }), e.recipes.push(new iv(Pu[t[0]], t[1].RESOURCE, t[1].AMOUNT ? t[1].AMOUNT : 1, n, t[1].CRAFTING, !1))
                    }), this.recipes.find(function (e) {
                        return e.id === Pu.PLANK
                    }).available = !0, this.recipes.find(function (e) {
                        return e.id === Pu.CUT_STONE
                    }).available = !0, this.recipes.find(function (e) {
                        return e.id === Pu.LEATHER
                    }).available = !0, Hu.production || Object.values(Pu).filter(function (e) {
                        return !isNaN(e)
                    }).forEach(function (t) {
                        return e.enable(t)
                    })
                }, e.prototype.getRecipes = function () {
                    return this.recipes.filter(function (e) {
                        return e.available
                    })
                }, e.prototype.getRecipeById = function (e) {
                    return this.recipes.find(function (t) {
                        return t.id === e
                    })
                }, e.prototype.enable = function (e) {
                    var t = this,
                        n = this.recipes.find(function (t) {
                            return t.id === e
                        });
                    this.resourcesService.makeVisible(n.getResource()), Array.from(n.cost.keys()).forEach(function (e) {
                        return t.resourcesService.makeVisible(e)
                    }), n.available = !0
                }, e.prototype.disable = function (e) {
                    var t = this.recipes.find(function (t) {
                        return t.id === e
                    });
                    this.resourcesService.makeVisible(t.getResource()), t.available = !1
                }, e.prototype.load = function (e) {
                    var t = this;
                    this.initRecipes(), e.recipes.forEach(function (e) {
                        var n = t.recipes.find(function (t) {
                            return t.id === e
                        });
                        n && (n.available = !0)
                    })
                }, e.prototype.save = function () {
                    return {
                        recipes: this.recipes.filter(function (e) {
                            return e.available
                        }).map(function (e) {
                            return e.id
                        })
                    }
                }, e.prototype.reset = function (e, t) {
                    this.initRecipes()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(Cg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            ov = "undefined" != typeof Intl && Intl.v8BreakIterator,
            uv = function () {
                function e(e) {
                    this._platformId = e, this.isBrowser = this._platformId ? this._platformId === Ks : "object" == typeof document && !!document, this.EDGE = this.isBrowser && /(edge)/i.test(navigator.userAgent), this.TRIDENT = this.isBrowser && /(msie|trident)/i.test(navigator.userAgent), this.BLINK = this.isBrowser && !(!window.chrome && !ov) && "undefined" != typeof CSS && !this.EDGE && !this.TRIDENT, this.WEBKIT = this.isBrowser && /AppleWebKit/i.test(navigator.userAgent) && !this.BLINK && !this.EDGE && !this.TRIDENT, this.IOS = this.isBrowser && /iPad|iPhone|iPod/.test(navigator.userAgent) && !("MSStream" in window), this.FIREFOX = this.isBrowser && /(firefox|minefield)/i.test(navigator.userAgent), this.ANDROID = this.isBrowser && /android/i.test(navigator.userAgent) && !this.TRIDENT, this.SAFARI = this.isBrowser && /safari/i.test(navigator.userAgent) && this.WEBKIT
                }
                return e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(kn, 8))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }();

        function sv(e) {
            return function () {
                if (null == tv && "undefined" != typeof window) try {
                    window.addEventListener("test", null, Object.defineProperty({}, "passive", {
                        get: function () {
                            return tv = !0
                        }
                    }))
                } finally {
                    tv = tv || !1
                }
                return tv
            }() ? e : !!e.capture
        }

        function av(e) {
            return null != e && "" + e != "false"
        }
        var cv = sv({
                passive: !1,
                capture: !0
            }),
            pv = function () {
                function e(e, t) {
                    var n = this;
                    this._ngZone = e, this._dropInstances = new Set, this._dragInstances = new Set, this._activeDragInstances = new Set, this._globalListeners = new Map, this.pointerMove = new L, this.pointerUp = new L, this._preventScrollListener = function (e) {
                        n._activeDragInstances.size && e.preventDefault()
                    }, this._document = t
                }
                return e.prototype.registerDropContainer = function (e) {
                    if (!this._dropInstances.has(e)) {
                        if (this.getDropContainer(e.id)) throw Error('Drop instance with id "' + e.id + '" has already been registered.');
                        this._dropInstances.add(e)
                    }
                }, e.prototype.registerDragItem = function (e) {
                    var t = this;
                    this._dragInstances.add(e), 1 === this._dragInstances.size && this._ngZone.runOutsideAngular(function () {
                        t._document.addEventListener("touchmove", t._preventScrollListener, cv)
                    })
                }, e.prototype.removeDropContainer = function (e) {
                    this._dropInstances.delete(e)
                }, e.prototype.removeDragItem = function (e) {
                    this._dragInstances.delete(e), this.stopDragging(e), 0 === this._dragInstances.size && this._document.removeEventListener("touchmove", this._preventScrollListener, cv)
                }, e.prototype.startDragging = function (e, t) {
                    var n = this;
                    if (this._activeDragInstances.add(e), 1 === this._activeDragInstances.size) {
                        var r = t.type.startsWith("touch"),
                            i = r ? "touchend" : "mouseup";
                        this._globalListeners.set(r ? "touchmove" : "mousemove", {
                            handler: function (e) {
                                return n.pointerMove.next(e)
                            },
                            options: cv
                        }).set(i, {
                            handler: function (e) {
                                return n.pointerUp.next(e)
                            },
                            options: !0
                        }), r || this._globalListeners.set("wheel", {
                            handler: this._preventScrollListener,
                            options: cv
                        }), this._ngZone.runOutsideAngular(function () {
                            n._globalListeners.forEach(function (e, t) {
                                n._document.addEventListener(t, e.handler, e.options)
                            })
                        })
                    }
                }, e.prototype.stopDragging = function (e) {
                    this._activeDragInstances.delete(e), 0 === this._activeDragInstances.size && this._clearGlobalListeners()
                }, e.prototype.isDragging = function (e) {
                    return this._activeDragInstances.has(e)
                }, e.prototype.getDropContainer = function (e) {
                    return Array.from(this._dropInstances).find(function (t) {
                        return t.id === e
                    })
                }, e.prototype.ngOnDestroy = function () {
                    var e = this;
                    this._dragInstances.forEach(function (t) {
                        return e.removeDragItem(t)
                    }), this._dropInstances.forEach(function (t) {
                        return e.removeDropContainer(t)
                    }), this._clearGlobalListeners(), this.pointerMove.complete(), this.pointerUp.complete()
                }, e.prototype._clearGlobalListeners = function () {
                    var e = this;
                    this._globalListeners.forEach(function (t, n) {
                        e._document.removeEventListener(n, t.handler, t.options)
                    }), this._globalListeners.clear()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Zn), ze(zs))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            hv = new ye("CDK_DRAG_PARENT");

        function dv(e, t) {
            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
            return e
        }
        var fv = new ye("CDK_DROP_LIST_CONTAINER");

        function gv(e) {
            var t = e.toLowerCase().indexOf("ms") > -1 ? 1 : 1e3;
            return parseFloat(e) * t
        }

        function vv(e, t) {
            return e.getPropertyValue(t).split(",").map(function (e) {
                return e.trim()
            })
        }
        var mv = new ye("CDK_DRAG_CONFIG", {
                providedIn: "root",
                factory: function () {
                    return {
                        dragStartThreshold: 5,
                        pointerDirectionChangeThreshold: 5
                    }
                }
            }),
            yv = sv({
                passive: !0
            }),
            Sv = sv({
                passive: !1
            }),
            Ev = function () {
                function e(e, t, n, r, i, l, o, u, s) {
                    var a = this;
                    this.element = e, this.dropContainer = t, this._ngZone = r, this._viewContainerRef = i, this._viewportRuler = l, this._dragDropRegistry = o, this._config = u, this._dir = s, this._passiveTransform = {
                        x: 0,
                        y: 0
                    }, this._activeTransform = {
                        x: 0,
                        y: 0
                    }, this._moveEvents = new L, this._moveEventSubscriptions = 0, this._pointerMoveSubscription = v.EMPTY, this._pointerUpSubscription = v.EMPTY, this._rootElementInitSubscription = v.EMPTY, this._disabled = !1, this.started = new pn, this.ended = new pn, this.entered = new pn, this.exited = new pn, this.dropped = new pn, this.moved = w.create(function (e) {
                        var t = a._moveEvents.subscribe(e);
                        return a._moveEventSubscriptions++,
                            function () {
                                t.unsubscribe(), a._moveEventSubscriptions--
                            }
                    }), this._pointerDown = function (e) {
                        var t = a.getChildHandles();
                        if (t.length) {
                            var n = t.find(function (t) {
                                var n = t.element.nativeElement,
                                    r = e.target;
                                return !!r && (r === n || n.contains(r))
                            });
                            !n || n.disabled || a.disabled || a._initializeDragSequence(n.element.nativeElement, e)
                        } else a.disabled || a._initializeDragSequence(a._rootElement, e)
                    }, this._pointerMove = function (e) {
                        var t = a._getConstrainedPointerPosition(e);
                        if (a._hasStartedDragging) {
                            if (a._hasMoved = !0, e.preventDefault(), a._updatePointerDirectionDelta(t), a.dropContainer) a._updateActiveDropContainer(t);
                            else {
                                var n = a._activeTransform;
                                n.x = t.x - a._pickupPositionOnPage.x + a._passiveTransform.x, n.y = t.y - a._pickupPositionOnPage.y + a._passiveTransform.y;
                                var r = Ov(n.x, n.y);
                                a._rootElement.style.transform = a._initialTransform ? a._initialTransform + " " + r : r, "undefined" != typeof SVGElement && a._rootElement instanceof SVGElement && a._rootElement.setAttribute("transform", "translate(" + n.x + " " + n.y + ")")
                            }
                            a._moveEventSubscriptions > 0 && a._ngZone.run(function () {
                                a._moveEvents.next({
                                    source: a,
                                    pointerPosition: t,
                                    event: e,
                                    delta: a._pointerDirectionDelta
                                })
                            })
                        } else Math.abs(t.x - a._pickupPositionOnPage.x) + Math.abs(t.y - a._pickupPositionOnPage.y) >= a._config.dragStartThreshold && (a._hasStartedDragging = !0, a._ngZone.run(function () {
                            return a._startDragSequence(e)
                        }))
                    }, this._pointerUp = function () {
                        if (a._isDragging() && (a._removeSubscriptions(), a._dragDropRegistry.stopDragging(a), a._hasStartedDragging)) return a.dropContainer ? void a._animatePreviewToPlaceholder().then(function () {
                            a._cleanupDragArtifacts(), a._dragDropRegistry.stopDragging(a)
                        }) : (a._passiveTransform.x = a._activeTransform.x, a._passiveTransform.y = a._activeTransform.y, a._ngZone.run(function () {
                            return a.ended.emit({
                                source: a
                            })
                        }), void a._dragDropRegistry.stopDragging(a))
                    }, this._document = n, o.registerDragItem(this)
                }
                return Object.defineProperty(e.prototype, "disabled", {
                    get: function () {
                        return this._disabled || this.dropContainer && this.dropContainer.disabled
                    },
                    set: function (e) {
                        this._disabled = av(e)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.getPlaceholderElement = function () {
                    return this._placeholder
                }, e.prototype.getRootElement = function () {
                    return this._rootElement
                }, e.prototype.reset = function () {
                    this._rootElement.style.transform = "", this._activeTransform = {
                        x: 0,
                        y: 0
                    }, this._passiveTransform = {
                        x: 0,
                        y: 0
                    }
                }, e.prototype.ngAfterViewInit = function () {
                    var e = this;
                    this._rootElementInitSubscription = this._ngZone.onStable.asObservable().pipe(Ia(1)).subscribe(function () {
                        var t = e._rootElement = e._getRootElement();
                        t.addEventListener("mousedown", e._pointerDown, Sv), t.addEventListener("touchstart", e._pointerDown, yv), e._handles.changes.pipe(Fa(null)).subscribe(function () {
                            return n = t, r = e.getChildHandles().length > 0, void dv(n.style, {
                                touchAction: r ? "" : "none",
                                webkitUserDrag: r ? "" : "none",
                                webkitTapHighlightColor: r ? "" : "transparent",
                                userSelect: i = r ? "" : "none",
                                msUserSelect: i,
                                webkitUserSelect: i,
                                MozUserSelect: i
                            });
                            var n, r, i
                        })
                    })
                }, e.prototype.ngOnDestroy = function () {
                    this._rootElement && (this._rootElement.removeEventListener("mousedown", this._pointerDown, Sv), this._rootElement.removeEventListener("touchstart", this._pointerDown, yv), this._isDragging() && this._removeElement(this._rootElement)), this._rootElementInitSubscription.unsubscribe(), this._destroyPreview(), this._destroyPlaceholder(), this._nextSibling = null, this._dragDropRegistry.removeDragItem(this), this._removeSubscriptions(), this._moveEvents.complete()
                }, e.prototype._isDragging = function () {
                    return this._dragDropRegistry.isDragging(this)
                }, e.prototype.getChildHandles = function () {
                    var e = this;
                    return this._handles.filter(function (t) {
                        return t._parentDrag === e
                    })
                }, e.prototype._initializeDragSequence = function (e, t) {
                    t.stopPropagation();
                    var n = this._isDragging(),
                        r = this._isTouchEvent(t),
                        i = !r && 0 !== t.button,
                        l = !r && this._lastTouchEventTime && this._lastTouchEventTime + 800 > Date.now();
                    if (t.target && t.target.draggable && "mousedown" === t.type && t.preventDefault(), !(n || i || l)) {
                        null == this._initialTransform && (this._initialTransform = this._rootElement.style.transform || ""), this._hasStartedDragging = this._hasMoved = !1, this._initialContainer = this.dropContainer, this._pointerMoveSubscription = this._dragDropRegistry.pointerMove.subscribe(this._pointerMove), this._pointerUpSubscription = this._dragDropRegistry.pointerUp.subscribe(this._pointerUp), this._scrollPosition = this._viewportRuler.getViewportScrollPosition(), this._pickupPositionInElement = this._previewTemplate ? {
                            x: 0,
                            y: 0
                        } : this._getPointerPositionInElement(e, t);
                        var o = this._pickupPositionOnPage = this._getPointerPositionOnPage(t);
                        this._pointerDirectionDelta = {
                            x: 0,
                            y: 0
                        }, this._pointerPositionAtLastDirectionChange = {
                            x: o.x,
                            y: o.y
                        }, this._dragDropRegistry.startDragging(this, t)
                    }
                }, e.prototype._startDragSequence = function (e) {
                    if (this.started.emit({
                            source: this
                        }), this._isTouchEvent(e) && (this._lastTouchEventTime = Date.now()), this.dropContainer) {
                        var t = this._rootElement;
                        this._nextSibling = t.nextSibling;
                        var n = this._preview = this._createPreviewElement(),
                            r = this._placeholder = this._createPlaceholderElement();
                        t.style.display = "none", this._document.body.appendChild(t.parentNode.replaceChild(r, t)), this._document.body.appendChild(n), this.dropContainer.start()
                    }
                }, e.prototype._cleanupDragArtifacts = function () {
                    var e = this;
                    this._rootElement.style.display = "", this._nextSibling ? this._nextSibling.parentNode.insertBefore(this._rootElement, this._nextSibling) : this._initialContainer.element.nativeElement.appendChild(this._rootElement), this._destroyPreview(), this._destroyPlaceholder(), this._ngZone.run(function () {
                        var t = e.dropContainer.getItemIndex(e);
                        e.ended.emit({
                            source: e
                        }), e.dropped.emit({
                            item: e,
                            currentIndex: t,
                            previousIndex: e._initialContainer.getItemIndex(e),
                            container: e.dropContainer,
                            previousContainer: e._initialContainer
                        }), e.dropContainer.drop(e, t, e._initialContainer), e.dropContainer = e._initialContainer
                    })
                }, e.prototype._updateActiveDropContainer = function (e) {
                    var t = this,
                        n = e.x,
                        r = e.y,
                        i = this.dropContainer._getSiblingContainerFromPosition(this, n, r);
                    !i && this.dropContainer !== this._initialContainer && this._initialContainer._canReturnItem(n, r) && (i = this._initialContainer), i && this._ngZone.run(function () {
                        t.exited.emit({
                            item: t,
                            container: t.dropContainer
                        }), t.dropContainer.exit(t), t.entered.emit({
                            item: t,
                            container: i
                        }), t.dropContainer = i, t.dropContainer.enter(t, n, r)
                    }), this.dropContainer._sortItem(this, n, r, this._pointerDirectionDelta), this._preview.style.transform = Ov(n - this._pickupPositionInElement.x, r - this._pickupPositionInElement.y)
                }, e.prototype._createPreviewElement = function () {
                    var e;
                    if (this._previewTemplate) {
                        var t = this._viewContainerRef.createEmbeddedView(this._previewTemplate.templateRef, this._previewTemplate.data);
                        e = t.rootNodes[0], this._previewRef = t, e.style.transform = Ov(this._pickupPositionOnPage.x, this._pickupPositionOnPage.y)
                    } else {
                        var n = this._rootElement,
                            r = n.getBoundingClientRect();
                        (e = bv(n)).style.width = r.width + "px", e.style.height = r.height + "px", e.style.transform = Ov(r.left, r.top)
                    }
                    return dv(e.style, {
                        position: "fixed",
                        top: "0",
                        left: "0",
                        zIndex: "1000"
                    }), e.classList.add("cdk-drag-preview"), e.setAttribute("dir", this._dir ? this._dir.value : "ltr"), e
                }, e.prototype._createPlaceholderElement = function () {
                    var e;
                    return this._placeholderTemplate ? (this._placeholderRef = this._viewContainerRef.createEmbeddedView(this._placeholderTemplate.templateRef, this._placeholderTemplate.data), e = this._placeholderRef.rootNodes[0]) : e = bv(this._rootElement), e.classList.add("cdk-drag-placeholder"), e
                }, e.prototype._getPointerPositionInElement = function (e, t) {
                    var n = this._rootElement.getBoundingClientRect(),
                        r = e === this._rootElement ? null : e,
                        i = r ? r.getBoundingClientRect() : n,
                        l = this._isTouchEvent(t) ? t.targetTouches[0] : t;
                    return {
                        x: i.left - n.left + (l.pageX - i.left - this._scrollPosition.left),
                        y: i.top - n.top + (l.pageY - i.top - this._scrollPosition.top)
                    }
                }, e.prototype._animatePreviewToPlaceholder = function () {
                    var e = this;
                    if (!this._hasMoved) return Promise.resolve();
                    var t = this._placeholder.getBoundingClientRect();
                    this._preview.classList.add("cdk-drag-animating"), this._preview.style.transform = Ov(t.left, t.top);
                    var n = function (e) {
                        var t = getComputedStyle(e),
                            n = vv(t, "transition-property"),
                            r = n.find(function (e) {
                                return "transform" === e || "all" === e
                            });
                        if (!r) return 0;
                        var i = n.indexOf(r),
                            l = vv(t, "transition-duration"),
                            o = vv(t, "transition-delay");
                        return gv(l[i]) + gv(o[i])
                    }(this._preview);
                    return 0 === n ? Promise.resolve() : this._ngZone.runOutsideAngular(function () {
                        return new Promise(function (t) {
                            var r = function (n) {
                                    (!n || n.target === e._preview && "transform" === n.propertyName) && (e._preview.removeEventListener("transitionend", r), t(), clearTimeout(i))
                                },
                                i = setTimeout(r, 1.5 * n);
                            e._preview.addEventListener("transitionend", r)
                        })
                    })
                }, e.prototype._removeElement = function (e) {
                    e && e.parentNode && e.parentNode.removeChild(e)
                }, e.prototype._getPointerPositionOnPage = function (e) {
                    var t = this._isTouchEvent(e) ? e.touches[0] : e;
                    return {
                        x: t.pageX - this._scrollPosition.left,
                        y: t.pageY - this._scrollPosition.top
                    }
                }, e.prototype._getConstrainedPointerPosition = function (e) {
                    var t = this._getPointerPositionOnPage(e),
                        n = this.dropContainer ? this.dropContainer.lockAxis : null;
                    return "x" === this.lockAxis || "x" === n ? t.y = this._pickupPositionOnPage.y : "y" !== this.lockAxis && "y" !== n || (t.x = this._pickupPositionOnPage.x), t
                }, e.prototype._isTouchEvent = function (e) {
                    return e.type.startsWith("touch")
                }, e.prototype._destroyPreview = function () {
                    this._preview && this._removeElement(this._preview), this._previewRef && this._previewRef.destroy(), this._preview = this._previewRef = null
                }, e.prototype._destroyPlaceholder = function () {
                    this._placeholder && this._removeElement(this._placeholder), this._placeholderRef && this._placeholderRef.destroy(), this._placeholder = this._placeholderRef = null
                }, e.prototype._updatePointerDirectionDelta = function (e) {
                    var t = e.x,
                        n = e.y,
                        r = this._pointerDirectionDelta,
                        i = this._pointerPositionAtLastDirectionChange,
                        l = Math.abs(t - i.x),
                        o = Math.abs(n - i.y);
                    return l > this._config.pointerDirectionChangeThreshold && (r.x = t > i.x ? 1 : -1, i.x = t), o > this._config.pointerDirectionChangeThreshold && (r.y = n > i.y ? 1 : -1, i.y = n), r
                }, e.prototype._getRootElement = function () {
                    if (this.rootElementSelector)
                        for (var e = this.rootElementSelector, t = this.element.nativeElement.parentElement; t;) {
                            if (t.matches ? t.matches(e) : t.msMatchesSelector(e)) return t;
                            t = t.parentElement
                        }
                    return this.element.nativeElement
                }, e.prototype._removeSubscriptions = function () {
                    this._pointerMoveSubscription.unsubscribe(), this._pointerUpSubscription.unsubscribe()
                }, e
            }();

        function Ov(e, t) {
            return "translate3d(" + Math.round(e) + "px, " + Math.round(t) + "px, 0)"
        }

        function bv(e) {
            var t = e.cloneNode(!0);
            return t.removeAttribute("id"), t
        }

        function Tv(e, t, n) {
            var r = Rv(t, e.length - 1),
                i = Rv(n, e.length - 1);
            if (r !== i) {
                for (var l = e[r], o = i < r ? -1 : 1, u = r; u !== i; u += o) e[u] = e[u + o];
                e[i] = l
            }
        }

        function Rv(e, t) {
            return Math.max(0, Math.min(t, e))
        }
        var Cv = function () {
                function e() {
                    this._items = new Set
                }
                return e.prototype.ngOnDestroy = function () {
                    this._items.clear()
                }, e
            }(),
            _v = 0,
            Iv = function () {
                function e(e, t, n, r, i) {
                    this.element = e, this._dragDropRegistry = t, this._changeDetectorRef = n, this._dir = r, this._group = i, this.connectedTo = [], this.orientation = "vertical", this.id = "cdk-drop-list-" + _v++, this._disabled = !1, this.enterPredicate = function () {
                        return !0
                    }, this.dropped = new pn, this.entered = new pn, this.exited = new pn, this.sorted = new pn, this._dragging = !1, this._positionCache = {
                        items: [],
                        siblings: [],
                        self: {}
                    }, this._previousSwap = {
                        drag: null,
                        delta: 0
                    }
                }
                return Object.defineProperty(e.prototype, "disabled", {
                    get: function () {
                        return this._disabled
                    },
                    set: function (e) {
                        this._disabled = av(e)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.ngOnInit = function () {
                    this._dragDropRegistry.registerDropContainer(this), this._group && this._group._items.add(this)
                }, e.prototype.ngOnDestroy = function () {
                    this._dragDropRegistry.removeDropContainer(this), this._group && this._group._items.delete(this)
                }, e.prototype.start = function () {
                    this._dragging = !0, this._activeDraggables = this._draggables.toArray(), this._cachePositions(), this._changeDetectorRef.markForCheck()
                }, e.prototype.drop = function (e, t, n) {
                    this._reset(), this.dropped.emit({
                        item: e,
                        currentIndex: t,
                        previousIndex: n.getItemIndex(e),
                        container: this,
                        previousContainer: n
                    })
                }, e.prototype.enter = function (e, t, n) {
                    this.entered.emit({
                        item: e,
                        container: this
                    }), this.start();
                    var r = this._getItemIndexFromPointerPosition(e, t, n),
                        i = this._activeDraggables.indexOf(e),
                        l = this._activeDraggables[r],
                        o = e.getPlaceholderElement();
                    if (i > -1 && this._activeDraggables.splice(i, 1), l && !this._dragDropRegistry.isDragging(l)) {
                        var u = l.getRootElement();
                        u.parentElement.insertBefore(o, u), this._activeDraggables.splice(r, 0, e)
                    } else this.element.nativeElement.appendChild(o), this._activeDraggables.push(e);
                    o.style.transform = "", this._cachePositions()
                }, e.prototype.exit = function (e) {
                    this._reset(), this.exited.emit({
                        item: e,
                        container: this
                    })
                }, e.prototype.getItemIndex = function (e) {
                    return this._dragging ? Av("horizontal" === this.orientation && this._dir && "rtl" === this._dir.value ? this._positionCache.items.slice().reverse() : this._positionCache.items, function (t) {
                        return t.drag === e
                    }) : this._draggables.toArray().indexOf(e)
                }, e.prototype._sortItem = function (e, t, n, r) {
                    var i = this;
                    if (this._isPointerNearDropContainer(t, n)) {
                        var l = this._positionCache.items,
                            o = this._getItemIndexFromPointerPosition(e, t, n, r);
                        if (!(-1 === o && l.length > 0)) {
                            var u = "horizontal" === this.orientation,
                                s = Av(l, function (t) {
                                    return t.drag === e
                                }),
                                a = l[o],
                                c = l[s].clientRect,
                                p = a.clientRect,
                                h = s > o ? 1 : -1;
                            this._previousSwap.drag = a.drag, this._previousSwap.delta = u ? r.x : r.y;
                            var d = this._getItemOffsetPx(c, p, h),
                                f = this._getSiblingOffsetPx(s, l, h),
                                g = l.slice();
                            Tv(l, s, o), this.sorted.emit({
                                previousIndex: s,
                                currentIndex: o,
                                container: this,
                                item: e
                            }), l.forEach(function (t, n) {
                                if (g[n] !== t) {
                                    var r = t.drag === e,
                                        l = r ? d : f,
                                        o = r ? e.getPlaceholderElement() : t.drag.getRootElement();
                                    t.offset += l, u ? (o.style.transform = "translate3d(" + Math.round(t.offset) + "px, 0, 0)", i._adjustClientRect(t.clientRect, 0, l)) : (o.style.transform = "translate3d(0, " + Math.round(t.offset) + "px, 0)", i._adjustClientRect(t.clientRect, l, 0))
                                }
                            })
                        }
                    }
                }, e.prototype._getSiblingContainerFromPosition = function (e, t, n) {
                    var r = this._positionCache.siblings.find(function (e) {
                        return wv(e.clientRect, t, n)
                    });
                    return r && r.drop.enterPredicate(e, r.drop) ? r.drop : null
                }, e.prototype._canReturnItem = function (e, t) {
                    return wv(this._positionCache.self, e, t)
                }, e.prototype._cachePositions = function () {
                    var e = this,
                        t = "horizontal" === this.orientation;
                    this._positionCache.self = this.element.nativeElement.getBoundingClientRect(), this._positionCache.items = this._activeDraggables.map(function (t) {
                        var n = (e._dragDropRegistry.isDragging(t) ? t.getPlaceholderElement() : t.getRootElement()).getBoundingClientRect();
                        return {
                            drag: t,
                            offset: 0,
                            clientRect: {
                                top: n.top,
                                right: n.right,
                                bottom: n.bottom,
                                left: n.left,
                                width: n.width,
                                height: n.height
                            }
                        }
                    }).sort(function (e, n) {
                        return t ? e.clientRect.left - n.clientRect.left : e.clientRect.top - n.clientRect.top
                    }), this._positionCache.siblings = this._getConnectedLists().map(function (e) {
                        return {
                            drop: e,
                            clientRect: e.element.nativeElement.getBoundingClientRect()
                        }
                    })
                }, e.prototype._reset = function () {
                    this._dragging = !1, this._activeDraggables.forEach(function (e) {
                        return e.getRootElement().style.transform = ""
                    }), this._activeDraggables = [], this._positionCache.items = [], this._positionCache.siblings = [], this._previousSwap.drag = null, this._previousSwap.delta = 0
                }, e.prototype._adjustClientRect = function (e, t, n) {
                    e.top += t, e.bottom = e.top + e.height, e.left += n, e.right = e.left + e.width
                }, e.prototype._getItemIndexFromPointerPosition = function (e, t, n, r) {
                    var i = this,
                        l = "horizontal" === this.orientation;
                    return Av(this._positionCache.items, function (o, u, s) {
                        var a = o.drag,
                            c = o.clientRect;
                        return a === e ? s.length < 2 : (!r || a !== i._previousSwap.drag || (l ? r.x : r.y) !== i._previousSwap.delta) && (l ? t >= Math.floor(c.left) && t <= Math.floor(c.right) : n >= Math.floor(c.top) && n <= Math.floor(c.bottom))
                    })
                }, e.prototype._isPointerNearDropContainer = function (e, t) {
                    var n = this._positionCache.self,
                        r = .05 * n.width,
                        i = .05 * n.height;
                    return t > n.top - i && t < n.bottom + i && e > n.left - r && e < n.right + r
                }, e.prototype._getItemOffsetPx = function (e, t, n) {
                    var r = "horizontal" === this.orientation,
                        i = r ? t.left - e.left : t.top - e.top;
                    return -1 === n && (i += r ? t.width - e.width : t.height - e.height), i
                }, e.prototype._getSiblingOffsetPx = function (e, t, n) {
                    var r = "horizontal" === this.orientation,
                        i = t[e].clientRect,
                        l = t[e + -1 * n],
                        o = i[r ? "width" : "height"] * n;
                    if (l) {
                        var u = r ? "left" : "top",
                            s = r ? "right" : "bottom"; - 1 === n ? o -= l.clientRect[u] - i[s] : o += i[u] - l.clientRect[s]
                    }
                    return o
                }, e.prototype._getConnectedLists = function () {
                    var e, t = this,
                        n = (e = this.connectedTo, Array.isArray(e) ? e : [e]).map(function (e) {
                            return "string" == typeof e ? t._dragDropRegistry.getDropContainer(e) : e
                        });
                    return this._group && this._group._items.forEach(function (e) {
                        -1 === n.indexOf(e) && n.push(e)
                    }), n.filter(function (e) {
                        return e && e !== t
                    })
                }, e
            }();

        function Av(e, t) {
            for (var n = 0; n < e.length; n++)
                if (t(e[n], n, e)) return n;
            return -1
        }

        function wv(e, t, n) {
            return n >= e.top && n <= e.bottom && t >= e.left && t <= e.right
        }
        var Nv = function () {
                return function () {}
            }(),
            Pv = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.SELECTED = 1] = "SELECTED", e[e.UNTIL_X = 2] = "UNTIL_X", e[e.CONTINUOUS = 3] = "CONTINUOUS", e
            }({}),
            Dv = function () {
                function e(e, t, n, r) {
                    this.resourcesService = e, this.servicesService = t, this.recipeService = n, this.modalService = r, this.recipeUpdate = new L, this.queue = [], this.id = 1, this.queueSize = ns.START_QUEUE_SIZE, t.addService(Nu.CRAFTING, this)
                }
                return e.prototype.craft = function (e, t, n) {
                    this.queue.length >= this.queueSize ? this.modalService.info("Order queue is full") : this.queue.push({
                        id: this.nextId(),
                        recipe: e,
                        amount: t,
                        type: n
                    })
                }, e.prototype.getQueue = function () {
                    return this.queue
                }, e.prototype.getOrder = function () {
                    var e = this,
                        t = this.queue.find(function (t) {
                            if (t.type === Pv.SELECTED && t.amount > 0 && e.resourcesService.hasResources(t.recipe.cost)) return !0;
                            if (t.type === Pv.UNTIL_X && e.resourcesService.hasResources(t.recipe.cost)) {
                                var n = 0;
                                return e.servicesService.getService(Nu.VILLAGE).buildings.filter(function (e) {
                                    return e.getBuildingType() === Ou.WORKSHOP
                                }).forEach(function (e) {
                                    e.getRecipe() && e.getRecipe().id === t.recipe.id && (n += t.recipe.amount)
                                }), e.resourcesService.getResource(t.recipe.resource).amount + n < t.amount
                            }
                            if (t.type === Pv.CONTINUOUS && e.resourcesService.hasResources(t.recipe.cost)) {
                                var r = 0;
                                e.servicesService.getService(Nu.VILLAGE).buildings.filter(function (e) {
                                    return e.getBuildingType() === Ou.WORKSHOP
                                }).forEach(function (e) {
                                    e.getRecipe() && e.getRecipe().id === t.recipe.id && (r += t.recipe.amount)
                                });
                                var i = e.resourcesService.getResource(t.recipe.resource);
                                return i.amount + r < i.limit
                            }
                        });
                    return t ? (this.resourcesService.decreaseResources(t.recipe.cost), t.type === Pv.SELECTED && (t.amount -= 1), this.queue = this.queue.filter(function (e) {
                        return e.type !== Pv.SELECTED || e.amount > 0
                    }), t.recipe) : null
                }, e.prototype.load = function (e) {
                    var t = this;
                    this.queue = [], Array.from(e.queue).forEach(function (e) {
                        t.queue.push({
                            id: t.nextId(),
                            recipe: t.recipeService.getRecipeById(e.recipeId),
                            amount: e.amount,
                            type: e.type
                        })
                    }), this.queueSize = e.queueSize
                }, e.prototype.save = function () {
                    return {
                        queue: this.queue.map(function (e) {
                            return {
                                recipeId: e.recipe.id,
                                amount: e.amount,
                                type: e.type
                            }
                        }),
                        queueSize: this.queueSize
                    }
                }, e.prototype.reset = function (e, t) {
                    this.queue = [], this.id = 1, this.queueSize = ns.START_QUEUE_SIZE
                }, e.prototype.registerForUpdate = function () {
                    return this.recipeUpdate.asObservable()
                }, e.prototype.cancel = function (e, t) {
                    var n = this;
                    void 0 === t && (t = !1);
                    var r = this.queue.find(function (t) {
                        return t.id === e
                    });
                    if (r && !t) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to cancel crafting " + Au.prepareResourceName(r.recipe.resource) + "?");
                        var i = this.modalService.registerForConfirmation().subscribe(function (t) {
                            t && (n.queue = n.queue.filter(function (t) {
                                return t.id !== e
                            }), n.recipeUpdate.next()), i.unsubscribe()
                        })
                    } else r && t && (this.queue = this.queue.filter(function (t) {
                        return t.id !== e
                    }), this.recipeUpdate.next())
                }, e.prototype.nextId = function () {
                    var e = this.id;
                    return this.id++, e
                }, e.prototype.moveRecipeInQueue = function (e) {
                    Tv(this.queue, e.previousIndex, e.currentIndex)
                }, e.prototype.getQueueMaxSize = function () {
                    return this.queueSize
                }, e.prototype.increaseQueueSize = function (e) {
                    this.queueSize += e
                }, e.prototype.filterQueue = function (e) {
                    var t = this;
                    this.queue.forEach(function (n) {
                        e.includes(n.recipe.id) && t.cancel(n.id, !0)
                    })
                }, e.prototype.decreaseQueueSize = function (e) {
                    this.queueSize -= e
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Cg), ze(pg), ze(lv), ze(yg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Mv = function () {
                function e(e, t) {
                    this.craftingService = e, this.resourcesService = t, this.id = Math.random(), this.progress = 0, this.amount = 1, this.type = Pv.NONE, this.paid = !1, this.craftingTypes = Pv
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.updateSubscription = this.craftingService.registerForUpdate().subscribe(function () {
                        e.progressRef && (e.progressRef.nativeElement.style.width = e.progress / e.recipe.craftingDifficulty * 100 + "%")
                    })
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.ngAfterViewInit = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.progress / this.recipe.craftingDifficulty * 100 + "%")
                }, e.prototype.cancel = function () {
                    null !== this.id && this.craftingService.cancel(this.id)
                }, e.prototype.getCost = function () {
                    return this.recipe.cost
                }, e.prototype.isAvailable = function () {
                    for (var e = 0, t = Array.from(this.recipe.cost); e < t.length; e++) {
                        var n = t[e];
                        if (0 !== this.resourcesService.hasResource(n[0], n[1], !0)) return !1
                    }
                    return !0
                }, e.prototype.checkResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getResourceAmount = function () {
                    return this.resourcesService.getResource(this.recipe.resource).amount
                }, e
            }(),
            kv = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.costTitle[_ngcontent-%COMP%]{text-align:left}.missing[_ngcontent-%COMP%]{color:#8b0000}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:160px}.craftingTitle[_ngcontent-%COMP%]{text-align:left}.type[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-left:3px}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function Lv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.component.amount)
            })
        }

        function xv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.getResourceAmount(), n.amount)
            })
        }

        function Fv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(-1, null, ["\u221e"]))], null, null)
        }

        function Uv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "craftingTitle"]], null, null, null, null, null)), (e()(), lo(1, null, ["Crafted: ", ""]))], null, function (e, t) {
                e(t, 1, 0, t.component.recipe.amount)
            })
        }

        function Hv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function Gv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "missing"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function Bv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Hv)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Gv)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(6, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.checkResource(t.context.$implicit)), e(t, 4, 0, !n.checkResource(t.context.$implicit)), e(t, 6, 0, n.getResourceName(t.context.$implicit.key), "resources")
            }, null)
        }

        function Vv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 24, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.cancel() && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, [[1, 0], ["progressId", 1]], null, 0, "div", [["id", "progressId"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 8, "div", [["id", "text"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Lv)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, xv)), Ml(7, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Fv)), Ml(9, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(10, null, [" ", " "])), no(11, 1), (e()(), Yi(12, 0, null, null, 12, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(13, null, [" ", " "])), no(14, 1), (e()(), Yi(15, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(16, 0, null, null, 1, "div", [["class", "craftingTitle"]], null, null, null, null, null)), (e()(), lo(17, null, ["Difficulty: ", ""])), (e()(), ji(16777216, null, null, 1, null, Uv)), Ml(19, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(20, 0, null, null, 1, "div", [["class", "costTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), ji(16777216, null, null, 2, null, Bv)), Ml(23, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr])], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.id), e(t, 5, 0, n.type === n.craftingTypes.SELECTED), e(t, 7, 0, n.type === n.craftingTypes.UNTIL_X), e(t, 9, 0, n.type === n.craftingTypes.CONTINUOUS), e(t, 19, 0, n.recipe.amount > 1), e(t, 23, 0, hi(t, 23, 0, El(t, 24).transform(n.getCost())))
            }, function (e, t) {
                var n = t.component,
                    r = hi(t, 10, 0, e(t, 11, 0, El(t.parent, 0), n.getResourceName(n.recipe.getResource())));
                e(t, 10, 0, r), e(t, 12, 0, Vi(1, "", n.id, ""));
                var i = hi(t, 13, 0, e(t, 14, 0, El(t.parent, 0), n.getResourceName(n.recipe.resource)));
                e(t, 13, 0, i), e(t, 17, 0, n.recipe.craftingDifficulty)
            })
        }

        function Wv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.component.amount)
            })
        }

        function jv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.getResourceAmount(), n.amount)
            })
        }

        function Yv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "type"]], null, null, null, null, null)), (e()(), lo(-1, null, ["\u221e"]))], null, null)
        }

        function zv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "craftingTitle"]], null, null, null, null, null)), (e()(), lo(1, null, ["Crafted: ", ""]))], null, function (e, t) {
                e(t, 1, 0, t.component.recipe.amount)
            })
        }

        function Kv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function qv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "missing"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function Qv(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Kv)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, qv)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(6, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.checkResource(t.context.$implicit)), e(t, 4, 0, !n.checkResource(t.context.$implicit)), e(t, 6, 0, n.getResourceName(t.context.$implicit.key), "resources")
            }, null)
        }

        function $v(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 23, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapperNotAvailable"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.cancel() && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 8, "div", [["id", "titleGrey"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Wv)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, jv)), Ml(6, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Yv)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(9, null, [" ", " "])), no(10, 1), (e()(), Yi(11, 0, null, null, 12, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(12, null, [" ", " "])), no(13, 1), (e()(), Yi(14, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(15, 0, null, null, 1, "div", [["class", "craftingTitle"]], null, null, null, null, null)), (e()(), lo(16, null, ["Difficulty: ", ""])), (e()(), ji(16777216, null, null, 1, null, zv)), Ml(18, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(19, 0, null, null, 1, "div", [["class", "costTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), ji(16777216, null, null, 2, null, Qv)), Ml(22, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr])], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.id), e(t, 4, 0, n.type === n.craftingTypes.SELECTED), e(t, 6, 0, n.type === n.craftingTypes.UNTIL_X), e(t, 8, 0, n.type === n.craftingTypes.CONTINUOUS), e(t, 18, 0, n.recipe.amount > 1), e(t, 22, 0, hi(t, 22, 0, El(t, 23).transform(n.getCost())))
            }, function (e, t) {
                var n = t.component,
                    r = hi(t, 9, 0, e(t, 10, 0, El(t.parent, 0), n.getResourceName(n.recipe.getResource())));
                e(t, 9, 0, r), e(t, 11, 0, Vi(1, "", n.id, ""));
                var i = hi(t, 12, 0, e(t, 13, 0, El(t.parent, 0), n.getResourceName(n.recipe.resource)));
                e(t, 12, 0, i), e(t, 16, 0, n.recipe.craftingDifficulty)
            })
        }

        function Zv(e) {
            return so(0, [kl(0, Bs, []), $l(671088640, 1, {
                progressRef: 0
            }), (e()(), ji(16777216, null, null, 1, null, Vv)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, $v)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.isAvailable()), e(t, 5, 0, !n.isAvailable())
            }, null)
        }

        function Xv(e, t, n, r) {
            return d(n) && (r = n, n = void 0), r ? Xv(e, t, n).pipe(K(function (e) {
                return p(e) ? r.apply(void 0, e) : r(e)
            })) : new w(function (r) {
                ! function e(t, n, r, i, l) {
                    var o;
                    if (function (e) {
                            return e && "function" == typeof e.addEventListener && "function" == typeof e.removeEventListener
                        }(t)) {
                        var u = t;
                        t.addEventListener(n, r, l), o = function () {
                            return u.removeEventListener(n, r, l)
                        }
                    } else if (function (e) {
                            return e && "function" == typeof e.on && "function" == typeof e.off
                        }(t)) {
                        var s = t;
                        t.on(n, r), o = function () {
                            return s.off(n, r)
                        }
                    } else if (function (e) {
                            return e && "function" == typeof e.addListener && "function" == typeof e.removeListener
                        }(t)) {
                        var a = t;
                        t.addListener(n, r), o = function () {
                            return a.removeListener(n, r)
                        }
                    } else {
                        if (!t || !t.length) throw new TypeError("Invalid event target");
                        for (var c = 0, p = t.length; c < p; c++) e(t[c], n, r, i, l)
                    }
                    i.add(o)
                }(e, t, function (e) {
                    r.next(arguments.length > 1 ? Array.prototype.slice.call(arguments) : e)
                }, r, n)
            })
        }
        var Jv, em = function (e) {
                function t(t, n) {
                    var r = e.call(this, t, n) || this;
                    return r.scheduler = t, r.work = n, r.pending = !1, r
                }
                return i(t, e), t.prototype.schedule = function (e, t) {
                    if (void 0 === t && (t = 0), this.closed) return this;
                    this.state = e;
                    var n = this.id,
                        r = this.scheduler;
                    return null != n && (this.id = this.recycleAsyncId(r, n, t)), this.pending = !0, this.delay = t, this.id = this.id || this.requestAsyncId(r, this.id, t), this
                }, t.prototype.requestAsyncId = function (e, t, n) {
                    return void 0 === n && (n = 0), setInterval(e.flush.bind(e, this), n)
                }, t.prototype.recycleAsyncId = function (e, t, n) {
                    if (void 0 === n && (n = 0), null !== n && this.delay === n && !1 === this.pending) return t;
                    clearInterval(t)
                }, t.prototype.execute = function (e, t) {
                    if (this.closed) return new Error("executing a cancelled action");
                    this.pending = !1;
                    var n = this._execute(e, t);
                    if (n) return n;
                    !1 === this.pending && null != this.id && (this.id = this.recycleAsyncId(this.scheduler, this.id, null))
                }, t.prototype._execute = function (e, t) {
                    var n = !1,
                        r = void 0;
                    try {
                        this.work(e)
                    } catch (i) {
                        n = !0, r = !!i && i || new Error(i)
                    }
                    if (n) return this.unsubscribe(), r
                }, t.prototype._unsubscribe = function () {
                    var e = this.id,
                        t = this.scheduler,
                        n = t.actions,
                        r = n.indexOf(this);
                    this.work = null, this.state = null, this.pending = !1, this.scheduler = null, -1 !== r && n.splice(r, 1), null != e && (this.id = this.recycleAsyncId(t, e, null)), this.delay = null
                }, t
            }(function (e) {
                function t(t, n) {
                    return e.call(this) || this
                }
                return i(t, e), t.prototype.schedule = function (e, t) {
                    return void 0 === t && (t = 0), this
                }, t
            }(v)),
            tm = function () {
                function e(t, n) {
                    void 0 === n && (n = e.now), this.SchedulerAction = t, this.now = n
                }
                return e.prototype.schedule = function (e, t, n) {
                    return void 0 === t && (t = 0), new this.SchedulerAction(this, e).schedule(n, t)
                }, e.now = function () {
                    return Date.now()
                }, e
            }(),
            nm = new(function (e) {
                function t(n, r) {
                    void 0 === r && (r = tm.now);
                    var i = e.call(this, n, function () {
                        return t.delegate && t.delegate !== i ? t.delegate.now() : r()
                    }) || this;
                    return i.actions = [], i.active = !1, i.scheduled = void 0, i
                }
                return i(t, e), t.prototype.schedule = function (n, r, i) {
                    return void 0 === r && (r = 0), t.delegate && t.delegate !== this ? t.delegate.schedule(n, r, i) : e.prototype.schedule.call(this, n, r, i)
                }, t.prototype.flush = function (e) {
                    var t = this.actions;
                    if (this.active) t.push(e);
                    else {
                        var n;
                        this.active = !0;
                        do {
                            if (n = e.execute(e.state, e.delay)) break
                        } while (e = t.shift());
                        if (this.active = !1, n) {
                            for (; e = t.shift();) e.unsubscribe();
                            throw n
                        }
                    }
                }, t
            }(tm))(em),
            rm = function () {
                function e(e) {
                    this.durationSelector = e
                }
                return e.prototype.call = function (e, t) {
                    return t.subscribe(new im(e, this.durationSelector))
                }, e
            }(),
            im = function (e) {
                function t(t, n) {
                    var r = e.call(this, t) || this;
                    return r.durationSelector = n, r.hasValue = !1, r
                }
                return i(t, e), t.prototype._next = function (e) {
                    if (this.value = e, this.hasValue = !0, !this.throttled) {
                        var t = void 0;
                        try {
                            t = (0, this.durationSelector)(e)
                        } catch (r) {
                            return this.destination.error(r)
                        }
                        var n = Y(this, t);
                        !n || n.closed ? this.clearThrottle() : this.add(this.throttled = n)
                    }
                }, t.prototype.clearThrottle = function () {
                    var e = this.value,
                        t = this.hasValue,
                        n = this.throttled;
                    n && (this.remove(n), this.throttled = null, n.unsubscribe()), t && (this.value = null, this.hasValue = !1, this.destination.next(e))
                }, t.prototype.notifyNext = function (e, t, n, r) {
                    this.clearThrottle()
                }, t.prototype.notifyComplete = function () {
                    this.clearThrottle()
                }, t
            }(z);

        function lm(e) {
            return !p(e) && e - parseFloat(e) + 1 >= 0
        }

        function om(e) {
            var t = e.index,
                n = e.period,
                r = e.subscriber;
            if (r.next(t), !r.closed) {
                if (-1 === n) return r.complete();
                e.index = t + 1, this.schedule(e, n)
            }
        }
        Jv || (Jv = {});
        var um = function () {
                function e(e, t) {
                    var n = this;
                    this._platform = e, t.runOutsideAngular(function () {
                        n._change = e.isBrowser ? ie(Xv(window, "resize"), Xv(window, "orientationchange")) : Zs(), n._invalidateCache = n.change().subscribe(function () {
                            return n._updateViewportSize()
                        })
                    })
                }
                return e.prototype.ngOnDestroy = function () {
                    this._invalidateCache.unsubscribe()
                }, e.prototype.getViewportSize = function () {
                    this._viewportSize || this._updateViewportSize();
                    var e = {
                        width: this._viewportSize.width,
                        height: this._viewportSize.height
                    };
                    return this._platform.isBrowser || (this._viewportSize = null), e
                }, e.prototype.getViewportRect = function () {
                    var e = this.getViewportScrollPosition(),
                        t = this.getViewportSize(),
                        n = t.width,
                        r = t.height;
                    return {
                        top: e.top,
                        left: e.left,
                        bottom: e.top + r,
                        right: e.left + n,
                        height: r,
                        width: n
                    }
                }, e.prototype.getViewportScrollPosition = function () {
                    if (!this._platform.isBrowser) return {
                        top: 0,
                        left: 0
                    };
                    var e = document.documentElement,
                        t = e.getBoundingClientRect();
                    return {
                        top: -t.top || document.body.scrollTop || window.scrollY || e.scrollTop || 0,
                        left: -t.left || document.body.scrollLeft || window.scrollX || e.scrollLeft || 0
                    }
                }, e.prototype.change = function (e) {
                    return void 0 === e && (e = 20), e > 0 ? this._change.pipe((t = e, void 0 === n && (n = nm), r = function () {
                        return function (e, t, n) {
                            void 0 === e && (e = 0);
                            var r = -1;
                            return lm(t) ? r = Number(t) < 1 ? 1 : Number(t) : F(t) && (n = t), F(n) || (n = nm), new w(function (t) {
                                var i = lm(e) ? e : +e - n.now();
                                return n.schedule(om, i, {
                                    index: 0,
                                    period: r,
                                    subscriber: t
                                })
                            })
                        }(t, n)
                    }, function (e) {
                        return e.lift(new rm(r))
                    })) : this._change;
                    var t, n, r
                }, e.prototype._updateViewportSize = function () {
                    this._viewportSize = this._platform.isBrowser ? {
                        width: window.innerWidth,
                        height: window.innerHeight
                    } : {
                        width: 0,
                        height: 0
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(uv), ze(Zn))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            sm = new ye("cdk-dir-doc", {
                providedIn: "root",
                factory: function () {
                    return ze(zs)
                }
            }),
            am = function () {
                function e(e) {
                    if (this.value = "ltr", this.change = new pn, e) {
                        var t = (e.body ? e.body.dir : null) || (e.documentElement ? e.documentElement.dir : null);
                        this.value = "ltr" === t || "rtl" === t ? t : "ltr"
                    }
                }
                return e.prototype.ngOnDestroy = function () {
                    this.change.complete()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(sm, 8))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            cm = function () {
                function e(e, t, n, r) {
                    this.recipeService = e, this.resourcesService = t, this.craftingService = n, this.changeDetectorRef = r, this.craftingTypes = Pv, this.filterText = "", this.amount = 1, this.craftingType = this.craftingTypes.SELECTED, this.bookPage = Cu[Cu.ALL]
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.craftingService.registerForUpdate().subscribe(function () {
                        e.changeDetectorRef.destroyed || e.changeDetectorRef.detectChanges()
                    })
                }, e.prototype.getRecipes = function () {
                    var e = this;
                    return this.filterText && this.filterText.length > 0 ? this.recipeService.getRecipes().filter(function (t) {
                        return t.available && e.resourcesService.getResourceTypes(t.getResource()).includes(Cu[e.bookPage]) && Au.prepareResourceName(t.getResource()).toLowerCase().includes(e.filterText.toLowerCase())
                    }) : this.recipeService.getRecipes().filter(function (t) {
                        return t.available && e.resourcesService.getResourceTypes(t.getResource()).includes(Cu[e.bookPage])
                    })
                }, e.prototype.getEntries = function () {
                    var e = [];
                    return e.push(Cu[Cu.ALL]), e.push(Cu[Cu.PROCESSED]), e.push(Cu[Cu.TOOLS]), e.push(Cu[Cu.FOOD]), e.push(Cu[Cu.OTHER]), e
                }, e.prototype.select = function (e) {
                    this.bookPage = e
                }, e.prototype.craft = function (e) {
                    this.craftingService.craft(e, this.amount, this.craftingType)
                }, e.prototype.getQueue = function () {
                    return this.craftingService.getQueue()
                }, e.prototype.drop = function (e) {
                    this.craftingService.moveRecipeInQueue(e)
                }, e.prototype.getQueueMaxSize = function () {
                    return this.craftingService.getQueueMaxSize()
                }, e.prototype.validateAmountInput = function () {
                    var e = Number(String(this.amount).replace(/[^0-9]/g, ""));
                    e < 1 && (e = 1), this.amount = e
                }, e
            }(),
            pm = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:94.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;flex:0 0 74.3%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;flex:0 0 25%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-right:1px solid #000;flex:0 0 10%}.entry[_ngcontent-%COMP%]{border-bottom:1px solid #000;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{flex:0 0 88%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:80px;margin:4px 8px;cursor:pointer}#side[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#radios[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:.1em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}"]],
                data: {}
            });

        function hm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "activeEntry"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "entryText"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit)
            })
        }

        function dm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "inactiveEntry"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "entryText"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit)
            })
        }

        function fm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [["class", "entry"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.select(e.context.$implicit) && r), r
            }, null, null)), (e()(), ji(16777216, null, null, 1, null, hm)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, dm)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.bookPage === t.context.$implicit), e(t, 4, 0, n.bookPage !== t.context.$implicit)
            }, null)
        }

        function gm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-recipe", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.craft(e.context.$implicit) && r), r
            }, Zv, kv)), Ml(1, 4308992, null, 0, Mv, [Dv, Cg], {
                recipe: [0, "recipe"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.context.$implicit)
            }, null)
        }

        function vm(e) {
            return so(0, [(e()(), Yi(0, 16777216, null, null, 6, "app-recipe", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, Zv, kv)), Ll(6144, null, hv, null, [Ev]), Ml(2, 4341760, [[1, 4]], 3, Ev, [Nt, [3, fv], zs, Zn, Or, um, pv, mv, [2, am]], null, null), $l(603979776, 2, {
                _handles: 1
            }), $l(335544320, 3, {
                _previewTemplate: 0
            }), $l(335544320, 4, {
                _placeholderTemplate: 0
            }), Ml(6, 4308992, null, 0, Mv, [Dv, Cg], {
                id: [0, "id"],
                recipe: [1, "recipe"],
                amount: [2, "amount"],
                type: [3, "type"]
            }, null), (e()(), ji(0, null, null, 0))], function (e, t) {
                e(t, 6, 0, t.context.$implicit.id, t.context.$implicit.recipe, t.context.$implicit.amount, t.context.$implicit.type)
            }, function (e, t) {
                e(t, 0, 0, El(t, 2)._hasStartedDragging && El(t, 2)._isDragging())
            })
        }

        function mm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 76, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(4, 0, null, null, 72, "div", [["id", "boxes"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 60, "div", [["id", "recipes"]], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["  "])), (e()(), Yi(8, 0, null, null, 57, "div", [["id", "recipesBook"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 2, "div", [["id", "menu"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, fm)), Ml(11, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(12, 0, null, null, 53, "div", [["id", "book"]], null, null, null, null, null)), (e()(), Yi(13, 0, null, null, 49, "div", [["id", "side"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 8, "div", [["id", "filter"]], null, null, null, null, null)), (e()(), lo(-1, null, [" :"])), (e()(), Yi(16, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(17, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 18)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 18).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 18)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 18)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(18, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(20, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(22, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(23, 0, null, null, 9, "div", [["id", "amount"]], null, null, null, null, null)), (e()(), lo(-1, null, [" :"])), (e()(), Yi(25, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 6, "input", [["type", "number"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "keyup"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 27)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 27).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 27)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 27)._compositionEnd(n.target.value) && r), "change" === t && (r = !1 !== El(e, 28).onChange(n.target.value) && r), "input" === t && (r = !1 !== El(e, 28).onChange(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 28).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.amount = n) && r), "change" === t && (r = !1 !== i.validateAmountInput() && r), "keyup" === t && (r = !1 !== i.validateAmountInput() && r), r
            }, null, null)), Ml(27, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ml(28, 16384, null, 0, bf, [Lt, Nt], null, null), Ll(1024, null, vf, function (e, t) {
                return [e, t]
            }, [Sf, bf]), Ml(30, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(32, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(33, 0, null, null, 29, "div", [["id", "radios"]], null, null, null, null, null)), (e()(), Yi(34, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(35, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 36)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 36).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 36)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 36)._compositionEnd(n.target.value) && r), "change" === t && (r = !1 !== El(e, 37).onChange() && r), "blur" === t && (r = !1 !== El(e, 37).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.craftingType = n) && r), r
            }, null, null)), Ml(36, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ml(37, 212992, null, 0, _f, [Lt, Nt, Cf, lt], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, vf, function (e, t) {
                return [e, t]
            }, [Sf, _f]), Ml(39, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(41, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(-1, null, ["  "])), (e()(), Yi(43, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(45, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 46)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 46).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 46)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 46)._compositionEnd(n.target.value) && r), "change" === t && (r = !1 !== El(e, 47).onChange() && r), "blur" === t && (r = !1 !== El(e, 47).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.craftingType = n) && r), r
            }, null, null)), Ml(46, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ml(47, 212992, null, 0, _f, [Lt, Nt, Cf, lt], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, vf, function (e, t) {
                return [e, t]
            }, [Sf, _f]), Ml(49, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(51, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(-1, null, [" X "])), (e()(), Yi(53, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(54, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(55, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 56)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 56).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 56)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 56)._compositionEnd(n.target.value) && r), "change" === t && (r = !1 !== El(e, 57).onChange() && r), "blur" === t && (r = !1 !== El(e, 57).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.craftingType = n) && r), r
            }, null, null)), Ml(56, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ml(57, 212992, null, 0, _f, [Lt, Nt, Cf, lt], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, vf, function (e, t) {
                return [e, t]
            }, [Sf, _f]), Ml(59, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(61, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(-1, null, ["  "])), (e()(), Yi(63, 0, null, null, 2, "div", [["id", "bookRecipes"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, gm)), Ml(65, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(66, 0, null, null, 10, "div", [["class", "queue"]], null, null, null, null, null)), (e()(), Yi(67, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), lo(69, null, [" ", "/", " "])), (e()(), Yi(70, 0, null, null, 6, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "queueRecipes"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop(n) && r), r
            }, null, null)), Ll(6144, null, fv, null, [Iv]), Ml(72, 212992, null, 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                id: [0, "id"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 1, {
                _draggables: 1
            }), Ll(256, null, Cv, void 0, []), (e()(), ji(16777216, null, null, 1, null, vm)), Ml(76, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 11, 0, n.getEntries()), e(t, 20, 0, n.filterText), e(t, 30, 0, n.amount), e(t, 37, 0, "type", n.craftingTypes.SELECTED), e(t, 39, 0, "type", n.craftingType), e(t, 47, 0, "type", n.craftingTypes.UNTIL_X), e(t, 49, 0, "type", n.craftingType), e(t, 57, 0, "type", n.craftingTypes.CONTINUOUS), e(t, 59, 0, "type", n.craftingType), e(t, 65, 0, n.getRecipes()), e(t, 72, 0, "queueRecipes"), e(t, 76, 0, n.getQueue())
            }, function (e, t) {
                var n = t.component;
                e(t, 17, 0, El(t, 22).ngClassUntouched, El(t, 22).ngClassTouched, El(t, 22).ngClassPristine, El(t, 22).ngClassDirty, El(t, 22).ngClassValid, El(t, 22).ngClassInvalid, El(t, 22).ngClassPending), e(t, 26, 0, El(t, 32).ngClassUntouched, El(t, 32).ngClassTouched, El(t, 32).ngClassPristine, El(t, 32).ngClassDirty, El(t, 32).ngClassValid, El(t, 32).ngClassInvalid, El(t, 32).ngClassPending), e(t, 35, 0, El(t, 41).ngClassUntouched, El(t, 41).ngClassTouched, El(t, 41).ngClassPristine, El(t, 41).ngClassDirty, El(t, 41).ngClassValid, El(t, 41).ngClassInvalid, El(t, 41).ngClassPending), e(t, 45, 0, El(t, 51).ngClassUntouched, El(t, 51).ngClassTouched, El(t, 51).ngClassPristine, El(t, 51).ngClassDirty, El(t, 51).ngClassValid, El(t, 51).ngClassInvalid, El(t, 51).ngClassPending), e(t, 55, 0, El(t, 61).ngClassUntouched, El(t, 61).ngClassTouched, El(t, 61).ngClassPristine, El(t, 61).ngClassDirty, El(t, 61).ngClassValid, El(t, 61).ngClassInvalid, El(t, 61).ngClassPending), e(t, 69, 0, n.getQueue().length, n.getQueueMaxSize()), e(t, 70, 0, El(t, 72).id, El(t, 72)._dragging)
            })
        }

        function ym(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-crafting", [], null, null, null, mm, pm)), Ml(1, 114688, null, 0, cm, [lv, Cg, Dv, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var Sm = al("app-crafting", cm, ym, {}, {}, []),
            Em = function () {
                return function (e, t, n, r, i, l) {
                    this.id = e, this.resource = t, this.amount = n, this.buy = r, this.price = i, this.duration = l
                }
            }(),
            Om = function () {
                function e(e) {
                    var t = this;
                    this.optionsService = e, this.audios = [], this.optionsService.registerForOptionsChange().subscribe(function () {
                        t.optionsService.getOption(hg.SOUND) ? t.audios.forEach(function (e) {
                            return e.volume = t.optionsService.getOption(hg.SOUND_VOLUME) / 100
                        }) : t.audios.forEach(function (e) {
                            return e.volume = 0
                        })
                    })
                }
                return e.prototype.playAudio = function (e) {
                    this.audios = this.audios.filter(function (e) {
                        return !e.ended
                    }), e.load(), e.volume = this.optionsService.getOption(hg.SOUND) ? this.optionsService.getOption(hg.SOUND_VOLUME) / 100 : 0, e.play(), this.audios.push(e)
                }, e.prototype.playTownBells = function () {
                    this.playAudio(new Audio("assets/sounds/village_bells.wav"))
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(dg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            bm = function () {
                function e(e, t, n, r, i, l) {
                    var o = this;
                    this.servicesService = e, this.calendarService = t, this.resourcesService = n, this.logService = r, this.soundService = i, this.modalService = l, this.offers = [], this.id = 10, this.servicesService.addService(Nu.MARKET, this), this.calendarService.registerForDayChange().subscribe(function (e) {
                        o.offers.forEach(function (e) {
                            return e.duration -= 1
                        }), o.offers = o.offers.filter(function (e) {
                            return e.duration > 0
                        })
                    })
                }
                return e.prototype.nextId = function () {
                    return this.id += 1, this.id - 1
                }, e.prototype.load = function (e) {
                    this.offers = e.offers, this.id = e.id
                }, e.prototype.save = function () {
                    return {
                        offers: this.offers,
                        id: this.id
                    }
                }, e.prototype.reset = function (e, t) {
                    this.offers = [], this.id = 10
                }, e.prototype.getOffers = function () {
                    return this.offers
                }, e.prototype.accept = function (e) {
                    var t = this,
                        n = this.offers.find(function (t) {
                            return t.id === e
                        });
                    if (n) {
                        this.modalService.open(mu.MARKET), this.modalService.setModalValue(n);
                        var r = this.modalService.registerForValueResponse().subscribe(function (e) {
                            if (r.unsubscribe(), null !== e && !isNaN(e)) {
                                if (e > n.amount && (e = n.amount), n.buy) {
                                    if (!t.resourcesService.decreaseResource(vu.COINS, t.calculatePrice(n, e), !0)) return void t.modalService.info("Not enough coins to buy " + e + " " + Au.prepareResourceName(n.resource));
                                    t.resourcesService.increaseResource(n.resource, e, !0)
                                } else {
                                    if (!t.resourcesService.decreaseResource(n.resource, e, !0)) return void t.modalService.info("Not enough resources to sell");
                                    t.resourcesService.increaseResource(vu.COINS, t.calculatePrice(n, e), !0)
                                }
                                n.amount === Number(e) ? t.offers.splice(t.offers.indexOf(n), 1) : (n.price = t.calculatePrice(n, n.amount - e), n.amount -= e)
                            }
                        })
                    } else this.modalService.info("Market offer not found")
                }, e.prototype.callMerchant = function () {
                    for (var e = Array.from(this.resourcesService.getResources().values()).filter(function (e) {
                            return e.isVisible()
                        }).map(function (e) {
                            return {
                                item: e.resource,
                                chance: e.prioritise ? 10 : 1
                            }
                        }), t = Mu.randomBetween(3, 8), n = Mu.randomBetween(50, 180), r = 0; r < t; r++) {
                        var i = Mu.randomWeightedExcept(e, [vu.COINS]),
                            l = Mu.randomBetween(5, 20),
                            o = Mu.randomBetween(0, 1),
                            u = Mu.randomBetween(-5, 25),
                            s = Xu.getResource(i).TRADE_VALUE * l;
                        0 === (s = o ? Math.floor(s * (1 + u / 100)) : Math.floor(s * (1 - u / 100))) ? r-- : this.offers.push(new Em(this.nextId(), i, l, !!o, s, n))
                    }
                    this.logService.log("Merchant arrived"), this.soundService.playTownBells()
                }, e.prototype.calculatePrice = function (e, t) {
                    return e.buy ? Math.ceil(t / e.amount * e.price) : Math.floor(t / e.amount * e.price)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(vg), ze(Cg), ze(mg), ze(Om), ze(yg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Tm = function () {
                function e(e, t) {
                    this.marketService = e, this.resourcesService = t, this.filterText = "", this.typeRadio = "all"
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getOffers = function () {
                    var e, t = this;
                    return e = null !== this.filterText && this.filterText.length > 0 ? this.marketService.getOffers().filter(function (e) {
                        return Au.prepareResourceName(e.resource).toLowerCase().includes(t.filterText)
                    }) : this.marketService.getOffers(), "buy" === this.typeRadio ? e = e.filter(function (e) {
                        return e.buy
                    }) : "sell" === this.typeRadio && (e = e.filter(function (e) {
                        return !e.buy
                    })), e
                }, e.prototype.getCoins = function () {
                    return this.resourcesService.getResource(vu.COINS).amount
                }, e.prototype.accept = function (e) {
                    this.marketService.accept(e)
                }, e.prototype.getResourceName = function (e) {
                    return vu[e]
                }, e
            }(),
            Rm = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.boxTitle[_ngcontent-%COMP%]{text-align:center;border-bottom:2px solid #000}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:flex;flex-direction:row;width:97%;text-align:center;font-size:.9em}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px;border:1px solid #000;border-left:none}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}#market[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:2px solid #000;height:91.5%}#offersBox[_ngcontent-%COMP%]{display:flex;flex:0 0 70%;flex-direction:column;border-right:2px solid #000;height:100%}#filterBox[_ngcontent-%COMP%]{display:flex;flex:0 0 30%;flex-direction:column;height:100%}#offers[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;height:100%;overflow-y:auto}.offer[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;flex-direction:row;border:1px solid #000;margin:3px}.offer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 24%;padding:2px}.offer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.7em}#filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#filter[_ngcontent-%COMP%]{width:90%}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function Cm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.accept(e.parent.context.$implicit.id) && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function _m(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.accept(e.parent.context.$implicit.id) && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Im(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 15, "div", [["class", "offer"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 3, "span", [], null, null, null, null, null)), (e()(), lo(2, null, [" ", " "])), (e()(), Yi(3, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(4, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(5, 0, null, null, 3, "span", [], null, null, null, null, null)), (e()(), lo(6, null, [" ", " "])), (e()(), Yi(7, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(8, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(9, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(10, null, [" ", " days "])), (e()(), Yi(11, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Cm)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, _m)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                e(t, 4, 0, t.component.getResourceName(t.context.$implicit.resource), "resources"), e(t, 8, 0, "coins", "resources"), e(t, 13, 0, t.context.$implicit.buy), e(t, 15, 0, !t.context.$implicit.buy)
            }, function (e, t) {
                e(t, 2, 0, t.context.$implicit.amount), e(t, 6, 0, t.context.$implicit.price), e(t, 10, 0, t.context.$implicit.duration)
            })
        }

        function Am(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 63, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(4, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(6, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(7, null, [" ", " "])), (e()(), Yi(8, 0, null, null, 55, "div", [["id", "market"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 15, "div", [["id", "offersBox"]], null, null, null, null, null)), (e()(), Yi(10, 0, null, null, 2, "div", [["class", "boxTitle"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(13, 0, null, null, 8, "div", [["id", "headers"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(16, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(18, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(20, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["/"])), (e()(), Yi(22, 0, null, null, 2, "div", [["id", "offers"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Im)), Ml(24, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(25, 0, null, null, 38, "div", [["id", "filterBox"]], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 2, "div", [["class", "boxTitle"]], null, null, null, null, null)), (e()(), Yi(27, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(29, 0, null, null, 34, "div", [["id", "filters"]], null, null, null, null, null)), (e()(), Yi(30, 0, null, null, 5, "input", [["id", "filter"], ["placeholder", "search"], ["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 31)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 31).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 31)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 31)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(31, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(33, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(35, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(36, 0, null, null, 27, "div", [], null, null, null, null, null)), (e()(), Yi(37, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(38, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"], ["value", "all"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 39)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 39).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 39)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 39)._compositionEnd(n.target.value) && r), "change" === t && (r = !1 !== El(e, 40).onChange() && r), "blur" === t && (r = !1 !== El(e, 40).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.typeRadio = n) && r), r
            }, null, null)), Ml(39, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ml(40, 212992, null, 0, _f, [Lt, Nt, Cf, lt], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, vf, function (e, t) {
                return [e, t]
            }, [Sf, _f]), Ml(42, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(44, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(-1, null, ["  "])), (e()(), Yi(46, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(47, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"], ["value", "buy"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 48)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 48).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 48)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 48)._compositionEnd(n.target.value) && r), "change" === t && (r = !1 !== El(e, 49).onChange() && r), "blur" === t && (r = !1 !== El(e, 49).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.typeRadio = n) && r), r
            }, null, null)), Ml(48, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ml(49, 212992, null, 0, _f, [Lt, Nt, Cf, lt], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, vf, function (e, t) {
                return [e, t]
            }, [Sf, _f]), Ml(51, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(53, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(-1, null, ["  "])), (e()(), Yi(55, 0, null, null, 8, "label", [], null, null, null, null, null)), (e()(), Yi(56, 0, null, null, 6, "input", [["name", "type"], ["type", "radio"], ["value", "sell"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"], [null, "change"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 57)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 57).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 57)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 57)._compositionEnd(n.target.value) && r), "change" === t && (r = !1 !== El(e, 58).onChange() && r), "blur" === t && (r = !1 !== El(e, 58).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.typeRadio = n) && r), r
            }, null, null)), Ml(57, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ml(58, 212992, null, 0, _f, [Lt, Nt, Cf, lt], {
                name: [0, "name"],
                value: [1, "value"]
            }, null), Ll(1024, null, vf, function (e, t) {
                return [e, t]
            }, [Sf, _f]), Ml(60, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                name: [0, "name"],
                model: [1, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(62, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(-1, null, ["  "]))], function (e, t) {
                var n = t.component;
                e(t, 6, 0, "coins", "resources"), e(t, 24, 0, n.getOffers()), e(t, 33, 0, n.filterText), e(t, 40, 0, "type", "all"), e(t, 42, 0, "type", n.typeRadio), e(t, 49, 0, "type", "buy"), e(t, 51, 0, "type", n.typeRadio), e(t, 58, 0, "type", "sell"), e(t, 60, 0, "type", n.typeRadio)
            }, function (e, t) {
                e(t, 7, 0, t.component.getCoins()), e(t, 30, 0, El(t, 35).ngClassUntouched, El(t, 35).ngClassTouched, El(t, 35).ngClassPristine, El(t, 35).ngClassDirty, El(t, 35).ngClassValid, El(t, 35).ngClassInvalid, El(t, 35).ngClassPending), e(t, 38, 0, El(t, 44).ngClassUntouched, El(t, 44).ngClassTouched, El(t, 44).ngClassPristine, El(t, 44).ngClassDirty, El(t, 44).ngClassValid, El(t, 44).ngClassInvalid, El(t, 44).ngClassPending), e(t, 47, 0, El(t, 53).ngClassUntouched, El(t, 53).ngClassTouched, El(t, 53).ngClassPristine, El(t, 53).ngClassDirty, El(t, 53).ngClassValid, El(t, 53).ngClassInvalid, El(t, 53).ngClassPending), e(t, 56, 0, El(t, 62).ngClassUntouched, El(t, 62).ngClassTouched, El(t, 62).ngClassPristine, El(t, 62).ngClassDirty, El(t, 62).ngClassValid, El(t, 62).ngClassInvalid, El(t, 62).ngClassPending)
            })
        }

        function wm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-market", [], null, null, null, Am, Rm)), Ml(1, 114688, null, 0, Tm, [bm, Cg], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var Nm = al("app-market", Tm, wm, {}, {}, []),
            Pm = function () {
                function e(e, t, n, r, i, l, o, u, s) {
                    void 0 === u && (u = function () {}), void 0 === s && (s = 0), this.tech = e, this.category = t, this.prerequisites = n, this.flagPrerequisites = r, this.cost = i, this.requiredResearchPoints = l, this.description = o, this.researchPoints = s, this.finishFunction = u
                }
                return e.prototype.getTech = function () {
                    return this.tech
                }, e.prototype.getTechName = function () {
                    return Au.prepareTechName(this.tech)
                }, e.prototype.isResearched = function () {
                    return this.researchPoints === this.requiredResearchPoints
                }, e.prototype.getCategory = function () {
                    return this.category
                }, e.prototype.getDescription = function () {
                    return this.description
                }, e.prototype.getResearchPointsDue = function () {
                    return this.requiredResearchPoints - this.researchPoints
                }, e.prototype.addResearchPoints = function (e) {
                    this.researchPoints += e, this.researchPoints > this.requiredResearchPoints && (this.researchPoints = this.requiredResearchPoints)
                }, e.prototype.getResearchPoints = function () {
                    return this.researchPoints
                }, e.prototype.setResearchPoints = function (e) {
                    this.researchPoints = e
                }, e.prototype.setResearched = function () {
                    this.researchPoints = this.requiredResearchPoints
                }, e.prototype.getCost = function () {
                    return this.cost
                }, e.prototype.clearCost = function () {
                    this.cost = new Map
                }, e.prototype.getPrerequisites = function () {
                    return this.prerequisites
                }, e.prototype.getFlagPrerequisites = function () {
                    return this.flagPrerequisites
                }, e.prototype.getFinishFunction = function () {
                    return this.finishFunction
                }, e.prototype.getRequiredResearchPoints = function () {
                    return this.requiredResearchPoints
                }, e
            }(),
            Dm = function () {
                function e() {
                    this.prerequisites = [], this.flagPrerequisites = [], this.cost = new Map, this.researchPoints = 0, this.finishFunction = function () {}
                }
                return e.prototype.forTech = function (e) {
                    return this.tech = e, this
                }, e.prototype.withCategory = function (e) {
                    return this.category = e, this
                }, e.prototype.withPrerequisite = function (e) {
                    return this.prerequisites.push(e), this
                }, e.prototype.withPrerequisites = function (e) {
                    var t = this;
                    return e.forEach(function (e) {
                        return t.prerequisites.push(e)
                    }), this
                }, e.prototype.withFlagPrerequisite = function (e) {
                    return this.flagPrerequisites.push(e), this
                }, e.prototype.withFlagPrerequisites = function (e) {
                    var t = this;
                    return e.forEach(function (e) {
                        return t.flagPrerequisites.push(e)
                    }), this
                }, e.prototype.withCost = function (e, t) {
                    return this.cost.set(e, t), this
                }, e.prototype.withCosts = function (e) {
                    var t = this;
                    return e.forEach(function (e, n) {
                        return t.cost.set(n, e)
                    }), this
                }, e.prototype.withResearchPoints = function (e) {
                    return this.researchPoints = e, this
                }, e.prototype.withDescription = function (e) {
                    return this.description = e, this
                }, e.prototype.withFinishFunction = function (e) {
                    return this.finishFunction = e, this
                }, e.prototype.build = function () {
                    var e = new Pm(this.tech, this.category, this.prerequisites, this.flagPrerequisites, this.cost, this.researchPoints, this.description, this.finishFunction);
                    return this.tech = void 0, this.category = void 0, this.prerequisites = [], this.flagPrerequisites = [], this.cost = new Map, this.researchPoints = 0, this.description = void 0, this.finishFunction = function () {}, e
                }, e
            }(),
            Mm = function () {
                function e(e, t, n, r, i, l) {
                    this.servicesService = e, this.modalService = t, this.resourcesService = n, this.logService = r, this.soundService = i, this.gameService = l, this.techUpdate = new L, this.techList = [], this.techDone = [], this.techStarted = [], this.currentResearch = null, this.foresight = 0, this.servicesService.addService(Nu.RESEARCH, this), this.init()
                }
                return e.prototype.init = function () {
                    var e = this;
                    this.techList = [];
                    var t = new Dm;
                    Object.entries(ts).forEach(function (n) {
                        t.forTech(Su[n[0]]).withCategory(n[1].CATEGORY).withFinishFunction(n[1].FINISH).withResearchPoints(n[1].RESEARCH_POINT).withPrerequisites(n[1].PREREQUISITES).withFlagPrerequisites(n[1].FLAG_PREREQUISITES ? n[1].FLAG_PREREQUISITES : []).withDescription(n[1].DESCRIPTION), n[1].COST.forEach(function (e) {
                            return t.withCost(e.resource, e.amount)
                        }), e.techList.push(t.build())
                    })
                }, e.prototype.isResearched = function (e) {
                    return null != this.techDone.find(function (t) {
                        return t === e
                    })
                }, e.prototype.startResearch = function (e) {
                    var t = this;
                    if (!this.currentResearch || this.currentResearch.getTech() !== e) {
                        var n = this.techList.find(function (t) {
                                return t.getTech() === e
                            }),
                            r = !0,
                            i = "";
                        if (n.getPrerequisites().forEach(function (e) {
                                t.techDone.includes(e) || (r = !1, i += Au.prepareTechName(e) + " not researched!<br>")
                            }), n.getFlagPrerequisites().forEach(function (e) {
                                t.gameService.isEnabled(e) || (r = !1, i += Au.prepareFlagName(e) + " not unlocked!<br>")
                            }), r) {
                            if (!this.techStarted.find(function (t) {
                                    return t[0] === e
                                })) {
                                var l = this.techList.find(function (t) {
                                        return t.getTech() === e
                                    }),
                                    o = !0,
                                    u = "";
                                if (Array.from(l.getCost().entries()).forEach(function (e) {
                                        var n = t.resourcesService.hasResource(e[0], e[1], !0);
                                        0 !== n && (u += "Missing " + n + " " + Au.prepareResourceName(e[0]) + "!<br>", o = !1)
                                    }), !o) return void this.modalService.info(u)
                            }
                            this.modalService.setModalText("Are you sure you want to unlock researching " + Au.prepareTechName(e) + "?"), this.modalService.open(mu.CONFIRM);
                            var s = this.modalService.registerForConfirmation().subscribe(function (n) {
                                if (s.unsubscribe(), n) {
                                    var r = t.techList.find(function (t) {
                                            return t.getTech() === e
                                        }),
                                        i = !0,
                                        l = "";
                                    if (Array.from(r.getCost().entries()).forEach(function (e) {
                                            var n = t.resourcesService.hasResource(e[0], e[1], !0);
                                            0 !== n && (l += "Missing " + n + " " + Au.prepareResourceName(e[0]) + "!<br>", i = !1)
                                        }), !i) return void t.modalService.info(l);
                                    if (t.resourcesService.decreaseResources(r.getCost(), !0), t.currentResearch) {
                                        var o = t.techStarted.find(function (t) {
                                            return t[0] === e
                                        });
                                        o ? o[1] = t.currentResearch.getResearchPoints() : t.techStarted.push([t.currentResearch.getTech(), t.currentResearch.getResearchPoints()])
                                    }
                                    t.currentResearch = t.techList.find(function (t) {
                                        return t.getTech() === e
                                    }), t.currentResearch.clearCost();
                                    var u = t.techStarted.find(function (t) {
                                        return t[0] === e
                                    });
                                    u ? u[1] = t.currentResearch.getResearchPoints() : t.techStarted.push([t.currentResearch.getTech(), t.currentResearch.getResearchPoints()])
                                }
                            })
                        } else this.modalService.info(i)
                    }
                }, e.prototype.progressTech = function (e) {
                    var t = this;
                    this.currentResearch && (this.currentResearch.addResearchPoints(e), this.currentResearch.isResearched() && (this.logService.log(this.currentResearch.getTechName() + " researched"), this.soundService.playTownBells(), this.currentResearch.getFinishFunction()(this.servicesService), this.techDone.push(this.currentResearch.getTech()), this.techStarted = this.techStarted.filter(function (e) {
                        return e[0] !== t.currentResearch.getTech()
                    }), this.currentResearch = null), this.techUpdate.next())
                }, e.prototype.save = function () {
                    var e = this;
                    if (this.currentResearch) {
                        var t = this.techStarted.find(function (t) {
                            return t[0] === e.currentResearch.getTech()
                        });
                        t && (t[1] = this.currentResearch.getResearchPoints())
                    }
                    return {
                        foresight: this.foresight,
                        techDone: this.techDone,
                        techStarted: this.techStarted,
                        currentResearchTech: this.currentResearch ? this.currentResearch.getTech() : null
                    }
                }, e.prototype.load = function (e) {
                    var t = this;
                    this.foresight = e.foresight, this.techDone = e.techDone, this.techStarted = e.techStarted, this.techDone.forEach(function (e) {
                        return t.techList.find(function (t) {
                            return t.getTech() === e
                        }).setResearched()
                    }), this.techStarted.forEach(function (e) {
                        var n = t.techList.find(function (t) {
                            return t.getTech() === e[0]
                        });
                        n && (n.clearCost(), n.setResearchPoints(e[1]))
                    }), this.currentResearch = this.techList.find(function (t) {
                        return t.getTech() === e.currentResearchTech
                    }), this.techDone.includes(Su.BARRACKS) && !this.gameService.isEnabled(Eu.BARRACKS) && (this.gameService.enable(Eu.BARRACKS), this.logService.log("Barracks invented"))
                }, e.prototype.reset = function (e, t) {
                    this.techList = [], this.techDone = [], this.techStarted = [], this.currentResearch = null, this.foresight = 0, this.init()
                }, e.prototype.getTech = function () {
                    var e = this;
                    return this.techList.filter(function (t) {
                        if (e.techDone.includes(t.getTech())) return !1;
                        var n = !0;
                        return t.getPrerequisites().forEach(function (t) {
                            e.checkPrerequisite(t, e.foresight) || (n = !1)
                        }), n
                    })
                }, e.prototype.checkPrerequisite = function (e, t) {
                    var n = this;
                    if (this.techDone.includes(e)) return !0;
                    if (t > 0) {
                        var r = !0;
                        return this.techList.find(function (t) {
                            return t.getTech() === e
                        }).getPrerequisites().forEach(function (e) {
                            n.checkPrerequisite(e, t - 1) || (r = !1)
                        }), r
                    }
                    return !1
                }, e.prototype.getCurrentResearch = function () {
                    return this.currentResearch
                }, e.prototype.increaseForesight = function (e) {
                    this.foresight += 1
                }, e.prototype.isResearchStarted = function () {
                    return !!this.currentResearch
                }, e.prototype.getTechPrerequisites = function (e) {
                    var t = this,
                        n = [];
                    return e.getPrerequisites().forEach(function (e) {
                        t.techDone.includes(e) || n.push(e)
                    }), n
                }, e.prototype.registerForUpdate = function () {
                    return this.techUpdate.asObservable()
                }, e.prototype.getForesight = function () {
                    return this.foresight
                }, e.prototype.getTechFlagPrerequisites = function (e) {
                    var t = this,
                        n = [];
                    return e.getFlagPrerequisites().forEach(function (e) {
                        t.gameService.isEnabled(e) || n.push(e)
                    }), n
                }, e.prototype.finishTech = function (e) {
                    this.techDone.push(e);
                    var t = this.techList.find(function (t) {
                        return t.getTech() === e
                    });
                    t && this.logService.log(t.getTechName() + " researched"), null != this.currentResearch && this.currentResearch.getTech() === e && (this.currentResearch = null), this.techUpdate.next()
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(yg), ze(Cg), ze(mg), ze(Om), ze(Eg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            km = function () {
                function e(t, n) {
                    this.techService = t, this.resourcesService = n, this.id = e.randomId()
                }
                return e.randomId = function () {
                    return Math.random()
                }, e.prototype.ngOnInit = function () {
                    var e = this;
                    this.updateSubscription = this.techService.registerForUpdate().subscribe(function () {
                        e.progressRef && (e.progressRef.nativeElement.style.width = e.tech.getResearchPoints() / e.tech.getRequiredResearchPoints() * 100 + "%")
                    })
                }, e.prototype.ngAfterViewInit = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.tech.getResearchPoints() / this.tech.getRequiredResearchPoints() * 100 + "%")
                }, e.prototype.ngOnChanges = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.tech.getResearchPoints() / this.tech.getRequiredResearchPoints() * 100 + "%")
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.start = function () {
                    this.techService.startResearch(this.tech.getTech())
                }, e.prototype.getPrerequisiteName = function (e) {
                    return Au.prepareTechName(e)
                }, e.prototype.getMissingPrerequisites = function () {
                    return this.techService.getTechPrerequisites(this.tech)
                }, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getMissingFlagPrerequisites = function () {
                    return this.techService.getTechFlagPrerequisites(this.tech)
                }, e.prototype.getFlagPrerequisiteName = function (e) {
                    return Au.prepareFlagName(e)
                }, e
            }(),
            Lm = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function xm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), Yi(2, 0, null, null, 0, "br", [], null, null, null, null, null))], null, null)
        }

        function Fm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function Um(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function Hm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Fm)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Um)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(6, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.hasResource(t.context.$implicit)), e(t, 4, 0, !n.hasResource(t.context.$implicit)), e(t, 6, 0, n.getResourceName(t.context.$implicit.key), "resources")
            }, null)
        }

        function Gm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                e(t, 1, 0, t.component.getPrerequisiteName(t.context.$implicit))
            })
        }

        function Bm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                e(t, 1, 0, t.component.getFlagPrerequisiteName(t.context.$implicit))
            })
        }

        function Vm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [["class", "prerequisites"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), Yi(3, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Gm)), Ml(5, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Bm)), Ml(7, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0, n.getMissingPrerequisites()), e(t, 7, 0, n.getMissingFlagPrerequisites())
            }, null)
        }

        function Wm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 17, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.start() && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, [[1, 0], ["progress", 1]], null, 0, "div", [["id", "progress"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(4, null, ["", ""])), (e()(), Yi(5, 0, null, null, 12, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(6, null, [" ", ""])), (e()(), Yi(7, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(10, null, ["Research points: ", "/", ""])), (e()(), ji(16777216, null, null, 1, null, xm)), Ml(12, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 2, null, Hm)), Ml(14, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr]), (e()(), ji(16777216, null, null, 1, null, Vm)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.id), e(t, 12, 0, n.tech.getCost().size > 0), e(t, 14, 0, hi(t, 14, 0, El(t, 15).transform(n.tech.getCost()))), e(t, 17, 0, n.getMissingPrerequisites().length > 0 || n.getMissingFlagPrerequisites().length > 0)
            }, function (e, t) {
                var n = t.component;
                e(t, 4, 0, n.tech.getTechName()), e(t, 5, 0, Vi(1, "", n.id, "")), e(t, 6, 0, n.tech.getDescription()), e(t, 10, 0, n.tech.getResearchPoints(), n.tech.getRequiredResearchPoints())
            })
        }

        function jm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), Yi(2, 0, null, null, 0, "br", [], null, null, null, null, null))], null, null)
        }

        function Ym(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function zm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function Km(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Ym)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, zm)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(6, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.hasResource(t.context.$implicit)), e(t, 4, 0, !n.hasResource(t.context.$implicit)), e(t, 6, 0, n.getResourceName(t.context.$implicit.key), "resources")
            }, null)
        }

        function qm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                e(t, 1, 0, t.component.getPrerequisiteName(t.context.$implicit))
            })
        }

        function Qm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                e(t, 1, 0, t.component.getFlagPrerequisiteName(t.context.$implicit))
            })
        }

        function $m(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [["class", "prerequisites"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), Yi(3, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, qm)), Ml(5, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Qm)), Ml(7, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0, n.getMissingPrerequisites()), e(t, 7, 0, n.getMissingFlagPrerequisites())
            }, null)
        }

        function Zm(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 16, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapperNotAvailable"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.start() && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 1, "div", [["id", "titleGrey"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 12, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(5, null, [" ", ""])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "div", [["class", "title"]], null, null, null, null, null)), (e()(), lo(9, null, ["Research points: ", "/", ""])), (e()(), ji(16777216, null, null, 1, null, jm)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 2, null, Km)), Ml(13, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr]), (e()(), ji(16777216, null, null, 1, null, $m)), Ml(16, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.id), e(t, 11, 0, n.tech.getCost().size > 0), e(t, 13, 0, hi(t, 13, 0, El(t, 14).transform(n.tech.getCost()))), e(t, 16, 0, n.getMissingPrerequisites().length > 0 || n.getMissingFlagPrerequisites().length > 0)
            }, function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.tech.getTechName()), e(t, 4, 0, Vi(1, "", n.id, "")), e(t, 5, 0, n.tech.getDescription()), e(t, 9, 0, n.tech.getResearchPoints(), n.tech.getRequiredResearchPoints())
            })
        }

        function Xm(e) {
            return so(0, [$l(671088640, 1, {
                progressRef: 0
            }), (e()(), ji(16777216, null, null, 1, null, Wm)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Zm)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, 0 === n.getMissingPrerequisites().length), e(t, 4, 0, n.getMissingPrerequisites().length > 0)
            }, null)
        }
        var Jm = function () {
                function e(e, t) {
                    this.techService = e, this.gameService = t
                }
                return e.prototype.ngOnInit = function () {
                    this.categories = Object.keys(wu), this.categories = this.categories.slice(this.categories.length / 2)
                }, e.prototype.getTechList = function (e) {
                    return this.techService.getTech().filter(function (t) {
                        return t.getCategory() === wu[e]
                    })
                }, e.prototype.getCurrentResearch = function () {
                    return this.techService.getCurrentResearch()
                }, e.prototype.research = function (e) {
                    this.techService.progressTech(e)
                }, e.prototype.isDev = function () {
                    return !Hu.production
                }, e.prototype.getForesight = function () {
                    return this.techService.getForesight()
                }, e
            }(),
            ey = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:87.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;flex:auto;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}app-tech[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;margin-top:4px;margin-left:-4px;width:75%;font-size:.7em}#researching[_ngcontent-%COMP%]{margin-bottom:8px}#currentTech[_ngcontent-%COMP%]{display:inline-block;width:auto;margin-right:10px}.tech[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function ty(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-tech", [["id", "currentTech"]], null, null, null, Xm, Lm)), Ml(2, 4833280, null, 0, km, [Mm, Cg], {
                tech: [0, "tech"]
            }, null), (e()(), lo(3, null, [" requires ", " more research points "]))], function (e, t) {
                e(t, 2, 0, t.component.getCurrentResearch())
            }, function (e, t) {
                e(t, 3, 0, t.component.getCurrentResearch().getResearchPointsDue())
            })
        }

        function ny(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function ry(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.research(10) && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function iy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-tech", [["class", "tech"]], null, null, null, Xm, Lm)), Ml(1, 4833280, null, 0, km, [Mm, Cg], {
                tech: [0, "tech"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.context.$implicit)
            }, null)
        }

        function ly(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [["class", "category"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), ji(16777216, null, null, 1, null, iy)), Ml(4, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 4, 0, t.component.getTechList(t.context.$implicit))
            }, function (e, t) {
                e(t, 2, 0, t.context.$implicit)
            })
        }

        function oy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 15, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 7, "div", [["id", "researching"]], null, null, null, null, null)), (e()(), lo(-1, null, [" : "])), (e()(), ji(16777216, null, null, 1, null, ty)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ny)), Ml(6, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ry)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(9, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(10, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(11, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(12, null, ["\xa0", ""])), (e()(), Yi(13, 0, null, null, 2, "div", [["id", "categories"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, ly)), Ml(15, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, n.getCurrentResearch()), e(t, 6, 0, !n.getCurrentResearch()), e(t, 8, 0, n.isDev()), e(t, 11, 0, "foresight"), e(t, 15, 0, n.categories)
            }, function (e, t) {
                e(t, 12, 0, t.component.getForesight())
            })
        }

        function uy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-research", [], null, null, null, oy, ey)), Ml(1, 114688, null, 0, Jm, [Mm, Eg], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var sy = al("app-research", Jm, uy, {}, {}, []),
            ay = function () {
                return function (e, t, n, r, i, l) {
                    void 0 === l && (l = 1), this.troop = e, this.recruitTime = t, this.strength = n, this.defense = r, this.cost = i, this.level = l
                }
            }(),
            cy = function () {
                function e(e, t, n, r, i, l, o, u) {
                    void 0 === l && (l = new Map), void 0 === o && (o = function (e, t, n) {}), void 0 === u && (u = []), this.squadStrength = 0, this.squadDefense = 0, this.mission = e, this.time = t, this.description = n, this.requiredStrength = r, this.requiredDefense = i, this.cost = l, this.troops = u, this.finish = o
                }
                return e.prototype.clone = function () {
                    return new e(this.mission, this.time, this.description, this.requiredStrength, this.requiredDefense, this.cost, this.finish, this.troops)
                }, e
            }(),
            py = function () {
                function e(e, t, n, r, i, l, o) {
                    var u = this;
                    this.resourcesService = e, this.modalService = t, this.logService = n, this.soundService = r, this.calendarService = i, this.effectsService = l, this.servicesService = o, this.missions = [], this.troops = [], this.missionsInProgress = [], this.recruits = [], this.barracksSize = 0, this.invasionThreat = 0, this.defense = 0, this.enemyPower = 0, this.incomingAttack = 0, this.invasionEvaluation = 10, this.stashSize = 0, this.recruitsUpdate = new L, this.missionsUpdate = new L, o.addService(Nu.ARMY, this), this.init(), this.calendarService.registerForDayChange().subscribe(function (e) {
                        u.getEnemyInvasionPower() > u.getDefenseStrength() + u.defense + u.resourcesService.getTotalPeople() / 2 && (u.invasionThreat += u.resourcesService.getResourcesValue() / (100 * ju)), u.invasionEvaluation -= 1, u.invasionEvaluation <= 0 && 0 === u.incomingAttack && (u.invasionEvaluation = 10, Mu.chance((u.invasionThreat - u.defense) / 100) && (u.incomingAttack = Mu.randomBetween(20, 50), u.invasionThreat = 0, u.logService.warning("Incoming attack in " + u.incomingAttack + " days!"), u.soundService.playTownBells())), u.incomingAttack > 0 && (u.incomingAttack -= 1, 0 === u.incomingAttack && u.calculateInvasion()), u.enemyPower += 10 / ju
                    })
                }
                return e.prototype.init = function () {
                    var e = this;
                    this.missions = [], this.missionsInProgress = [], this.troops = [], Array.from(Object.entries(Ju.MISSIONS)).forEach(function (t) {
                        var n = new Map;
                        t[1].COST.forEach(function (e) {
                            return n.set(e.resource, e.amount)
                        }), e.missions.push(new cy(Tu[t[0]], t[1].TIME, t[1].DESCRIPTION, t[1].REQUIRED_STRENGTH, t[1].REQUIRED_DEFENSE, n, t[1].FINISH))
                    }), Array.from(Object.entries(Ju.TROOPS)).forEach(function (t) {
                        var n = new Map;
                        t[1].COST.forEach(function (e) {
                            return n.set(e.resource, e.amount)
                        }), e.troops.push([new ay(Iu[t[0]], t[1].RECRUIT_TIME, t[1].STRENGTH, t[1].DEFENSE, n), 0])
                    })
                }, e.prototype.tick = function (e) {
                    var t = this;
                    this.missionsInProgress.forEach(function (e) {
                        e[1] += .1, e[1] >= e[0].time && (e[0].finish(t.servicesService, e[0], t.enemyPower), e[0].troops.forEach(function (e) {
                            t.troops.find(function (t) {
                                return t[0].troop === e[0].troop
                            })[1] += e[1]
                        }), t.logService.log(Au.prepareMissionName(e[0].mission) + " finished"))
                    }), this.missionsInProgress = this.missionsInProgress.filter(function (e) {
                        return e[1] < e[0].time
                    }), this.missionsUpdate.next()
                }, e.prototype.getEnemyInvasionPower = function () {
                    return Math.floor(this.enemyPower / 10)
                }, e.prototype.calculateInvasion = function () {
                    var e = this;
                    this.logService.warning("INVASION");
                    for (var t = this.getEnemyInvasionPower(), n = this.generateArmyOfPower(t), r = function () {
                            var e = i.getRandomTroop(i.troops),
                                t = i.getRandomTroop(n),
                                r = t.strength - e.defense * i.getTroopEffectsMultiplier(e.troop),
                                l = 50;
                            r > 0 ? (l += 2 * r) > 90 && (l = 90) : (l -= 2 * r) < 10 && (l = 10), Mu.chance(l / 100) ? i.troops.find(function (t) {
                                return t[0].troop === e.troop
                            })[1] -= 1 : (n.find(function (e) {
                                return e[0].troop === t.troop
                            })[1] -= 1, n = n.filter(function (e) {
                                return e[1] > 0
                            }))
                        }, i = this; n.length > 0 && this.hasTroops(this.troops);) r();
                    if (n.length > 0) {
                        var l = 0;
                        n.forEach(function (e) {
                            return l += e[0].strength * e[1] * 20
                        });
                        for (var o = "<br>", u = [], s = function () {
                                var t = Array.from(a.resourcesService.getResources().values()).filter(function (t) {
                                        return t.amount > e.stashSize
                                    }),
                                    n = Mu.randomExcept(t, []);
                                if (void 0 === n) return l = 0, "break";
                                var r = Xu.getResource(n.resource),
                                    i = 0;
                                i = Mu.randomBetween(1, r.TRADE_VALUE < 10 ? 20 : r.TRADE_VALUE < 50 ? 10 : r.TRADE_VALUE < 300 ? 5 : 2), n.amount - a.stashSize < i && (i = n.amount - a.stashSize), l -= r.TRADE_VALUE * i;
                                var o = u.find(function (e) {
                                    return e.resource === n.resource
                                });
                                o ? o.amount += i : u.push({
                                    resource: n.resource,
                                    amount: i
                                }), a.resourcesService.decreaseResource(n.resource, i, !0)
                            }, a = this; l > 0 && "break" !== s(););
                        u.forEach(function (e) {
                            o += "&emsp;" + e.amount + " " + Au.prepareResourceName(e.resource) + "<br>"
                        }), this.logService.log(u.length > 0 ? "We have been plundered: " + o : "We have been invaded but nothing has been stolen")
                    } else this.logService.log("Invading forces have been defeated"), this.reduceEnemyPower(t)
                }, e.prototype.reduceEnemyPower = function (e) {
                    this.enemyPower -= e, this.enemyPower < 10 && (this.enemyPower = 10)
                }, e.prototype.getTroopEffectsValue = function (e) {
                    var t = 0;
                    return this.effectsService.getArmyEffects().filter(function (t) {
                        return null === t.troop || t.troop === e
                    }).forEach(function (e) {
                        return t += e.effect
                    }), t
                }, e.prototype.getTroopEffectsMultiplier = function (e) {
                    return 1 + this.getTroopEffectsValue(e) / 100
                }, e.prototype.getRandomTroop = function (e) {
                    var t = e.filter(function (e) {
                        return e[1] > 0
                    });
                    return t[Mu.randomBetween(0, t.length - 1)][0]
                }, e.prototype.hasTroops = function (e) {
                    var t = !1;
                    return e.forEach(function (e) {
                        e[1] > 0 && (t = !0)
                    }), t
                }, e.prototype.generateArmyOfPower = function (e) {
                    for (var t = [], n = function () {
                            var n = Mu.randomElement([{
                                    item: Iu.MILITIA,
                                    chance: 40
                                }, {
                                    item: Iu.SPEARMAN,
                                    chance: 30
                                }, {
                                    item: Iu.ARCHER,
                                    chance: 20
                                }, {
                                    item: Iu.SWORDSMAN,
                                    chance: 10
                                }]),
                                r = Ju.getTroop(n),
                                i = r.DEFENSE + r.STRENGTH,
                                l = t.find(function (e) {
                                    return e[0].troop === n
                                });
                            l ? l[1] += 1 : t.push([new ay(n, 0, r.STRENGTH, r.DEFENSE, null, 1), 1]), e -= i
                        }; e > 0;) n();
                    return t
                }, e.prototype.load = function (e) {
                    var t = this;
                    this.barracksSize = e.barracksSize, this.invasionThreat = e.invasionThreat, this.defense = e.defense, this.enemyPower = e.enemyPower, this.invasionEvaluation = e.invasionEvaluation, this.incomingAttack = e.incomingAttack, this.stashSize = e.stashSize, e.troops.forEach(function (e) {
                        var n = t.troops.find(function (t) {
                            return t[0].troop === e[0]
                        });
                        n && (n[1] = e[1])
                    }), this.recruits = [], e.recruits.forEach(function (e) {
                        var n = t.troops.find(function (t) {
                            return t[0].troop === e[0]
                        });
                        n && t.recruits.push([n[0], e[1], e[2]])
                    }), this.missionsInProgress = [], e.missionsInProgress.forEach(function (e) {
                        var n = t.missions.find(function (t) {
                            return t.mission === e[0]
                        });
                        n && t.missionsInProgress.push([n, e[1]])
                    })
                }, e.prototype.save = function () {
                    var e = [];
                    this.troops.forEach(function (t) {
                        return e.push([t[0].troop, t[1]])
                    });
                    var t = [];
                    this.recruits.forEach(function (e) {
                        return t.push([e[0].troop, e[1], e[2]])
                    });
                    var n = [];
                    return this.missionsInProgress.forEach(function (e) {
                        return n.push([e[0].mission, e[1]])
                    }), {
                        barracksSize: this.barracksSize,
                        troops: e,
                        missionsInProgress: n,
                        recruits: t,
                        invasionThreat: this.invasionThreat,
                        defense: this.defense,
                        enemyPower: this.enemyPower,
                        invasionEvaluation: this.invasionEvaluation,
                        incomingAttack: this.incomingAttack,
                        stashSize: this.stashSize
                    }
                }, e.prototype.reset = function (e, t) {
                    this.missions = [], this.troops = [], this.missionsInProgress = [], this.recruits = [], this.barracksSize = 0, this.invasionThreat = 0, this.defense = 0, this.enemyPower = 0, this.incomingAttack = 0, this.invasionEvaluation = 10, this.stashSize = 0, this.init()
                }, e.prototype.progressRecruitment = function (e) {
                    var t = this;
                    this.recruits.length > 0 && (this.recruits[0][2] += e, this.recruits[0][2] >= this.recruits[0][0].recruitTime && (this.troops.find(function (e) {
                        return e[0].troop === t.recruits[0][0].troop
                    })[1] += 1, this.recruits[0][1] -= 1, this.recruits[0][2] = 0, 0 === this.recruits[0][1] && this.recruits.shift()), this.recruitsUpdate.next())
                }, e.prototype.recruit = function (e, t) {
                    this.getFreeBarracks() >= t ? this.resourcesService.getPeople() >= t ? this.resourcesService.decreaseResources(e.cost, !0, t) && (this.resourcesService.removeRecruit(t), this.recruits.push([e, t, 0])) : this.modalService.info("Not enough unemployed people to recruit!") : this.modalService.info("Not enough space in barracks for so many recruits")
                }, e.prototype.getRecruits = function () {
                    return this.recruits
                }, e.prototype.getMissions = function () {
                    return this.missions
                }, e.prototype.getCurrentMissions = function () {
                    return this.missionsInProgress
                }, e.prototype.getTroops = function () {
                    return this.troops
                }, e.prototype.getArmySize = function () {
                    var e = 0;
                    return this.troops.forEach(function (t) {
                        return e += t[1]
                    }), this.recruits.forEach(function (t) {
                        return e += t[1]
                    }), this.missionsInProgress.forEach(function (t) {
                        t[0].troops.forEach(function (t) {
                            return e += t[1]
                        })
                    }), e
                }, e.prototype.getFreeBarracks = function () {
                    return this.barracksSize - this.getArmySize()
                }, e.prototype.increaseBarracks = function (e) {
                    this.barracksSize += e
                }, e.prototype.decreaseBarracks = function (e) {
                    this.barracksSize -= e
                }, e.prototype.getBarracksSize = function () {
                    return this.barracksSize
                }, e.prototype.getDefenseStrength = function () {
                    var e = this.defense;
                    return this.troops.forEach(function (t) {
                        return e += t[0].defense * t[1]
                    }), e
                }, e.prototype.getInvasionThreat = function () {
                    return Math.floor(this.invasionThreat)
                }, e.prototype.increaseDefense = function (e) {
                    this.defense += e
                }, e.prototype.decreaseDefense = function (e) {
                    this.defense -= e
                }, e.prototype.hasRecruits = function () {
                    return this.recruits.length > 0
                }, e.prototype.registerForRecruitsUpdate = function () {
                    return this.recruitsUpdate.asObservable()
                }, e.prototype.registerForMissionsUpdate = function () {
                    return this.missionsUpdate.asObservable()
                }, e.prototype.getAttackStrength = function () {
                    var e = 0;
                    return this.troops.forEach(function (t) {
                        return e += t[0].strength * t[1]
                    }), e
                }, e.prototype.startMission = function (e) {
                    var t = this;
                    this.modalService.open(mu.MISSION), this.modalService.setMission(e);
                    var n = this.modalService.registerForMissionResponse().subscribe(function (r) {
                        if (n.unsubscribe(), void 0 !== r) {
                            var i = !0,
                                l = 0,
                                o = 0,
                                u = 0;
                            if (r.troops.forEach(function (e) {
                                    if (l += e[1], o += e[1] * e[0].strength * t.getTroopEffectsMultiplier(e[0].troop), u += e[1] * e[0].defense * t.getTroopEffectsMultiplier(e[0].troop), i) {
                                        var n = t.troops.find(function (t) {
                                            return t[0].troop === e[0].troop
                                        });
                                        e[1] > n[1] && (i = !1, t.modalService.info("You don't have so many " + Au.prepareTroopName(n[0].troop)))
                                    }
                                }), 0 === l ? (t.modalService.info("You cannot start mission without any troops"), i = !1) : o < r.requiredStrength ? (t.modalService.info("Selected troops don't meet strength requirement"), i = !1) : u < r.requiredDefense && (t.modalService.info("Selected troops don't meet defense requirement"), i = !1), !i) return;
                            if (!t.resourcesService.decreaseResources(r.cost, !0, l)) return void t.modalService.info("You don't have enough resources to start this mission");
                            r.troops.forEach(function (e) {
                                t.troops.find(function (t) {
                                    return t[0].troop === e[0].troop
                                })[1] -= e[1]
                            }), t.missionsInProgress.push([e, 0])
                        }
                    })
                }, e.prototype.addMilitia = function (e) {
                    this.troops.find(function (e) {
                        return e[0].troop === Iu.MILITIA
                    })[1] += e
                }, e.prototype.decreaseInvasionThreat = function (e) {
                    this.invasionThreat -= e
                }, e.prototype.increaseStash = function (e) {
                    this.stashSize += e
                }, e.prototype.decreaseStash = function (e) {
                    this.stashSize -= e
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Cg), ze(yg), ze(mg), ze(Om), ze(vg), ze(Hg), ze(pg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            hy = function () {
                function e(e, t) {
                    this.armyService = e, this.resourcesService = t, this.id = Math.random(), this.progress = 0
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.updateSubscription = this.armyService.registerForRecruitsUpdate().subscribe(function () {
                        e.progressRef && (e.progressRef.nativeElement.style.width = e.progress / e.troop.recruitTime * 100 + "%")
                    })
                }, e.prototype.ngAfterViewInit = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.progress / this.troop.recruitTime * 100 + "%")
                }, e.prototype.getTroopName = function () {
                    return Iu[this.troop.troop]
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.getCost = function () {
                    return this.troop.cost
                }, e.prototype.checkResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e
            }(),
            dy = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}.costTitle[_ngcontent-%COMP%], .statsTitle[_ngcontent-%COMP%]{text-align:left}.tooltipSpan[_ngcontent-%COMP%]{min-width:100px}.missing[_ngcontent-%COMP%]{color:#8b0000}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function fy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value)
            })
        }

        function gy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["class", "missing"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""]))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.value)
            })
        }

        function vy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, fy)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, gy)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(7, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.checkResource(t.context.$implicit)), e(t, 5, 0, !n.checkResource(t.context.$implicit)), e(t, 7, 0, n.getResourceName(t.context.$implicit.key), "resources")
            }, null)
        }

        function my(e) {
            return so(0, [kl(0, Bs, []), $l(402653184, 1, {
                progressRef: 0
            }), (e()(), Yi(2, 0, null, null, 23, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "mousemove"]], function (e, t, n) {
                var r = !0;
                return "mousemove" === t && (r = !1 !== El(e, 3).onmousemove(n) && r), r
            }, null, null)), Ml(3, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(4, 0, [[1, 0], ["progressId", 1]], null, 0, "div", [["id", "progressId"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 18, "span", [["class", "tooltipSpan"]], [[8, "id", 0]], null, null, null, null)), (e()(), lo(6, null, [" ", " "])), no(7, 1), (e()(), Yi(8, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "div", [["class", "statsTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), Yi(11, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(12, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(13, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(14, null, [": ", ""])), (e()(), Yi(15, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(16, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(17, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(18, null, [": ", ""])), (e()(), Yi(19, 0, null, null, 1, "div", [["class", "costTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), ji(16777216, null, null, 2, null, vy)), Ml(22, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr]), (e()(), Yi(24, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(25, null, ["", " - ", ""]))], function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.id), e(t, 13, 0, "attack", "army"), e(t, 17, 0, "defense", "army"), e(t, 22, 0, hi(t, 22, 0, El(t, 23).transform(n.getCost())))
            }, function (e, t) {
                var n = t.component;
                e(t, 5, 0, Vi(1, "", n.id, ""));
                var r = hi(t, 6, 0, e(t, 7, 0, El(t, 0), n.getTroopName()));
                e(t, 6, 0, r), e(t, 14, 0, n.troop.strength), e(t, 18, 0, n.troop.defense), e(t, 25, 0, n.getTroopName(), n.count)
            })
        }
        var yy = function () {
                function e(e) {
                    this.armyService = e, this.progress = 0, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.updateSubscription = this.armyService.registerForMissionsUpdate().subscribe(function () {
                        e.progressRef && (e.progressRef.nativeElement.style.width = e.progress / e.mission.time * 100 + "%")
                    })
                }, e.prototype.ngAfterViewInit = function () {
                    this.progressRef && (this.progressRef.nativeElement.style.width = this.progress / this.mission.time * 100 + "%")
                }, e.prototype.getMissionName = function (e) {
                    return Tu[e]
                }, e
            }(),
            Sy = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}"]],
                data: {}
            });

        function Ey(e) {
            return so(0, [$l(402653184, 1, {
                progressRef: 0
            }), (e()(), Yi(1, 0, null, null, 6, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "mousemove"]], function (e, t, n) {
                var r = !0;
                return "mousemove" === t && (r = !1 !== El(e, 2).onmousemove(n) && r), r
            }, null, null)), Ml(2, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(3, 0, [[1, 0], ["progressId", 1]], null, 0, "div", [["id", "progressId"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(5, null, ["", ""])), (e()(), Yi(6, 0, null, null, 1, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(7, null, [" ", " "]))], function (e, t) {
                e(t, 2, 0, t.component.id)
            }, function (e, t) {
                var n = t.component;
                e(t, 5, 0, n.getMissionName(n.mission.mission)), e(t, 6, 0, Vi(1, "", n.id, "")), e(t, 7, 0, n.mission.description)
            })
        }
        var Oy = function () {
                function e(e, t, n) {
                    this.armyService = e, this.resourcesService = t, this.changeDetectorRef = n, this.selection = 1
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.armyService.registerForRecruitsUpdate().subscribe(function () {
                        e.changeDetectorRef.destroyed || e.changeDetectorRef.detectChanges()
                    })
                }, e.prototype.changeSelection = function (e) {
                    this.selection = e
                }, e.prototype.getMissions = function () {
                    return this.armyService.getMissions()
                }, e.prototype.getCurrentMissions = function () {
                    return this.armyService.getCurrentMissions()
                }, e.prototype.getTroops = function () {
                    return this.armyService.getTroops()
                }, e.prototype.getRecruits = function () {
                    return this.armyService.getRecruits()
                }, e.prototype.recruit = function (e) {
                    this.armyService.recruit(e, this.selection)
                }, e.prototype.isDev = function () {
                    return !Hu.production
                }, e.prototype.progress = function () {
                    this.armyService.progressRecruitment(10)
                }, e.prototype.getBarracksSize = function () {
                    return this.armyService.getBarracksSize()
                }, e.prototype.getTroopsSize = function () {
                    return this.armyService.getArmySize()
                }, e.prototype.getUnemployed = function () {
                    return this.resourcesService.getPeople()
                }, e.prototype.getDefenseStrength = function () {
                    return this.armyService.getDefenseStrength()
                }, e.prototype.getInvasionThreat = function () {
                    return this.armyService.getInvasionThreat()
                }, e.prototype.getAttackStrength = function () {
                    return this.armyService.getAttackStrength()
                }, e.prototype.startMission = function (e) {
                    this.armyService.startMission(e)
                }, e
            }(),
            by = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;flex:0 0 33%;display:flex;flex-direction:column;border:1px solid #000;align-items:center}.category2[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;border:1px solid #000}.recruits[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden;border-bottom:1px solid #000}.missionsInProgress[_ngcontent-%COMP%]{text-align:center;flex:0 0 50%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden}.category3[_ngcontent-%COMP%]:last-of-type{border-top:1px solid #000}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}app-mission[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em}app-troop[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em;cursor:pointer}.mission[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function Ty(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.changeSelection(1) && r), r
            }, null, null)), (e()(), lo(-1, null, ["1x"]))], null, null)
        }

        function Ry(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number active"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.changeSelection(1) && r), r
            }, null, null)), (e()(), lo(-1, null, ["1x"]))], null, null)
        }

        function Cy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.changeSelection(10) && r), r
            }, null, null)), (e()(), lo(-1, null, ["10x"]))], null, null)
        }

        function _y(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number active"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.changeSelection(10) && r), r
            }, null, null)), (e()(), lo(-1, null, ["10x"]))], null, null)
        }

        function Iy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.changeSelection(100) && r), r
            }, null, null)), (e()(), lo(-1, null, ["100x"]))], null, null)
        }

        function Ay(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "number active"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.changeSelection(100) && r), r
            }, null, null)), (e()(), lo(-1, null, ["100x"]))], null, null)
        }

        function wy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-troop", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.recruit(e.context.$implicit[0]) && r), r
            }, my, dy)), Ml(1, 4308992, null, 0, hy, [py, Cg], {
                troop: [0, "troop"],
                count: [1, "count"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.context.$implicit[0], t.context.$implicit[1])
            }, null)
        }

        function Ny(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-mission", [["class", "mission"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.startMission(e.context.$implicit) && r), r
            }, Ey, Sy)), Ml(1, 4308992, null, 0, yy, [py], {
                mission: [0, "mission"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.context.$implicit)
            }, null)
        }

        function Py(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.progress() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Dy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-troop", [], null, null, null, my, dy)), Ml(1, 4308992, null, 0, hy, [py, Cg], {
                troop: [0, "troop"],
                count: [1, "count"],
                progress: [2, "progress"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.context.$implicit[0], t.context.$implicit[1], t.context.$implicit[2])
            }, null)
        }

        function My(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-mission", [], null, null, null, Ey, Sy)), Ml(1, 4308992, null, 0, yy, [py], {
                mission: [0, "mission"],
                progress: [1, "progress"],
                id: [2, "id"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.context.$implicit[0], t.context.$implicit[1], t.context.index)
            }, null)
        }

        function ky(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 55, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "div", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(3, 0, null, null, 15, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(5, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(6, null, ["\xa0", "/", " \xa0\xa0 "])), (e()(), Yi(7, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(8, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(9, null, ["\xa0", " \xa0\xa0\xa0 "])), (e()(), Yi(10, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(11, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(12, null, ["\xa0", " \xa0\xa0\xa0 "])), (e()(), Yi(13, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(14, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(15, null, ["\xa0", " \xa0\xa0\xa0 "])), (e()(), Yi(16, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(17, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(18, null, ["\xa0", " "])), (e()(), Yi(19, 0, null, null, 36, "div", [["id", "categories"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 17, "div", [["class", "category"]], null, null, null, null, null)), (e()(), Yi(21, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(23, 0, null, null, 12, "div", [["id", "numbers"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Ty)), Ml(25, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Ry)), Ml(27, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Cy)), Ml(29, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, _y)), Ml(31, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Iy)), Ml(33, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Ay)), Ml(35, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, wy)), Ml(37, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(38, 0, null, null, 4, "div", [["class", "category"]], null, null, null, null, null)), (e()(), Yi(39, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), ji(16777216, null, null, 1, null, Ny)), Ml(42, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(43, 0, null, null, 12, "div", [["class", "category2"]], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 6, "div", [["class", "recruits"]], null, null, null, null, null)), (e()(), Yi(45, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), ji(16777216, null, null, 1, null, Py)), Ml(48, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Dy)), Ml(50, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(51, 0, null, null, 4, "div", [["class", "missionsInProgress"]], null, null, null, null, null)), (e()(), Yi(52, 0, null, null, 1, "span", [["class", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), ji(16777216, null, null, 1, null, My)), Ml(55, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0, "barracks", "army", "Barracks"), e(t, 8, 0, "hammer", "Workers", "0 0 0 2px"), e(t, 11, 0, "invasion", "army", "Invasion threat"), e(t, 14, 0, "attack", "army", "Attack strength"), e(t, 17, 0, "defense", "army", "Defense strength"), e(t, 25, 0, 1 !== n.selection), e(t, 27, 0, 1 === n.selection), e(t, 29, 0, 10 !== n.selection), e(t, 31, 0, 10 === n.selection), e(t, 33, 0, 100 !== n.selection), e(t, 35, 0, 100 === n.selection), e(t, 37, 0, n.getTroops()), e(t, 42, 0, n.getMissions()), e(t, 48, 0, n.isDev()), e(t, 50, 0, n.getRecruits()), e(t, 55, 0, n.getCurrentMissions())
            }, function (e, t) {
                var n = t.component;
                e(t, 6, 0, n.getTroopsSize(), n.getBarracksSize()), e(t, 9, 0, n.getUnemployed()), e(t, 12, 0, n.getInvasionThreat()), e(t, 15, 0, n.getAttackStrength()), e(t, 18, 0, n.getDefenseStrength())
            })
        }

        function Ly(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-army", [], null, null, null, ky, by)), Ml(1, 114688, null, 0, Oy, [py, Cg, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var xy = al("app-army", Oy, Ly, {}, {}, []),
            Fy = function () {
                return function (e, t, n, r, i, l) {
                    this.prayer = e, this.cost = t, this.requiredFaithLevel = n, this.religion = r, this.description = i, this.effect = l
                }
            }(),
            Uy = function () {
                function e(e, t, n) {
                    this.servicesService = e, this.modalService = t, this.resourcesService = n, this.faith = 0, this.faithCap = 40, this.faithLevel = 1, this.faithShield = 0, this.religion = _u.NONE, this.prayers = [], e.addService(Nu.RELIGION, this), this.initPrayers()
                }
                return e.prototype.initPrayers = function () {
                    var e = this;
                    this.prayers = [], Object.entries(rs.PRAYERS).forEach(function (t) {
                        e.prayers.push(new Fy(bu[t[0]], t[1].FAITH, t[1].FAITH_LEVEL, t[1].RELIGION, t[1].DESCRIPTION, t[1].FINISH))
                    })
                }, e.prototype.load = function (e) {
                    this.faith = e.faith, this.faithCap = e.faithCap, this.faithLevel = e.faithLevel, this.religion = e.religion, this.faithShield = e.faithShield, this.prayers.find(function (e) {
                        return e.prayer === bu.PREACH
                    }).cost = e.preachCost
                }, e.prototype.save = function () {
                    return {
                        faith: this.faith,
                        faithCap: this.faithCap,
                        faithLevel: this.faithLevel,
                        religion: this.religion,
                        faithShield: this.faithShield,
                        preachCost: this.prayers.find(function (e) {
                            return e.prayer === bu.PREACH
                        }).cost
                    }
                }, e.prototype.reset = function (e, t) {
                    this.faith = 0, this.faithCap = 40, this.faithLevel = 1, this.faithShield = 0, this.religion = _u.NONE, this.prayers = [], this.initPrayers()
                }, e.prototype.getFaith = function () {
                    return this.faith
                }, e.prototype.increaseFaith = function (e) {
                    this.faith += e, this.faith > this.faithCap && (this.faith = this.faithCap)
                }, e.prototype.increaseFaithCap = function (e) {
                    this.faithCap += e
                }, e.prototype.decreaseFaithCap = function (e) {
                    this.faithCap -= e, this.faith > this.faithCap && (this.faith = this.faithCap)
                }, e.prototype.decreaseFaith = function (e) {
                    return this.faith - e >= 0 ? (this.faith -= e, 0) : e - this.faith
                }, e.prototype.getFaithCap = function () {
                    return this.faithCap
                }, e.prototype.getPrayers = function () {
                    var e = this;
                    return this.prayers.filter(function (t) {
                        return (t.religion === _u.NONE || t.religion === e.religion) && t.requiredFaithLevel <= e.faithLevel
                    })
                }, e.prototype.pray = function (e) {
                    e.cost <= this.faith ? (this.faith -= e.cost, e.effect(this.servicesService), e.prayer === bu.PREACH && (this.prayers.find(function (e) {
                        return e.prayer === bu.PREACH
                    }).cost += 10)) : this.modalService.info("Not enough faith for this prayer!")
                }, e.prototype.increaseFaithLevel = function (e) {
                    this.faithLevel += e
                }, e.prototype.increaseFaithShield = function (e) {
                    this.faithShield += e
                }, e.prototype.decreaseFaithShield = function (e) {
                    if (this.faithShield >= e) return this.faithShield -= e, 0;
                    var t = e - this.faithShield;
                    return this.faithShield = 0, t
                }, e.prototype.getFaithLevel = function () {
                    return this.faithLevel
                }, e.prototype.getFaithShield = function () {
                    return this.faithShield
                }, e.prototype.getCurrentReligion = function () {
                    return this.religion
                }, e.prototype.getReligionSettings = function (e) {
                    return rs.getReligion(e)
                }, e.prototype.changeReligion = function (e) {
                    var t = this;
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to change religion?");
                    var n = this.modalService.registerForConfirmation().subscribe(function (r) {
                        if (n.unsubscribe(), r) {
                            var i = t.getReligionSettings(e);
                            if (t.faith < i.FAITH) return void t.modalService.info("Not enough faith");
                            var l = new Map;
                            if (i.OFFERING.forEach(function (e) {
                                    return l.set(e.resource, e.amount)
                                }), !t.resourcesService.hasResources(l, !0)) return void t.modalService.info("Not enough offering resources");
                            t.faith -= i.FAITH, t.resourcesService.decreaseResources(l, !0), t.religion = e
                        }
                    })
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(yg), ze(Cg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Hy = function () {
                function e(e) {
                    this.religionService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getPrayerName = function () {
                    return Au.preparePrayerName(this.prayer.prayer)
                }, e.prototype.isAvailable = function () {
                    return this.religionService.getFaith() >= this.prayer.cost
                }, e
            }(),
            Gy = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:20%;padding:3px;margin:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:20%;padding:3px;margin:3px;text-align:center;border:1px solid #646464}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#646464}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function By(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 9, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "mousemove"]], function (e, t, n) {
                var r = !0;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 1, "div", [["id", "title"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 5, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(5, null, [" ", " "])), (e()(), Yi(6, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), lo(7, null, [" ", " "])), (e()(), Yi(8, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(9, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.component.id), e(t, 9, 0, "faith", "religion")
            }, function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.getPrayerName()), e(t, 4, 0, Vi(1, "", n.id, "")), e(t, 5, 0, n.prayer.description), e(t, 7, 0, n.prayer.cost)
            })
        }

        function Vy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapperNotAvailable"]], null, [[null, "mousemove"]], function (e, t, n) {
                var r = !0;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 1, "div", [["id", "titleGrey"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 6, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(5, null, [" ", " "])), (e()(), Yi(6, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), lo(8, null, [" ", " "])), (e()(), Yi(9, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(10, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.component.id), e(t, 10, 0, "faith", "religion")
            }, function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.getPrayerName()), e(t, 4, 0, Vi(1, "", n.id, "")), e(t, 5, 0, n.prayer.description), e(t, 8, 0, n.prayer.cost)
            })
        }

        function Wy(e) {
            return so(0, [(e()(), ji(16777216, null, null, 1, null, By)), Ml(1, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Vy)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.isAvailable()), e(t, 3, 0, !n.isAvailable())
            }, null)
        }
        var jy = function () {
                function e(e, t) {
                    this.religionService = e, this.resourcesService = t
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getFaith = function () {
                    return this.religionService.getFaith()
                }, e.prototype.getFaithCap = function () {
                    return this.religionService.getFaithCap()
                }, e.prototype.increaseFaith = function (e) {
                    this.religionService.increaseFaith(e)
                }, e.prototype.isDev = function () {
                    return !Hu.production
                }, e.prototype.getPrayers = function () {
                    return this.religionService.getPrayers()
                }, e.prototype.pray = function (e) {
                    this.religionService.pray(e)
                }, e.prototype.getFaithShield = function () {
                    return Au.round(this.religionService.getFaithShield(), 2)
                }, e.prototype.getReligions = function () {
                    return [_u.NONE, _u.FERTILITY, _u.NATURE, _u.TECHNOLOGY, _u.WAR]
                }, e.prototype.getReligionName = function (e) {
                    return Au.prepareReligionName(e)
                }, e.prototype.getCurrentReligion = function () {
                    return this.religionService.getCurrentReligion()
                }, e.prototype.getCurrentReligionName = function () {
                    return _u[this.getCurrentReligion()]
                }, e.prototype.getCurrentReligionDisplayName = function () {
                    return Au.prepareReligionName(this.getCurrentReligion())
                }, e.prototype.changeReligion = function (e) {
                    this.religionService.changeReligion(e)
                }, e.prototype.getReligionSettings = function (e) {
                    return rs.getReligion(e)
                }, e.prototype.getResourceString = function (e) {
                    return vu[e]
                }, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.resource, e.amount)
                }, e
            }(),
            Yy = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#table[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;height:85%}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto;border:1px solid #000}#prayers[_ngcontent-%COMP%]{flex:0 0 70%;overflow-y:auto}#religions[_ngcontent-%COMP%]{flex:1 0 auto;overflow-y:auto}.prayer[_ngcontent-%COMP%]{display:inline}.tableTitle[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center}app-prayer[_ngcontent-%COMP%]{cursor:pointer}.faith[_ngcontent-%COMP%]{margin-right:-2px}.religion[_ngcontent-%COMP%]{border:1px solid #000;text-align:center;margin:3px;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--active-colour);cursor:auto}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}.notMet[_ngcontent-%COMP%]{color:#8b0000}.inline[_ngcontent-%COMP%]{display:inline}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function zy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.increaseFaith(10) && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Ky(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "prayer"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-prayer", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.pray(e.context.$implicit) && r), r
            }, Wy, Gy)), Ml(2, 114688, null, 0, Hy, [Uy], {
                prayer: [0, "prayer"],
                id: [1, "id"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.context.$implicit, t.context.index)
            }, null)
        }

        function qy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "religion active"]], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                e(t, 1, 0, t.component.getReligionName(t.parent.context.$implicit))
            })
        }

        function Qy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "inline"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.component.getReligionSettings(t.parent.parent.context.$implicit).FAITH)
            })
        }

        function $y(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "inline notMet"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.component.getReligionSettings(t.parent.parent.context.$implicit).FAITH)
            })
        }

        function Zy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, ["offering:"]))], null, null)
        }

        function Xy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "inline"]], null, null, null, null, null)), (e()(), lo(1, null, ["", " "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.amount)
            })
        }

        function Jy(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["class", "inline notMet"]], null, null, null, null, null)), (e()(), lo(1, null, ["", " "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.amount)
            })
        }

        function eS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon2"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Xy)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Jy)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(7, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.hasResource(t.context.$implicit)), e(t, 5, 0, !n.hasResource(t.context.$implicit)), e(t, 7, 0, n.getResourceString(t.context.$implicit.resource), "resources")
            }, null)
        }

        function tS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 16, "div", [["appTooltip", ""], ["class", "religion tooltip"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.changeReligion(e.parent.context.$implicit) && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), lo(2, null, [" ", " "])), (e()(), Yi(3, 0, null, null, 13, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(4, null, [" ", " "])), (e()(), Yi(5, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 6, "div", [["class", "icon2"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Qy)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, $y)), Ml(10, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(11, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(12, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Zy)), Ml(14, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, eS)), Ml(16, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, 0 - t.parent.context.$implicit), e(t, 8, 0, n.getFaith() >= n.getReligionSettings(t.parent.context.$implicit).FAITH), e(t, 10, 0, n.getFaith() < n.getReligionSettings(t.parent.context.$implicit).FAITH), e(t, 12, 0, "faith", "religion"), e(t, 14, 0, n.getReligionSettings(t.parent.context.$implicit).OFFERING.length > 0), e(t, 16, 0, n.getReligionSettings(t.parent.context.$implicit).OFFERING)
            }, function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.getReligionName(t.parent.context.$implicit)), e(t, 3, 0, Vi(1, "", 0 - t.parent.context.$implicit, "")), e(t, 4, 0, n.getReligionName(t.parent.context.$implicit))
            })
        }

        function nS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, qy)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, tS)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, t.context.$implicit === n.getCurrentReligion()), e(t, 4, 0, t.context.$implicit !== n.getCurrentReligion())
            }, null)
        }

        function rS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 32, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(4, 0, null, null, 9, "div", [], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(7, 0, null, null, 1, "app-icon", [["class", "faith"]], null, null, null, of , lf)), Ml(8, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(9, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, [":"])), (e()(), lo(11, null, [" ", "/", " "])), (e()(), ji(16777216, null, null, 1, null, zy)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(14, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [" Faith shield "])), (e()(), Yi(16, 0, null, null, 1, "app-icon", [["class", "prayer"]], null, null, null, of , lf)), Ml(17, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(18, null, [" : ", " "])), (e()(), Yi(19, 0, null, null, 13, "div", [["id", "table"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 7, "div", [["class", "column"], ["id", "prayers"]], null, null, null, null, null)), (e()(), Yi(21, 0, null, null, 3, "span", [["class", "tableTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Prayers "])), (e()(), Yi(23, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(24, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), Yi(25, 0, null, null, 2, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Ky)), Ml(27, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(28, 0, null, null, 4, "div", [["class", "column"], ["id", "religions"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 1, "span", [["class", "tableTitle"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), ji(16777216, null, null, 1, null, nS)), Ml(32, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 8, 0, "faith", "religion"), e(t, 13, 0, n.isDev()), e(t, 17, 0, "faith_shield", "religion", "Faith shield"), e(t, 24, 0, n.getCurrentReligionName(), "religion", n.getCurrentReligionDisplayName()), e(t, 27, 0, n.getPrayers()), e(t, 32, 0, n.getReligions())
            }, function (e, t) {
                var n = t.component;
                e(t, 11, 0, n.getFaith(), n.getFaithCap()), e(t, 18, 0, n.getFaithShield())
            })
        }

        function iS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-religion", [], null, null, null, rS, Yy)), Ml(1, 114688, null, 0, jy, [Uy, Cg], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var lS = al("app-religion", jy, iS, {}, {}, []),
            oS = function () {
                function e(e, t, n) {
                    this.servicesService = e, this.calendarService = t, this.optionsService = n, this.forecastPeriod = 1, this.forecast = [], e.addService(Nu.WEATHER, this), this.tick(0)
                }
                return e.prototype.load = function (e) {
                    this.forecast = e.forecast
                }, e.prototype.save = function () {
                    return {
                        forecast: this.forecast
                    }
                }, e.prototype.reset = function (e, t) {
                    this.forecast = [], this.today = null, this.tick(0)
                }, e.prototype.tick = function (e) {
                    for (var t = this.calendarService.getAbsoluteDay(); this.forecast.length > 0 && this.forecast[0][0] < t;) this.forecast.shift();
                    for (; this.forecast.length < this.forecastPeriod;) {
                        var n = t;
                        0 !== this.forecast.length && (n = this.forecast[this.forecast.length - 1][0] + 1), this.forecast.push(this.predictDay(n))
                    }
                    this.today = this.forecast[0]
                }, e.prototype.predictDay = function (e) {
                    var t, n;
                    switch (this.calendarService.getSeasonForAbsoluteDay(e)) {
                        case gg.SPRING:
                            t = Mu.randomBetween(10, 25), n = Mu.randomElement([{
                                item: xu.SUN,
                                chance: 40
                            }, {
                                item: xu.CLOUDS,
                                chance: 25
                            }, {
                                item: xu.WIND,
                                chance: 14
                            }, {
                                item: xu.RAIN,
                                chance: 20
                            }, {
                                item: xu.STORM,
                                chance: 1
                            }]);
                            break;
                        case gg.SUMMER:
                            t = Mu.randomBetween(15, 35), n = Mu.randomElement([{
                                item: xu.SUN,
                                chance: 50
                            }, {
                                item: xu.CLOUDS,
                                chance: 10
                            }, {
                                item: xu.WIND,
                                chance: 10
                            }, {
                                item: xu.RAIN,
                                chance: 20
                            }, {
                                item: xu.STORM,
                                chance: 10
                            }]);
                            break;
                        case gg.AUTUMN:
                            t = Mu.randomBetween(10, 25), n = Mu.randomElement([{
                                item: xu.SUN,
                                chance: 20
                            }, {
                                item: xu.CLOUDS,
                                chance: 40
                            }, {
                                item: xu.WIND,
                                chance: 10
                            }, {
                                item: xu.RAIN,
                                chance: 25
                            }, {
                                item: xu.STORM,
                                chance: 5
                            }]);
                            break;
                        case gg.WINTER:
                            t = Mu.randomBetween(-20, 5), n = Mu.randomElement([{
                                item: xu.SUN,
                                chance: 30
                            }, {
                                item: xu.CLOUDS,
                                chance: 20
                            }, {
                                item: xu.WIND,
                                chance: 15
                            }, {
                                item: xu.SNOW,
                                chance: 25
                            }, {
                                item: xu.STORM,
                                chance: 10
                            }])
                    }
                    return [e, n, t]
                }, e.prototype.getCurrentWeather = function () {
                    return this.today[1]
                }, e.prototype.getCurrentTemperature = function () {
                    return this.optionsService.getOption(hg.METRIC) ? this.today[2] : 1.8 * this.today[2] + 32
                }, e.prototype.increaseForecastPeriod = function (e) {
                    this.forecastPeriod += e
                }, e.prototype.isWeather = function () {
                    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                    return e.includes(this.getCurrentWeather())
                }, e.prototype.getForecast = function () {
                    return this.forecast
                }, e.prototype.getForecastPeriod = function () {
                    return this.forecastPeriod
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(vg), ze(dg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            uS = function () {
                function e(e, t) {
                    var n = this;
                    this.weatherService = e, this.optionsService = t, this.metric = this.optionsService.getOption(hg.METRIC), this.optionsSubscription || (this.optionsSubscription = this.optionsService.registerForOptionsChange().subscribe(function () {
                        return n.metric = n.optionsService.getOption(hg.METRIC)
                    }))
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getTodayWeather = function () {
                    return this.weatherService.getCurrentWeather()
                }, e.prototype.getTodayTemperature = function () {
                    return this.weatherService.getCurrentTemperature()
                }, e.prototype.getWeatherName = function (e) {
                    return xu[e].toLowerCase()
                }, e.prototype.getForecast = function () {
                    return this.weatherService.getForecast()
                }, e.prototype.getForecastPeriod = function () {
                    return this.weatherService.getForecastPeriod()
                }, e
            }(),
            sS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#forecast[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid #000;text-align:center;overflow-x:auto}.weather[_ngcontent-%COMP%]{display:flex;flex:0 0 40px;flex-direction:column;border-right:1px solid #000}.day[_ngcontent-%COMP%]{border-bottom:1px solid #000}"]],
                data: {}
            });

        function aS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0C"]))], null, null)
        }

        function cS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0F"]))], null, null)
        }

        function pS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "day"]], null, null, null, null, null)), (e()(), lo(-1, null, ["today"]))], null, null)
        }

        function hS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "day"]], null, null, null, null, null)), (e()(), lo(1, null, ["+", ""]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.index)
            })
        }

        function dS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0C"]))], null, null)
        }

        function fS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0F"]))], null, null)
        }

        function gS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 13, "div", [["class", "weather"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, pS)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, hS)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(6, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(7, 0, null, null, 6, "span", [["id", "temp"]], null, null, null, null, null)), (e()(), lo(8, null, ["", ""])), no(9, 2), (e()(), ji(16777216, null, null, 1, null, dS)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, fS)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, 0 === t.context.index), e(t, 4, 0, 0 !== t.context.index), e(t, 6, 0, n.getWeatherName(t.context.$implicit[1]), "weather"), e(t, 11, 0, n.metric), e(t, 13, 0, !n.metric)
            }, function (e, t) {
                var n = hi(t, 8, 0, e(t, 9, 0, El(t.parent.parent, 0), t.context.$implicit[2], "0.0-1"));
                e(t, 8, 0, n)
            })
        }

        function vS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [": "])), (e()(), Yi(2, 0, null, null, 2, "div", [["id", "forecast"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, gS)), Ml(4, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 4, 0, t.component.getForecast())
            }, null)
        }

        function mS(e) {
            return so(0, [kl(0, js, [Kr]), (e()(), Yi(1, 0, null, null, 15, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), lo(5, null, [" : ", " "])), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(7, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(8, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(9, null, [" : ", ""])), no(10, 2), (e()(), ji(16777216, null, null, 1, null, aS)), Ml(12, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, cS)), Ml(14, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, vS)), Ml(16, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 7, 0, n.getWeatherName(n.getTodayWeather()), "weather"), e(t, 12, 0, n.metric), e(t, 14, 0, !n.metric), e(t, 16, 0, n.getForecastPeriod() > 1)
            }, function (e, t) {
                var n = t.component;
                e(t, 5, 0, n.getWeatherName(n.getTodayWeather()));
                var r = hi(t, 9, 0, e(t, 10, 0, El(t, 0), n.getTodayTemperature(), "0.0-1"));
                e(t, 9, 0, r)
            })
        }

        function yS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-weather", [], null, null, null, mS, sS)), Ml(1, 114688, null, 0, uS, [oS, dg], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var SS = al("app-weather", uS, yS, {}, {}, []),
            ES = function () {
                function e(e) {
                    this.royalService = e, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getPerkName = function () {
                    return Au.preparePerkName(this.perk.perk)
                }, e.prototype.unlock = function () {
                    this.royalService.unlock(this.perk)
                }, e.prototype.isAvailable = function () {
                    return this.royalService.getRoyalPoints() >= this.perk.cost && (0 === this.perk.maxUsages || this.perk.usages < this.perk.maxUsages)
                }, e
            }(),
            OS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:#8b0000}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}app-icon[_ngcontent-%COMP%]{margin-top:-3px;height:17px}"]],
                data: {}
            });

        function bS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" Usages: ", "/", " "]))], null, function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.perk.usages, n.perk.maxUsages)
            })
        }

        function TS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [" Usages: unlimited "]))], null, null)
        }

        function RS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 13, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapper"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.unlock() && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 1, "div", [["id", "text"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 9, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(5, null, [" ", ""])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), lo(8, null, [" Cost: ", " RP "])), (e()(), Yi(9, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, bS)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, TS)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.id), e(t, 11, 0, n.perk.maxUsages > 0), e(t, 13, 0, 0 === n.perk.maxUsages)
            }, function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.getPerkName()), e(t, 4, 0, Vi(1, "", n.id, "")), e(t, 5, 0, n.perk.description), e(t, 8, 0, n.perk.cost)
            })
        }

        function CS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(1, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null)], function (e, t) {
                e(t, 1, 0, "tick")
            }, null)
        }

        function _S(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(1, null, [" Usages: ", "/", " "]))], null, function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.perk.usages, n.perk.maxUsages)
            })
        }

        function IS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [" Usages: unlimited "]))], null, null)
        }

        function AS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 15, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "wrapperNotAvailable"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.unlock() && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 3, "div", [["id", "titleGrey"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, CS)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(5, null, ["", ""])), (e()(), Yi(6, 0, null, null, 9, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(7, null, [" ", ""])), (e()(), Yi(8, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), lo(10, null, [" Cost: ", " RP "])), (e()(), Yi(11, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, _S)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, IS)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.id), e(t, 4, 0, n.perk.usages === n.perk.maxUsages && n.perk.maxUsages > 0), e(t, 13, 0, n.perk.maxUsages > 0), e(t, 15, 0, 0 === n.perk.maxUsages)
            }, function (e, t) {
                var n = t.component;
                e(t, 5, 0, n.getPerkName()), e(t, 6, 0, Vi(1, "", n.id, "")), e(t, 7, 0, n.perk.description), e(t, 10, 0, n.perk.cost)
            })
        }

        function wS(e) {
            return so(0, [(e()(), ji(16777216, null, null, 1, null, RS)), Ml(1, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, AS)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.isAvailable()), e(t, 3, 0, !n.isAvailable())
            }, null)
        }
        var NS = function () {
                function e(e, t, n) {
                    this.logService = e, this.royalService = t, this.kongregateService = n
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.buyRoyalPoints = function () {
                    this.royalService.buyRoyalPoints()
                }, e.prototype.getRoyalPoints = function () {
                    return this.royalService.getRoyalPoints()
                }, e.prototype.getRoyalPerks = function () {
                    return this.royalService.getRoyalPerks()
                }, e
            }(),
            PS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{margin:5px;display:flex;flex-direction:column}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.bold[_ngcontent-%COMP%]{font-weight:600}app-royal-perk[_ngcontent-%COMP%]{font-size:1em;display:inline-block;width:160px;margin:4px 8px;cursor:pointer}"]],
                data: {}
            });

        function DS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-royal-perk", [], null, null, null, wS, OS)), Ml(1, 114688, null, 0, ES, [bg], {
                perk: [0, "perk"]
            }, null)], function (e, t) {
                e(t, 1, 0, t.context.$implicit)
            }, null)
        }

        function MS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 16, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Royal perks"])), (e()(), Yi(3, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 6, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["You have "])), (e()(), Yi(6, 0, null, null, 1, "span", [["class", "bold"]], null, null, null, null, null)), (e()(), lo(7, null, ["", ""])), (e()(), lo(-1, null, [" royal points."])), (e()(), Yi(9, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" You can use them to acquire special upgrades."])), (e()(), Yi(11, 0, null, null, 2, "div", [], null, null, null, null, null)), (e()(), Yi(12, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.buyRoyalPoints() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Buy Royal points"])), (e()(), Yi(14, 0, null, null, 2, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, DS)), Ml(16, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 16, 0, t.component.getRoyalPerks())
            }, function (e, t) {
                e(t, 7, 0, t.component.getRoyalPoints())
            })
        }

        function kS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-royal", [], null, null, null, MS, PS)), Ml(1, 114688, null, 0, NS, [mg, bg, Tg], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var LS = al("app-royal", NS, kS, {}, {}, []),
            xS = function () {
                function e(e, t, n, r) {
                    this.servicesService = e, this.resourcesService = t, this.effectsService = n, this.gameService = r, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {
                    this.building.hasBuff() && (this.buildingBuff = this.building.getBuff())
                }, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.buff = function () {
                    var e = this.servicesService.getService(Nu.MODAL);
                    if (this.building.hasBuff() && this.buffsEnabled())
                        if (this.building.isBuffed()) e.info("This building is already buffed");
                        else {
                            var t = this.building.getBuff();
                            this.resourcesService.decreaseResources(t.cost, !0) && this.effectsService.addBuildingEffect(new Du(t.name, this.building.getBuildingType(), t.effect, t.duration, this.building.id))
                        }
                    else e.info("This building cannot be buffed")
                }, e.prototype.buffsEnabled = function () {
                    return this.gameService.isEnabled(Eu.BUFFS)
                }, e
            }(),
            FS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:17px;width:17px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:#8b0000}"]],
                data: {}
            });

        function US(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [], null, null, null, null, null)), (e()(), lo(1, null, ["", " "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                e(t, 3, 0, t.component.getResourceName(t.parent.context.$implicit.key), "resources")
            }, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value)
            })
        }

        function HS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, ["", " "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                e(t, 3, 0, t.component.getResourceName(t.parent.context.$implicit.key), "resources")
            }, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value)
            })
        }

        function GS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, US)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, HS)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.hasResource(t.context.$implicit)), e(t, 4, 0, !n.hasResource(t.context.$implicit))
            }, null)
        }

        function BS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "buff"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.buff() && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 0, "img", [["src", "assets/buff.svg"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 5, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(4, null, [" ", " "])), (e()(), Yi(5, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 2, null, GS)), Ml(7, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr])], function (e, t) {
                var n = t.component;
                e(t, 1, 0, 0 - n.id), e(t, 7, 0, hi(t, 7, 0, El(t, 8).transform(n.buildingBuff.cost)))
            }, function (e, t) {
                var n = t.component;
                e(t, 3, 0, Vi(1, "", 0 - n.id, "")), e(t, 4, 0, n.buildingBuff.name)
            })
        }

        function VS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, BS)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.buffsEnabled() && n.building.hasBuff() && !n.building.isBuffed())
            }, null)
        }
        var WS = function () {
                function e(e, t) {
                    this.resourcesService = e, this.servicesService = t, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.upgrade = function () {
                    this.parentRegion.upgradeBuilding(this.building.getBuildingId())
                }, e
            }(),
            jS = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:17px;width:17px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:#8b0000}"]],
                data: {}
            });

        function YS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [], null, null, null, null, null)), (e()(), lo(1, null, ["", " "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                e(t, 3, 0, t.component.getResourceName(t.parent.context.$implicit.key), "resources")
            }, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value)
            })
        }

        function zS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "div", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, ["", " "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                e(t, 3, 0, t.component.getResourceName(t.parent.context.$implicit.key), "resources")
            }, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value)
            })
        }

        function KS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "div", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, YS)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, zS)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.hasResource(t.context.$implicit)), e(t, 4, 0, !n.hasResource(t.context.$implicit))
            }, null)
        }

        function qS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["appTooltip", ""], ["class", "tooltip"], ["id", "upgrade"]], null, [[null, "click"], [null, "mousemove"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), "click" === t && (r = !1 !== i.upgrade() && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 0, "img", [["src", "assets/upgrade.svg"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 5, "span", [], [[8, "id", 0]], null, null, null, null)), (e()(), lo(4, null, [" Upgrade to level ", " "])), (e()(), Yi(5, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 2, null, KS)), Ml(7, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr])], function (e, t) {
                var n = t.component;
                e(t, 1, 0, 0 - n.id), e(t, 7, 0, hi(t, 7, 0, El(t, 8).transform(n.building.getUpgradeCost())))
            }, function (e, t) {
                var n = t.component;
                e(t, 3, 0, Vi(1, "", 0 - n.id, "")), e(t, 4, 0, n.building.getBuildingLevel() + 1)
            })
        }

        function QS(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, qS)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.component.building.hasUpgrade())
            }, null)
        }
        var $S = function () {
                function e() {
                    this.progress = 0, this.text = ""
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ngOnChanges = function () {
                    this.progressRef.nativeElement.style.width = this.progress + "%", this.labelRef.nativeElement.innerHTML = this.text && "" !== this.text ? this.text : this.progress.toFixed(2) + "%"
                }, e
            }(),
            ZS = gi({
                encapsulation: 0,
                styles: [["#progressBar[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;background-color:#ddd;border:1px solid #000;margin-top:-1px}#progress[_ngcontent-%COMP%]{height:100%;background-color:var(--active-colour);text-align:center;color:#fff}#label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center}"]],
                data: {}
            });

        function XS(e) {
            return so(0, [$l(402653184, 1, {
                progressRef: 0
            }), $l(402653184, 2, {
                labelRef: 0
            }), (e()(), Yi(2, 0, null, null, 2, "div", [["id", "progressBar"]], null, null, null, null, null)), (e()(), Yi(3, 0, [[1, 0], ["progress", 1]], null, 0, "div", [["id", "progress"]], null, null, null, null, null)), (e()(), Yi(4, 0, [[2, 0], ["label", 1]], null, 0, "div", [["id", "label"]], null, null, null, null, null))], null, null)
        }
        var JS = function (e) {
                return e[e.FIRST = 0] = "FIRST", e[e.SECOND = 1] = "SECOND", e[e.THIRD = 2] = "THIRD", e[e.FOURTH = 3] = "FOURTH", e
            }({}),
            eE = function (e) {
                return e[e.TEXT = 0] = "TEXT", e[e.PROGRESS_BAR = 1] = "PROGRESS_BAR", e[e.BUTTON = 2] = "BUTTON", e[e.BUTTON_CHECKBOX = 3] = "BUTTON_CHECKBOX", e[e.TWO_BUTTON = 4] = "TWO_BUTTON", e[e.DROPDOWN = 5] = "DROPDOWN", e[e.ICON = 6] = "ICON", e
            }({}),
            tE = function () {
                function e() {}
                return e.prototype.ngOnInit = function () {}, e.prototype.isTextValue = function (e) {
                    return e === eE.TEXT
                }, e.prototype.isButtonValue = function (e) {
                    return e === eE.BUTTON
                }, e.prototype.isTwoButtonValue = function (e) {
                    return e === eE.TWO_BUTTON
                }, e.prototype.isProgressValue = function (e) {
                    return e === eE.PROGRESS_BAR
                }, e.prototype.isDropdownValue = function (e) {
                    return e === eE.DROPDOWN
                }, e.prototype.isIconValue = function (e) {
                    return e === eE.ICON
                }, e.prototype.isButtonCheckboxValue = function (e) {
                    return e === eE.BUTTON_CHECKBOX
                }, e.prototype.buildingCallback = function (e) {
                    this.building.callback(e)
                }, e
            }(),
            nE = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{font-size:1.3em}.iconsLine[_ngcontent-%COMP%]{display:flex;flex-direction:row}.iconsLine[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:auto}.line[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px 3px}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:.9em}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;flex:0 0 auto}"]],
                data: {}
            });

        function rE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 4, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(4, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(5, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], function (e, t) {
                e(t, 4, 0, t.context.$implicit.name, t.context.$implicit.path)
            }, function (e, t) {
                e(t, 2, 0, t.context.$implicit.prefix), e(t, 5, 0, t.context.$implicit.suffix)
            })
        }

        function iE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "line iconsLine"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, rE)), Ml(2, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.building.getLine(n.line).getValue())
            }, null)
        }

        function lE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "span", [["class", "line"]], [[8, "innerHTML", 1]], null, null, null, null))], null, function (e, t) {
                var n = t.component;
                e(t, 0, 0, n.building.getLine(n.line).getValue())
            })
        }

        function oE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "line"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "click" === t && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue) && r), r
            }, null, null)), (e()(), lo(2, null, ["", " "]))], null, function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.building.getLine(n.line).getValue().buttonText)
            })
        }

        function uE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, "span", [["class", "line"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "click" === t && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue) && r), r
            }, null, null)), (e()(), lo(2, null, ["", " "])), (e()(), Yi(3, 0, null, null, 7, "label", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 5, "input", [["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "click"], [null, "change"], [null, "blur"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "change" === t && (r = !1 !== El(e, 5).onChange(n.target.checked) && r), "blur" === t && (r = !1 !== El(e, 5).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.building.getLine(i.line).getValue().checkboxState = n) && r), "click" === t && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue) && r), r
            }, null, null)), Ml(5, 16384, null, 0, mf, [Lt, Nt], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [mf]), Ml(7, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(9, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(10, null, ["", " "]))], function (e, t) {
                var n = t.component;
                e(t, 7, 0, n.building.getLine(n.line).getValue().checkboxState)
            }, function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.building.getLine(n.line).getValue().buttonText), e(t, 4, 0, El(t, 9).ngClassUntouched, El(t, 9).ngClassTouched, El(t, 9).ngClassPristine, El(t, 9).ngClassDirty, El(t, 9).ngClassValid, El(t, 9).ngClassInvalid, El(t, 9).ngClassPending), e(t, 10, 0, n.building.getLine(n.line).getValue().checkboxLabel)
            })
        }

        function sE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "span", [["class", "line"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "click" === t && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().callback1Value) && r), r
            }, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), Yi(3, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "click" === t && (r = !1 !== i.buildingCallback(i.building.getLine(i.line).getValue().callback2Value) && r), r
            }, null, null)), (e()(), lo(5, null, ["", ""]))], null, function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.building.getLine(n.line).getValue().button1Text), e(t, 3, 0, n.building.getLine(n.line).getValue().textBetween), e(t, 5, 0, n.building.getLine(n.line).getValue().button2Text)
            })
        }

        function aE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "option", [], null, null, null, null, null)), Ml(1, 147456, null, 0, Df, [Nt, Lt, [2, Pf]], {
                value: [0, "value"]
            }, null), Ml(2, 147456, null, 0, Lf, [Nt, Lt, [8, null]], {
                value: [0, "value"]
            }, null), (e()(), lo(3, null, ["", ""]))], function (e, t) {
                e(t, 1, 0, t.context.$implicit), e(t, 2, 0, t.context.$implicit)
            }, function (e, t) {
                e(t, 3, 0, t.context.$implicit)
            })
        }

        function cE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "span", [["class", "line"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 7, "select", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "change" === t && (r = !1 !== El(e, 2).onChange(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 2).onTouched() && r), "change" === t && (r = !1 !== i.buildingCallback(n) && r), "ngModelChange" === t && (r = !1 !== (i.building.getLine(i.line).getValue().selected = n) && r), r
            }, null, null)), Ml(2, 16384, null, 0, Pf, [Lt, Nt], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Pf]), Ml(4, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(6, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), ji(16777216, null, null, 1, null, aE)), Ml(8, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, n.building.getLine(n.line).getValue().selected), e(t, 8, 0, n.building.getLine(n.line).getValue().values)
            }, function (e, t) {
                e(t, 1, 0, El(t, 6).ngClassUntouched, El(t, 6).ngClassTouched, El(t, 6).ngClassPristine, El(t, 6).ngClassDirty, El(t, 6).ngClassValid, El(t, 6).ngClassInvalid, El(t, 6).ngClassPending)
            })
        }

        function pE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-progress-bar", [], null, null, null, XS, ZS)), Ml(1, 638976, null, 0, $S, [], {
                progress: [0, "progress"],
                text: [1, "text"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.building.getLine(n.line).getValue().value, n.building.getLine(n.line).getValue().label)
            }, null)
        }

        function hE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "line"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, pE)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.building.getLine(n.line).getValue().value >= 0)
            }, null)
        }

        function dE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "span", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, iE)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, lE)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, oE)), Ml(6, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, uE)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, sE)), Ml(10, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, cE)), Ml(12, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, hE)), Ml(14, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.isIconValue(n.building.getLine(n.line).getValueType())), e(t, 4, 0, n.isTextValue(n.building.getLine(n.line).getValueType())), e(t, 6, 0, n.isButtonValue(n.building.getLine(n.line).getValueType())), e(t, 8, 0, n.isButtonCheckboxValue(n.building.getLine(n.line).getValueType())), e(t, 10, 0, n.isTwoButtonValue(n.building.getLine(n.line).getValueType())), e(t, 12, 0, n.isDropdownValue(n.building.getLine(n.line).getValueType())), e(t, 14, 0, n.isProgressValue(n.building.getLine(n.line).getValueType()))
            }, null)
        }

        function fE(e) {
            return so(0, [(e()(), ji(16777216, null, null, 1, null, dE)), Ml(1, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, null != n.line && n.building)
            }, null)
        }
        var gE = function () {
                function e(e, t, n, r) {
                    this.modalService = e, this.resourcesService = t, this.managementService = n, this.logService = r, this.demolishMode = !1, this.combineMode = !1, this.splitMode = !1, this.lines = JS, this.id = Math.random()
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.fitText = function () {
                    if (this.centerRef) {
                        var e = this.centerRef.nativeElement,
                            t = e.clientWidth,
                            n = e.scrollWidth,
                            r = parseInt(window.getComputedStyle(e, null).getPropertyValue("font-size"), 10);
                        if (n > t) r = (r = Math.ceil(r * t / n)) > 15 ? r = 15 : r - 1, e.style.fontSize = r + "px";
                        else
                            for (; n === t && r < 15;) r = (r = Math.ceil(r) + 1) > 15 ? r = 15 : r, e.style.fontSize = r + "px", (n = e.scrollWidth) > (t = e.clientWidth) && (e.style.fontSize = r - 1 + "px")
                    }
                }, e.prototype.stop = function () {
                    this.building.isWorking() ? this.building.stopProduction() : this.building.startProduction() || this.modalService.info("Cannot unlock production of " + this.building.getName() + ". Number of free workers: " + this.resourcesService.getPeople())
                }, e.prototype.isStoppable = function () {
                    return this.building.isStoppable()
                }, e.prototype.isWorking = function () {
                    return this.building.isWorking()
                }, e.prototype.demolish = function () {
                    var e = this;
                    this.modalService.setModalText("Are you sure you want to demolish " + this.building.getName() + "?"), this.modalService.open(mu.CONFIRM);
                    var t = this.modalService.registerForConfirmation().subscribe(function (n) {
                        t.unsubscribe(), n && e.building.prepareDemolish() && e.parentRegion.demolish(e.building)
                    })
                }, e.prototype.canCombine = function () {
                    return this.parentRegion.canCombine(this.building)
                }, e.prototype.combine = function () {
                    this.parentRegion.combine(this.building)
                }, e.prototype.split = function () {
                    this.parentRegion.split(this.building)
                }, e.prototype.areComplexWorkersEnabled = function () {
                    return this.managementService.getComplexWorkers()
                }, e.prototype.openWorkersManagement = function (e) {
                    e.ctrlKey ? this.building.getWorkSettings().enabled ? (this.building.getWorkSettings().enabled = !1, this.stop()) : this.stop() : e.shiftKey ? this.building.getWorkSettings().enabled = !this.building.getWorkSettings().enabled : (this.modalService.open(mu.WORK_MANAGEMENT), this.modalService.setBuilding(this.building))
                }, e
            }(),
            vE = gi({
                encapsulation: 0,
                styles: [["[_nghost-%COMP%]{height:15%;min-height:100px;width:10%;min-width:165px;border:1px solid #000;overflow:hidden}#wrapper[_ngcontent-%COMP%]{position:relative;height:100%;text-align:center;font-size:.7em}#combine[_ngcontent-%COMP%], #demolish[_ngcontent-%COMP%], #split[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);justify-content:center;align-items:center;display:flex;cursor:pointer}#demolishText[_ngcontent-%COMP%], .combineText[_ngcontent-%COMP%]{display:block}#nameBar[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:19px;font-size:1.4em;font-weight:700;border-bottom:1px solid #000;white-space:nowrap}#left[_ngcontent-%COMP%], #right[_ngcontent-%COMP%]{flex:1 0 16px}#center[_ngcontent-%COMP%]{flex:0 0 130px;font-size:.8em;overflow:hidden;line-height:19px}.control[_ngcontent-%COMP%]{float:right;font-size:.6em;margin-right:2px;cursor:pointer}.control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:17px;height:17px}#lines[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}app-progress-bar[_ngcontent-%COMP%]{display:block;height:15px}app-building-line[_ngcontent-%COMP%]{height:15px;display:block;margin-top:3px;flex:1 0 auto}img[_ngcontent-%COMP%]{height:17px}.details[_ngcontent-%COMP%]{float:left;font-size:.6em;margin-right:2px}.positiveEffects[_ngcontent-%COMP%]{font-size:.6em;color:#006400}.negativeEffects[_ngcontent-%COMP%]{font-size:.6em;color:#8b0000}.tooltipSpan[_ngcontent-%COMP%]{font-size:1.5em;font-weight:100;text-align:left}.tooltipSpan[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{text-align:center}.tooltipSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000}app-building-buff[_ngcontent-%COMP%]{position:absolute;right:0;top:0}app-building-upgrade[_ngcontent-%COMP%]{position:absolute;left:-2px;top:0}"]],
                data: {}
            });

        function mE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "span", [["appTooltip", ""], ["class", "details tooltip"]], null, [[null, "mousemove"]], function (e, t, n) {
                var r = !0;
                return "mousemove" === t && (r = !1 !== El(e, 1).onmousemove(n) && r), r
            }, null, null)), Ml(1, 16384, null, 0, rv, [], {
                elementId: [0, "elementId"]
            }, null), (e()(), Yi(2, 0, null, null, 0, "img", [["alt", "details"], ["draggable", "false"], ["src", "assets/details.svg"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 4, "span", [["class", "tooltipSpan"]], [[8, "id", 0]], null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "div", [["id", "title"]], null, null, null, null, null)), (e()(), lo(5, null, ["", ""])), (e()(), Yi(6, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "div", [], [[8, "innerHTML", 1]], null, null, null, null))], function (e, t) {
                e(t, 1, 0, t.component.id)
            }, function (e, t) {
                var n = t.component;
                e(t, 3, 0, Vi(1, "", n.id, "")), e(t, 5, 0, n.building.getName()), e(t, 7, 0, n.building.getDetails())
            })
        }

        function yE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "positiveEffects"]], null, null, null, null, null)), (e()(), lo(1, null, ["(+", "%)"]))], null, function (e, t) {
                e(t, 1, 0, t.component.building.getDisplayableEffectsValue())
            })
        }

        function SE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "negativeEffects"]], null, null, null, null, null)), (e()(), lo(1, null, ["(", "%)"]))], null, function (e, t) {
                e(t, 1, 0, t.component.building.getDisplayableEffectsValue())
            })
        }

        function EE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "control"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.stop() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["alt", "on"], ["draggable", "false"], ["src", "assets/gear.svg"], ["title", "disable"]], null, null, null, null, null))], null, null)
        }

        function OE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "control"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.stop() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["alt", "off"], ["draggable", "false"], ["src", "assets/gear_off.svg"], ["title", "enable"]], null, null, null, null, null))], null, null)
        }

        function bE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, null, null, null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, EE)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, OE)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(0, null, null, 0))], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.isStoppable() && n.isWorking()), e(t, 4, 0, n.isStoppable() && !n.isWorking())
            }, null)
        }

        function TE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/complex_management_on_on.svg"], ["title", "work settings"]], null, null, null, null, null))], null, null)
        }

        function RE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/complex_management_on_off.svg"], ["title", "work settings"]], null, null, null, null, null))], null, null)
        }

        function CE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/complex_management_off_on.svg"], ["title", "work settings"]], null, null, null, null, null))], null, null)
        }

        function _E(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 0, "img", [["draggable", "false"], ["src", "assets/complex_management_off_off.svg"], ["title", "work settings"]], null, null, null, null, null))], null, null)
        }

        function IE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "span", [["class", "control"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openWorkersManagement(n) && r), r
            }, null, null)), (e()(), ji(16777216, null, null, 1, null, TE)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, RE)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, CE)), Ml(6, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, _E)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.building.getWorkSettings().enabled && n.building.isWorking()), e(t, 4, 0, n.building.getWorkSettings().enabled && !n.building.isWorking()), e(t, 6, 0, !n.building.getWorkSettings().enabled && n.building.isWorking()), e(t, 8, 0, !n.building.getWorkSettings().enabled && !n.building.isWorking())
            }, null)
        }

        function AE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, IE)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(0, null, null, 0))], function (e, t) {
                e(t, 2, 0, t.component.isStoppable())
            }, null)
        }

        function wE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "demolish"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.demolish() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "demolishText"]], null, null, null, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function NE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "combine"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.combine() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "combineText"]], null, null, null, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function PE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "split"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.split() && r), r
            }, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "combineText"]], null, null, null, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function DE(e) {
            return so(0, [$l(402653184, 1, {
                centerRef: 0
            }), (e()(), Yi(1, 0, null, null, 35, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 15, "div", [["id", "nameBar"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "left"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, mE)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, [[1, 0], ["center", 1]], null, 6, "div", [["id", "center"]], null, null, null, null, null)), (e()(), lo(7, null, ["", " "])), (e()(), ji(16777216, null, null, 1, null, yE)), Ml(9, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, SE)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(12, null, [" ", " "])), (e()(), Yi(13, 0, null, null, 4, "div", [["id", "right"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, bE)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, AE)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(18, 0, null, null, 12, "div", [["id", "lines"]], null, null, null, null, null)), (e()(), Yi(19, 0, null, null, 1, "app-building-buff", [], null, null, null, VS, FS)), Ml(20, 114688, null, 0, xS, [pg, Cg, Hg, Eg], {
                building: [0, "building"]
            }, null), (e()(), Yi(21, 0, null, null, 1, "app-building-upgrade", [], null, null, null, QS, jS)), Ml(22, 114688, null, 0, WS, [Cg, pg], {
                building: [0, "building"],
                parentRegion: [1, "parentRegion"]
            }, null), (e()(), Yi(23, 0, null, null, 1, "app-building-line", [], null, null, null, fE, nE)), Ml(24, 114688, null, 0, tE, [], {
                line: [0, "line"],
                building: [1, "building"]
            }, null), (e()(), Yi(25, 0, null, null, 1, "app-building-line", [], null, null, null, fE, nE)), Ml(26, 114688, null, 0, tE, [], {
                line: [0, "line"],
                building: [1, "building"]
            }, null), (e()(), Yi(27, 0, null, null, 1, "app-building-line", [], null, null, null, fE, nE)), Ml(28, 114688, null, 0, tE, [], {
                line: [0, "line"],
                building: [1, "building"]
            }, null), (e()(), Yi(29, 0, null, null, 1, "app-building-line", [], null, null, null, fE, nE)), Ml(30, 114688, null, 0, tE, [], {
                line: [0, "line"],
                building: [1, "building"]
            }, null), (e()(), ji(16777216, null, null, 1, null, wE)), Ml(32, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, NE)), Ml(34, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, PE)), Ml(36, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0, n.building.hasDetails()), e(t, 9, 0, n.building.getDisplayableEffectsValue() > 0), e(t, 11, 0, n.building.getDisplayableEffectsValue() < 0), e(t, 15, 0, !n.building.isComplexManagement() || n.building.isComplexManagement() && !n.areComplexWorkersEnabled()), e(t, 17, 0, n.building.isComplexManagement() && n.areComplexWorkersEnabled()), e(t, 20, 0, n.building), e(t, 22, 0, n.building, n.parentRegion), e(t, 24, 0, n.lines.FIRST, n.building), e(t, 26, 0, n.lines.SECOND, n.building), e(t, 28, 0, n.lines.THIRD, n.building), e(t, 30, 0, n.lines.FOURTH, n.building), e(t, 32, 0, n.demolishMode && n.building.isDemolishable()), e(t, 34, 0, n.combineMode && n.building.isCombinable() && n.canCombine()), e(t, 36, 0, n.splitMode && n.building.isSplittable())
            }, function (e, t) {
                var n = t.component;
                e(t, 7, 0, n.building.getName()), e(t, 12, 0, n.fitText())
            })
        }
        var ME = function () {
                function e(e) {
                    this.gameService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.isFortEnabled = function () {
                    return this.gameService.isEnabled(Eu.FORT)
                }, e.prototype.isFieldEnabled = function () {
                    return this.gameService.isEnabled(Eu.FIELD)
                }, e.prototype.isSeaEnabled = function () {
                    return this.gameService.isEnabled(Eu.SEA)
                }, e.prototype.isMountainsEnabled = function () {
                    return this.gameService.isEnabled(Eu.MOUNTAINS)
                }, e.prototype.isPlateauEnabled = function () {
                    return this.gameService.isEnabled(Eu.PLATEAU)
                }, e
            }(),
            kE = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:row}.entry[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:center;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],
                data: {}
            });

        function LE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/village/fort"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[4, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 3, {
                links: 1
            }), $l(603979776, 4, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/village/fort"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function xE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/village/field"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[8, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 7, {
                links: 1
            }), $l(603979776, 8, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Field"]))], function (e, t) {
                e(t, 1, 0, "/village/field"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function FE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/village/mountains"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[10, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 9, {
                links: 1
            }), $l(603979776, 10, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/village/mountains"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function UE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/village/plateau"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[12, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 11, {
                links: 1
            }), $l(603979776, 12, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Plateau"]))], function (e, t) {
                e(t, 1, 0, "/village/plateau"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function HE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/village/sea"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[14, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 13, {
                links: 1
            }), $l(603979776, 14, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/village/sea"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function GE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 22, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/village/village"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 2).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(2, 671744, [[2, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(3, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 1, {
                links: 1
            }), $l(603979776, 2, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""])), (e()(), ji(16777216, null, null, 1, null, LE)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(9, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/village/forest"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 10).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(10, 671744, [[6, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(11, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 5, {
                links: 1
            }), $l(603979776, 6, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""])), (e()(), ji(16777216, null, null, 1, null, xE)), Ml(16, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, FE)), Ml(18, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, UE)), Ml(20, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, HE)), Ml(22, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, "/village/village"), e(t, 3, 0, "active"), e(t, 8, 0, n.isFortEnabled()), e(t, 10, 0, "/village/forest"), e(t, 11, 0, "active"), e(t, 16, 0, n.isFieldEnabled()), e(t, 18, 0, n.isMountainsEnabled()), e(t, 20, 0, n.isPlateauEnabled()), e(t, 22, 0, n.isSeaEnabled())
            }, function (e, t) {
                e(t, 1, 0, El(t, 2).target, El(t, 2).href), e(t, 9, 0, El(t, 10).target, El(t, 10).href)
            })
        }
        var BE = function () {
                function e(e) {
                    this.happinessService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getHappiness = function () {
                    return Au.round(this.happinessService.getHappiness(), 2)
                }, e.prototype.getHappinessValue = function () {
                    return this.happinessService.getHappiness()
                }, e
            }(),
            VE = gi({
                encapsulation: 0,
                styles: [["[_nghost-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function WE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(1, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, t) {
                e(t, 1, 0, "angry", "happiness", "0 0 0 4px")
            }, null)
        }

        function jE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(1, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, t) {
                e(t, 1, 0, "sad", "happiness", "0 0 0 4px")
            }, null)
        }

        function YE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(1, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, t) {
                e(t, 1, 0, "neutral", "happiness", "0 0 0 4px")
            }, null)
        }

        function zE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(1, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, t) {
                e(t, 1, 0, "happy", "happiness", "0 0 0 4px")
            }, null)
        }

        function KE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(1, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                margin: [2, "margin"]
            }, null)], function (e, t) {
                e(t, 1, 0, "overjoyed", "happiness", "0 0 0 4px")
            }, null)
        }

        function qE(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["class", "icon"], ["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, WE)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, jE)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, YE)), Ml(6, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, zE)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, KE)), Ml(10, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(11, null, [" ", "%\n"]))], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.getHappinessValue() >= 0 && n.getHappinessValue() <= 10), e(t, 4, 0, n.getHappinessValue() > 10 && n.getHappinessValue() <= 40), e(t, 6, 0, n.getHappinessValue() > 40 && n.getHappinessValue() <= 60), e(t, 8, 0, n.getHappinessValue() > 60 && n.getHappinessValue() <= 90), e(t, 10, 0, n.getHappinessValue() > 90 && n.getHappinessValue() <= 100)
            }, function (e, t) {
                e(t, 11, 0, t.component.getHappiness())
            })
        }
        var QE, $E = function () {
                function e(e, t) {
                    this.valueType = e, this.value = t
                }
                return e.emptyValue = function () {
                    return new e(eE.TEXT, "")
                }, e.textValue = function (t) {
                    return new e(eE.TEXT, t)
                }, e.progressValue = function (t, n) {
                    return void 0 === n && (n = ""), new e(eE.PROGRESS_BAR, {
                        value: t,
                        label: n
                    })
                }, e.buttonValue = function (t, n) {
                    return new e(eE.BUTTON, {
                        buttonText: t,
                        callbackValue: n
                    })
                }, e.buttonCheckboxValue = function (t, n, r, i, l) {
                    return new e(eE.BUTTON_CHECKBOX, {
                        buttonText: t,
                        callbackValue: n,
                        checkboxState: i,
                        checkboxLabel: r,
                        checkboxCallbackValue: l
                    })
                }, e.twoButtonValue = function (t, n, r, i, l) {
                    return new e(eE.TWO_BUTTON, {
                        button1Text: t,
                        callback1Value: n,
                        textBetween: r,
                        button2Text: i,
                        callback2Value: l
                    })
                }, e.dropdownValue = function (t, n) {
                    return new e(eE.DROPDOWN, {
                        values: t,
                        selected: n
                    })
                }, e.iconValue = function (t) {
                    return new e(eE.ICON, t)
                }, e.prototype.getValueType = function () {
                    return this.valueType
                }, e.prototype.getValue = function () {
                    return this.value
                }, e
            }(),
            ZE = function () {
                return function (e, t, n, r) {
                    this.name = e, this.effect = t, this.duration = n, this.cost = r
                }
            }(),
            XE = function () {
                function e(e, t, n, r, i, l, o, u) {
                    this.servicesService = n, this.id = e, this.buildingType = t, this.demolishable = l, this.settings = r, this.stoppable = o, this.working = i, this.level = u, this.size = r.SIZE, this.complexity = r.COMPLEXITY, n && (this.resourcesService = n.getService(Nu.RESOURCES), this.effectsService = n.getService(Nu.EFFECTS), this.happinessService = n.getService(Nu.HAPPINESS), this.gameService = n.getService(Nu.GAME), this.logService = n.getService(Nu.LOG), this.modalService = n.getService(Nu.MODAL), this.weatherService = n.getService(Nu.WEATHER))
                }
                return e.prototype.build = function () {
                    return this.startProduction(), this
                }, e.prototype.getBuildingId = function () {
                    return this.id
                }, e.prototype.callback = function (e) {}, e.prototype.finishDemolish = function () {
                    var e = this;
                    Array.from(this.getCost().entries()).forEach(function (t) {
                        return e.resourcesService.increaseResource(t[0], Math.floor(.3 * t[1]))
                    })
                }, e.prototype.fireWorker = function () {
                    return !!this.working && (this.resourcesService.fireWorker(), this.working = !1, !0)
                }, e.prototype.getBuildingType = function () {
                    return this.buildingType
                }, e.prototype.getComplexity = function () {
                    return this.complexity
                }, e.prototype.getCost = function () {
                    var e = new Map;
                    return this.settings.COST.forEach(function (t) {
                        return e.set(t.resource, t.amount)
                    }), e
                }, e.prototype.getDescription = function () {
                    return this.settings.DESCRIPTION
                }, e.prototype.hasDetails = function () {
                    return !0
                }, e.prototype.getDetails = function () {
                    var e = "";
                    return (this.getBuildingLevel() > 1 || this.hasUpgrade()) && (e += "building level: " + this.level + "<br>"), this.getPower() % 1 == 0 ? e += "building power: " + this.getPower() + "<br>" : e += "building power: " + Au.round(this.getPower(), 2) + "<br>", 0 !== this.getPermanentEffects() && (e += "permanent effects: " + this.getPermanentEffects() + "%<br>"), 0 !== this.getEffects() && (e += "temporary effects: " + this.getEffects() + "%<br>"), 0 !== this.getHappinessEffect() && (e += "happiness effects: " + this.getHappinessEffect() + "%<br>"), 0 !== this.getWeatherMultiplier() && (e += "weather multiplier: " + this.getWeatherMultiplier() + "%<br>"), e
                }, e.prototype.getEffects = function () {
                    return this.effectsService.getBuildingEffectsValue(this.buildingType, !1, this.id)
                }, e.prototype.getPermanentEffects = function () {
                    return this.effectsService.getBuildingEffectsValue(this.buildingType, !0)
                }, e.prototype.getHappinessEffect = function () {
                    return this.happinessService.getHappinessEffect()
                }, e.prototype.getWeatherMultiplier = function () {
                    var e = this,
                        t = (this.settings.WEATHER ? this.settings.WEATHER : []).find(function (t) {
                            return e.weatherService.isWeather(t.weather)
                        });
                    return t ? t.effect : 0
                }, e.prototype.getDisplayableEffectsValue = function () {
                    var e = this.getWeatherMultiplier();
                    if (e <= -100) return -100;
                    var t = (this.getHappinessEffect() + this.getEffects()) * (1 + e / 100);
                    return t <= -100 ? -100 : t
                }, e.prototype.getPower = function () {
                    var e = 0;
                    return 1 === this.level || this.buildingType === Ou.CONSTRUCTION ? e = this.settings.BASE_POWER : this.settings.UPGRADES && (e = this.settings.UPGRADES[this.level - 2].BASE_POWER), e * (1 + (this.getPermanentEffects() + this.getEffects() + this.getHappinessEffect()) / 100) * (1 + this.getWeatherMultiplier() / 100)
                }, e.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                        case JS.SECOND:
                        case JS.THIRD:
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, e.prototype.getName = function () {
                    return Au.titleCase(Au.prepareBuildingName(this.buildingType))
                }, e.prototype.getSize = function () {
                    return this.size
                }, e.prototype.buildOnMountain = function () {
                    return !1
                }, e.prototype.getWorkers = function () {
                    return this.working ? 1 : 0
                }, e.prototype.hireWorker = function () {
                    return !(this.working || !this.resourcesService.hireWorker() || (this.working = !0, 0))
                }, e.prototype.isDemolishable = function () {
                    return this.demolishable
                }, e.prototype.isStoppable = function () {
                    return this.stoppable
                }, e.prototype.isComplexManagement = function () {
                    return !1
                }, e.prototype.getWorkSettings = function () {
                    return null
                }, e.prototype.isWorking = function () {
                    return this.working
                }, e.prototype.prepareDemolish = function () {
                    return this.stopProduction(), !0
                }, e.prototype.startProduction = function () {
                    return !(this.working || !this.resourcesService.hireWorker() || (this.working = !0, 0))
                }, e.prototype.stopProduction = function () {
                    this.working && (this.resourcesService.fireWorker(), this.working = !1)
                }, e.prototype.tick = function (e) {}, e.prototype.isCombinable = function () {
                    return !1
                }, e.prototype.isSplittable = function () {
                    return !1
                }, e.prototype.hasBuff = function () {
                    return this.settings.BUFF
                }, e.prototype.isBuffed = function () {
                    var e = this;
                    return !!this.hasBuff() && this.effectsService.getBuildingEffects(this.buildingType).filter(function (t) {
                        return t.buff === e.id
                    }).length > 0
                }, e.prototype.getBuff = function () {
                    if (this.settings.BUFF) {
                        var e = new Map;
                        return this.settings.BUFF.cost.forEach(function (t) {
                            return e.set(t.resource, t.amount)
                        }), new ZE(this.settings.BUFF.name, this.settings.BUFF.effect, this.settings.BUFF.duration, e)
                    }
                    return null
                }, e.prototype.hasUpgrade = function () {
                    var e = this;
                    if (this.settings.UPGRADES && this.settings.UPGRADES.length >= this.getBuildingLevel()) {
                        if (this.settings.UPGRADES[this.getBuildingLevel() - 1].PREREQUISITES) {
                            var t = !0;
                            return this.settings.UPGRADES[this.getBuildingLevel() - 1].PREREQUISITES.forEach(function (n) {
                                e.gameService.isEnabled(n) || (t = !1)
                            }), t
                        }
                        return !0
                    }
                    return !1
                }, e.prototype.getUpgradeCost = function () {
                    var e = new Map;
                    return this.hasUpgrade() && this.settings.UPGRADES[this.level - 1].COST.forEach(function (t) {
                        return e.set(t.resource, t.amount)
                    }), e
                }, e.prototype.setBuildingLevel = function (e) {
                    this.level = e
                }, e.prototype.getBuildingLevel = function () {
                    return this.level
                }, e
            }(),
            JE = function (e) {
                function t(t, n, r, i, l, o, u, s, a, c) {
                    void 0 === t && (t = null);
                    var p = e.call(this, n, r, t, i, !1, !0, !1, c) || this;
                    return p.occupants = l, p.progress = o, p.food = u, p.fuel = s, p.clothes = a, p.maxSize = i.MAX_OCCUPANTS, p.servicesService && (p.villageService = t.getService(Nu.VILLAGE), p.weatherService = t.getService(Nu.WEATHER), p.religionService = t.getService(Nu.RELIGION), p.managementService = t.getService(Nu.MANAGEMENT)), p
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        occupants: this.occupants,
                        maxSize: this.maxSize,
                        progress: this.progress,
                        food: this.food,
                        fuel: this.fuel,
                        clothes: this.clothes
                    }
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("occupants: " + this.occupants + "/" + this.maxSize);
                        case JS.SECOND:
                            return $E.progressValue(this.occupants < this.maxSize ? this.progress : -1);
                        case JS.THIRD:
                            return this.food > 0 ? $E.emptyValue() : $E.progressValue(Math.abs(this.food), "famine");
                        case JS.FOURTH:
                            return this.fuel >= 0 ? $E.emptyValue() : $E.progressValue(Math.abs(this.fuel), "freezing")
                    }
                }, t.prototype.tick = function () {
                    this.clothes < 50 && (this.resourcesService.decreaseResource(vu.CLOTHES, 1) ? this.clothes += 50 : this.managementService.getFurClothes() && this.resourcesService.decreaseResource(vu.FUR, 1) && (this.clothes += 2)), this.food <= 50 && (this.food += this.resourcesService.getRandomFood());
                    for (var e = Number(this.managementService.getRations()), t = 0; t < this.occupants; t++) this.food > 0 ? (this.food -= .5 * e, 1 === e ? this.happinessService.decreaseHappiness(.0025) : this.happinessService.getHappiness() < 75 && (2 === e ? this.happinessService.increaseHappiness(.001) : 3 === e ? this.happinessService.increaseHappiness(.0025) : 4 === e && this.happinessService.increaseHappiness(.005))) : (this.food -= .5, this.happinessService.decreaseHappiness(.005));
                    this.food < 0 && 0 === this.occupants && (this.food = 0), this.food < -100 && this.occupants > 0 && (this.occupants -= 1, this.food = -1, this.resourcesService.removePeople(1)), this.food < 0 && this.occupants > 0 && this.religionService.getFaithShield() > 0 && (this.food = 100 * this.religionService.decreaseFaithShield(Math.abs(this.food) / 100)), this.fuel <= 50 && (this.fuel += this.resourcesService.getFuel());
                    var n = this.weatherService.getCurrentTemperature(),
                        r = this.managementService.getClothesRations();
                    if (n < 10 && this.occupants > 0) {
                        var i = .2 * (10 - n) / 10;
                        if (this.clothes > 0 && (this.clothes -= .01 * this.occupants * r, i /= r + 1, this.clothes < 0 && (this.clothes = 0)), this.fuel - i < -100 ? this.fuel = -100 : this.fuel -= i, this.fuel < 0 && this.occupants > 0 && this.religionService.getFaithShield() > 0) return void(this.fuel = 200 * this.religionService.decreaseFaithShield(Math.abs(this.food) / 200));
                        this.fuel < 0 && this.happinessService.decreaseHappiness(.01)
                    } else this.fuel < 0 && (this.fuel = 0), n > 10 && (this.clothes > 0 ? this.clothes -= .005 * this.occupants : this.happinessService.decreaseHappiness(.01 * this.occupants));
                    this.progress < 100 && this.occupants < this.maxSize && this.food > 0 ? (this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : this.occupants < this.maxSize && 100 === this.progress ? (this.occupants += 1, this.resourcesService.createPeople(1), this.progress = 0) : this.progress > 0 && this.food <= 0 && (this.progress -= this.getPower())
                }, t.prototype.build = function () {
                    return this.resourcesService.increasePopulationCap(this.maxSize), this
                }, t.prototype.prepareDemolish = function () {
                    if (this.occupants > 0) {
                        var e = this.villageService.moveOccupants(this, this.occupants);
                        this.resourcesService.removePeople(e)
                    }
                    return this.resourcesService.decreasePopulationCap(this.maxSize), !0
                }, t.prototype.getDetails = function () {
                    return "occupants: " + this.occupants + "/" + this.maxSize + "<br>food nutrition: " + Au.round(this.food, 2) + "<br>fuel: " + Au.round(this.fuel, 2) + "<br>clothes: " + Au.round(this.clothes, 2) + "<br>" + e.prototype.getDetails.call(this)
                }, t.prototype.hasDetails = function () {
                    return !0
                }, t.prototype.stopProduction = function () {}, t.prototype.startProduction = function () {
                    return !0
                }, t.prototype.getMaxSize = function () {
                    return this.maxSize
                }, t.prototype.getOccupants = function () {
                    return this.occupants
                }, t.prototype.addOccupant = function () {
                    return this.occupants < this.maxSize && (this.occupants += 1, this.occupants === this.maxSize && (this.progress = 0), !0)
                }, t.prototype.removeOccupant = function () {
                    return this.occupants > 0 && (this.occupants -= 1, !0)
                }, t.prototype.fireWorker = function () {
                    return !1
                }, t.prototype.hireWorker = function () {
                    return !1
                }, t.prototype.getWorkers = function () {
                    return 0
                }, t
            }(XE),
            eO = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 100), void 0 === o && (o = 100), void 0 === u && (u = 100), void 0 === s && (s = 1), e.call(this, t, n, Ou.HUT, Zu.VILLAGE.HUT, r, i, l, o, u, s) || this
                }
                return i(t, e), t
            }(JE),
            tO = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 100), void 0 === o && (o = 100), void 0 === u && (u = 100), void 0 === s && (s = 1), e.call(this, t, n, Ou.HOUSE, Zu.VILLAGE.HOUSE, r, i, l, o, u, s) || this
                }
                return i(t, e), t
            }(JE);
        ! function (e) {
            e.CHOPPING_TREES = "chopping trees", e.WAITING_FOR_TREES = "waiting for trees", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING_LOG = "transporting log"
        }(QE || (QE = {}));
        var nO, rO = function (e) {
                function t(t, n, r, i, l, o, u) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = QE.WAITING_FOR_TREES), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, n, Ou.LOGGERS_HUT, t, Zu.FOREST.LOGGERS_HUT, o, !0, !0, u) || this;
                    return s.progress = r, s.localStorage = i, s.status = l, s.servicesService && (s.landService = t.getService(Nu.LAND)), s
                }
                return i(t, e), t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.emptyValue();
                        case JS.SECOND:
                            return $E.textValue(this.status);
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.tick = function () {
                    if (this.working)
                        if (this.status === QE.WAITING_FOR_TREES) this.landService.reduceForest(1) && (this.status = QE.CHOPPING_TREES);
                        else if (this.status === QE.CHOPPING_TREES) this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100 && (this.progress = 0, this.status = QE.TRANSPORTING_LOG));
                    else if (this.status === QE.TRANSPORTING_LOG || this.status === QE.WAITING_FOR_WAREHOUSE_SPACE) {
                        var e = this.resourcesService.increaseResource(vu.LOG, 1);
                        this.status = e ? QE.WAITING_FOR_TREES : QE.WAITING_FOR_WAREHOUSE_SPACE
                    }
                }, t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        localStorage: this.localStorage,
                        status: this.status,
                        working: this.working
                    }
                }, t
            }(XE),
            iO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    void 0 === t && (t = null), void 0 === l && (l = 1), void 0 === o && (o = 1), void 0 === u && (u = 1), void 0 === s && (s = 0), void 0 === a && (a = !1);
                    var c = e.call(this, n, Ou.CONSTRUCTION, t, Zu.CONSTRUCTION_SITE, a, 1 === u, !0, u) || this;
                    return c.region = r, c.constructing = i, c.buildingComplexity = l, c.buildingSize = o, c.upgradeLevel = u, c.progress = s, c.servicesService && (c.resourcesService = c.servicesService.getService(Nu.RESOURCES), c.buildingFactoryService = c.servicesService.getService(Nu.BUILDING_FACTORY), c.regionService = c.servicesService.getServiceByRegion(r)), c
                }
                return i(t, e), t.prototype.isUpgrade = function () {
                    return 1 !== this.upgradeLevel
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.emptyValue();
                        case JS.SECOND:
                            return this.isUpgrade() ? $E.textValue("upgrading " + Au.prepareBuildingName(this.constructing)) : $E.textValue("constructing " + Au.prepareBuildingName(this.constructing));
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.tick = function () {
                    0 === this.buildingComplexity && (this.isUpgrade ? this.regionService.finishUpgrade(this, this.constructing) : this.regionService.finishConstruction(this, this.constructing)), this.working && (this.progress < 100 ? (this.progress += this.getPower() / this.buildingComplexity, this.progress > 100 && (this.progress = 100)) : this.isUpgrade ? this.regionService.finishUpgrade(this, this.constructing) : this.regionService.finishConstruction(this, this.constructing))
                }, t.prototype.build = function () {
                    return this.startProduction() || 0 === this.buildingComplexity || this.servicesService.getService(Nu.MODAL).info("Couldn't unlock construction. Not enough free workers."), this
                }, t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        upgradeLevel: this.upgradeLevel,
                        buildingType: this.buildingType,
                        region: this.region,
                        constructing: this.constructing,
                        buildingComplexity: this.buildingComplexity,
                        progress: this.progress,
                        working: this.working,
                        buildingSize: this.buildingSize
                    }
                }, t.prototype.getComplexity = function () {
                    return 0
                }, t.prototype.getSize = function () {
                    return this.buildingSize
                }, t.prototype.finishDemolish = function () {
                    var e = this;
                    Array.from(this.buildingFactoryService.createBuildingShell(this.constructing).getCost().entries()).forEach(function (t) {
                        return e.resourcesService.increaseResource(t[0], Math.floor(t[1] * (1 - e.progress / 100) + t[1] * (e.progress / 100 * .3)))
                    })
                }, t
            }(XE);
        ! function (e) {
            e.PLANTING_TREES = "planting trees", e.WAITING_FOR_LAND = "waiting for land"
        }(nO || (nO = {}));
        var lO, oO = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = nO.WAITING_FOR_LAND), void 0 === o && (o = 1), void 0 === u && (u = !1), void 0 === s && (s = 1);
                    var a = e.call(this, n, Ou.FORESTER, t, Zu.FOREST.FORESTER, u, !0, !0, s) || this;
                    return a.progress = r, a.localStorage = i, a.status = l, a.effectiveness = o, a.servicesService && (a.landService = t.getService(Nu.LAND), a.modalService = t.getService(Nu.MODAL)), a
                }
                return i(t, e), t.prototype.callback = function (e) {
                    var t = this;
                    this.modalService.open(mu.INPUT), this.modalService.setModalText("Set reserved land size (Foresters will prevent forest from growing on that land)<br>Value 0 removes forester protection and only initial 100 land will be protected."), this.modalService.setModalValue(this.landService.getForestLandLimit());
                    var n = this.modalService.registerForValueResponse().subscribe(function (e) {
                        null === e || isNaN(e) || t.landService.setForestLandLimit(e), n.unsubscribe()
                    })
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.emptyValue();
                        case JS.SECOND:
                            return $E.textValue(this.status);
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return $E.buttonValue("manage", this.callback)
                    }
                }, t.prototype.tick = function () {
                    this.working && (0 === this.localStorage && (this.landService.reduceLand(this.effectiveness) ? (this.localStorage = this.effectiveness, this.status = nO.PLANTING_TREES) : this.status = nO.WAITING_FOR_LAND), this.localStorage > 0 && (this.progress < 100 ? (this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : (this.landService.increaseForest(this.localStorage, !1), this.progress = 0, this.localStorage = 0)))
                }, t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        localStorage: this.localStorage,
                        status: this.status,
                        effectiveness: this.effectiveness,
                        working: this.working
                    }
                }, t
            }(XE),
            uO = function () {
                return function (e, t, n, r) {
                    this.enabled = e, this.buildingType = t, this.inputSettings = n, this.outputSettings = r
                }
            }();
        ! function (e) {
            e.FETCHING_INPUT = "fetching {in}", e.WAITING_FOR_INPUT = "waiting for {wait}", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.PREPARING = "preparing {out}", e.PRODUCING_OUTPUT = "{prod} {out}", e.TRANSPORTING_OUTPUT = "transporting {out}"
        }(lO || (lO = {}));
        var sO, aO = function (e) {
                function t(t, n, r, i, l, o, u, s, a, c, p) {
                    void 0 === t && (t = null), void 0 === o && (o = 0), void 0 === u && (u = []), void 0 === s && (s = []), void 0 === a && (a = !1), void 0 === c && (c = null);
                    var h = e.call(this, n, r, t, i, a, !0, !0, p) || this;
                    if (h.status = l, h.progress = o, h.inputStorage = u, h.outputStorage = s, h.workSettings = c, null === h.workSettings) {
                        var d = i.INPUT_RESOURCES.map(function (e) {
                                return [e.resource, 0]
                            }),
                            f = i.OUTPUT_RESOURCES.map(function (e) {
                                return [e.resource, 0]
                            });
                        h.workSettings = new uO(!0, r, d, f)
                    }
                    return h.productionText = i.TEXT, t && (h.managementService = t.getService(Nu.MANAGEMENT)), h
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        workSettings: this.workSettings,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        inputStorage: this.inputStorage,
                        outputStorage: this.outputStorage,
                        working: this.working
                    }
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.emptyValue();
                        case JS.SECOND:
                            var t = Au.resourcesArraysDiff(this.settings.INPUT_RESOURCES, this.inputStorage),
                                n = String(this.status);
                            return t.length > 0 && (n = n.replace("{wait}", Au.prepareResourcesNamesList(t))), n = (n = (n = n.replace("{in}", Au.prepareResourcesNamesList(this.settings.INPUT_RESOURCES))).replace("{out}", Au.prepareResourcesNamesList(this.settings.OUTPUT_RESOURCES))).replace("{prod}", this.productionText + " "), $E.textValue(n);
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.isMet = function () {
                    var e = this,
                        t = !0;
                    return this.workSettings.inputSettings.forEach(function (n) {
                        t && (t = e.resourcesService.getResource(n[0]).amount > n[1])
                    }), this.workSettings.outputSettings.forEach(function (n) {
                        t && (t = e.resourcesService.getResource(n[0]).amount < n[1])
                    }), t
                }, t.prototype.tick = function () {
                    this.managementService.getComplexWorkers() && this.workSettings && this.workSettings.enabled && (this.isMet() ? this.isWorking() || this.hireWorker() : this.isWorking() && this.fireWorker()), this.isWorking() && (this.outputStorage.length > 0 ? this.collectOutputResources() : this.inputStorage.length < this.settings.INPUT_RESOURCES.length && 0 === this.outputStorage.length ? this.collectInputResources() : this.progress < 100 ? (this.status = lO.PRODUCING_OUTPUT, this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : 100 === this.progress && (this.progress = 0, this.inputStorage = [], this.outputStorage = Au.copyResourceArray(this.settings.OUTPUT_RESOURCES), this.status = lO.TRANSPORTING_OUTPUT))
                }, t.prototype.collectInputResources = function () {
                    var e = this,
                        t = !0;
                    return this.settings.INPUT_RESOURCES.forEach(function (n) {
                        e.inputStorage.find(function (e) {
                            return e.resource === n.resource
                        }) || (e.resourcesService.decreaseResource(n.resource, n.amount) ? e.inputStorage.push({
                            resource: n.resource,
                            amount: n.amount
                        }) : t = !1)
                    }), t ? (this.status = lO.FETCHING_INPUT, !0) : (this.status = lO.WAITING_FOR_INPUT, !1)
                }, t.prototype.collectOutputResources = function () {
                    var e = this,
                        t = !0;
                    return this.outputStorage.forEach(function (n) {
                        e.resourcesService.increaseResource(n.resource, n.amount) ? n.amount = 0 : t = !1
                    }), this.outputStorage = this.outputStorage.filter(function (e) {
                        return e.amount > 0
                    }), t ? 0 === this.outputStorage.length ? (this.status = lO.FETCHING_INPUT, !0) : void 0 : (this.status = lO.WAITING_FOR_WAREHOUSE_SPACE, !1)
                }, t.prototype.isComplexManagement = function () {
                    return !0
                }, t.prototype.getWorkSettings = function () {
                    return this.workSettings
                }, t
            }(XE),
            cO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.SAWMILL, Zu.FOREST.SAWMILL, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO),
            pO = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    void 0 === t && (t = null), void 0 === l && (l = 1), void 0 === o && (o = 1), void 0 === u && (u = 0), void 0 === s && (s = !1);
                    var a = e.call(this, n, Ou.DECONSTRUCTION, t, Zu.DECONSTRUCTION_SITE, s, !1, !0, 1) || this;
                    return a.region = r, a.deconstructing = i, a.buildingComplexity = l, a.buildingSize = o, a.progress = u, a.servicesService && (a.regionService = t.getServiceByRegion(r)), a
                }
                return i(t, e), t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.emptyValue();
                        case JS.SECOND:
                            return $E.textValue("deconstructing " + Au.prepareBuildingName(this.deconstructing));
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.tick = function () {
                    this.working && (this.progress < 100 ? (this.progress += this.getPower() / this.buildingComplexity, this.progress > 100 && (this.progress = 100)) : this.regionService.finishDeconstruction(this))
                }, t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        buildingType: this.buildingType,
                        region: this.region,
                        deconstructing: this.deconstructing,
                        buildingComplexity: this.buildingComplexity,
                        progress: this.progress,
                        working: this.working,
                        buildingSize: this.buildingSize
                    }
                }, t.prototype.getComplexity = function () {
                    return 0
                }, t.prototype.getSize = function () {
                    return this.buildingSize
                }, t.prototype.prepareDemolish = function () {
                    return !1
                }, t.prototype.finishDemolish = function () {}, t.prototype.getBuildingBeingDemolished = function () {
                    return this.deconstructing
                }, t
            }(XE);
        ! function (e) {
            e.GATHERING_FOOD = "gathering food", e.GATHERING_RESOURCES = "gathering resources", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING = "transporting"
        }(sO || (sO = {}));
        var hO, dO = function (e) {
                return e[e.FOOD = 0] = "FOOD", e[e.RESOURCES = 1] = "RESOURCES", e
            }({}),
            fO = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = sO.GATHERING_FOOD), void 0 === l && (l = !1), void 0 === o && (o = dO.FOOD), void 0 === u && (u = [null, 0]), void 0 === s && (s = 1);
                    var a = e.call(this, n, Ou.GATHERER, t, Zu.FOREST.GATHERER, l, !0, !0, s) || this;
                    return a.progress = r, a.status = i, a.mode = o, a.storage = u, a.lastFind = null, a.servicesService && (a.weatherService = t.getService(Nu.WEATHER)), a
                }
                return i(t, e), t.prototype.rollForFind = function () {
                    var e = null;
                    return this.mode === dO.FOOD ? e = Mu.randomElement([{
                        item: vu.BERRY,
                        chance: this.settings.BERRY_CHANCE
                    }, {
                        item: vu.MUSHROOM,
                        chance: this.settings.MUSHROOM_CHANCE
                    }, {
                        item: vu.WHEAT,
                        chance: this.settings.WHEAT_CHANCE
                    }]) : this.mode === dO.RESOURCES && (e = Mu.randomElement([{
                        item: vu.BRUSHWOOD,
                        chance: this.settings.BRUSHWOOD_CHANCE
                    }, {
                        item: vu.STONE,
                        chance: this.settings.STONE_CHANCE
                    }, {
                        item: vu.LOG,
                        chance: this.settings.LOG_CHANCE
                    }, {
                        item: vu.COPPER,
                        chance: this.settings.COPPER_CHANCE
                    }])), e
                }, t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        working: this.working,
                        storage: this.storage,
                        mode: this.mode
                    }
                }, t.prototype.callback = function (e) {
                    e === dO.FOOD ? (this.mode = dO.FOOD, this.progress = 0, this.status = sO.GATHERING_FOOD) : e === dO.RESOURCES && (this.mode = dO.RESOURCES, this.progress = 0, this.status = sO.GATHERING_RESOURCES)
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return this.mode === dO.FOOD ? $E.buttonValue("gather resources", dO.RESOURCES) : $E.buttonValue("gather food", dO.FOOD);
                        case JS.SECOND:
                            return $E.textValue(this.status);
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return null != this.lastFind ? $E.textValue("last find: " + Au.prepareResourceName(this.lastFind)) : $E.emptyValue()
                    }
                }, t.prototype.tick = function (e) {
                    if (this.working)
                        if (this.storage[1] > 0) this.resourcesService.increaseResource(this.storage[0], this.storage[1]) ? (this.storage = [null, 0], this.setStatus()) : this.status = sO.WAITING_FOR_WAREHOUSE_SPACE;
                        else if (this.progress < 100) this.setStatus(), this.progress += this.getPower(), this.progress > 100 && (this.progress = 100);
                    else if (100 === this.progress) {
                        this.progress = 0;
                        var t = this.rollForFind();
                        if (null !== t && !this.resourcesService.hasLimit(t)) return t = null, void(this.progress = 50);
                        t ? (this.lastFind = t, this.storage = [t, 1], this.status = sO.TRANSPORTING) : (this.lastFind = vu.NOTHING, this.progress = 0)
                    }
                }, t.prototype.setStatus = function () {
                    this.status = this.mode === dO.FOOD ? sO.GATHERING_FOOD : sO.GATHERING_RESOURCES
                }, t
            }(XE);
        ! function (e) {
            e.MINING_STONE = "mining stone", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.NO_MORE_RESOURCES = "no more resources", e.TRANSPORTING = "transporting"
        }(hO || (hO = {}));
        var gO, vO = function (e) {
            function t(t, n, r, i, l, o, u, s) {
                void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = hO.MINING_STONE), void 0 === l && (l = !1), void 0 === o && (o = 0), void 0 === u && (u = 200), void 0 === s && (s = 1);
                var a = e.call(this, n, Ou.QUARRY, t, Zu.MOUNTAINS.QUARRY, l, !0, !0, s) || this;
                return a.progress = r, a.status = i, a.storage = o, a.resources = u, a.servicesService && (a.gameService = t.getService(Nu.GAME)), a
            }
            return i(t, e), t.prototype.toJSON = function () {
                return {
                    id: this.id,
                    level: this.level,
                    buildingType: this.buildingType,
                    progress: this.progress,
                    status: this.status,
                    working: this.working,
                    storage: this.storage,
                    resources: this.resources
                }
            }, t.prototype.build = function () {
                return this.startProduction(), this.gameService.enable(Eu.R_QUARRY), this
            }, t.prototype.buildOnMountain = function () {
                return !0
            }, t.prototype.getLine = function (e) {
                switch (e) {
                    case JS.FIRST:
                        return $E.textValue("stone: " + this.resources);
                    case JS.SECOND:
                        return $E.textValue(this.status);
                    case JS.THIRD:
                        return $E.progressValue(this.progress);
                    case JS.FOURTH:
                        return $E.emptyValue()
                }
            }, t.prototype.isStoppable = function () {
                return this.resources > 0
            }, t.prototype.tick = function (e) {
                this.resources <= 0 && (this.status = hO.NO_MORE_RESOURCES, this.stopProduction()), this.working && (this.storage > 0 ? this.resourcesService.increaseResource(vu.STONE, this.storage) ? (this.storage = 0, this.status = hO.MINING_STONE) : this.status = hO.WAITING_FOR_WAREHOUSE_SPACE : this.progress < 100 ? (this.status = hO.MINING_STONE, this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : 100 === this.progress && (this.progress = 0, this.resources -= 1, this.storage = 1, this.status = hO.TRANSPORTING))
            }, t
        }(XE);
        ! function (e) {
            e.RESEARCHING = "researching", e.CRAFTING = "crafting {craft}", e.WAITING_FOR_WAREHOUSE = "waiting for warehouse space", e.NO_RESEARCH = "nothing to research", e.NO_CRAFTING = "nothing to craft"
        }(gO || (gO = {}));
        var mO, yO = function (e) {
                return e[e.RESEARCH = 0] = "RESEARCH", e[e.CRAFT = 1] = "CRAFT", e[e.SWITCH_TO_RESEARCH = 2] = "SWITCH_TO_RESEARCH", e
            }({}),
            SO = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = gO.NO_RESEARCH), void 0 === l && (l = yO.RESEARCH), void 0 === o && (o = !1), void 0 === u && (u = null), void 0 === s && (s = 1);
                    var a = e.call(this, n, Ou.WORKSHOP, t, Zu.VILLAGE.WORKSHOP, o, !0, !0, s) || this;
                    return a.progress = r, a.status = i, a.mode = l, a.recipe = u, a.servicesService && (a.craftingService = t.getService(Nu.CRAFTING), a.techService = t.getService(Nu.RESEARCH), a.gameService = t.getService(Nu.GAME)), a
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        mode: this.mode,
                        working: this.working,
                        recipe: this.recipe
                    }
                }, t.prototype.build = function () {
                    this.startProduction();
                    var e = this.servicesService.getService(Nu.LOG);
                    return this.gameService.isEnabled(Eu.RESEARCH) || (this.gameService.enable(Eu.RESEARCH), e.log("Researching unlocked")), this.gameService.isEnabled(Eu.CRAFTING) || (this.gameService.enable(Eu.CRAFTING), e.log("Crafting unlocked")), this.craftingService.increaseQueueSize(1), this
                }, t.prototype.prepareDemolish = function () {
                    return this.craftingService.decreaseQueueSize(1), e.prototype.prepareDemolish.call(this)
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if ("switch" === e) {
                        if (this.mode === yO.RESEARCH) this.progress = 0, this.mode = yO.CRAFT, this.recipe = this.craftingService.getOrder(), this.status = null !== this.recipe ? gO.CRAFTING : gO.NO_CRAFTING;
                        else if (this.mode === yO.SWITCH_TO_RESEARCH) this.mode = yO.CRAFT, this.status = null !== this.recipe ? gO.CRAFTING : gO.NO_CRAFTING;
                        else if (this.mode === yO.CRAFT)
                            if (this.recipe) {
                                this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Workshop will switch to research after finishing current craft.");
                                var n = this.modalService.registerForConfirmation().subscribe(function (e) {
                                    n.unsubscribe(), e && (t.mode = yO.SWITCH_TO_RESEARCH)
                                })
                            } else this.progress = 0, this.mode = yO.RESEARCH, this.status = this.techService.isResearchStarted() ? gO.RESEARCHING : gO.NO_RESEARCH
                    } else "cancel" === e && (this.recipe = null, this.progress = 0, this.mode === yO.SWITCH_TO_RESEARCH && (this.mode = yO.RESEARCH, this.status = this.techService.isResearchStarted() ? gO.RESEARCHING : gO.NO_RESEARCH))
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return this.firstLine();
                        case JS.SECOND:
                            return $E.textValue(this.status.replace("{craft}", this.recipe ? Au.prepareResourceName(this.recipe.resource) : ""));
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return this.recipe ? $E.buttonValue("cancel crafting", "cancel") : $E.emptyValue()
                    }
                }, t.prototype.firstLine = function () {
                    return $E.buttonValue(this.mode === yO.RESEARCH || this.mode === yO.SWITCH_TO_RESEARCH ? "craft" : "research", "switch")
                }, t.prototype.tick = function (e) {
                    this.working && (this.mode === yO.RESEARCH ? this.techService.isResearchStarted() ? (this.status !== gO.RESEARCHING && (this.progress = 0), this.status = gO.RESEARCHING, this.progress += this.getPower(), this.progress >= 100 && (this.progress = 0, this.techService.progressTech(Zu.VILLAGE.WORKSHOP.RESEARCH_POWER))) : (this.status = gO.NO_RESEARCH, this.progress = 0) : this.mode !== yO.CRAFT && this.mode !== yO.SWITCH_TO_RESEARCH || (null === this.recipe && (this.recipe = this.craftingService.getOrder(), this.progress = 0), null === this.recipe ? this.status = gO.NO_CRAFTING : (this.status = gO.CRAFTING, this.progress < 100 && (this.progress += this.getPower() / this.recipe.craftingDifficulty * Zu.VILLAGE.WORKSHOP.CRAFTING_POWER), this.progress >= 100 && (this.resourcesService.hasLimit(this.recipe.resource) ? (this.progress = 0, this.resourcesService.increaseResource(this.recipe.resource, this.recipe.amount), this.recipe = null, this.mode === yO.SWITCH_TO_RESEARCH && (this.mode = yO.RESEARCH, this.status = this.techService.isResearchStarted() ? gO.RESEARCHING : gO.NO_RESEARCH)) : this.status = gO.WAITING_FOR_WAREHOUSE))))
                }, t.prototype.getRecipe = function () {
                    return this.recipe
                }, t.prototype.cancelCrafting = function () {
                    this.recipe = null
                }, t
            }(XE),
            EO = function (e) {
                function t(t, n, r, i) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = Cu.NONE), void 0 === i && (i = 1);
                    var l = e.call(this, n, Ou.WAREHOUSE, t, Zu.VILLAGE.WAREHOUSE, !1, !0, !1, i) || this;
                    return l.resource = r, l.storage = 50, l.servicesService && (l.modalService = t.getService(Nu.MODAL)), l
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        resource: this.resource
                    }
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if (this.resource === Cu.NONE) this.resource = Cu[String(e.target.value)], this.resourcesService.increaseLimit(this.resource, this.storage);
                    else {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to switch warehouse storage type?<br>All excess resources will be lost");
                        var n = this.modalService.registerForConfirmation().subscribe(function (r) {
                            r ? (t.resourcesService.decreaseLimit(t.resource, t.storage), t.resource = Cu[String(e.target.value)], t.resourcesService.increaseLimit(t.resource, t.storage)) : e.target.selectedIndex = t.resource - 1, n.unsubscribe()
                        })
                    }
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return this.firstLine();
                        case JS.SECOND:
                            return $E.textValue("storage: " + this.storage);
                        case JS.THIRD:
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.firstLine = function () {
                    var e = [];
                    return e.push(Cu[Cu.NONE]), e.push(Cu[Cu.RAW]), e.push(Cu[Cu.PROCESSED]), e.push(Cu[Cu.FOOD]), e.push(Cu[Cu.TOOLS]), $E.dropdownValue(e, Cu[this.resource])
                }, t.prototype.prepareDemolish = function () {
                    return this.resourcesService.decreaseLimit(this.resource, this.storage), !0
                }, t.prototype.startProduction = function () {
                    return !1
                }, t.prototype.stopProduction = function () {}, t.prototype.fireWorker = function () {
                    return !1
                }, t.prototype.hireWorker = function () {
                    return !1
                }, t.prototype.getWorkers = function () {
                    return 0
                }, t.prototype.getHappinessEffect = function () {
                    return 0
                }, t
            }(XE);
        ! function (e) {
            e.HUNTING = "hunting", e.TAME = "taming animals", e.WAITING_FOR_PASTURE_SPACE = "waiting for warehouse space", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING = "transporting"
        }(mO || (mO = {}));
        var OO, bO = function (e) {
                return e[e.HUNTING = 0] = "HUNTING", e[e.TAMING = 1] = "TAMING", e
            }({}),
            TO = function (e) {
                function t(t, n, r, i, l, o, u, s, a, c) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = mO.HUNTING), void 0 === l && (l = bO.HUNTING), void 0 === o && (o = !1), void 0 === u && (u = 0), void 0 === s && (s = 0), void 0 === a && (a = null), void 0 === c && (c = 1);
                    var p = e.call(this, n, Ou.HUNTER_LODGE, t, Zu.FOREST.HUNTER_LODGE, o, !0, !0, c) || this;
                    return p.progress = r, p.status = i, p.mode = l, p.storage = u, p.storage2 = s, p.animal = a, p.lastFind = null, p.servicesService && (p.weatherService = t.getService(Nu.WEATHER), p.gameService = t.getService(Nu.GAME)), p
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        mode: this.mode,
                        working: this.working,
                        storage: this.storage,
                        storage2: this.storage2,
                        animal: this.animal
                    }
                }, t.prototype.callback = function (e) {
                    "tame" === e ? (this.mode = bO.TAMING, this.progress = 0, this.storage = 0, this.storage2 = 0, this.status = mO.TAME) : (this.mode = bO.HUNTING, this.progress = 0, this.storage = 0, this.storage2 = 0, this.lastFind = null, this.status = mO.HUNTING)
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return this.gameService.isEnabled(Eu.PASTURE) ? this.mode === bO.HUNTING ? $E.buttonValue("tame animals", "tame") : $E.buttonValue("hunt", "hunt") : $E.emptyValue();
                        case JS.SECOND:
                            return $E.textValue(this.status);
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return null !== this.lastFind ? $E.textValue("last tamed: " + Au.prepareResourceName(this.lastFind)) : $E.emptyValue()
                    }
                }, t.prototype.tick = function (e) {
                    if (this.working)
                        if (this.mode === bO.HUNTING) this.status = 0 !== this.storage && 0 !== this.storage2 ? mO.TRANSPORTING : mO.HUNTING, this.status === mO.HUNTING ? this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100 && (this.progress = 0, this.storage < 5 && (this.storage += Mu.randomBetween(1, 2), this.storage > 5 && (this.storage = 5)), this.storage2 < 5 && (this.storage2 += Mu.randomBetween(0, 1), this.storage2 > 5 && (this.storage2 = 5)), this.status = mO.TRANSPORTING)) : this.status !== mO.TRANSPORTING && this.status !== mO.WAITING_FOR_WAREHOUSE_SPACE || (0 !== this.storage && this.resourcesService.increaseResource(vu.MEAT, this.storage) && (this.storage = 0), 0 !== this.storage2 && this.resourcesService.increaseResource(vu.FUR, this.storage2) && (this.storage2 = 0), 0 !== this.storage && 0 !== this.storage2 && (this.status = mO.WAITING_FOR_WAREHOUSE_SPACE));
                        else if (this.mode === bO.TAMING)
                        if (this.status === mO.TAME) {
                            if (this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100)) {
                                this.progress = 0;
                                var t = [];
                                this.resourcesService.hasLimit(vu.CHICKEN) && t.push({
                                    item: vu.CHICKEN,
                                    chance: 3
                                }), this.resourcesService.hasLimit(vu.PIG) && t.push({
                                    item: vu.PIG,
                                    chance: 2
                                }), this.resourcesService.hasLimit(vu.COW) && t.push({
                                    item: vu.COW,
                                    chance: 1
                                }), this.resourcesService.hasLimit(vu.HORSE) && t.push({
                                    item: vu.HORSE,
                                    chance: 1
                                }), 0 === t.length && (this.logService.log("No more space for animals. Hunter switched to hunting"), this.callback("hunt"));
                                var n = Mu.randomElement(t);
                                null != n ? (this.lastFind = n, this.animal = n, this.status = mO.TRANSPORTING) : (this.lastFind = vu.NOTHING, this.animal = null)
                            }
                        } else this.status !== mO.TRANSPORTING && this.status !== mO.WAITING_FOR_PASTURE_SPACE || this.animal && (this.resourcesService.increaseResource(this.animal, 1) ? (this.animal = null, this.status = mO.TAME) : this.status = mO.WAITING_FOR_PASTURE_SPACE)
                }, t
            }(XE),
            RO = function (e) {
                function t(t, n, r, i) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 1);
                    var l = e.call(this, n, Ou.SHRINE, t, Zu.VILLAGE.SHRINE, !0, !0, !1, i) || this;
                    return l.progress = r, l.servicesService && (l.religionService = t.getService(Nu.RELIGION)), l
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress
                    }
                }, t.prototype.build = function () {
                    return this.religionService.increaseFaithCap(10), this.servicesService.getService(Nu.GAME).enable(Eu.RELIGION), this
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                        case JS.SECOND:
                            return $E.emptyValue();
                        case JS.THIRD:
                            return $E.progressValue(this.progress, "prayers");
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.prepareDemolish = function () {
                    return this.religionService.decreaseFaithCap(10), !0
                }, t.prototype.startProduction = function () {
                    return !0
                }, t.prototype.stopProduction = function () {}, t.prototype.tick = function (e) {
                    var t = this.servicesService.getService(Nu.VILLAGE).getPopulation();
                    this.progress += .01 * t * this.getPower(), this.progress > 100 && (this.progress = 0, this.religionService.increaseFaith(1))
                }, t.prototype.fireWorker = function () {
                    return !1
                }, t.prototype.hireWorker = function () {
                    return !1
                }, t.prototype.getWorkers = function () {
                    return 0
                }, t
            }(XE),
            CO = function () {
                function e(e, t, n) {
                    void 0 === e && (e = null), void 0 === t && (t = -1), void 0 === n && (n = 0), this.servicesService = e, this.fish = n, this.buildingType = Ou.SCHOOL_OF_FISH, this.id = t, this.servicesService && (this.resourcesService = e.getService(Nu.RESOURCES), this.effectsService = e.getService(Nu.EFFECTS))
                }
                return e.prototype.callback = function (e) {}, e.prototype.getBuildingType = function () {
                    return this.buildingType
                }, e.prototype.getComplexity = function () {
                    return 0
                }, e.prototype.getCost = function () {
                    return new Map
                }, e.prototype.getName = function () {
                    return "School of fish"
                }, e.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("fish: " + this.fish);
                        case JS.SECOND:
                        case JS.THIRD:
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, e.prototype.getSize = function () {
                    return 0
                }, e.prototype.buildOnMountain = function () {
                    return !1
                }, e.prototype.tick = function () {
                    1 === Mu.randomBetween(1, Zu.SEA.SCHOOL_OF_FISH.BREED_CHANCE) && (this.fish += Math.floor(Zu.SEA.SCHOOL_OF_FISH.BREED_AMOUNT * this.getPower()))
                }, e.prototype.build = function () {
                    return this
                }, e.prototype.getBuildingId = function () {
                    return this.id
                }, e.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        buildingType: this.buildingType,
                        fish: this.fish
                    }
                }, e.prototype.prepareDemolish = function () {
                    return this.stopProduction(), !1
                }, e.prototype.finishDemolish = function () {}, e.prototype.startProduction = function () {
                    return !1
                }, e.prototype.stopProduction = function () {}, e.prototype.isStoppable = function () {
                    return !1
                }, e.prototype.isWorking = function () {
                    return !0
                }, e.prototype.isDemolishable = function () {
                    return !1
                }, e.prototype.getDescription = function () {
                    return "School of fish"
                }, e.prototype.fireWorker = function () {
                    return !1
                }, e.prototype.hireWorker = function () {
                    return !1
                }, e.prototype.getWorkers = function () {
                    return 0
                }, e.prototype.getFish = function () {
                    return this.fish
                }, e.prototype.reduceFish = function (e) {
                    return this.fish >= e && (this.fish -= e, !0)
                }, e.prototype.getEffects = function () {
                    return 0
                }, e.prototype.getPermanentEffects = function () {
                    return 0
                }, e.prototype.getDetails = function () {
                    return ""
                }, e.prototype.hasDetails = function () {
                    return !1
                }, e.prototype.getPower = function () {
                    return 1 + this.effectsService.getNatureEffectsValue() / 100
                }, e.prototype.isCombinable = function () {
                    return !1
                }, e.prototype.isSplittable = function () {
                    return !1
                }, e.prototype.getHappinessEffect = function () {
                    return 0
                }, e.prototype.getWeatherMultiplier = function () {
                    return 0
                }, e.prototype.getDisplayableEffectsValue = function () {
                    return 0
                }, e.prototype.hasBuff = function () {
                    return !1
                }, e.prototype.isBuffed = function () {
                    return !1
                }, e.prototype.getBuff = function () {
                    return null
                }, e.prototype.isComplexManagement = function () {
                    return !1
                }, e.prototype.getWorkSettings = function () {
                    return null
                }, e.prototype.hasUpgrade = function () {
                    return !1
                }, e.prototype.getUpgradeCost = function () {
                    return new Map
                }, e.prototype.setBuildingLevel = function (e) {}, e.prototype.getBuildingLevel = function () {
                    return 0
                }, e
            }();
        ! function (e) {
            e.WORKING = "working", e.BAD_WEATHER = "bad weather", e.STOPPED = "stopped"
        }(OO || (OO = {}));
        var _O, IO = function (e) {
            function t(t, n, r, i, l, o) {
                void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 4), void 0 === l && (l = OO.WORKING), void 0 === o && (o = 1);
                var u = e.call(this, n, Ou.FARM, t, Zu.FIELD.FARM, r > 0, !0, !0, o) || this;
                return u.workers = r, u.maxWorkers = i, u.status = l, u.servicesService && (u.weatherService = t.getService(Nu.WEATHER), u.calendarService = t.getService(Nu.CALENDAR), u.fieldService = t.getServiceByRegion(ku.FIELD)), u
            }
            return i(t, e), t.prototype.toJSON = function () {
                return {
                    id: this.id,
                    level: this.level,
                    buildingType: this.buildingType,
                    workers: this.workers,
                    maxWorkers: this.maxWorkers
                }
            }, t.prototype.callback = function (e) {
                "hire" === e && this.workers < this.maxWorkers && this.resourcesService.hireWorker() ? this.workers += 1 : "fire" === e && this.workers > 0 && (this.resourcesService.fireWorker(), this.workers -= 1)
            }, t.prototype.getLine = function (e) {
                switch (e) {
                    case JS.FIRST:
                        return $E.textValue("workers: " + this.workers + "/" + this.maxWorkers);
                    case JS.SECOND:
                        return $E.textValue(this.status);
                    case JS.THIRD:
                        return $E.twoButtonValue("hire worker", "hire", "", "fire worker", "fire");
                    case JS.FOURTH:
                        return $E.emptyValue()
                }
            }, t.prototype.isWorking = function () {
                return this.workers > 0
            }, t.prototype.startProduction = function () {
                if (0 === this.workers) {
                    for (; this.workers < this.maxWorkers && this.resourcesService.hireWorker();) this.workers += 1;
                    if (this.workers > 0) return !0
                }
                return !1
            }, t.prototype.stopProduction = function () {
                this.workers > 0 && (this.resourcesService.fireWorker(this.workers), this.workers = 0)
            }, t.prototype.tick = function (e) {
                var t = this;
                if (this.workers > 0)
                    if (this.weatherService.isWeather(xu.RAIN, xu.STORM)) this.status = OO.BAD_WEATHER;
                    else {
                        this.status = OO.WORKING;
                        for (var n = this.workers; n > 0;) {
                            var r = this.fieldService.getBuildings().filter(function (e) {
                                return (e.getBuildingType() === Ou.FIELD || e.getBuildingType() === Ou.ORCHARD || e.getBuildingType() === Ou.PASTURE) && e.hasWork()
                            });
                            if (0 === r.length) break;
                            r.forEach(function (e) {
                                n > 0 && e.work(t.getPower()) && (n -= 1)
                            })
                        }
                    }
                else this.status = OO.STOPPED
            }, t.prototype.fireWorker = function () {
                return this.workers > 0 && (this.resourcesService.fireWorker(1), this.workers -= 1, !0)
            }, t.prototype.hireWorker = function () {
                return !!(this.workers < this.maxWorkers && this.resourcesService.hireWorker()) && (this.workers += 1, !0)
            }, t.prototype.getWorkers = function () {
                return this.workers
            }, t
        }(XE);
        ! function (e) {
            e.PLOW_FIELD = "plowing {crop} field", e.SOWING = "sowing {crop}", e.GROWING = "{crop} growing", e.HARVEST = "harvesting {crop}", e.FALLOW = "fallow"
        }(_O || (_O = {}));
        var AO, wO = function (e) {
            function t(t, n, r, i, l, o, u, s, a) {
                void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = Zu.FIELD.FIELD.SIZE), void 0 === i && (i = Ru.NONE), void 0 === l && (l = _O.FALLOW), void 0 === o && (o = 0), void 0 === u && (u = !0), void 0 === s && (s = 0), void 0 === a && (a = 1);
                var c = e.call(this, n, Ou.FIELD, t, Zu.FIELD.FIELD, u, !0, !0, a) || this;
                return c.currentSize = r, c.crop = i, c.status = l, c.progress = o, c.growth = s, c.servicesService && (c.gameService = t.getService(Nu.GAME), c.modalService = t.getService(Nu.MODAL), c.weatherService = t.getService(Nu.WEATHER), c.calendarService = t.getService(Nu.CALENDAR)), c
            }
            return i(t, e), t.prototype.toJSON = function () {
                return {
                    id: this.id,
                    level: this.level,
                    buildingType: this.buildingType,
                    size: this.currentSize,
                    crop: this.crop,
                    status: this.status,
                    progress: this.progress,
                    working: this.working,
                    growth: this.growth
                }
            }, t.prototype.getSize = function () {
                return this.currentSize
            }, t.prototype.getComplexity = function () {
                return e.prototype.getComplexity.call(this) * (this.getSize() / this.settings.SIZE)
            }, t.prototype.callback = function (e) {
                var t = this;
                if (this.crop === Ru.NONE || this.status === _O.FALLOW) this.crop = Ru[String(e.target.value)], this.status = _O.FALLOW, this.progress = 0;
                else {
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to switch field crop type?<br>All field progress will be lost");
                    var n = this.modalService.registerForConfirmation().subscribe(function (r) {
                        r ? (t.crop = Ru[String(e.target.value)], t.status = _O.FALLOW, t.progress = 0) : e.target.selectedIndex = t.crop, n.unsubscribe()
                    })
                }
            }, t.prototype.finishDemolish = function () {}, t.prototype.getLine = function (e) {
                var t = this;
                switch (e) {
                    case JS.FIRST:
                        return $E.textValue("size: " + this.getSize());
                    case JS.SECOND:
                        var n = [];
                        return n.push(Ru[Ru.NONE]), Object.entries(Object(es.FIELD)).forEach(function (e) {
                            es.getCrop(Ru[e[0]]).PREREQUISITE ? t.gameService.isEnabled(es.getCrop(Ru[e[0]]).PREREQUISITE) && n.push(e[0]) : n.push(e[0])
                        }), $E.dropdownValue(n, Ru[this.crop]);
                    case JS.THIRD:
                        return $E.textValue(this.status.replace("{crop}", Ru[this.crop].toLowerCase()));
                    case JS.FOURTH:
                        return this.status === _O.HARVEST ? $E.progressValue(this.growth, "harvest: " + this.growth) : $E.progressValue(this.progress)
                }
            }, t.prototype.getName = function () {
                return this.crop === Ru.NONE ? "Field" : Ru[this.crop].charAt(0).toUpperCase() + Ru[this.crop].slice(1).toLowerCase() + " field"
            }, t.prototype.startProduction = function () {
                return this.working = !0, !0
            }, t.prototype.stopProduction = function () {
                this.working = !1
            }, t.prototype.tick = function (e) {
                if (this.calendarService.getSeason() === gg.WINTER && (this.status = _O.FALLOW, this.growth = 0, this.progress = 0), this.status === _O.GROWING)
                    if (this.calendarService.getSeason() === gg.AUTUMN) this.status = _O.HARVEST, this.growth = Math.floor(2 * this.progress * this.getSize() / 100), this.progress = 0;
                    else if (this.progress < 100) {
                    var t = this.getPower() * (1 + this.effectsService.getNatureEffectsValue() / 100) / es.getCrop(this.crop).GROWTH;
                    this.weatherService.getCurrentTemperature() <= 5 ? t *= 0 : this.weatherService.getCurrentTemperature() <= 10 ? t *= .2 : this.weatherService.getCurrentTemperature() <= 15 ? t *= .5 : this.weatherService.getCurrentTemperature() <= 20 ? t *= .8 : this.weatherService.getCurrentTemperature() <= 25 ? t *= 1 : this.weatherService.getCurrentTemperature() <= 27 ? t *= .8 : this.weatherService.getCurrentTemperature() <= 29 ? t *= .6 : this.weatherService.getCurrentTemperature() <= 31 ? t *= .4 : this.weatherService.getCurrentTemperature() <= 33 ? t *= .2 : this.weatherService.getCurrentTemperature() <= 35 && (t *= 0), this.progress += t, this.progress > 100 && (this.progress = 100)
                } else 100 === this.progress && (this.growth = this.getSize() * es.getCrop(this.crop).YIELD_MULTIPLIER, this.progress = 0, this.status = _O.HARVEST)
            }, t.prototype.work = function (e) {
                if (this.isWorking() && this.status !== _O.GROWING && this.crop !== Ru.NONE) {
                    if (this.status === _O.FALLOW && this.calendarService.getSeason() === gg.SPRING) return this.status = _O.PLOW_FIELD, !0;
                    if (this.status === _O.PLOW_FIELD && this.calendarService.getSeason() === gg.SPRING) return this.progress < 100 && (this.progress += e / this.getSize(), this.progress >= 100 && (this.progress = 0, this.status = _O.SOWING)), !0;
                    if (this.status === _O.SOWING && this.calendarService.getSeason() === gg.SPRING || this.calendarService.getSeason() === gg.SUMMER) return this.progress += e / this.getSize(), this.progress >= 100 && (this.progress = 0, this.status = _O.GROWING), !0;
                    if (this.status === _O.HARVEST) {
                        var t = vu[Ru[this.crop]];
                        if (this.resourcesService.hasLimit(t)) return this.resourcesService.increaseResource(t, 1), this.growth -= 1, this.growth <= 0 && (this.status = _O.FALLOW), !0
                    }
                }
                return !1
            }, t.prototype.fireWorker = function () {
                return !1
            }, t.prototype.hireWorker = function () {
                return !1
            }, t.prototype.getWorkers = function () {
                return 0
            }, t.prototype.hasWork = function () {
                return this.isWorking() && this.status !== _O.GROWING && this.crop !== Ru.NONE && (this.status === _O.FALLOW && this.calendarService.getSeason() === gg.SPRING || this.status === _O.PLOW_FIELD && this.calendarService.getSeason() === gg.SPRING || this.status === _O.SOWING && this.calendarService.getSeason() === gg.SPRING || this.calendarService.getSeason() === gg.SUMMER || this.status === _O.HARVEST && this.resourcesService.hasLimit(vu[Ru[this.crop]]))
            }, t.prototype.getDetails = function () {
                return this.crop !== Ru.NONE ? "growing difficulty: " + es.getCrop(this.crop).GROWTH + "<br>yield multiplier: " + es.getCrop(this.crop).YIELD_MULTIPLIER + "<br>" + e.prototype.getDetails.call(this) : e.prototype.getDetails.call(this)
            }, t.prototype.getHappinessEffect = function () {
                return 0
            }, t.prototype.isCombinable = function () {
                return !0
            }, t.prototype.isSplittable = function () {
                return !0
            }, t.prototype.combine = function (e, t) {
                var n = this;
                if (this.getBuildingType() === e.getBuildingType()) {
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText(" Are you sure you want to combine " + this.getName() + " of size " + this.getSize() + " with " + e.getName() + " of size " + e.getSize() + "?<br>Resulting " + this.getName() + " of size " + (this.getSize() + e.getSize()) + " will be changed to fallow");
                    var r = this.modalService.registerForConfirmation().subscribe(function (i) {
                        r.unsubscribe(), i ? (n.currentSize += e.getSize(), n.status = _O.FALLOW, n.progress = 0, n.growth = 0, t.finaliseCombine(!0)) : t.finaliseCombine(!1)
                    })
                }
            }, t.prototype.split = function (e) {
                var n = this;
                this.modalService.open(mu.INPUT), this.modalService.setModalText("Set split size (1-" + (this.getSize() - 1) + ")");
                var r = this.modalService.registerForValueResponse().subscribe(function (i) {
                    r.unsubscribe(), isNaN(i) || 0 === i || (i >= 1 && i < n.getSize() ? (n.currentSize -= Number(i), e.finaliseSplit(new t(n.servicesService, Number(i)).build())) : n.modalService.info("Invalid size value!"))
                })
            }, t
        }(XE);
        ! function (e) {
            e.FALLOW = "fallow", e.PLANTING = "planting {crop}", e.GROWING = "{crop} growing", e.FRUITING = "{crop} fruits growing", e.HARVEST = "picking {crop}", e.NO_FRUITS = "no fruits", e.CLEAR = "clear old plants"
        }(AO || (AO = {}));
        var NO, PO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = Zu.FIELD.ORCHARD.SIZE), void 0 === i && (i = Ru.NONE), void 0 === l && (l = AO.FALLOW), void 0 === o && (o = 0), void 0 === u && (u = !0), void 0 === s && (s = 0), void 0 === a && (a = 1);
                    var c = e.call(this, n, Ou.ORCHARD, t, Zu.FIELD.ORCHARD, u, !0, !0, a) || this;
                    return c.currentSize = r, c.crop = i, c.status = l, c.progress = o, c.growth = s, c.servicesService && (c.modalService = t.getService(Nu.MODAL), c.weatherService = t.getService(Nu.WEATHER), c.calendarService = t.getService(Nu.CALENDAR)), c
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        size: this.currentSize,
                        crop: this.crop,
                        status: this.status,
                        progress: this.progress,
                        working: this.working,
                        growth: this.growth
                    }
                }, t.prototype.getSize = function () {
                    return this.currentSize
                }, t.prototype.getComplexity = function () {
                    return e.prototype.getComplexity.call(this) * (this.getSize() / this.settings.SIZE)
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if (this.crop === Ru.NONE || this.status === AO.FALLOW) this.crop = Ru[String(e.target.value)], this.status = AO.FALLOW, this.progress = 0;
                    else {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to switch orchard plant type?<br>All orchard progress will be lost");
                        var n = this.modalService.registerForConfirmation().subscribe(function (r) {
                            r ? (t.crop = Ru[String(e.target.value)], t.status = t.status === AO.FALLOW || t.status === AO.PLANTING ? AO.FALLOW : AO.CLEAR, t.progress = 0) : e.target.selectedIndex = t.crop - Object.entries(es.FIELD).length, n.unsubscribe()
                        })
                    }
                }, t.prototype.finishDemolish = function () {}, t.prototype.getLine = function (e) {
                    var t = this;
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("size: " + this.getSize());
                        case JS.SECOND:
                            var n = [];
                            return n.push(Ru[Ru.NONE]), Object.entries(Object(es.ORCHARD)).forEach(function (e) {
                                es.getCrop(Ru[e[0]]).PREREQUISITE ? t.gameService.isEnabled(es.getCrop(Ru[e[0]]).PREREQUISITE) && n.push(e[0]) : n.push(e[0])
                            }), $E.dropdownValue(n, Ru[this.crop]);
                        case JS.THIRD:
                            return $E.textValue(this.status.replace("{crop}", Ru[this.crop].toLowerCase()));
                        case JS.FOURTH:
                            return this.status === AO.HARVEST ? $E.progressValue(this.growth, "harvest: " + this.growth) : this.status === AO.NO_FRUITS ? $E.emptyValue() : $E.progressValue(this.progress)
                    }
                }, t.prototype.getName = function () {
                    return this.crop === Ru.NONE ? "Orchard" : Ru[this.crop].charAt(0).toUpperCase() + Ru[this.crop].slice(1).toLowerCase() + " orchard"
                }, t.prototype.startProduction = function () {
                    return this.working = !0, !0
                }, t.prototype.stopProduction = function () {
                    this.working = !1
                }, t.prototype.tick = function (e) {
                    if (this.crop !== Ru.NONE) {
                        if (this.status !== AO.FALLOW && this.calendarService.getSeason() === gg.WINTER) {
                            if (this.status === AO.GROWING) return;
                            this.status = AO.NO_FRUITS, this.growth = 0, this.progress = 0
                        } else this.status === AO.NO_FRUITS && this.calendarService.getSeason() === gg.SPRING && (this.status = AO.FRUITING);
                        if (this.status === AO.GROWING || this.status === AO.FRUITING)
                            if (this.calendarService.getSeason() === gg.AUTUMN && this.status === AO.FRUITING) this.status = AO.HARVEST, this.growth = Math.floor(2 * this.progress * this.getSize() / 100), this.progress = 0;
                            else if (this.progress < 100) {
                            var t = this.getPower() * (1 + this.effectsService.getNatureEffectsValue() / 100);
                            this.status === AO.GROWING ? t /= es.getCrop(this.crop).GROWTH : this.status === AO.FRUITING && (t /= es.getCrop(this.crop).FRUITING), this.weatherService.getCurrentTemperature() <= 5 ? t *= 0 : this.weatherService.getCurrentTemperature() <= 10 ? t *= .2 : this.weatherService.getCurrentTemperature() <= 15 ? t *= .5 : this.weatherService.getCurrentTemperature() <= 20 ? t *= .8 : this.weatherService.getCurrentTemperature() <= 25 ? t *= 1 : this.weatherService.getCurrentTemperature() <= 27 ? t *= .8 : this.weatherService.getCurrentTemperature() <= 29 ? t *= .6 : this.weatherService.getCurrentTemperature() <= 31 ? t *= .4 : this.weatherService.getCurrentTemperature() <= 33 ? t *= .2 : this.weatherService.getCurrentTemperature() <= 35 && (t *= 0), this.progress += t, this.progress > 100 && (this.progress = 100)
                        } else 100 === this.progress && (this.status === AO.GROWING ? this.status = AO.FRUITING : this.status === AO.FRUITING && (this.growth = 2 * this.getSize(), this.status = AO.HARVEST), this.progress = 0)
                    }
                }, t.prototype.work = function (e) {
                    if (this.isWorking() && this.status !== AO.GROWING && this.crop !== Ru.NONE)
                        if (this.status === AO.FALLOW) {
                            if (this.calendarService.getSeason() === gg.SPRING) return this.status = AO.PLANTING, !0
                        } else {
                            if (this.status === AO.PLANTING) return this.progress < 100 && (this.progress += e / this.getSize(), this.progress >= 100 && (this.progress = 0, this.status = AO.GROWING)), !0;
                            if (this.status === AO.HARVEST) {
                                var t = vu[Ru[this.crop]];
                                if (this.resourcesService.hasLimit(t)) return this.resourcesService.increaseResource(t, 1), this.growth -= 1, this.growth <= 0 && (this.status = AO.NO_FRUITS), !0
                            } else if (this.status === AO.CLEAR) return this.progress < 100 && (this.progress += e / this.getSize(), this.progress >= 100 && (this.progress = 0, this.status = AO.FALLOW)), !0
                        } return !1
                }, t.prototype.fireWorker = function () {
                    return !1
                }, t.prototype.hireWorker = function () {
                    return !1
                }, t.prototype.getWorkers = function () {
                    return 0
                }, t.prototype.hasWork = function () {
                    return this.isWorking() && this.status !== AO.GROWING && this.crop !== Ru.NONE && (this.status === AO.FALLOW && this.calendarService.getSeason() === gg.SPRING || this.status === AO.PLANTING || this.status === AO.CLEAR || this.status === AO.HARVEST && this.resourcesService.hasLimit(vu[Ru[this.crop]]))
                }, t.prototype.getDetails = function () {
                    return this.crop !== Ru.NONE ? "growing difficulty: " + es.getCrop(this.crop).GROWTH + "<br>fruiting difficulty: " + es.getCrop(this.crop).FRUITING + "<br>yield multiplier: " + es.getCrop(this.crop).YIELD_MULTIPLIER + "<br>" + e.prototype.getDetails.call(this) : e.prototype.getDetails.call(this)
                }, t.prototype.getHappinessEffect = function () {
                    return 0
                }, t.prototype.isCombinable = function () {
                    return !0
                }, t.prototype.isSplittable = function () {
                    return !0
                }, t.prototype.combine = function (e, t) {
                    var n = this;
                    if (this.getBuildingType() === e.getBuildingType()) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText(" Are you sure you want to combine " + this.getName() + " of size " + this.getSize() + " with " + e.getName() + " of size " + e.getSize() + "?<br>Resulting " + this.getName() + " of size " + (this.getSize() + e.getSize()) + " will be changed to fallow");
                        var r = this.modalService.registerForConfirmation().subscribe(function (i) {
                            r.unsubscribe(), i ? (n.currentSize += e.getSize(), n.status = AO.FALLOW, n.progress = 0, n.growth = 0, t.finaliseCombine(!0)) : t.finaliseCombine(!1)
                        })
                    }
                }, t.prototype.split = function (e) {
                    var n = this;
                    this.modalService.open(mu.INPUT), this.modalService.setModalText("Set split size (1-" + (this.getSize() - 1) + ")");
                    var r = this.modalService.registerForValueResponse().subscribe(function (i) {
                        r.unsubscribe(), isNaN(i) || 0 === i || (i >= 1 && i < n.getSize() ? (n.currentSize -= Number(i), e.finaliseSplit(new t(n.servicesService, Number(i)).build())) : n.modalService.info("Invalid size value!"))
                    })
                }, t
            }(XE),
            DO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.WINDMILL, Zu.FIELD.WINDMILL, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO),
            MO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.BAKERY, Zu.VILLAGE.BAKERY, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO);
        ! function (e) {
            e.FISHING = "fishing", e.WAITING_FOR_FISH = "waiting for fish", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING_FISH = "transporting fish"
        }(NO || (NO = {}));
        var kO, LO = function (e) {
                function t(t, n, r, i, l, o, u) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = NO.WAITING_FOR_FISH), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, n, Ou.FISHERS_HUT, t, Zu.SEA.FISHERS_HUT, o, !0, !0, u) || this;
                    return s.progress = r, s.localStorage = i, s.status = l, s.servicesService && (s.seaService = t.getServiceByRegion(ku.SEA)), s
                }
                return i(t, e), t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.emptyValue();
                        case JS.SECOND:
                            return $E.textValue(this.status);
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.tick = function () {
                    if (this.working)
                        if (this.status === NO.WAITING_FOR_FISH) this.seaService.reduceFish(1) && (this.status = NO.FISHING);
                        else if (this.status === NO.FISHING) this.progress < 100 && (this.progress += this.getPower(), this.progress >= 100 && (this.progress = 0, this.status = NO.TRANSPORTING_FISH));
                    else if (this.status === NO.TRANSPORTING_FISH || this.status === NO.WAITING_FOR_WAREHOUSE_SPACE) {
                        var e = this.resourcesService.increaseResource(vu.FISH, 1);
                        this.status = e ? NO.WAITING_FOR_FISH : NO.WAITING_FOR_WAREHOUSE_SPACE
                    }
                }, t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        localStorage: this.localStorage,
                        status: this.status,
                        working: this.working
                    }
                }, t.prototype.getDescription = function () {
                    return "Fishers catch fish in the sea"
                }, t
            }(XE),
            xO = function (e) {
                function t(t, n, r, i) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = Zu.FORT.BARRACKS.SIZE), void 0 === i && (i = 1);
                    var l = e.call(this, n, Ou.BARRACKS, t, Zu.FORT.BARRACKS, !1, !0, !1, i) || this;
                    return l.barracksSize = r, l.servicesService && (l.armyService = t.getService(Nu.ARMY), l.modalService = t.getService(Nu.MODAL)), l
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        barracksSize: this.barracksSize
                    }
                }, t.prototype.build = function () {
                    return this.servicesService.getService(Nu.GAME).isEnabled(Eu.ARMY) || this.servicesService.getService(Nu.GAME).enable(Eu.ARMY), this.armyService.increaseBarracks(this.barracksSize), this
                }, t.prototype.prepareDemolish = function () {
                    return this.armyService.getFreeBarracks() >= this.barracksSize ? (this.armyService.decreaseBarracks(this.barracksSize), !0) : (this.modalService.info("Your troops would have nowhere to sleep!<br>You cannot demolish barracks right now!"), !1)
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("capacity: " + this.barracksSize);
                        case JS.SECOND:
                        case JS.THIRD:
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.getHappinessEffect = function () {
                    return 0
                }, t
            }(XE);
        ! function (e) {
            e.TRAINING = "training", e.NO_RECRUITS = "no recruits"
        }(kO || (kO = {}));
        var FO, UO = function (e) {
                function t(t, n, r, i, l, o) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = !1), void 0 === l && (l = kO.NO_RECRUITS), void 0 === o && (o = 1);
                    var u = e.call(this, n, Ou.TRAINING_SQUARE, t, Zu.FORT.TRAINING_SQUARE, i, !0, !0, o) || this;
                    return u.progress = r, u.status = l, u.servicesService && (u.armyService = t.getService(Nu.ARMY)), u
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        working: this.working
                    }
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.emptyValue();
                        case JS.SECOND:
                            return $E.textValue(this.status);
                        case JS.THIRD:
                            return this.status === kO.TRAINING ? $E.progressValue(this.progress) : $E.emptyValue();
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.tick = function (e) {
                    this.working && (this.armyService.hasRecruits() ? (this.status = kO.TRAINING, this.progress < 100 && (this.progress += this.getPower()), this.progress >= 100 && (this.progress = 0, this.armyService.progressRecruitment(1))) : (this.status = kO.NO_RECRUITS, this.progress = 0))
                }, t
            }(XE),
            HO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.TANNERY, Zu.FOREST.TANNERY, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO),
            GO = function (e) {
                function t(t, n, r, i, l, o, u) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = Zu.FORT.STOCKADE.DURABILITY), void 0 === i && (i = Zu.FORT.STOCKADE.DURABILITY), void 0 === l && (l = 0), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, n, Ou.STOCKADE, t, Zu.FORT.STOCKADE, o, !0, !1, u) || this;
                    return s.health = r, s.durability = i, s.progress = l, s.servicesService && (s.armyService = t.getService(Nu.ARMY), s.modalService = t.getService(Nu.MODAL)), s
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        health: this.health,
                        durability: this.durability,
                        progress: this.progress,
                        working: this.working
                    }
                }, t.prototype.build = function () {
                    return this.armyService.increaseDefense(Zu.FORT.STOCKADE.DEFENSE), this
                }, t.prototype.prepareDemolish = function () {
                    return this.armyService.decreaseDefense(Zu.FORT.STOCKADE.DEFENSE), !0
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if ("repair" === e) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to repair " + this.getName() + " for 1 log for each durability point missing?");
                        var n = this.modalService.registerForConfirmation().subscribe(function (e) {
                            e && (t.startProduction() || t.modalService.info("No free worker to repair stockade!")), n.unsubscribe()
                        })
                    } else "stop" === e && this.fireWorker()
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("durability: " + this.health + "/" + this.durability);
                        case JS.SECOND:
                            return $E.textValue("defense: " + Zu.FORT.STOCKADE.DEFENSE);
                        case JS.THIRD:
                            return this.health < this.durability && !this.working ? $E.buttonValue("repair", "repair") : this.health < this.durability && this.working ? $E.buttonValue("stop repair", "stop") : $E.emptyValue();
                        case JS.FOURTH:
                            return this.working ? $E.progressValue(this.progress) : $E.emptyValue()
                    }
                }, t.prototype.tick = function (e) {
                    this.working && (this.progress < 100 && (0 === this.progress && this.resourcesService.decreaseResource(vu.LOG, 1) ? this.progress += this.getPower() : this.progress > 0 && (this.progress += this.getPower())), this.progress >= 100 && (this.progress = 0, this.health += 1), this.health === this.durability && this.fireWorker())
                }, t.prototype.getHappinessEffect = function () {
                    return 0
                }, t
            }(XE),
            BO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.COTTON_MILL, Zu.FIELD.COTTON_MILL, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO),
            VO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.TAILOR, Zu.VILLAGE.TAILOR, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO),
            WO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.BREWERY, Zu.FIELD.BREWERY, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO),
            jO = function (e) {
                function t(t, n, r, i, l, o, u) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = Zu.FORT.WOODEN_TOWER.DURABILITY - 30), void 0 === i && (i = Zu.FORT.WOODEN_TOWER.DURABILITY), void 0 === l && (l = 0), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, n, Ou.WOODEN_TOWER, t, Zu.FORT.WOODEN_TOWER, o, !0, !1, u) || this;
                    return s.health = r, s.durability = i, s.progress = l, s.servicesService && (s.armyService = t.getService(Nu.ARMY), s.modalService = t.getService(Nu.MODAL)), s
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        health: this.health,
                        durability: this.durability,
                        progress: this.progress,
                        working: this.working
                    }
                }, t.prototype.build = function () {
                    return this.armyService.increaseDefense(Zu.FORT.WOODEN_TOWER.DEFENSE), this
                }, t.prototype.prepareDemolish = function () {
                    return this.armyService.decreaseDefense(Zu.FORT.WOODEN_TOWER.DEFENSE), !0
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if ("repair" === e) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to repair " + this.getName() + " for 1 log for each durability point missing?");
                        var n = this.modalService.registerForConfirmation().subscribe(function (e) {
                            e && (t.startProduction() || t.modalService.info("No free worker to repair wooden tower!")), n.unsubscribe()
                        })
                    } else "stop" === e && this.fireWorker()
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("durability: " + this.health + "/" + this.durability);
                        case JS.SECOND:
                            return $E.textValue("defense: " + Zu.FORT.WOODEN_TOWER.DEFENSE);
                        case JS.THIRD:
                            return this.health < this.durability && !this.working ? $E.buttonValue("repair", "repair") : this.health < this.durability && this.working ? $E.buttonValue("stop repair", "stop") : $E.emptyValue();
                        case JS.FOURTH:
                            return this.working ? $E.progressValue(this.progress) : $E.emptyValue()
                    }
                }, t.prototype.tick = function (e) {
                    this.working && (this.progress < 100 && (0 === this.progress && this.resourcesService.decreaseResource(vu.LOG, 1) ? this.progress += this.getPower() : this.progress > 0 && (this.progress += this.getPower())), this.progress >= 100 && (this.progress = 0, this.health += 1), this.health === this.durability && this.fireWorker())
                }, t.prototype.getHappinessEffect = function () {
                    return 0
                }, t
            }(XE),
            YO = function (e) {
                function t(t, n, r, i, l, o, u) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = Zu.FORT.STONE_TOWER.DURABILITY), void 0 === i && (i = Zu.FORT.STONE_TOWER.DURABILITY), void 0 === l && (l = 0), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, n, Ou.STONE_TOWER, t, Zu.FORT.STONE_TOWER, o, !0, !1, u) || this;
                    return s.health = r, s.durability = i, s.progress = l, s.servicesService && (s.armyService = t.getService(Nu.ARMY), s.modalService = t.getService(Nu.MODAL)), s
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        health: this.health,
                        durability: this.durability,
                        progress: this.progress,
                        working: this.working
                    }
                }, t.prototype.build = function () {
                    return this.armyService.increaseDefense(Zu.FORT.STONE_TOWER.DEFENSE), this
                }, t.prototype.prepareDemolish = function () {
                    return this.armyService.decreaseDefense(Zu.FORT.STONE_TOWER.DEFENSE), !0
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if ("repair" === e) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to repair " + this.getName() + " for 1 stone for each durability point missing?");
                        var n = this.modalService.registerForConfirmation().subscribe(function (e) {
                            e && (t.startProduction() || t.modalService.info("No free worker to repair stone tower!")), n.unsubscribe()
                        })
                    } else "stop" === e && this.fireWorker()
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("durability: " + this.health + "/" + this.durability);
                        case JS.SECOND:
                            return $E.textValue("defense: " + Zu.FORT.STONE_TOWER.DEFENSE);
                        case JS.THIRD:
                            return this.health < this.durability && !this.working ? $E.buttonValue("repair", "repair") : this.health < this.durability && this.working ? $E.buttonValue("stop repair", "stop") : $E.emptyValue();
                        case JS.FOURTH:
                            return this.working ? $E.progressValue(this.progress) : $E.emptyValue()
                    }
                }, t.prototype.tick = function (e) {
                    this.working && (this.progress < 100 && (0 === this.progress && this.resourcesService.decreaseResource(vu.STONE, 1) ? this.progress += this.getPower() : this.progress > 0 && (this.progress += this.getPower())), this.progress >= 100 && (this.progress = 0, this.health += 1), this.health === this.durability && this.fireWorker())
                }, t.prototype.getHappinessEffect = function () {
                    return 0
                }, t
            }(XE),
            zO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1);
                    var c = e.call(this, t, n, Ou.WINERY, Zu.FIELD.WINERY, i, r, l, o, u, s, a) || this;
                    return t && (c.managementService = t.getService(Nu.MANAGEMENT)), c
                }
                return i(t, e), t.prototype.tick = function () {
                    this.managementService.getComplexWorkers() && this.workSettings && this.workSettings.enabled && (this.isMet() ? this.isWorking() || this.hireWorker() : this.isWorking() && this.fireWorker()), this.working && (this.outputStorage.length > 0 ? this.collectOutputResources() : this.inputStorage.length < this.settings.INPUT_RESOURCES.length && 0 === this.outputStorage.length ? this.collectInputResources() && (this.status = lO.PREPARING) : this.progress < 100 && this.status === lO.PREPARING ? (this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : 100 === this.progress && this.status === lO.PREPARING ? (this.progress = 0, this.status = lO.PRODUCING_OUTPUT) : this.progress < 100 && this.status === lO.PRODUCING_OUTPUT ? (this.progress += 100 / (10 * ju), this.progress >= 100 && (this.progress = 100)) : 100 === this.progress && this.status === lO.PRODUCING_OUTPUT && (this.progress = 0, this.inputStorage = [], this.outputStorage = Au.copyResourceArray(this.settings.OUTPUT_RESOURCES), this.status = lO.TRANSPORTING_OUTPUT))
                }, t
            }(aO),
            KO = function (e) {
                function t(t, n, r, i, l, o, u) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = !1), void 0 === u && (u = 1);
                    var s = e.call(this, n, Ou.TAVERN, t, Zu.VILLAGE.TAVERN, o, !0, !0, u) || this;
                    return s.progress = r, s.beer = i, s.wine = l, s.servicesService && (s.resourcesService = t.getService(Nu.RESOURCES), s.happinessService = t.getService(Nu.HAPPINESS), s.managementService = t.getService(Nu.MANAGEMENT)), s
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        beer: this.beer,
                        wine: this.wine,
                        working: this.working
                    }
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue(0 === this.beer && 0 === this.wine ? "waiting for alcohol" : "open");
                        case JS.SECOND:
                        case JS.THIRD:
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.tick = function (e) {
                    this.beer < 10 && this.resourcesService.decreaseResource(vu.BEER, 1) && (this.beer += 1, this.beer > 10 && (this.beer = 10)), this.wine < 10 && this.resourcesService.decreaseResource(vu.WINE, 1) && (this.wine += 1, this.wine > 10 && (this.wine = 10));
                    var t = this.managementService.getAlcoholRations(),
                        n = this.resourcesService.getTotalPeople();
                    if (this.happinessService.getHappiness() < 100 && n > 1 && (this.beer > 0 || this.wine > 0))
                        for (var r = n; r > 0; r--) {
                            var i = Mu.randomBetween(0, 1);
                            0 === i && this.beer >= .01 * t ? (this.beer -= .01 * t, this.happinessService.increaseHappiness(.01 * t / n * this.getPower())) : 1 === i && this.wine >= .01 * t && (this.wine -= .01 * t, this.happinessService.increaseHappiness(.01 * t / n * this.getPower()))
                        }
                }, t
            }(XE),
            qO = function (e) {
                function t(t, n, r, i, l) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = !1), void 0 === l && (l = 1);
                    var o = e.call(this, n, Ou.GEOLOGIST, t, Zu.MOUNTAINS.GEOLOGIST, i, !0, !0, l) || this;
                    return o.progress = r, o.servicesService && (o.gameService = t.getService(Nu.GAME), o.resourcesService = t.getService(Nu.RESOURCES), o.landService = t.getService(Nu.LAND)), o
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        working: this.working
                    }
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("looking for ores");
                        case JS.SECOND:
                            return $E.progressValue(this.progress);
                        case JS.THIRD:
                            return $E.textValue(this.lastFind ? "last find: " + Au.prepareResourceName(this.lastFind) + " deposit" : "last find: nothing");
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.tick = function (e) {
                    if (this.working)
                        if (this.landService.getTotalOre() < this.landService.getMountains())
                            if (this.progress < 100) this.progress += this.getPower();
                            else {
                                this.progress = 0;
                                var t = [];
                                t.push({
                                    item: vu.COAL,
                                    chance: this.settings.COAL_CHANCE
                                }), t.push({
                                    item: vu.COPPER_ORE,
                                    chance: this.settings.COAL_CHANCE
                                }), t.push({
                                    item: vu.TIN_ORE,
                                    chance: this.settings.COAL_CHANCE
                                }), this.gameService.isEnabled(Eu.GOLD) && t.push({
                                    item: vu.GOLD_ORE,
                                    chance: this.settings.GOLD
                                }), this.gameService.isEnabled(Eu.SILVER) && t.push({
                                    item: vu.SILVER_ORE,
                                    chance: this.settings.SILVER
                                }), this.gameService.isEnabled(Eu.IRON) && t.push({
                                    item: vu.IRON_ORE,
                                    chance: this.settings.IRON
                                });
                                var n = Mu.randomElement(t, 10);
                                n ? (this.landService.increaseOre(n, 1), this.lastFind = n) : this.lastFind = null
                            }
                    else this.progress = 0
                }, t
            }(XE),
            QO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.STONEMASON, Zu.MOUNTAINS.STONEMASON, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO),
            $O = function () {
                function e(e, t, n) {
                    void 0 === e && (e = null), void 0 === t && (t = -1), void 0 === n && (n = 0), this.servicesService = e, this.sharks = n, this.buildingType = Ou.SHARKS, this.id = t, this.servicesService && (this.resourcesService = e.getService(Nu.RESOURCES), this.seaService = e.getService(Nu.SEA), this.effectsService = e.getService(Nu.EFFECTS))
                }
                return e.prototype.callback = function (e) {}, e.prototype.getBuildingType = function () {
                    return this.buildingType
                }, e.prototype.getComplexity = function () {
                    return 0
                }, e.prototype.getCost = function () {
                    return new Map
                }, e.prototype.getName = function () {
                    return 1 === this.sharks ? "Shark" : "Sharks"
                }, e.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("sharks: " + this.sharks);
                        case JS.SECOND:
                        case JS.THIRD:
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, e.prototype.getSize = function () {
                    return 0
                }, e.prototype.buildOnMountain = function () {
                    return !1
                }, e.prototype.tick = function () {
                    1 === Mu.randomBetween(1, Zu.SEA.SHARKS.FEED_CHANCE) && (this.seaService.reduceFish(this.sharks) || (this.sharks -= Zu.SEA.SHARKS.FEED_AMOUNT)), this.seaService.getFishAmount() > this.sharks * Zu.SEA.SHARKS.BREED_THRESHOLD && 1 === Mu.randomBetween(1, Zu.SEA.SHARKS.BREED_CHANCE) && (this.sharks += Math.floor(this.getPower())), this.seaService.getFishAmount() < this.sharks * Zu.SEA.SHARKS.DIE_THRESHOLD && 1 === Mu.randomBetween(1, Zu.SEA.SHARKS.DIE_CHANCE) && (this.sharks -= 1)
                }, e.prototype.build = function () {
                    return this
                }, e.prototype.getBuildingId = function () {
                    return this.id
                }, e.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        buildingType: this.buildingType,
                        sharks: this.sharks
                    }
                }, e.prototype.prepareDemolish = function () {
                    return this.stopProduction(), !1
                }, e.prototype.finishDemolish = function () {}, e.prototype.startProduction = function () {
                    return !1
                }, e.prototype.stopProduction = function () {}, e.prototype.isStoppable = function () {
                    return !1
                }, e.prototype.isWorking = function () {
                    return !0
                }, e.prototype.isDemolishable = function () {
                    return !1
                }, e.prototype.getDescription = function () {
                    return "Sea predators"
                }, e.prototype.fireWorker = function () {
                    return !1
                }, e.prototype.hireWorker = function () {
                    return !1
                }, e.prototype.getWorkers = function () {
                    return 0
                }, e.prototype.getSharks = function () {
                    return this.sharks
                }, e.prototype.reduceSharks = function (e) {
                    return this.sharks >= e && (this.sharks -= e, !0)
                }, e.prototype.getEffects = function () {
                    return 0
                }, e.prototype.getPermanentEffects = function () {
                    return 0
                }, e.prototype.getDetails = function () {
                    return ""
                }, e.prototype.hasDetails = function () {
                    return !1
                }, e.prototype.getPower = function () {
                    return 1 + this.effectsService.getNatureEffectsValue() / 100
                }, e.prototype.isCombinable = function () {
                    return !1
                }, e.prototype.isSplittable = function () {
                    return !1
                }, e.prototype.getHappinessEffect = function () {
                    return 0
                }, e.prototype.getWeatherMultiplier = function () {
                    return 0
                }, e.prototype.getDisplayableEffectsValue = function () {
                    return 0
                }, e.prototype.hasBuff = function () {
                    return !1
                }, e.prototype.isBuffed = function () {
                    return !1
                }, e.prototype.getBuff = function () {
                    return null
                }, e.prototype.isComplexManagement = function () {
                    return !1
                }, e.prototype.getWorkSettings = function () {
                    return null
                }, e.prototype.hasUpgrade = function () {
                    return !1
                }, e.prototype.getUpgradeCost = function () {
                    return new Map
                }, e.prototype.setBuildingLevel = function (e) {}, e.prototype.getBuildingLevel = function () {
                    return 0
                }, e
            }();
        ! function (e) {
            e.MINING = "mining {res}", e.WAITING_FOR_SELECTION = "waiting for ore selection", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.NO_MORE_RESOURCES = "no more {res}", e.TRANSPORTING = "transporting {res}"
        }(FO || (FO = {}));
        var ZO, XO = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = FO.WAITING_FOR_SELECTION), void 0 === l && (l = !1), void 0 === o && (o = 0), void 0 === u && (u = 200), void 0 === s && (s = vu.NOTHING), void 0 === a && (a = 1);
                    var c = e.call(this, n, Ou.PIT_MINE, t, Zu.MOUNTAINS.PIT_MINE, l, !0, !0, a) || this;
                    return c.progress = r, c.status = i, c.storage = o, c.resources = u, c.ore = s, c.servicesService && (c.modalService = t.getService(Nu.MODAL), c.landService = t.getService(Nu.LAND)), c
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        status: this.status,
                        working: this.working,
                        storage: this.storage,
                        resources: this.resources,
                        ore: this.ore
                    }
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if (this.ore === vu.NOTHING)
                        if (this.landService.hasOre(vu[String(e.target.value).replace(" ", "_")], 20)) {
                            this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to mine " + Au.prepareResourceName(vu[String(e.target.value).replace(" ", "_")]) + " in this mine?");
                            var n = this.modalService.registerForConfirmation().subscribe(function (r) {
                                r ? (t.landService.decreaseOre(vu[String(e.target.value).replace(" ", "_")], 20), t.ore = vu[String(e.target.value).replace(" ", "_")], t.status = FO.MINING, t.progress = 0) : e.target.selectedIndex = t.ore, n.unsubscribe()
                            })
                        } else this.modalService.info("Not enough " + Au.prepareResourceName(vu[String(e.target.value).replace(" ", "_")]) + " deposits available"), e.target.selectedIndex = this.ore
                }, t.prototype.build = function () {
                    return this.startProduction(), this
                }, t.prototype.buildOnMountain = function () {
                    return !0
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return this.ore !== vu.NOTHING ? $E.textValue(Au.prepareResourceName(this.ore).toLowerCase() + ": " + this.resources) : $E.emptyValue();
                        case JS.SECOND:
                            return $E.textValue(this.status.replace("{res}", Au.prepareResourceName(this.ore).toLowerCase()));
                        case JS.THIRD:
                            return $E.progressValue(this.progress);
                        case JS.FOURTH:
                            if (this.ore === vu.NOTHING) {
                                var t = [];
                                return t.push(vu[vu.NOTHING].replace("_", " ")), t.push(vu[vu.COAL].replace("_", " ")), t.push(vu[vu.GOLD_ORE].replace("_", " ")), t.push(vu[vu.SILVER_ORE].replace("_", " ")), t.push(vu[vu.COPPER_ORE].replace("_", " ")), t.push(vu[vu.TIN_ORE].replace("_", " ")), t.push(vu[vu.IRON_ORE].replace("_", " ")), $E.dropdownValue(t, vu[this.ore])
                            }
                            return $E.emptyValue()
                    }
                }, t.prototype.isStoppable = function () {
                    return this.resources > 0
                }, t.prototype.tick = function (e) {
                    if (this.ore !== vu.NOTHING) {
                        if (this.resources <= 0 && (this.status = FO.NO_MORE_RESOURCES, this.stopProduction()), !this.working) return;
                        this.storage > 0 ? this.resourcesService.increaseResource(this.ore, this.storage) ? (this.storage = 0, this.status = FO.MINING) : this.status = FO.WAITING_FOR_WAREHOUSE_SPACE : this.progress < 100 ? (this.status = FO.MINING, this.progress += this.getPower(), this.progress > 100 && (this.progress = 100)) : 100 === this.progress && (this.progress = 0, this.resources -= 1, this.storage = 1, this.status = FO.TRANSPORTING)
                    }
                }, t
            }(XE),
            JO = function (e) {
                return e[e.NONE = 0] = "NONE", e[e.COW = 1] = "COW", e[e.CHICKEN = 2] = "CHICKEN", e[e.PIG = 3] = "PIG", e[e.HORSE = 4] = "HORSE", e
            }({}),
            eb = function (e) {
                function t(t, n, r, i, l, o, u, s, a, c, p, h) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = Zu.FIELD.PASTURE.SIZE), void 0 === i && (i = JO.NONE), void 0 === l && (l = 0), void 0 === o && (o = 0), void 0 === u && (u = !0), void 0 === s && (s = 0), void 0 === a && (a = 0), void 0 === c && (c = 0), void 0 === p && (p = !1), void 0 === h && (h = 1);
                    var d = e.call(this, n, Ou.PASTURE, t, Zu.FIELD.PASTURE, u, !0, !0, h) || this;
                    return d.currentSize = r, d.animal = i, d.progress = l, d.produceProgress = o, d.animals = s, d.food = a, d.chores = c, d.autoButcher = p, d.servicesService && (d.modalService = t.getService(Nu.MODAL), d.weatherService = t.getService(Nu.WEATHER), d.calendarService = t.getService(Nu.CALENDAR), d.fieldService = t.getService(Nu.FIELD)), d
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        size: this.currentSize,
                        animal: this.animal,
                        progress: this.progress,
                        produceProgress: this.produceProgress,
                        working: this.working,
                        animals: this.animals,
                        food: this.food,
                        chores: this.chores,
                        autoButcher: this.autoButcher
                    }
                }, t.prototype.build = function () {
                    return this.resourcesService.getResource(vu.CHICKEN).isVisible() || (this.resourcesService.makeVisible(vu.CHICKEN), this.logService.log("New resource discovered: " + Au.prepareResourceName(vu.CHICKEN)), this.resourcesService.makeVisible(vu.COW), this.logService.log("New resource discovered: " + Au.prepareResourceName(vu.COW)), this.resourcesService.makeVisible(vu.PIG), this.logService.log("New resource discovered: " + Au.prepareResourceName(vu.PIG)), this.resourcesService.makeVisible(vu.HORSE), this.logService.log("New resource discovered: " + Au.prepareResourceName(vu.HORSE))), e.prototype.build.call(this)
                }, t.prototype.getSize = function () {
                    return this.currentSize
                }, t.prototype.getComplexity = function () {
                    return e.prototype.getComplexity.call(this) * (this.getSize() / this.settings.SIZE)
                }, t.prototype.findButcher = function () {
                    return this.fieldService.getBuildings().filter(function (e) {
                        return e.getBuildingType() === Ou.BUTCHER
                    }).map(function (e) {
                        return e
                    }).sort(function (e) {
                        return e.getAnimalsNumber()
                    })[0]
                }, t.prototype.butcher = function (e) {
                    void 0 === e && (e = !0);
                    var t = this.findButcher();
                    t ? t.addAnimalToButcher(this.getResourceType()) && this.decreaseAnimal(1) : e || this.modalService.info("No butcher available or their work queue is full")
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if ("butcher" === e && this.animals > 0) this.butcher(!1);
                    else if ("x" === e) this.autoButcher = !this.autoButcher;
                    else if (this.animal === JO.NONE || 0 === this.animals) this.animal = JO[String(e.target.value)], this.progress = 0, this.resourcesService.increaseResourceLimit(this.getResourceType(), this.getMaxAnimals());
                    else {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to change animals?<br>All current animals will be moved to other pastures and if there is no enough space they will be lost");
                        var n = this.modalService.registerForConfirmation().subscribe(function (r) {
                            r ? (t.resourcesService.decreaseResourceLimit(t.getResourceType(), t.getMaxAnimals()), t.animal = JO[String(e.target.value)], t.progress = 0, t.moveAnimals(t.animals), t.animals = 0, t.animal !== JO.NONE && t.resourcesService.increaseResourceLimit(t.getResourceType(), t.getMaxAnimals())) : e.target.selectedIndex = t.animal - 1, n.unsubscribe()
                        })
                    }
                }, t.prototype.finishDemolish = function () {}, t.prototype.prepareDemolish = function () {
                    return this.stopProduction(), this.animal !== JO.NONE && (this.moveAnimals(this.animals), this.resourcesService.decreaseResourceLimit(this.getResourceType(), this.getMaxAnimals())), !0
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return this.animal !== JO.NONE ? $E.textValue(JO[this.animal].toLowerCase() + ": " + this.animals + "/" + this.getMaxAnimals()) : $E.emptyValue();
                        case JS.SECOND:
                            if (this.animals > 0 && this.food < 0) return $E.progressValue(Math.abs(this.food), "famine");
                            var t = [];
                            return t.push(JO[JO.NONE]), t.push(JO[JO.CHICKEN]), t.push(JO[JO.COW]), t.push(JO[JO.PIG]), t.push(JO[JO.HORSE]), $E.dropdownValue(t, JO[this.animal]);
                        case JS.THIRD:
                            return this.animals > 0 && this.findButcher() ? $E.buttonCheckboxValue("butcher", "butcher", "auto butcher", this.autoButcher, "x") : $E.emptyValue();
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.getName = function () {
                    return this.animal === JO.NONE ? "Pasture" : JO[this.animal].charAt(0).toUpperCase() + JO[this.animal].slice(1).toLowerCase() + " pasture"
                }, t.prototype.startProduction = function () {
                    return this.working = !0, !0
                }, t.prototype.stopProduction = function () {
                    this.working = !1
                }, t.prototype.tick = function (e) {
                    this.food < 0 && this.calendarService.getSeason() !== gg.WINTER && (this.food = 0), this.autoButcher && this.animals === this.getMaxAnimals() && this.butcher(), this.chores += .05 * this.animals, this.chores > 100 && (this.chores = 100), this.animals > 0 && this.calendarService.getSeason() === gg.WINTER ? (this.food -= 5e-4 * this.getAnimalSettings().SIZE * this.animals, this.food <= -100 && (this.food = 0, this.resourcesService.blindResourceDecrease(this.getResourceType(), 1), this.decreaseAnimal(1))) : this.food < 0 && (this.food = 0), this.food >= 0 && this.animals > 1 && this.chores < 50 && this.animals < this.getMaxAnimals() && (this.progress < 100 ? this.progress += .1 / (10 / this.getAnimalSettings().REPRODUCTION_SPEED) * this.animals * (1 + this.effectsService.getNatureEffectsValue() / 100) : (this.progress = 0, this.resourcesService.blindResourceIncrease(this.getResourceType(), 1), this.increaseAnimal(1))), this.animal !== JO.CHICKEN && this.animal !== JO.COW || (0 === this.animals && (this.produceProgress = 0), this.produceProgress < 100 && this.chores < 50 ? this.produceProgress += .1 * this.animals * (1 + this.effectsService.getNatureEffectsValue() / 100) : (this.produceProgress = 0, this.animal === JO.CHICKEN ? this.resourcesService.increaseResource(vu.EGG, 1) : this.animal === JO.COW && this.resourcesService.increaseResource(vu.MILK, 1)))
                }, t.prototype.work = function (e) {
                    return this.food < 100 && 0 === this.resourcesService.hasResource(vu.HAY, 1) ? (this.resourcesService.decreaseResource(vu.HAY, 1) && (this.food += 25), !0) : this.chores >= 1 && (this.chores -= 1, !0)
                }, t.prototype.fireWorker = function () {
                    return !1
                }, t.prototype.hireWorker = function () {
                    return !1
                }, t.prototype.getWorkers = function () {
                    return 0
                }, t.prototype.hasWork = function () {
                    return !!this.isWorking() && (this.food < 50 && 0 === this.resourcesService.hasResource(vu.HAY, 1) || this.chores >= 1)
                }, t.prototype.getDetails = function () {
                    return this.animal !== JO.NONE ? "size: " + Au.round(this.getSize(), 0) + "<br>progress: " + Au.round(this.progress, 2) + "%<br>produce progress: " + Au.round(this.produceProgress, 2) + "%<br>food: " + Au.round(this.food, 2) + "<br>chores: " + Au.round(this.chores, 2) + "<br>" + e.prototype.getDetails.call(this) : e.prototype.getDetails.call(this)
                }, t.prototype.getHappinessEffect = function () {
                    return 0
                }, t.prototype.isCombinable = function () {
                    return !0
                }, t.prototype.isSplittable = function () {
                    return !0
                }, t.prototype.moveAnimals = function (e) {
                    for (var t = this, n = 0, r = this.fieldService.getBuildings().filter(function (e) {
                            return e.getBuildingType() === Ou.PASTURE && e !== t && e.getAnimals() < e.getMaxAnimals()
                        }).map(function (e) {
                            return e
                        }); n < r.length; n++) {
                        for (var i = r[n]; e > 0 && i.getAnimals() < i.getMaxAnimals();) i.increaseAnimal(1), e -= 1, this.decreaseAnimal(1);
                        if (0 === e) return
                    }
                }, t.prototype.getResourceType = function () {
                    return this.animal !== JO.NONE ? vu[JO[this.animal]] : vu.NOTHING
                }, t.prototype.getAnimals = function () {
                    return this.animals
                }, t.prototype.getAnimalSettings = function () {
                    return Xu.getResource(this.getResourceType())
                }, t.prototype.getMaxAnimals = function () {
                    return this.getResourceType() !== vu.NOTHING ? Math.floor(this.currentSize / this.getAnimalSettings().SIZE) : 0
                }, t.prototype.increaseAnimal = function (e) {
                    this.animals += e
                }, t.prototype.decreaseAnimal = function (e) {
                    this.animals -= e, this.resourcesService.updateAnimals()
                }, t.prototype.combine = function (e, t) {
                    var n = this;
                    if (this.getBuildingType() === e.getBuildingType()) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText(" Are you sure you want to combine " + this.getName() + " of size " + this.getSize() + " with " + e.getName() + " of size " + e.getSize() + "?<br>Resulting " + this.getName() + " of size " + (this.getSize() + e.getSize()) + " will keep animals");
                        var r = this.modalService.registerForConfirmation().subscribe(function (i) {
                            r.unsubscribe(), i ? (n.currentSize += e.getSize(), e.animal === n.animal ? n.increaseAnimal(e.getAnimals()) : e.moveAnimals(e.getAnimals()), e.animals = 0, t.finaliseCombine(!0)) : t.finaliseCombine(!1)
                        })
                    }
                }, t.prototype.split = function (e) {
                    var n = this;
                    this.modalService.open(mu.INPUT), this.modalService.setModalText("Set new pasture size (1-" + (this.getSize() - 1) + ")");
                    var r = this.modalService.registerForValueResponse().subscribe(function (i) {
                        if (r.unsubscribe(), !isNaN(i) && 0 !== i)
                            if (i >= 1 && i < n.getSize()) {
                                n.currentSize -= Number(i);
                                var l = new t(n.servicesService, Number(i)).build();
                                e.finaliseSplit(l), l.animal = n.animal, n.animals > n.getMaxAnimals() && n.moveAnimals(n.animals - n.getMaxAnimals())
                            } else n.modalService.info("Invalid size value!")
                    })
                }, t
            }(XE);
        ! function (e) {
            e.BUTCHERING = "butchering {animal}", e.WAITING_FOR_ANIMALS = "waiting for animals", e.WAITING_FOR_WAREHOUSE_SPACE = "waiting for warehouse space", e.TRANSPORTING = "transporting meat to warehouse"
        }(ZO || (ZO = {}));
        var tb = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = ZO.WAITING_FOR_ANIMALS), void 0 === i && (i = 0), void 0 === l && (l = !0), void 0 === o && (o = 0), void 0 === u && (u = []), void 0 === s && (s = 1);
                    var a = e.call(this, n, Ou.BUTCHER, t, Zu.FIELD.BUTCHER, l, !0, !0, s) || this;
                    return a.status = r, a.progress = i, a.outputStorage = o, a.animals = u, a
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        status: this.status,
                        progress: this.progress,
                        working: this.working,
                        outputStorage: this.outputStorage,
                        animals: this.animals
                    }
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue(this.animals.length > 0 ? this.status.replace("{animal}", Au.prepareResourceName(this.animals[0])) : this.status);
                        case JS.SECOND:
                            return $E.progressValue(this.progress);
                        case JS.THIRD:
                            return $E.textValue("queue: " + this.animals.length + "/10");
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.getAnimalsNumber = function () {
                    return this.animals.length
                }, t.prototype.addAnimalToButcher = function (e) {
                    return this.animals.length < 10 && (this.animals.push(e), !0)
                }, t.prototype.tick = function (e) {
                    this.working && (this.animals.length > 0 && 0 === this.outputStorage ? (this.status = ZO.BUTCHERING, this.progress < 100 ? (this.progress += this.getPower() / Xu.getResource(this.animals[0]).BUTCHERING_DIFFICULTY, this.progress > 100 && (this.progress = 100)) : (this.status = ZO.TRANSPORTING, this.progress = 0, this.outputStorage = Xu.getResource(this.animals.shift()).MEAT, this.resourcesService.increaseResource(vu.MEAT, this.outputStorage) || (this.status = ZO.WAITING_FOR_WAREHOUSE_SPACE))) : 0 !== this.outputStorage ? this.resourcesService.increaseResource(vu.MEAT, this.outputStorage) && (this.outputStorage = 0, this.status = ZO.WAITING_FOR_ANIMALS) : 0 === this.animals.length && (this.status = ZO.WAITING_FOR_ANIMALS))
                }, t
            }(XE),
            nb = function (e) {
                function t(t, n, r, i, l, o, u, s, a) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = lO.FETCHING_INPUT), void 0 === l && (l = []), void 0 === o && (o = []), void 0 === u && (u = !1), void 0 === s && (s = null), void 0 === a && (a = 1), e.call(this, t, n, Ou.MINT, Zu.MOUNTAINS.MINT, i, r, l, o, u, s, a) || this
                }
                return i(t, e), t
            }(aO),
            rb = function (e) {
                return e[e.CONSTRUCTION = 0] = "CONSTRUCTION", e[e.BUILT = 1] = "BUILT", e[e.ABDICATED = 2] = "ABDICATED", e[e.USED = 3] = "USED", e
            }({}),
            ib = function (e) {
                function t(t, n, r, i, l, o, u, s, a, c) {
                    var p = e.call(this, t, n, r, i, c > 0, !1, !0, 1) || this;
                    return p.progress = l, p.maxProgress = o, p.stage = u, p.state = s, p.year = a, p.workers = c, p.maxWorkers = 5, p.prepareIcons(), p
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        buildingType: this.buildingType,
                        progress: this.progress,
                        maxProgress: this.maxProgress,
                        stage: this.stage,
                        state: this.state,
                        year: this.year,
                        workers: this.workers
                    }
                }, t.prototype.prepareIcons = function () {
                    var e = this;
                    this.iconsValue = [], this.settings.STAGES[this.stage] && this.settings.STAGES[this.stage].cost.forEach(function (t) {
                        return e.iconsValue.push({
                            name: vu[t.resource],
                            path: "resources",
                            prefix: t.amount,
                            suffix: ""
                        })
                    })
                }, t.prototype.callback = function (e) {
                    var t = this;
                    if ("add" === e) {
                        var n = this.settings.STAGES[this.stage],
                            r = new Map;
                        n.cost.forEach(function (e) {
                            return r.set(e.resource, e.amount)
                        }), this.resourcesService.decreaseResources(r, !0) && (this.stage += 1, this.maxProgress += n.progress, this.prepareIcons())
                    } else if ("abdicate" === e) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to soft reset your progress? <br>You will start from the beginning and all progress except for</br>royal points, permanent royal upgrades and Wonders will be deleted.");
                        var i = this.modalService.registerForConfirmation().subscribe(function (e) {
                            i.unsubscribe(), e && (t.state = rb.ABDICATED, t.servicesService.getService(Nu.GAME).incrementAbdicationLevel(), t.servicesService.getService(Nu.SERIALIZER).softReset())
                        })
                    } else "hire" === e ? this.hireWorker() : "fire" === e && this.fireWorker()
                }, t.prototype.getName = function () {
                    return 100 === this.progress ? e.prototype.getName.call(this) : e.prototype.getName.call(this) + " construction"
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return this.state === rb.CONSTRUCTION ? $E.progressValue(this.progress, Au.round(this.progress, 2) + "% / " + this.maxProgress + "%") : $E.textValue("built in year " + this.year);
                        case JS.SECOND:
                            return this.state === rb.CONSTRUCTION ? $E.iconValue(this.iconsValue) : this.state === rb.BUILT ? $E.buttonValue(this.getAbdicationText(), "abdicate") : $E.emptyValue();
                        case JS.THIRD:
                            return this.maxProgress < 100 ? $E.buttonValue("add materials", "add") : $E.emptyValue();
                        case JS.FOURTH:
                            return this.state === rb.CONSTRUCTION ? $E.twoButtonValue("hire worker", "hire", this.workers + "/" + this.maxWorkers, "fire worker", "fire") : $E.emptyValue()
                    }
                }, t.prototype.getAbdicationText = function () {
                    return "abdicate"
                }, t.prototype.tick = function (e) {
                    this.isWorking() && (this.progress >= 100 && (this.stopProduction(), this.addPermanentEffect(), this.progress = 100, this.state = rb.BUILT, this.year = this.servicesService.getService(Nu.CALENDAR).getYear()), this.progress < this.maxProgress && (this.progress += .001 * this.getPower() * this.workers))
                }, t.prototype.getEffects = function () {
                    return this.state !== rb.CONSTRUCTION ? this.effectsService.getBuildingEffectsValue(Ou.CONSTRUCTION, !1) : e.prototype.getEffects.call(this)
                }, t.prototype.getPermanentEffects = function () {
                    return this.state !== rb.CONSTRUCTION ? this.effectsService.getBuildingEffectsValue(Ou.CONSTRUCTION, !0) : e.prototype.getPermanentEffects.call(this)
                }, t.prototype.getHappinessEffect = function () {
                    return this.state !== rb.CONSTRUCTION ? 0 : e.prototype.getHappinessEffect.call(this)
                }, t.prototype.isStoppable = function () {
                    return this.state === rb.CONSTRUCTION
                }, t.prototype.isFinished = function () {
                    return this.state !== rb.CONSTRUCTION
                }, t.prototype.fireWorker = function () {
                    return this.workers > 0 && (this.resourcesService.fireWorker(1), this.workers -= 1, !0)
                }, t.prototype.hireWorker = function () {
                    return !!(this.workers < this.maxWorkers && this.resourcesService.hireWorker()) && (this.workers += 1, !0)
                }, t.prototype.getWorkers = function () {
                    return this.workers
                }, t.prototype.isWorking = function () {
                    return this.workers > 0
                }, t.prototype.startProduction = function () {
                    if (0 === this.workers) {
                        for (; this.workers < this.maxWorkers && this.resourcesService.hireWorker();) this.workers += 1;
                        if (this.workers > 0) return !0
                    }
                    return !1
                }, t.prototype.stopProduction = function () {
                    this.workers > 0 && (this.resourcesService.fireWorker(this.workers), this.workers = 0)
                }, t.prototype.addPermanentEffect = function () {
                    var e = this;
                    if (this.settings.BUILDING_EFFECTS && this.settings.BUILDING_EFFECTS.length > 0) {
                        var t = this.servicesService.getService(Nu.EFFECTS);
                        this.settings.BUILDING_EFFECTS.forEach(function (n) {
                            t.addBuildingEffect(new Du(e.getName(), n.building, Number(n.value), -1))
                        })
                    }
                    if (this.settings.ARMY_EFFECTS && this.settings.ARMY_EFFECTS.length > 0) {
                        var n = this.servicesService.getService(Nu.EFFECTS);
                        this.settings.ARMY_EFFECTS.forEach(function (t) {
                            n.addArmyEffect(new Lu(e.getName(), t.troop, Number(t.value), -1))
                        })
                    }
                }, t
            }(XE),
            lb = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = rb.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, n, Ou.STONEHENGE, t, Zu.PLATEAU.STONEHENGE, r, i, l, o, u, s) || this
                }
                return i(t, e), t.prototype.tick = function (t) {
                    if (e.prototype.tick.call(this, t), this.state === rb.ABDICATED) {
                        this.state = rb.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var n = this.servicesService.getService(Nu.KONGREGATE);
                        n.isAvailable() && n.submitStat("Stonehenge", !0)
                    }
                }, t
            }(ib),
            ob = function (e) {
                function t(t, n, r, i) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 1);
                    var l = e.call(this, n, Ou.MARKETPLACE, t, Zu.VILLAGE.MARKETPLACE, !0, !0, !1, i) || this;
                    return l.progress = r, l.callMerchantPrice = [{
                        name: "coins",
                        path: "resources",
                        prefix: "",
                        suffix: "25"
                    }], l
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        progress: this.progress
                    }
                }, t.prototype.build = function () {
                    return this.servicesService.getService(Nu.GAME).enable(Eu.MARKET), e.prototype.build.call(this)
                }, t.prototype.callback = function (e) {
                    "bribe" === e && (this.resourcesService.decreaseResource(vu.COINS, 25, !0) ? 1 === Mu.randomBetween(1, 2) && (this.progress += 50, this.progress >= 100 && (this.progress = 0, this.servicesService.getService(Nu.MARKET).callMerchant())) : this.modalService.info("Not enough coins for a bribe"))
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.progressValue(this.progress, "merchant arrival");
                        case JS.SECOND:
                            return $E.emptyValue();
                        case JS.THIRD:
                            return $E.iconValue(this.callMerchantPrice);
                        case JS.FOURTH:
                            return $E.buttonValue("bribe merchant", "bribe")
                    }
                }, t.prototype.tick = function (e) {
                    1 === Mu.randomBetween(1, 10) && (this.progress += this.getPower()), this.progress >= 100 && (this.servicesService.getService(Nu.MARKET).callMerchant(), this.progress = 0)
                }, t
            }(XE),
            ub = function (e) {
                function t(t, n, r) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 1);
                    var i = e.call(this, n, Ou.SMITHY, t, Zu.MOUNTAINS.SMITHY, !1, !0, !1, r) || this;
                    return t && (i.gameService = t.getService(Nu.GAME)), i
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType
                    }
                }, t.prototype.build = function () {
                    var e = this;
                    return this.settings.RECIPES.forEach(function (t) {
                        e.gameService.isEnabled(t.prerequisite) && e.servicesService.getService(Nu.RECIPE).enable(t.recipe)
                    }), this.gameService.enable(Eu.R_SMITHY), this
                }, t.prototype.prepareDemolish = function () {
                    var e = this;
                    return this.settings.RECIPES.forEach(function (t) {
                        return e.servicesService.getService(Nu.RECIPE).disable(t.recipe)
                    }), this.gameService.disable(Eu.R_SMITHY), this.servicesService.getService(Nu.CRAFTING).filterQueue(this.settings.RECIPES), this.servicesService.getService(Nu.VILLAGE).buildings.filter(function (e) {
                        return e.getBuildingType() === Ou.WORKSHOP
                    }).map(function (e) {
                        return e
                    }).forEach(function (t) {
                        e.settings.RECIPES.includes(t.getRecipe().id) && t.cancelCrafting()
                    }), !0
                }, t
            }(XE),
            sb = function (e) {
                function t(t, n, r, i, l) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = !1), void 0 === i && (i = 0), void 0 === l && (l = 1);
                    var o = e.call(this, n, Ou.CHURCH, t, Zu.VILLAGE.CHURCH, r, !0, !0, l) || this;
                    return o.progress = i, o.servicesService && (o.religionService = t.getService(Nu.RELIGION)), o
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType,
                        working: this.working,
                        progress: this.progress
                    }
                }, t.prototype.build = function () {
                    return this.religionService.increaseFaithCap(50), this
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                        case JS.SECOND:
                            return $E.emptyValue();
                        case JS.THIRD:
                            return $E.progressValue(this.progress, "prayers");
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t.prototype.prepareDemolish = function () {
                    return this.religionService.decreaseFaithCap(50), !0
                }, t.prototype.tick = function (e) {
                    if (this.working) {
                        var t = this.servicesService.getService(Nu.VILLAGE).getPopulation();
                        this.progress += .1 * t * this.getPower(), this.progress > 100 && (this.progress = 0, this.religionService.increaseFaith(1))
                    }
                }, t
            }(XE),
            ab = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = rb.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, n, Ou.PYRAMID, t, Zu.PLATEAU.PYRAMID, r, i, l, o, u, s) || this
                }
                return i(t, e), t.prototype.tick = function (t) {
                    if (e.prototype.tick.call(this, t), this.state === rb.ABDICATED) {
                        this.state = rb.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var n = this.servicesService.getService(Nu.KONGREGATE);
                        n.isAvailable() && n.submitStat("Pyramid", !0)
                    }
                }, t
            }(ib),
            cb = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = rb.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, n, Ou.HANGING_GARDEN, t, Zu.PLATEAU.HANGING_GARDEN, r, i, l, o, u, s) || this
                }
                return i(t, e), t.prototype.tick = function (t) {
                    if (e.prototype.tick.call(this, t), this.state === rb.ABDICATED) {
                        this.state = rb.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var n = this.servicesService.getService(Nu.KONGREGATE);
                        n.isAvailable() && n.submitStat("Hanging Garden", !0)
                    }
                }, t
            }(ib),
            pb = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = rb.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, n, Ou.COLOSSUS, t, Zu.PLATEAU.COLOSSUS, r, i, l, o, u, s) || this
                }
                return i(t, e), t.prototype.tick = function (t) {
                    if (e.prototype.tick.call(this, t), this.state === rb.ABDICATED) {
                        this.state = rb.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var n = this.servicesService.getService(Nu.KONGREGATE);
                        n.isAvailable() && n.submitStat("Colossus", !0)
                    }
                }, t
            }(ib),
            hb = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = rb.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, n, Ou.ASCENSION_TEMPLE, t, Zu.PLATEAU.ASCENSION_TEMPLE, r, i, l, o, u, s) || this
                }
                return i(t, e), t.prototype.callback = function (t) {
                    var n = this;
                    if ("abdicate" === t) {
                        this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to ascend? <br>You will start from the beginning and all progress except for</br>royal points and permanent royal upgrades will be deleted.");
                        var r = this.modalService.registerForConfirmation().subscribe(function (e) {
                            if (r.unsubscribe(), e) {
                                n.state = rb.ABDICATED, n.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(n.settings.RP), n.logService.log("Your ascension granted you " + n.settings.RP + " royal points");
                                var t = n.servicesService.getService(Nu.KONGREGATE);
                                t.isAvailable() && t.submitStat("Ascension Temple", !0), n.servicesService.getService(Nu.SERIALIZER).ascensionReset()
                            }
                        })
                    } else e.prototype.callback.call(this, t)
                }, t.prototype.getAbdicationText = function () {
                    return "ascend"
                }, t
            }(ib),
            db = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = rb.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, n, Ou.UNDERGROUND_CITY, t, Zu.PLATEAU.UNDERGROUND_CITY, r, i, l, o, u, s) || this
                }
                return i(t, e), t.prototype.tick = function (t) {
                    if (e.prototype.tick.call(this, t), this.state === rb.ABDICATED) {
                        this.state = rb.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var n = this.servicesService.getService(Nu.KONGREGATE);
                        n.isAvailable() && n.submitStat("Underground City", !0)
                    }
                }, t
            }(ib),
            fb = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = rb.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, n, Ou.GREAT_LIGHTHOUSE, t, Zu.PLATEAU.GREAT_LIGHTHOUSE, r, i, l, o, u, s) || this
                }
                return i(t, e), t.prototype.tick = function (t) {
                    if (e.prototype.tick.call(this, t), this.state === rb.ABDICATED) {
                        this.state = rb.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var n = this.servicesService.getService(Nu.KONGREGATE);
                        n.isAvailable() && n.submitStat("Great Lighthouse", !0)
                    }
                }, t
            }(ib),
            gb = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    return void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === i && (i = 0), void 0 === l && (l = 0), void 0 === o && (o = rb.CONSTRUCTION), void 0 === u && (u = -1), void 0 === s && (s = 0), e.call(this, n, Ou.SACRED_GROVE, t, Zu.PLATEAU.SACRED_GROVE, r, i, l, o, u, s) || this
                }
                return i(t, e), t.prototype.tick = function (t) {
                    if (e.prototype.tick.call(this, t), this.state === rb.ABDICATED) {
                        this.state = rb.USED, this.servicesService.getService(Nu.GAME).enable(Eu.PLATEAU), this.servicesService.getService(Nu.ROYAL).increaseRoyalPoints(this.settings.RP), this.logService.log("Your abdication granted you " + this.settings.RP + " royal points");
                        var n = this.servicesService.getService(Nu.KONGREGATE);
                        n.isAvailable() && n.submitStat("Sacred Grove", !0)
                    }
                }, t
            }(ib),
            vb = function (e) {
                function t(t, n, r) {
                    void 0 === t && (t = null), void 0 === n && (n = -1), void 0 === r && (r = 1);
                    var i = e.call(this, n, Ou.STASH, t, Zu.FORT.STASH, !1, !0, !1, r) || this;
                    return i.servicesService && (i.armyService = t.getService(Nu.ARMY)), i
                }
                return i(t, e), t.prototype.toJSON = function () {
                    return {
                        id: this.id,
                        level: this.level,
                        buildingType: this.buildingType
                    }
                }, t.prototype.build = function () {
                    return this.armyService.increaseStash(Zu.FORT.STASH.SIZE), this
                }, t.prototype.prepareDemolish = function () {
                    return this.armyService.decreaseStash(Zu.FORT.STASH.SIZE), !0
                }, t.prototype.getLine = function (e) {
                    switch (e) {
                        case JS.FIRST:
                            return $E.textValue("stash size: " + Zu.FORT.STASH.SIZE);
                        case JS.SECOND:
                        case JS.THIRD:
                        case JS.FOURTH:
                            return $E.emptyValue()
                    }
                }, t
            }(XE),
            mb = function () {
                function e(e) {
                    this.servicesService = e, this.nextId = 1, e.addService(Nu.ID, this)
                }
                return e.prototype.getNextId = function () {
                    var e = this.nextId;
                    return this.nextId += 1, e
                }, e.prototype.load = function (e) {
                    this.nextId = e.nextId
                }, e.prototype.reset = function (e, t) {
                    e && (this.nextId = 1)
                }, e.prototype.save = function () {
                    return {
                        nextId: this.nextId
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            yb = function () {
                function e(e, t) {
                    this.servicesService = e, this.idService = t, e.addService(Nu.BUILDING_FACTORY, this)
                }
                return e.prototype.loadBuilding = function (e) {
                    return e.buildingType === Ou.HUT ? new eO(this.servicesService, e.id, e.occupants, e.progress, e.food, e.fuel, e.clothes, e.level) : e.buildingType === Ou.HOUSE ? new tO(this.servicesService, e.id, e.occupants, e.progress, e.food, e.fuel, e.clothes, e.level) : e.buildingType === Ou.BAKERY ? new MO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.TAILOR ? new VO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.WORKSHOP ? new SO(this.servicesService, e.id, e.progress, e.status, e.mode, e.working, e.recipe, e.level) : e.buildingType === Ou.WAREHOUSE ? new EO(this.servicesService, e.id, e.resource, e.level) : e.buildingType === Ou.MARKETPLACE ? new ob(this.servicesService, e.id, e.progress, e.level) : e.buildingType === Ou.TAVERN ? new KO(this.servicesService, e.id, e.progress, e.beer, e.wine, e.working, e.level) : e.buildingType === Ou.SHRINE ? new RO(this.servicesService, e.id, e.progress, e.level) : e.buildingType === Ou.CHURCH ? new sb(this.servicesService, e.id, e.working, e.progress, e.level) : e.buildingType === Ou.BARRACKS ? new xO(this.servicesService, e.id, e.barracksSize, e.level) : e.buildingType === Ou.TRAINING_SQUARE ? new UO(this.servicesService, e.id, e.progress, e.working, e.status, e.level) : e.buildingType === Ou.STOCKADE ? new GO(this.servicesService, e.id, e.health, e.durability, e.progress, e.working, e.level) : e.buildingType === Ou.WOODEN_TOWER ? new jO(this.servicesService, e.id, e.health, e.durability, e.progress, e.working, e.level) : e.buildingType === Ou.STONE_TOWER ? new YO(this.servicesService, e.id, e.health, e.durability, e.progress, e.working, e.level) : e.buildingType === Ou.STASH ? new vb(this.servicesService, e.id, e.level) : e.buildingType === Ou.LOGGERS_HUT ? new rO(this.servicesService, e.id, e.progress, e.localStorage, e.status, e.working, e.level) : e.buildingType === Ou.GATHERER ? new fO(this.servicesService, e.id, e.progress, e.status, e.working, e.mode, e.storage, e.level) : e.buildingType === Ou.HUNTER_LODGE ? new TO(this.servicesService, e.id, e.progress, e.status, e.mode, e.working, e.storage, e.storage2, e.animal, e.level) : e.buildingType === Ou.TANNERY ? new HO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.FORESTER ? new oO(this.servicesService, e.id, e.progress, e.localStorage, e.status, e.effectiveness, e.working, e.level) : e.buildingType === Ou.SAWMILL ? new cO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.FARM ? new IO(this.servicesService, e.id, e.workers, e.maxWorkers, e.level) : e.buildingType === Ou.WINDMILL ? new DO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.BUTCHER ? new tb(this.servicesService, e.id, e.status, e.progress, e.working, e.outputStorage, e.animals, e.level) : e.buildingType === Ou.COTTON_MILL ? new BO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.BREWERY ? new WO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.WINERY ? new zO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.FIELD ? new wO(this.servicesService, e.id, e.size, e.crop, e.status, e.progress, e.working, e.growth, e.level) : e.buildingType === Ou.ORCHARD ? new PO(this.servicesService, e.id, e.size, e.crop, e.status, e.progress, e.working, e.growth, e.level) : e.buildingType === Ou.PASTURE ? new eb(this.servicesService, e.id, e.size, e.animal, e.progress, e.produceProgress, e.working, e.animals, e.food, e.chores, e.autoButcher, e.level) : e.buildingType === Ou.QUARRY ? new vO(this.servicesService, e.id, e.progress, e.status, e.working, e.storage, e.resources, e.level) : e.buildingType === Ou.GEOLOGIST ? new qO(this.servicesService, e.id, e.progress, e.working, e.level) : e.buildingType === Ou.STONEMASON ? new QO(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.MINT ? new nb(this.servicesService, e.id, e.progress, e.status, e.inputStorage, e.outputStorage, e.working, e.workSettings, e.level) : e.buildingType === Ou.SMITHY ? new ub(this.servicesService, e.id, e.level) : e.buildingType === Ou.PIT_MINE ? new XO(this.servicesService, e.id, e.progress, e.status, e.working, e.storage, e.resources, e.ore, e.level) : e.buildingType === Ou.STONEHENGE ? new lb(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === Ou.PYRAMID ? new ab(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === Ou.HANGING_GARDEN ? new cb(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === Ou.COLOSSUS ? new pb(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === Ou.UNDERGROUND_CITY ? new db(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === Ou.GREAT_LIGHTHOUSE ? new fb(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === Ou.SACRED_GROVE ? new gb(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === Ou.ASCENSION_TEMPLE ? new hb(this.servicesService, e.id, e.progress, e.maxProgress, e.stage, e.state, e.year, e.workers) : e.buildingType === Ou.FISHERS_HUT ? new LO(this.servicesService, e.id, e.progress, e.localStorage, e.status, e.working, e.level) : e.buildingType === Ou.SCHOOL_OF_FISH ? new CO(this.servicesService, e.id, e.fish) : e.buildingType === Ou.SHARKS ? new $O(this.servicesService, e.id, e.sharks) : e.buildingType === Ou.CONSTRUCTION ? new iO(this.servicesService, e.id, e.region, e.constructing, e.buildingComplexity, e.buildingSize, e.upgradeLevel, e.progress, e.working) : e.buildingType === Ou.DECONSTRUCTION ? new pO(this.servicesService, e.id, e.region, e.deconstructing, e.buildingComplexity, e.buildingSize, e.progress, e.working) : void console.error("Couldn't load building of type [" + e.buildingType + "]")
                }, e.prototype.createBuilding = function (e, t) {
                    return void 0 === t && (t = this.idService.getNextId()), this.createBuildingShell(e, t).build()
                }, e.prototype.createBuildingShell = function (e, t) {
                    switch (void 0 === t && (t = this.idService.getNextId()), e) {
                        case Ou.HUT:
                            return new eO(this.servicesService);
                        case Ou.HOUSE:
                            return new tO(this.servicesService, t);
                        case Ou.BAKERY:
                            return new MO(this.servicesService, t);
                        case Ou.TAILOR:
                            return new VO(this.servicesService, t);
                        case Ou.WORKSHOP:
                            return new SO(this.servicesService, t);
                        case Ou.WAREHOUSE:
                            return new EO(this.servicesService, t);
                        case Ou.MARKETPLACE:
                            return new ob(this.servicesService, t);
                        case Ou.TAVERN:
                            return new KO(this.servicesService, t);
                        case Ou.SHRINE:
                            return new RO(this.servicesService, t);
                        case Ou.CHURCH:
                            return new sb(this.servicesService, t);
                        case Ou.BARRACKS:
                            return new xO(this.servicesService, t);
                        case Ou.TRAINING_SQUARE:
                            return new UO(this.servicesService, t);
                        case Ou.STOCKADE:
                            return new GO(this.servicesService, t);
                        case Ou.WOODEN_TOWER:
                            return new jO(this.servicesService, t);
                        case Ou.STONE_TOWER:
                            return new YO(this.servicesService, t);
                        case Ou.STASH:
                            return new vb(this.servicesService, t);
                        case Ou.LOGGERS_HUT:
                            return new rO(this.servicesService, t);
                        case Ou.GATHERER:
                            return new fO(this.servicesService, t);
                        case Ou.HUNTER_LODGE:
                            return new TO(this.servicesService, t);
                        case Ou.TANNERY:
                            return new HO(this.servicesService, t);
                        case Ou.FORESTER:
                            return new oO(this.servicesService, t);
                        case Ou.SAWMILL:
                            return new cO(this.servicesService, t);
                        case Ou.FARM:
                            return new IO(this.servicesService, t);
                        case Ou.WINDMILL:
                            return new DO(this.servicesService, t);
                        case Ou.BUTCHER:
                            return new tb(this.servicesService, t);
                        case Ou.COTTON_MILL:
                            return new BO(this.servicesService, t);
                        case Ou.BREWERY:
                            return new WO(this.servicesService, t);
                        case Ou.WINERY:
                            return new zO(this.servicesService, t);
                        case Ou.FIELD:
                            return new wO(this.servicesService, t);
                        case Ou.ORCHARD:
                            return new PO(this.servicesService, t);
                        case Ou.PASTURE:
                            return new eb(this.servicesService, t);
                        case Ou.QUARRY:
                            return new vO(this.servicesService, t);
                        case Ou.GEOLOGIST:
                            return new qO(this.servicesService, t);
                        case Ou.STONEMASON:
                            return new QO(this.servicesService, t);
                        case Ou.MINT:
                            return new nb(this.servicesService, t);
                        case Ou.SMITHY:
                            return new ub(this.servicesService, t);
                        case Ou.PIT_MINE:
                            return new XO(this.servicesService, t);
                        case Ou.STONEHENGE:
                            return new lb(this.servicesService, t);
                        case Ou.PYRAMID:
                            return new ab(this.servicesService, t);
                        case Ou.HANGING_GARDEN:
                            return new cb(this.servicesService, t);
                        case Ou.COLOSSUS:
                            return new pb(this.servicesService, t);
                        case Ou.UNDERGROUND_CITY:
                            return new db(this.servicesService, t);
                        case Ou.GREAT_LIGHTHOUSE:
                            return new fb(this.servicesService, t);
                        case Ou.SACRED_GROVE:
                            return new gb(this.servicesService, t);
                        case Ou.ASCENSION_TEMPLE:
                            return new hb(this.servicesService, t);
                        case Ou.FISHERS_HUT:
                            return new LO(this.servicesService, t);
                        case Ou.SCHOOL_OF_FISH:
                            return new CO(this.servicesService, t);
                        case Ou.SHARKS:
                            return new $O(this.servicesService, t);
                        case Ou.CONSTRUCTION:
                            console.error("Building factory cannot create construction sites!");
                            break;
                        case Ou.DECONSTRUCTION:
                            console.error("Building factory cannot create deconstruction sites!");
                            break;
                        default:
                            console.error("Couldn't construct building of type [" + Ou[e] + "]!")
                    }
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(mb))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Sb = function () {
                function e(e, t, n) {
                    this.servicesService = e, this.effectsService = t, this.logService = n, this.land = $u.START_LAND, this.forest = $u.START_FOREST, this.mountains = $u.START_MOUNTAINS, this.takenLand = 0, this.ores = [[vu.COAL, 0], [vu.GOLD_ORE, 0], [vu.SILVER_ORE, 0], [vu.COPPER_ORE, 0], [vu.TIN_ORE, 0], [vu.IRON_ORE, 0]], this.forestGrowTick = 0, this.forestGrowTicks = $u.FOREST_GROW_TICKS, this.forestGrowPercentage = $u.FOREST_GROW_PERCENTAGE, this.forestLandLimit = 0, this.servicesService.addService(Nu.LAND, this)
                }
                return e.prototype.load = function (e) {
                    this.land = e.land, this.forest = e.forest, this.mountains = e.mountains, this.forestGrowTick = e.forestGrowTick, this.takenLand = e.takenLand, this.forestLandLimit = e.forestLandLimit, this.ores = e.ores
                }, e.prototype.save = function () {
                    return {
                        land: this.land,
                        forest: this.forest,
                        mountains: this.mountains,
                        forestGrowTick: this.forestGrowTick,
                        takenLand: this.takenLand,
                        forestLandLimit: this.forestLandLimit,
                        ores: this.ores
                    }
                }, e.prototype.reset = function (e, t) {
                    this.land = $u.START_LAND, this.forest = $u.START_FOREST, this.mountains = $u.START_MOUNTAINS, this.takenLand = 0, this.ores = [[vu.COAL, 0], [vu.GOLD_ORE, 0], [vu.SILVER_ORE, 0], [vu.COPPER_ORE, 0], [vu.TIN_ORE, 0], [vu.IRON_ORE, 0]]
                }, e.prototype.tick = function (e) {
                    this.growForest()
                }, e.prototype.growForest = function () {
                    if (this.forestGrowTick < this.forestGrowTicks && (this.forestGrowTick += 1), this.forestGrowTick === this.forestGrowTicks) {
                        var e = Math.floor(this.forestGrowPercentage * this.forest * (1 + this.effectsService.getNatureEffectsValue() / 100));
                        e < $u.MINIMAL_FOREST_GROWTH && (e = $u.MINIMAL_FOREST_GROWTH), this.increaseForest(e), this.forestGrowTick = 0
                    }
                }, e.prototype.reduceForest = function (e) {
                    return this.forest - e >= 0 && (this.forest -= e, this.land += e, !0)
                }, e.prototype.increaseForest = function (e, t) {
                    if (void 0 === t && (t = !0), t) {
                        var n = $u.START_FOREST_LIMIT - this.takenLand;
                        this.forestLandLimit > 0 && (n = this.forestLandLimit), n < 0 && (n = 0);
                        var r = this.land - n;
                        return r < 0 && (r = 0), r - e >= 0 ? (this.forest += e, this.land -= e, 0) : (this.forest += r, this.land -= r, e - r)
                    }
                    return this.forest += e, 0
                }, e.prototype.reduceLand = function (e) {
                    var t = $u.START_FOREST_LIMIT - this.takenLand;
                    return this.forestLandLimit > 0 && (t = this.forestLandLimit), t < 0 && (t = 0), this.land - t - e >= 0 && (this.land -= e, this.checkLandTriggers(), !0)
                }, e.prototype.increaseLand = function (e, t) {
                    return void 0 === t && (t = !1), this.land += e, t || (this.takenLand -= e), !0
                }, e.prototype.increaseMountains = function (e) {
                    return this.mountains += e, !0
                }, e.prototype.getForest = function () {
                    return this.forest
                }, e.prototype.decreaseLand = function (e) {
                    if (!(this.land - e >= 0)) return e - this.land;
                    this.takenLand += e, this.land -= e
                }, e.prototype.hasLand = function (e) {
                    return this.land - e >= 0
                }, e.prototype.getLand = function () {
                    return this.land
                }, e.prototype.getMountains = function () {
                    return this.mountains
                }, e.prototype.hasMountains = function (e) {
                    return this.mountains - e >= 0
                }, e.prototype.decreaseMountains = function (e) {
                    if (!(this.mountains - e >= 0)) return e - this.mountains;
                    this.mountains -= e, this.takenLand += e
                }, e.prototype.checkLandTriggers = function () {}, e.prototype.getForestLandLimit = function () {
                    return this.forestLandLimit
                }, e.prototype.setForestLandLimit = function (e) {
                    this.forestLandLimit = e
                }, e.prototype.getOre = function (e) {
                    return this.ores.find(function (t) {
                        return t[0] === e
                    })[1]
                }, e.prototype.hasOre = function (e, t) {
                    return this.ores.find(function (t) {
                        return t[0] === e
                    })[1] >= t
                }, e.prototype.getTotalOre = function () {
                    var e = 0;
                    return this.ores.forEach(function (t) {
                        return e += t[1]
                    }), e
                }, e.prototype.increaseOre = function (e, t) {
                    this.ores.find(function (t) {
                        return t[0] === e
                    })[1] += t
                }, e.prototype.decreaseOre = function (e, t) {
                    var n = this.ores.find(function (t) {
                        return t[0] === e
                    });
                    if (n[1] >= t) return n[1] -= t, 0;
                    var r = t - n[1];
                    return n[1] = 0, r
                }, e.prototype.getTakenLand = function () {
                    return this.takenLand
                }, e.prototype.takeLand = function (e) {
                    this.land -= e, this.takenLand += e
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(pg), ze(Hg), ze(mg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            Eb = function () {
                function e(e, t, n, r, i, l) {
                    this.buildings = [], this.thisRegion = i, this.buildingFactoryService = e, this.resourcesService = t, this.servicesService = n, this.landService = r, t.addCallback(this, i), n.addService(l, this)
                }
                return e.prototype.init = function () {}, e.prototype.getBuildings = function () {
                    return this.buildings
                }, e.prototype.tick = function (e) {
                    this.buildings.forEach(function (t) {
                        return t.tick(e)
                    })
                }, e.prototype.save = function () {
                    return {
                        buildings: this.buildings
                    }
                }, e.prototype.reset = function (e, t) {
                    this.buildings = [], this.init()
                }, e.prototype.load = function (e) {
                    this.buildings = [];
                    for (var t = 0, n = e.buildings; t < n.length; t++) this.buildings.push(this.buildingFactoryService.loadBuilding(n[t]))
                }, e.prototype.getUnemployed = function () {
                    return this.resourcesService.getPeople()
                }, e.prototype.finishConstruction = function (e, t) {
                    var n = this.buildings.indexOf(e); - 1 !== n && (this.buildings[n].stopProduction(), this.buildings[n] = this.buildingFactoryService.createBuilding(t, this.buildings[n].getBuildingId()))
                }, e.prototype.createConstruction = function (e) {
                    this.buildings.push(e)
                }, e.prototype.demolish = function (e) {
                    var t = this.buildings.indexOf(e); - 1 !== t && (this.buildings[t].getBuildingType() === Ou.CONSTRUCTION ? (this.buildings[t].stopProduction(), this.buildings[t].finishDemolish(), this.landService.increaseLand(this.buildings[t].getSize()), this.buildings.splice(t, 1)) : this.buildings[t] = new pO(this.servicesService, this.buildings[t].getBuildingId(), this.thisRegion, this.buildings[t].getBuildingType(), this.buildings[t].getComplexity(), this.buildings[t].getSize()).build())
                }, e.prototype.finishDeconstruction = function (e) {
                    var t = this.buildings.indexOf(e); - 1 !== t && (this.buildings[t].stopProduction(), this.buildingFactoryService.createBuildingShell(this.buildings[t].getBuildingBeingDemolished()).finishDemolish(), this.landService.increaseLand(this.buildings[t].getSize()), this.buildings.splice(t, 1))
                }, e.prototype.finishUpgrade = function (e, t) {
                    var n = this.buildings.indexOf(e);
                    if (-1 !== n) {
                        this.buildings[n].stopProduction();
                        var r = this.buildingFactoryService.createBuildingShell(t, this.buildings[n].getBuildingId());
                        r.setBuildingLevel(this.buildings[n].getBuildingLevel()), r.build(), this.buildings[n] = r
                    }
                }, e.prototype.fireRandomWorker = function () {
                    var e = this.buildings.filter(function (e) {
                        return void 0 === e.getOccupants && e.isWorking()
                    });
                    return e.length > 0 && (e[Math.floor(Math.random() * e.length)].fireWorker(), !0)
                }, e.prototype.moveBuildingInList = function (e, t) {
                    Tv(this.buildings, e, t)
                }, e.prototype.canCombine = function (e) {
                    if (this.buildings.filter(function (e) {
                            return e.isCombinable()
                        }).length > 1) return this.toCombine ? this.toCombine !== e && this.toCombine.getBuildingType() === e.getBuildingType() : !!this.buildings.find(function (t) {
                        return t !== e && t.getBuildingType() === e.getBuildingType()
                    })
                }, e.prototype.combine = function (e) {
                    if (!this.toCombine) return this.toCombine = e, !1;
                    e.combine(this.toCombine, this)
                }, e.prototype.finaliseCombine = function (e) {
                    if (e) {
                        var t = this.buildings.indexOf(this.toCombine);
                        if (t >= 0) return this.buildings[t].prepareDemolish() ? (this.toCombine = null, this.buildings.splice(t, 1), !0) : (this.toCombine = null, !1)
                    } else this.toCombine = null
                }, e.prototype.clearCombineMode = function () {
                    this.toCombine = null
                }, e.prototype.split = function (e) {
                    e.isSplittable() && e.split(this)
                }, e.prototype.finaliseSplit = function (e) {
                    this.buildings.push(e)
                }, e.prototype.addBuilding = function (e) {
                    this.buildings.push(this.buildingFactoryService.createBuilding(e))
                }, e.prototype.upgradeBuilding = function (e) {
                    var t = this.buildings.find(function (t) {
                            return t.getBuildingId() === e
                        }),
                        n = this.servicesService.getService(Nu.MODAL);
                    if (t)
                        if (t.hasUpgrade()) {
                            if (this.resourcesService.decreaseResources(t.getUpgradeCost(), !0)) {
                                t.stopProduction();
                                var r = this.buildings.indexOf(t),
                                    i = Zu.getBuilding(t.getBuildingType());
                                this.buildings[r] = new iO(this.servicesService, t.getBuildingId(), this.thisRegion, t.getBuildingType(), i.UPGRADES[t.getBuildingLevel() - 1].COMPLEXITY, t.getSize(), t.getBuildingLevel() + 1).build()
                            }
                        } else n.info("This building cannot be upgraded");
                    else n.info("Error! Building not found")
                }, e
            }(),
            Ob = function (e) {
                function t(t, n, r, i, l) {
                    var o = e.call(this, n, t, r, l, ku.VILLAGE, Nu.VILLAGE) || this;
                    return o.idService = i, o
                }
                return i(t, e), t.prototype.init = function () {
                    var e = this;
                    this.buildings.push(new eO(this.servicesService, this.idService.getNextId(), 2).build()), this.buildings.push(new eO(this.servicesService, this.idService.getNextId(), 1).build()), this.resourcesService.createPeople(3), this.buildings.forEach(function (t) {
                        return e.landService.takeLand(t.getSize())
                    })
                }, t.prototype.getPopulation = function () {
                    return this.resourcesService.getPeople() + this.resourcesService.getWorkers()
                }, t.prototype.getPopulationCap = function () {
                    return this.resourcesService.getPopulationCap()
                }, t.prototype.moveOccupants = function (e, t) {
                    for (var n = 0; t > 0 && n < this.buildings.length;) {
                        var r = this.buildings[n];
                        if (this.buildings[n] !== e && void 0 !== r.getOccupants)
                            for (; r.getOccupants() < r.getMaxSize() && t > 0;) r.addOccupant() && (t -= 1);
                        n += 1
                    }
                    return t
                }, t.prototype.removeRecruit = function (e) {
                    var t = this.buildings.filter(function (e) {
                            return void 0 !== e.getOccupants
                        }).map(function (e) {
                            return e
                        }).sort(function (e, t) {
                            return e.getOccupants() === e.getMaxSize() && t.getOccupants() === t.getMaxSize() ? e.getMaxSize() > t.getMaxSize() ? -1 : 1 : e.getOccupants() === e.getMaxSize() && t.getOccupants() < t.getMaxSize() ? -1 : e.getOccupants() < e.getMaxSize() && t.getOccupants() === t.getMaxSize() ? 1 : void 0
                        }),
                        n = 0;
                    if (t.forEach(function (e) {
                            return n += e.getOccupants()
                        }), n >= e)
                        for (; e > 0;)
                            for (var r = 0, i = t; r < i.length; r++) {
                                if (!(e > 0)) return !0;
                                i[r].removeOccupant() && (this.resourcesService.removePeople(1), e -= 1)
                            }
                    return !1
                }, t.prototype.replaceWithHouses = function () {
                    var e = this;
                    this.buildings.push(new tO(this.servicesService, 2).build()), this.buildings.filter(function (e) {
                        return e.getBuildingType() === Ou.HUT
                    }).forEach(function (t) {
                        t.prepareDemolish(), e.demolish(t)
                    }), this.buildings.filter(function (e) {
                        return e.getBuildingType() === Ou.DECONSTRUCTION
                    }).forEach(function (t) {
                        return e.finishDeconstruction(t)
                    })
                }, t.ngInjectableDef = ve({
                    factory: function () {
                        return new t(ze(Cg), ze(yb), ze(pg), ze(mb), ze(Sb))
                    },
                    token: t,
                    providedIn: "root"
                }), t
            }(Eb),
            bb = function () {
                function e(e, t, n, r, i, l, o) {
                    var u = this;
                    this.modalService = e, this.landService = t, this.gameService = n, this.regionService = r, this.tutorialService = i, this.changeDetectorRef = l, this.thisRegion = o, this.demolishMode = !1, this.arrangeMode = !1, this.combineMode = !1, this.splitMode = !1, this.filterText = "", this.target = null, this.source = null, this.enter = function (e, t) {
                        if (t === u.placeholder) return !0;
                        var n = u.placeholder.element.nativeElement,
                            r = t.element.nativeElement,
                            i = u.__indexOf(r.parentNode.children, e.dropContainer.element.nativeElement),
                            l = u.__indexOf(r.parentNode.children, r);
                        if (!u.source) {
                            u.sourceIndex = i, u.source = e.dropContainer;
                            var o = u.source.element.nativeElement;
                            n.style.width = o.clientWidth + "px", n.style.height = o.clientHeight + "px", o.parentNode.removeChild(o)
                        }
                        return u.targetIndex = l, u.target = t, n.style.display = "", r.parentNode.insertBefore(n, i < l ? r.nextSibling : r), u.source.start(), u.placeholder.enter(e, e.element.nativeElement.offsetLeft, e.element.nativeElement.offsetTop), !1
                    }
                }
                return e.prototype.ngOnInit = function () {
                    this.tutorialService.checkRegionTutorial(this.thisRegion)
                }, e.prototype.getBuildings = function () {
                    var e = this;
                    return null !== this.filterText && this.filterText.length > 0 ? this.regionService.getBuildings().filter(function (t) {
                        return t.getName().toLowerCase().includes(e.filterText.toLowerCase())
                    }) : this.regionService.getBuildings()
                }, e.prototype.openBuildModal = function () {
                    this.demolishMode = !1, this.arrangeMode = !1, this.modalService.setRegion(this.thisRegion), this.modalService.open(mu.BUILD)
                }, e.prototype.getUnemployed = function () {
                    return this.regionService.getUnemployed()
                }, e.prototype.getFreeLand = function () {
                    return this.landService.getLand()
                }, e.prototype.toggleDemolishMode = function () {
                    this.demolishMode = !this.demolishMode, this.arrangeMode = !1, this.splitMode = !1, this.clearCombineMode()
                }, e.prototype.toggleArrangeMode = function () {
                    if (this.arrangeMode = !this.arrangeMode, this.demolishMode = !1, this.splitMode = !1, this.clearCombineMode(), this.changeDetectorRef.destroyed || this.changeDetectorRef.detectChanges(), this.placeholder) {
                        var e = this.placeholder.element.nativeElement;
                        e.style.display = "none", e.parentNode.removeChild(e)
                    }
                }, e.prototype.toggleCombineMode = function () {
                    this.combineMode = !this.combineMode, this.splitMode = !1, this.demolishMode = !1, this.arrangeMode = !1
                }, e.prototype.toggleSplitMode = function () {
                    this.splitMode = !this.splitMode, this.combineMode = !1, this.demolishMode = !1, this.arrangeMode = !1
                }, e.prototype.clearCombineMode = function () {
                    this.combineMode = !1, this.regionService.clearCombineMode()
                }, e.prototype.drop = function () {
                    if (this.target) {
                        var e = this.placeholder.element.nativeElement,
                            t = e.parentNode;
                        e.style.display = "none", t.removeChild(e), t.appendChild(e), t.insertBefore(this.source.element.nativeElement, t.children[this.sourceIndex]), this.target = null, this.source = null, this.sourceIndex !== this.targetIndex && this.regionService.moveBuildingInList(this.sourceIndex, this.targetIndex)
                    }
                }, e.prototype.__indexOf = function (e, t) {
                    return Array.prototype.indexOf.call(e, t)
                }, e.prototype.isUrbanPlanningEnabled = function () {
                    return this.gameService.isEnabled(Eu.URBAN_PLANNING)
                }, e.prototype.hasCombinableBuildings = function () {
                    return this.getBuildings().filter(function (e) {
                        return e.isCombinable()
                    }).length > 1
                }, e.prototype.hasSplittableBuildings = function () {
                    return this.getBuildings().filter(function (e) {
                        return e.isSplittable()
                    }).length >= 1
                }, e.prototype.onKeydownHandler = function (e) {
                    this.demolishMode = !1, this.arrangeMode = !1, this.clearCombineMode()
                }, e
            }(),
            Tb = function (e) {
                function t(t, n, r, i, l, o, u, s) {
                    var a = e.call(this, t, n, r, i, u, s, ku.VILLAGE) || this;
                    return a.villageService = i, a.resourcesService = l, a.managementService = o, a
                }
                return i(t, e), t.prototype.getPopulation = function () {
                    return this.villageService.getPopulation()
                }, t.prototype.getPopulationCap = function () {
                    return this.villageService.getPopulationCap()
                }, t.prototype.getFoodValue = function () {
                    return this.resourcesService.getFoodValue()
                }, t.prototype.isFoodNutritionEnabled = function () {
                    return this.managementService.getFoodNutrition()
                }, t.prototype.getTakenLand = function () {
                    return this.landService.getTakenLand()
                }, t
            }(bb),
            Rb = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:86%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function Cb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function _b(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Ib(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Ab(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function wb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Nb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Pb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Db(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Mb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(2, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(3, null, ["\xa0", " \xa0\xa0\xa0 "]))], function (e, t) {
                e(t, 2, 0, "food", "resources", "available food nutrition (excluding reserved food)")
            }, function (e, t) {
                e(t, 3, 0, t.component.getFoodValue())
            })
        }

        function kb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, DE, vE)), Ml(2, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.demolishMode, n.combineMode, n.splitMode, t.context.$implicit, n.villageService)
            }, null)
        }

        function Lb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, kb)), Ml(2, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.component.getBuildings())
            }, null)
        }

        function xb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ml(1, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), Ll(2048, null, fv, null, [Iv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, DE, vE)), Ll(6144, null, hv, null, [Ev]), Ml(7, 4341760, [[4, 4]], 3, Ev, [Nt, [3, fv], zs, Zn, Or, um, pv, mv, [2, am]], null, null), $l(603979776, 5, {
                _handles: 1
            }), $l(335544320, 6, {
                _previewTemplate: 0
            }), $l(335544320, 7, {
                _placeholderTemplate: 0
            }), Ml(11, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.enter), e(t, 11, 0, n.demolishMode, t.context.$implicit, n.villageService)
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).id, El(t, 1)._dragging), e(t, 5, 0, El(t, 7)._hasStartedDragging && El(t, 7)._isDragging())
            })
        }

        function Fb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), Ml(1, 147456, [[1, 4]], 0, Cv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, fv, null, [Iv]), Ml(4, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), (e()(), ji(16777216, null, null, 1, null, xb)), Ml(8, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, "placeholder", n.enter), e(t, 8, 0, n.getBuildings())
            }, function (e, t) {
                e(t, 2, 0, El(t, 4).id, El(t, 4)._dragging)
            })
        }

        function Ub(e) {
            return so(0, [$l(671088640, 1, {
                listGroup: 0
            }), $l(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 57, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, GE, kE)), Ml(5, 114688, null, 0, ME, [Eg], null, null), (e()(), Yi(6, 0, null, null, 53, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 27, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, Cb)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, _b)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Ib)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Ab)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, wb)), Ml(19, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Nb)), Ml(21, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Pb)), Ml(23, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Db)), Ml(25, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 8, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filters:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 30)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 30).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 30)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 30)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(30, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(32, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(34, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(35, 0, null, null, 16, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(37, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(38, null, [" ", "/", " \xa0\xa0 "])), (e()(), Yi(39, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(40, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(41, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(42, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(43, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(44, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(45, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(46, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"]
            }, null), (e()(), lo(47, null, ["\xa0", " \xa0\xa0\xa0 "])), (e()(), ji(16777216, null, null, 1, null, Mb)), Ml(49, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(50, 0, null, null, 1, "app-happiness", [], null, null, null, qE, VE)), Ml(51, 114688, null, 0, BE, [Rg], null, null), (e()(), Yi(52, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(53, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(54, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, Lb)), Ml(57, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Fb)), Ml(59, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0), e(t, 11, 0, !n.demolishMode), e(t, 13, 0, n.demolishMode), e(t, 15, 0, !n.arrangeMode && n.isUrbanPlanningEnabled() && n.getBuildings().length > 1), e(t, 17, 0, n.arrangeMode), e(t, 19, 0, !n.combineMode && n.isUrbanPlanningEnabled() && n.hasCombinableBuildings()), e(t, 21, 0, n.combineMode), e(t, 23, 0, !n.splitMode && n.isUrbanPlanningEnabled() && n.hasSplittableBuildings()), e(t, 25, 0, n.splitMode), e(t, 32, 0, n.filterText), e(t, 37, 0, "population"), e(t, 40, 0, "hammer", "Workers", "0 0 0 2px"), e(t, 43, 0, "land"), e(t, 46, 0, "village", "Village size"), e(t, 49, 0, n.isFoodNutritionEnabled()), e(t, 51, 0), e(t, 57, 0, !n.arrangeMode), e(t, 59, 0, n.arrangeMode)
            }, function (e, t) {
                var n = t.component;
                e(t, 29, 0, El(t, 34).ngClassUntouched, El(t, 34).ngClassTouched, El(t, 34).ngClassPristine, El(t, 34).ngClassDirty, El(t, 34).ngClassValid, El(t, 34).ngClassInvalid, El(t, 34).ngClassPending), e(t, 38, 0, n.getPopulation(), n.getPopulationCap()), e(t, 41, 0, n.getUnemployed()), e(t, 44, 0, n.getFreeLand()), e(t, 47, 0, n.getTakenLand())
            })
        }

        function Hb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-village", [], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, Ub, Rb)), Ml(1, 114688, null, 0, Tb, [yg, Sb, Eg, Ob, Cg, Ug, Sg, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var Gb = al("app-village", Tb, Hb, {}, {}, []),
            Bb = function (e) {
                function t(t, n, r, i) {
                    return e.call(this, n, t, r, i, ku.FORT, Nu.FORT) || this
                }
                return i(t, e), t.ngInjectableDef = ve({
                    factory: function () {
                        return new t(ze(Cg), ze(yb), ze(pg), ze(Sb))
                    },
                    token: t,
                    providedIn: "root"
                }), t
            }(Eb),
            Vb = function (e) {
                function t(t, n, r, i, l, o) {
                    var u = e.call(this, t, n, r, l, i, o, ku.FORT) || this;
                    return u.fortService = l, u
                }
                return i(t, e), t
            }(bb),
            Wb = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:86%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function jb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Yb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function zb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Kb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function qb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Qb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function $b(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Zb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function Xb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, DE, vE)), Ml(2, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.demolishMode, n.combineMode, n.splitMode, t.context.$implicit, n.fortService)
            }, null)
        }

        function Jb(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, Xb)), Ml(2, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.component.getBuildings())
            }, null)
        }

        function eT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ml(1, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), Ll(2048, null, fv, null, [Iv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, DE, vE)), Ll(6144, null, hv, null, [Ev]), Ml(7, 4341760, [[4, 4]], 3, Ev, [Nt, [3, fv], zs, Zn, Or, um, pv, mv, [2, am]], null, null), $l(603979776, 5, {
                _handles: 1
            }), $l(335544320, 6, {
                _previewTemplate: 0
            }), $l(335544320, 7, {
                _placeholderTemplate: 0
            }), Ml(11, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.enter), e(t, 11, 0, n.demolishMode, t.context.$implicit, n.fortService)
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).id, El(t, 1)._dragging), e(t, 5, 0, El(t, 7)._hasStartedDragging && El(t, 7)._isDragging())
            })
        }

        function tT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), Ml(1, 147456, [[1, 4]], 0, Cv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, fv, null, [Iv]), Ml(4, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), (e()(), ji(16777216, null, null, 1, null, eT)), Ml(8, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, "placeholder", n.enter), e(t, 8, 0, n.getBuildings())
            }, function (e, t) {
                e(t, 2, 0, El(t, 4).id, El(t, 4)._dragging)
            })
        }

        function nT(e) {
            return so(0, [$l(671088640, 1, {
                listGroup: 0
            }), $l(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 47, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, GE, kE)), Ml(5, 114688, null, 0, ME, [Eg], null, null), (e()(), Yi(6, 0, null, null, 43, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 27, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, jb)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Yb)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, zb)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Kb)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, qb)), Ml(19, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Qb)), Ml(21, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, $b)), Ml(23, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Zb)), Ml(25, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 8, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filters:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 30)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 30).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 30)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 30)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(30, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(32, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(34, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(35, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(37, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(38, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(39, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(40, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(41, null, [" ", " "])), (e()(), Yi(42, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(43, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, Jb)), Ml(47, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, tT)), Ml(49, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0), e(t, 11, 0, !n.demolishMode), e(t, 13, 0, n.demolishMode), e(t, 15, 0, !n.arrangeMode && n.isUrbanPlanningEnabled() && n.getBuildings().length > 1), e(t, 17, 0, n.arrangeMode), e(t, 19, 0, !n.combineMode && n.isUrbanPlanningEnabled() && n.hasCombinableBuildings()), e(t, 21, 0, n.combineMode), e(t, 23, 0, !n.splitMode && n.isUrbanPlanningEnabled() && n.hasSplittableBuildings()), e(t, 25, 0, n.splitMode), e(t, 32, 0, n.filterText), e(t, 37, 0, "hammer", "Workers", "0 0 0 2px"), e(t, 40, 0, "land"), e(t, 47, 0, !n.arrangeMode), e(t, 49, 0, n.arrangeMode)
            }, function (e, t) {
                var n = t.component;
                e(t, 29, 0, El(t, 34).ngClassUntouched, El(t, 34).ngClassTouched, El(t, 34).ngClassPristine, El(t, 34).ngClassDirty, El(t, 34).ngClassValid, El(t, 34).ngClassInvalid, El(t, 34).ngClassPending), e(t, 38, 0, n.getUnemployed()), e(t, 41, 0, n.getFreeLand())
            })
        }

        function rT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-fort", [], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, nT, Wb)), Ml(1, 114688, null, 0, Vb, [yg, Sb, Eg, Sg, Bb, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var iT = al("app-fort", Vb, rT, {}, {}, []),
            lT = function (e) {
                function t(t, n, r, i, l) {
                    var o = e.call(this, n, t, r, l, ku.FOREST, Nu.FOREST) || this;
                    return o.idService = i, o
                }
                return i(t, e), t.prototype.init = function () {
                    var e = this;
                    this.buildings.push(new rO(this.servicesService, this.idService.getNextId()).build()), this.buildings.push(new fO(this.servicesService, this.idService.getNextId()).build()), this.buildings.forEach(function (t) {
                        return e.landService.takeLand(t.getSize())
                    })
                }, t.ngInjectableDef = ve({
                    factory: function () {
                        return new t(ze(Cg), ze(yb), ze(pg), ze(mb), ze(Sb))
                    },
                    token: t,
                    providedIn: "root"
                }), t
            }(Eb),
            oT = function (e) {
                function t(t, n, r, i, l, o) {
                    var u = e.call(this, t, n, r, l, i, o, ku.FOREST) || this;
                    return u.forestService = l, u
                }
                return i(t, e), t.prototype.getForestSize = function () {
                    return this.landService.getForest()
                }, t
            }(bb),
            uT = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:86%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.critical[_ngcontent-%COMP%]{color:#8b0000}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function sT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function aT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function cT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function pT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function hT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function dT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function fT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function gT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function vT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.component.getForestSize())
            })
        }

        function mT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "critical"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.component.getForestSize())
            })
        }

        function yT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, DE, vE)), Ml(2, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.demolishMode, n.combineMode, n.splitMode, t.context.$implicit, n.forestService)
            }, null)
        }

        function ST(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, yT)), Ml(2, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.component.getBuildings())
            }, null)
        }

        function ET(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ml(1, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), Ll(2048, null, fv, null, [Iv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, DE, vE)), Ll(6144, null, hv, null, [Ev]), Ml(7, 4341760, [[4, 4]], 3, Ev, [Nt, [3, fv], zs, Zn, Or, um, pv, mv, [2, am]], null, null), $l(603979776, 5, {
                _handles: 1
            }), $l(335544320, 6, {
                _previewTemplate: 0
            }), $l(335544320, 7, {
                _placeholderTemplate: 0
            }), Ml(11, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.enter), e(t, 11, 0, n.demolishMode, t.context.$implicit, n.forestService)
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).id, El(t, 1)._dragging), e(t, 5, 0, El(t, 7)._hasStartedDragging && El(t, 7)._isDragging())
            })
        }

        function OT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), Ml(1, 147456, [[1, 4]], 0, Cv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, fv, null, [Iv]), Ml(4, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), (e()(), ji(16777216, null, null, 1, null, ET)), Ml(8, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, "placeholder", n.enter), e(t, 8, 0, n.getBuildings())
            }, function (e, t) {
                e(t, 2, 0, El(t, 4).id, El(t, 4)._dragging)
            })
        }

        function bT(e) {
            return so(0, [$l(671088640, 1, {
                listGroup: 0
            }), $l(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 54, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, GE, kE)), Ml(5, 114688, null, 0, ME, [Eg], null, null), (e()(), Yi(6, 0, null, null, 50, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 27, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, sT)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, aT)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, cT)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, pT)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, hT)), Ml(19, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, dT)), Ml(21, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, fT)), Ml(23, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, gT)), Ml(25, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 8, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filters:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 30)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 30).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 30)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 30)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(30, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(32, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(34, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(35, 0, null, null, 13, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(37, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), ji(16777216, null, null, 1, null, vT)), Ml(39, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, mT)), Ml(41, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(-1, null, [" \xa0\xa0 "])), (e()(), Yi(43, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(44, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(45, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(46, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(47, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(48, null, [" ", " "])), (e()(), Yi(49, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(50, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(51, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, ST)), Ml(54, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, OT)), Ml(56, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0), e(t, 11, 0, !n.demolishMode), e(t, 13, 0, n.demolishMode), e(t, 15, 0, !n.arrangeMode && n.isUrbanPlanningEnabled() && n.getBuildings().length > 1), e(t, 17, 0, n.arrangeMode), e(t, 19, 0, !n.combineMode && n.isUrbanPlanningEnabled() && n.hasCombinableBuildings()), e(t, 21, 0, n.combineMode), e(t, 23, 0, !n.splitMode && n.isUrbanPlanningEnabled() && n.hasSplittableBuildings()), e(t, 25, 0, n.splitMode), e(t, 32, 0, n.filterText), e(t, 37, 0, "forest"), e(t, 39, 0, n.getForestSize() >= 500), e(t, 41, 0, n.getForestSize() < 500), e(t, 44, 0, "hammer", "Workers", "0 0 0 2px"), e(t, 47, 0, "land"), e(t, 54, 0, !n.arrangeMode), e(t, 56, 0, n.arrangeMode)
            }, function (e, t) {
                var n = t.component;
                e(t, 29, 0, El(t, 34).ngClassUntouched, El(t, 34).ngClassTouched, El(t, 34).ngClassPristine, El(t, 34).ngClassDirty, El(t, 34).ngClassValid, El(t, 34).ngClassInvalid, El(t, 34).ngClassPending), e(t, 45, 0, n.getUnemployed()), e(t, 48, 0, n.getFreeLand())
            })
        }

        function TT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-forest", [], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, bT, uT)), Ml(1, 114688, null, 0, oT, [yg, Sb, Eg, Sg, lT, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var RT = al("app-forest", oT, TT, {}, {}, []),
            CT = function (e) {
                function t(t, n, r, i) {
                    return e.call(this, n, t, r, i, ku.FIELD, Nu.FIELD) || this
                }
                return i(t, e), t.ngInjectableDef = ve({
                    factory: function () {
                        return new t(ze(Cg), ze(yb), ze(pg), ze(Sb))
                    },
                    token: t,
                    providedIn: "root"
                }), t
            }(Eb),
            _T = function (e) {
                function t(t, n, r, i, l, o) {
                    var u = e.call(this, t, n, r, l, i, o, ku.FIELD) || this;
                    return u.fieldService = l, u
                }
                return i(t, e), t
            }(bb),
            IT = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:86%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function AT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function wT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function NT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function PT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function DT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function MT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function kT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function LT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function xT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, DE, vE)), Ml(2, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.demolishMode, n.combineMode, n.splitMode, t.context.$implicit, n.fieldService)
            }, null)
        }

        function FT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, xT)), Ml(2, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.component.getBuildings())
            }, null)
        }

        function UT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ml(1, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), Ll(2048, null, fv, null, [Iv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, DE, vE)), Ll(6144, null, hv, null, [Ev]), Ml(7, 4341760, [[4, 4]], 3, Ev, [Nt, [3, fv], zs, Zn, Or, um, pv, mv, [2, am]], null, null), $l(603979776, 5, {
                _handles: 1
            }), $l(335544320, 6, {
                _previewTemplate: 0
            }), $l(335544320, 7, {
                _placeholderTemplate: 0
            }), Ml(11, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.enter), e(t, 11, 0, n.demolishMode, t.context.$implicit, n.fieldService)
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).id, El(t, 1)._dragging), e(t, 5, 0, El(t, 7)._hasStartedDragging && El(t, 7)._isDragging())
            })
        }

        function HT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), Ml(1, 147456, [[1, 4]], 0, Cv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, fv, null, [Iv]), Ml(4, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), (e()(), ji(16777216, null, null, 1, null, UT)), Ml(8, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, "placeholder", n.enter), e(t, 8, 0, n.getBuildings())
            }, function (e, t) {
                e(t, 2, 0, El(t, 4).id, El(t, 4)._dragging)
            })
        }

        function GT(e) {
            return so(0, [$l(671088640, 1, {
                listGroup: 0
            }), $l(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 47, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, GE, kE)), Ml(5, 114688, null, 0, ME, [Eg], null, null), (e()(), Yi(6, 0, null, null, 43, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 27, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, AT)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, wT)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, NT)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, PT)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, DT)), Ml(19, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, MT)), Ml(21, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, kT)), Ml(23, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, LT)), Ml(25, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 8, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filters:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 30)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 30).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 30)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 30)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(30, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(32, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(34, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(35, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(37, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(38, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(39, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(40, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(41, null, [" ", " "])), (e()(), Yi(42, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(43, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, FT)), Ml(47, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, HT)), Ml(49, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0), e(t, 11, 0, !n.demolishMode), e(t, 13, 0, n.demolishMode), e(t, 15, 0, !n.arrangeMode && n.isUrbanPlanningEnabled() && n.getBuildings().length > 1), e(t, 17, 0, n.arrangeMode), e(t, 19, 0, !n.combineMode && n.isUrbanPlanningEnabled() && n.hasCombinableBuildings()), e(t, 21, 0, n.combineMode), e(t, 23, 0, !n.splitMode && n.isUrbanPlanningEnabled() && n.hasSplittableBuildings()), e(t, 25, 0, n.splitMode), e(t, 32, 0, n.filterText), e(t, 37, 0, "hammer", "Workers", "0 0 0 2px"), e(t, 40, 0, "land"), e(t, 47, 0, !n.arrangeMode), e(t, 49, 0, n.arrangeMode)
            }, function (e, t) {
                var n = t.component;
                e(t, 29, 0, El(t, 34).ngClassUntouched, El(t, 34).ngClassTouched, El(t, 34).ngClassPristine, El(t, 34).ngClassDirty, El(t, 34).ngClassValid, El(t, 34).ngClassInvalid, El(t, 34).ngClassPending), e(t, 38, 0, n.getUnemployed()), e(t, 41, 0, n.getFreeLand())
            })
        }

        function BT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-field", [], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, GT, IT)), Ml(1, 114688, null, 0, _T, [yg, Sb, Eg, Sg, CT, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var VT = al("app-field", _T, BT, {}, {}, []),
            WT = function (e) {
                function t(t, n, r, i) {
                    return e.call(this, n, t, r, i, ku.MOUNTAINS, Nu.MOUNTAINS) || this
                }
                return i(t, e), t.ngInjectableDef = ve({
                    factory: function () {
                        return new t(ze(Cg), ze(yb), ze(pg), ze(Sb))
                    },
                    token: t,
                    providedIn: "root"
                }), t
            }(Eb),
            jT = function (e) {
                function t(t, n, r, i, l, o) {
                    var u = e.call(this, t, n, r, l, i, o, ku.MOUNTAINS) || this;
                    return u.mountainsService = l, u
                }
                return i(t, e), t.prototype.getMountains = function () {
                    return this.landService.getMountains()
                }, t.prototype.getCoal = function () {
                    return this.landService.getOre(vu.COAL)
                }, t.prototype.getGoldOre = function () {
                    return this.landService.getOre(vu.GOLD_ORE)
                }, t.prototype.getSilverOre = function () {
                    return this.landService.getOre(vu.SILVER_ORE)
                }, t.prototype.getCopperOre = function () {
                    return this.landService.getOre(vu.COPPER_ORE)
                }, t.prototype.getTinOre = function () {
                    return this.landService.getOre(vu.TIN_ORE)
                }, t.prototype.getIronOre = function () {
                    return this.landService.getOre(vu.IRON_ORE)
                }, t
            }(bb),
            YT = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:86%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function zT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function KT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function qT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function QT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function $T(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Combine"]))], null, null)
        }

        function ZT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function XT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Split"]))], null, null)
        }

        function JT(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function eR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, t) {
                e(t, 3, 0, "coal", "resources", "coal deposit")
            }, function (e, t) {
                e(t, 4, 0, t.component.getCoal())
            })
        }

        function tR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, t) {
                e(t, 3, 0, "gold_ore", "resources", "gold deposit")
            }, function (e, t) {
                e(t, 4, 0, t.component.getGoldOre())
            })
        }

        function nR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, t) {
                e(t, 3, 0, "silver_ore", "resources", "silver deposit")
            }, function (e, t) {
                e(t, 4, 0, t.component.getSilverOre())
            })
        }

        function rR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, t) {
                e(t, 3, 0, "copper_ore", "resources", "copper deposit")
            }, function (e, t) {
                e(t, 4, 0, t.component.getCopperOre())
            })
        }

        function iR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, t) {
                e(t, 3, 0, "tin_ore", "resources", "tin deposit")
            }, function (e, t) {
                e(t, 4, 0, t.component.getTinOre())
            })
        }

        function lR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0\xa0\xa0 "])), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"],
                title: [2, "title"]
            }, null), (e()(), lo(4, null, [": ", " "]))], function (e, t) {
                e(t, 3, 0, "iron_ore", "resources", "iron deposit")
            }, function (e, t) {
                e(t, 4, 0, t.component.getIronOre())
            })
        }

        function oR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, DE, vE)), Ml(2, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.demolishMode, n.combineMode, n.splitMode, t.context.$implicit, n.mountainsService)
            }, null)
        }

        function uR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, oR)), Ml(2, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.component.getBuildings())
            }, null)
        }

        function sR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ml(1, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), Ll(2048, null, fv, null, [Iv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, DE, vE)), Ll(6144, null, hv, null, [Ev]), Ml(7, 4341760, [[4, 4]], 3, Ev, [Nt, [3, fv], zs, Zn, Or, um, pv, mv, [2, am]], null, null), $l(603979776, 5, {
                _handles: 1
            }), $l(335544320, 6, {
                _previewTemplate: 0
            }), $l(335544320, 7, {
                _placeholderTemplate: 0
            }), Ml(11, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.enter), e(t, 11, 0, n.demolishMode, t.context.$implicit, n.mountainsService)
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).id, El(t, 1)._dragging), e(t, 5, 0, El(t, 7)._hasStartedDragging && El(t, 7)._isDragging())
            })
        }

        function aR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), Ml(1, 147456, [[1, 4]], 0, Cv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, fv, null, [Iv]), Ml(4, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), (e()(), ji(16777216, null, null, 1, null, sR)), Ml(8, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, "placeholder", n.enter), e(t, 8, 0, n.getBuildings())
            }, function (e, t) {
                e(t, 2, 0, El(t, 4).id, El(t, 4)._dragging)
            })
        }

        function cR(e) {
            return so(0, [$l(671088640, 1, {
                listGroup: 0
            }), $l(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 62, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, GE, kE)), Ml(5, 114688, null, 0, ME, [Eg], null, null), (e()(), Yi(6, 0, null, null, 58, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 27, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, zT)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, KT)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, qT)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, QT)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, $T)), Ml(19, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, ZT)), Ml(21, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, XT)), Ml(23, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, JT)), Ml(25, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 8, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filters:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 30)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 30).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 30)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 30)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(30, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(32, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(34, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(35, 0, null, null, 21, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(37, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(38, null, [" ", " \xa0\xa0 "])), (e()(), Yi(39, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(40, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(41, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(42, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(43, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(44, null, [" ", " "])), (e()(), ji(16777216, null, null, 1, null, eR)), Ml(46, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, tR)), Ml(48, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, nR)), Ml(50, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, rR)), Ml(52, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, iR)), Ml(54, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, lR)), Ml(56, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(57, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(58, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(59, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, uR)), Ml(62, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, aR)), Ml(64, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0), e(t, 11, 0, !n.demolishMode), e(t, 13, 0, n.demolishMode), e(t, 15, 0, !n.arrangeMode && n.isUrbanPlanningEnabled() && n.getBuildings().length > 1), e(t, 17, 0, n.arrangeMode), e(t, 19, 0, !n.combineMode && n.isUrbanPlanningEnabled() && n.hasCombinableBuildings()), e(t, 21, 0, n.combineMode), e(t, 23, 0, !n.splitMode && n.isUrbanPlanningEnabled() && n.hasSplittableBuildings()), e(t, 25, 0, n.splitMode), e(t, 32, 0, n.filterText), e(t, 37, 0, "mountains"), e(t, 40, 0, "hammer", "Workers", "0 0 0 2px"), e(t, 43, 0, "land"), e(t, 46, 0, n.getCoal() > 0), e(t, 48, 0, n.getGoldOre() > 0), e(t, 50, 0, n.getSilverOre() > 0), e(t, 52, 0, n.getCopperOre() > 0), e(t, 54, 0, n.getTinOre() > 0), e(t, 56, 0, n.getIronOre() > 0), e(t, 62, 0, !n.arrangeMode), e(t, 64, 0, n.arrangeMode)
            }, function (e, t) {
                var n = t.component;
                e(t, 29, 0, El(t, 34).ngClassUntouched, El(t, 34).ngClassTouched, El(t, 34).ngClassPristine, El(t, 34).ngClassDirty, El(t, 34).ngClassValid, El(t, 34).ngClassInvalid, El(t, 34).ngClassPending), e(t, 38, 0, n.getMountains()), e(t, 41, 0, n.getUnemployed()), e(t, 44, 0, n.getFreeLand())
            })
        }

        function pR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-mountains", [], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, cR, YT)), Ml(1, 114688, null, 0, jT, [yg, Sb, Eg, Sg, WT, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var hR = al("app-mountains", jT, pR, {}, {}, []),
            dR = function (e) {
                function t(t, n, r, i, l) {
                    var o = e.call(this, n, t, r, i, ku.PLATEAU, Nu.PLATEAU) || this;
                    return o.gameService = l, o
                }
                return i(t, e), t.prototype.reset = function (t, n) {
                    t ? e.prototype.reset.call(this, t, n) : n ? this.buildings = [] : (this.buildings = this.buildings.filter(function (e) {
                        return e.isFinished()
                    }), this.buildings.length > 0 && this.gameService.enable(Eu.PLATEAU))
                }, t.ngInjectableDef = ve({
                    factory: function () {
                        return new t(ze(Cg), ze(yb), ze(pg), ze(Sb), ze(Eg))
                    },
                    token: t,
                    providedIn: "root"
                }), t
            }(Eb),
            fR = function (e) {
                function t(t, n, r, i, l, o) {
                    var u = e.call(this, t, n, r, l, i, o, ku.PLATEAU) || this;
                    return u.plateauService = l, u
                }
                return i(t, e), t
            }(bb),
            gR = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:86%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function vR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Arrange"]))], null, null)
        }

        function mR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function yR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, DE, vE)), Ml(2, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.demolishMode, n.combineMode, n.splitMode, t.context.$implicit, n.plateauService)
            }, null)
        }

        function SR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, yR)), Ml(2, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.component.getBuildings())
            }, null)
        }

        function ER(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ml(1, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), Ll(2048, null, fv, null, [Iv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, DE, vE)), Ll(6144, null, hv, null, [Ev]), Ml(7, 4341760, [[4, 4]], 3, Ev, [Nt, [3, fv], zs, Zn, Or, um, pv, mv, [2, am]], null, null), $l(603979776, 5, {
                _handles: 1
            }), $l(335544320, 6, {
                _previewTemplate: 0
            }), $l(335544320, 7, {
                _placeholderTemplate: 0
            }), Ml(11, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.enter), e(t, 11, 0, n.demolishMode, t.context.$implicit, n.plateauService)
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).id, El(t, 1)._dragging), e(t, 5, 0, El(t, 7)._hasStartedDragging && El(t, 7)._isDragging())
            })
        }

        function OR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), Ml(1, 147456, [[1, 4]], 0, Cv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, fv, null, [Iv]), Ml(4, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), (e()(), ji(16777216, null, null, 1, null, ER)), Ml(8, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, "placeholder", n.enter), e(t, 8, 0, n.getBuildings())
            }, function (e, t) {
                e(t, 2, 0, El(t, 4).id, El(t, 4)._dragging)
            })
        }

        function bR(e) {
            return so(0, [$l(671088640, 1, {
                listGroup: 0
            }), $l(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 35, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, GE, kE)), Ml(5, 114688, null, 0, ME, [Eg], null, null), (e()(), Yi(6, 0, null, null, 31, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 15, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, vR)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, mR)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(14, 0, null, null, 8, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filters:"])), (e()(), Yi(16, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(17, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 18)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 18).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 18)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 18)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(18, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(20, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(22, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(23, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(24, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(25, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(26, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(27, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(28, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(29, null, [" ", " "])), (e()(), Yi(30, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(31, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), Yi(32, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, SR)), Ml(35, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, OR)), Ml(37, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0), e(t, 11, 0, !n.arrangeMode && n.isUrbanPlanningEnabled() && n.getBuildings().length > 1), e(t, 13, 0, n.arrangeMode), e(t, 20, 0, n.filterText), e(t, 25, 0, "hammer", "Workers", "0 0 0 2px"), e(t, 28, 0, "land"), e(t, 35, 0, !n.arrangeMode), e(t, 37, 0, n.arrangeMode)
            }, function (e, t) {
                var n = t.component;
                e(t, 17, 0, El(t, 22).ngClassUntouched, El(t, 22).ngClassTouched, El(t, 22).ngClassPristine, El(t, 22).ngClassDirty, El(t, 22).ngClassValid, El(t, 22).ngClassInvalid, El(t, 22).ngClassPending), e(t, 26, 0, n.getUnemployed()), e(t, 29, 0, n.getFreeLand())
            })
        }

        function TR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-field", [], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, bR, gR)), Ml(1, 114688, null, 0, fR, [yg, Sb, Eg, Sg, dR, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var RR = al("app-field", fR, TR, {}, {}, []),
            CR = function (e) {
                function t(t, n, r, i, l) {
                    var o = e.call(this, n, t, r, l, ku.SEA, Nu.SEA) || this;
                    return o.idService = i, o.seaBuildings = [], o
                }
                return i(t, e), t.prototype.init = function () {
                    this.seaBuildings.push(new CO(this.servicesService, this.idService.getNextId(), 200))
                }, t.prototype.reset = function (t, n) {
                    this.seaBuildings = [], e.prototype.reset.call(this, t, n)
                }, t.prototype.tick = function (e) {
                    var t = this;
                    this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === Ou.SCHOOL_OF_FISH
                    }).map(function (e) {
                        return e
                    }).filter(function (e) {
                        return e.getFish() > Zu.SEA.SCHOOL_OF_FISH.SPLIT_THRESHOLD
                    }).forEach(function (e) {
                        if (1 === Mu.randomBetween(1, Zu.SEA.SCHOOL_OF_FISH.SPLIT_CHANCE)) {
                            var n = Math.floor(e.getFish() / 2);
                            t.seaBuildings.push(new CO(t.servicesService, n)), e.reduceFish(n)
                        }
                    }), 0 === this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === Ou.SCHOOL_OF_FISH
                    }).length && 1 === Mu.randomBetween(1, Zu.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_CHANCE) && this.seaBuildings.push(new CO(this.servicesService, Zu.SEA.SCHOOL_OF_FISH.NEW_SCHOOL_SIZE)), 0 === this.getSharksAmount() && this.getFishAmount() > Zu.SEA.SHARKS.BREED_THRESHOLD && this.seaBuildings.push(new $O(this.servicesService, 1)), this.seaBuildings = this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() !== Ou.SHARKS || 0 !== e.getSharks()
                    }), this.buildings.forEach(function (t) {
                        return t.tick(e)
                    }), this.seaBuildings.forEach(function (t) {
                        return t.tick(e)
                    })
                }, t.prototype.save = function () {
                    return {
                        buildings: this.buildings,
                        seaBuildings: this.seaBuildings
                    }
                }, t.prototype.load = function (e) {
                    this.buildings = [], this.seaBuildings = [];
                    for (var t = 0, n = e.buildings; t < n.length; t++) this.buildings.push(this.buildingFactoryService.loadBuilding(n[t]));
                    for (var r = 0, i = e.seaBuildings; r < i.length; r++) this.seaBuildings.push(this.buildingFactoryService.loadBuilding(i[r]))
                }, t.prototype.addSeaBuilding = function (e) {
                    this.seaBuildings.push(e)
                }, t.prototype.getSeaBuildings = function () {
                    return this.seaBuildings
                }, t.prototype.reduceFish = function (e) {
                    var t = this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === Ou.SCHOOL_OF_FISH
                    });
                    return t.length > 0 && !!t[0].reduceFish(e) && (0 === t[0].getFish() && this.seaBuildings.shift(), !0)
                }, t.prototype.getFishAmount = function () {
                    var e = 0;
                    return this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === Ou.SCHOOL_OF_FISH
                    }).map(function (e) {
                        return e
                    }).forEach(function (t) {
                        return e += t.getFish()
                    }), e
                }, t.prototype.getSharksAmount = function () {
                    var e = 0;
                    return this.seaBuildings.filter(function (e) {
                        return e.getBuildingType() === Ou.SHARKS
                    }).map(function (e) {
                        return e
                    }).forEach(function (t) {
                        return e += t.getSharks()
                    }), e
                }, t.ngInjectableDef = ve({
                    factory: function () {
                        return new t(ze(Cg), ze(yb), ze(pg), ze(mb), ze(Sb))
                    },
                    token: t,
                    providedIn: "root"
                }), t
            }(Eb),
            _R = function (e) {
                function t(t, n, r, i, l, o) {
                    var u = e.call(this, t, n, r, l, i, o, ku.SEA) || this;
                    return u.seaService = l, u
                }
                return i(t, e), t.prototype.getSeaBuildings = function () {
                    return this.seaService.getSeaBuildings()
                }, t
            }(bb),
            IR = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#content[_ngcontent-%COMP%]{margin:.5%;display:flex;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#buildingsWrapper[_ngcontent-%COMP%]{height:21.5%;margin-bottom:30px}#seaWrapper[_ngcontent-%COMP%]{height:58.6%}.buildings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function AR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function wR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleDemolishMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function NR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function PR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleArrangeMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function DR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function MR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleCombineMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function kR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function LR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSplitMode() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Stop"]))], null, null)
        }

        function xR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, DE, vE)), Ml(2, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                combineMode: [1, "combineMode"],
                splitMode: [2, "splitMode"],
                building: [3, "building"],
                parentRegion: [4, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.demolishMode, n.combineMode, n.splitMode, t.context.$implicit, n.seaService)
            }, null)
        }

        function FR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, xR)), Ml(2, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.component.getBuildings())
            }, null)
        }

        function UR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "div", [["cdkDropList", ""], ["class", "buildingDropWrapper cdk-drop-list"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ml(1, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                enterPredicate: [0, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 4, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), Ll(2048, null, fv, null, [Iv]), (e()(), Yi(5, 16777216, null, null, 6, "app-building", [["cdkDrag", ""], ["class", "cdk-drag"]], [[2, "cdk-drag-dragging", null]], null, null, DE, vE)), Ll(6144, null, hv, null, [Ev]), Ml(7, 4341760, [[4, 4]], 3, Ev, [Nt, [3, fv], zs, Zn, Or, um, pv, mv, [2, am]], null, null), $l(603979776, 5, {
                _handles: 1
            }), $l(335544320, 6, {
                _previewTemplate: 0
            }), $l(335544320, 7, {
                _placeholderTemplate: 0
            }), Ml(11, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                demolishMode: [0, "demolishMode"],
                building: [1, "building"],
                parentRegion: [2, "parentRegion"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.enter), e(t, 11, 0, n.demolishMode, t.context.$implicit, n.seaService)
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).id, El(t, 1)._dragging), e(t, 5, 0, El(t, 7)._hasStartedDragging && El(t, 7)._isDragging())
            })
        }

        function HR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["cdkDropListGroup", ""], ["class", "buildings"]], null, null, null, null, null)), Ml(1, 147456, [[1, 4]], 0, Cv, [], null, null), (e()(), Yi(2, 0, [["placeholder", 1]], null, 4, "div", [["cdkDropList", ""], ["class", "cdk-drop-list"], ["id", "placeholder"]], [[8, "id", 0], [2, "cdk-drop-list-dragging", null]], [[null, "cdkDropListDropped"]], function (e, t, n) {
                var r = !0;
                return "cdkDropListDropped" === t && (r = !1 !== e.component.drop() && r), r
            }, null, null)), Ll(6144, null, fv, null, [Iv]), Ml(4, 212992, [[2, 4]], 1, Iv, [Nt, pv, Tr, [2, am], [3, Cv]], {
                id: [0, "id"],
                enterPredicate: [1, "enterPredicate"]
            }, {
                dropped: "cdkDropListDropped"
            }), $l(603979776, 3, {
                _draggables: 1
            }), Ll(256, [[1, 4]], Cv, void 0, []), (e()(), ji(16777216, null, null, 1, null, UR)), Ml(8, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 4, 0, "placeholder", n.enter), e(t, 8, 0, n.getBuildings())
            }, function (e, t) {
                e(t, 2, 0, El(t, 4).id, El(t, 4)._dragging)
            })
        }

        function GR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "span", [["class", "buildingRegularWrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-building", [], null, null, null, DE, vE)), Ml(2, 114688, null, 0, gE, [yg, Cg, Ug, mg], {
                building: [0, "building"],
                parentRegion: [1, "parentRegion"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.context.$implicit, t.component.seaService)
            }, null)
        }

        function BR(e) {
            return so(0, [$l(671088640, 1, {
                listGroup: 0
            }), $l(671088640, 2, {
                placeholder: 0
            }), (e()(), Yi(2, 0, null, null, 56, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["id", "top-menu"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-top-menu", [], null, null, null, GE, kE)), Ml(5, 114688, null, 0, ME, [Eg], null, null), (e()(), Yi(6, 0, null, null, 52, "div", [["id", "content"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 27, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.openBuildModal() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"])), (e()(), ji(16777216, null, null, 1, null, AR)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, wR)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, NR)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, PR)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, DR)), Ml(19, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, MR)), Ml(21, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, kR)), Ml(23, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, LR)), Ml(25, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(26, 0, null, null, 8, "div", [["id", "side"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Filters:"])), (e()(), Yi(28, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 30)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 30).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 30)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 30)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(30, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(32, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(34, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(35, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(37, 114688, null, 0, rf, [], {
                name: [0, "name"],
                title: [1, "title"],
                margin: [2, "margin"]
            }, null), (e()(), lo(38, null, [" ", " \xa0\xa0\xa0 "])), (e()(), Yi(39, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(40, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null), (e()(), lo(41, null, [" ", " "])), (e()(), Yi(42, 0, null, null, 7, "div", [["id", "buildingsWrapper"]], null, null, null, null, null)), (e()(), Yi(43, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Buildings"])), (e()(), ji(16777216, null, null, 1, null, FR)), Ml(47, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, HR)), Ml(49, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(50, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(51, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(52, 0, null, null, 6, "div", [["id", "seaWrapper"]], null, null, null, null, null)), (e()(), Yi(53, 0, null, null, 2, "div", [["class", "title"]], null, null, null, null, null)), (e()(), Yi(54, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Sea"])), (e()(), Yi(56, 0, null, null, 2, "div", [["class", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, GR)), Ml(58, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 5, 0), e(t, 11, 0, !n.demolishMode), e(t, 13, 0, n.demolishMode), e(t, 15, 0, !n.arrangeMode && n.isUrbanPlanningEnabled() && n.getBuildings().length > 1), e(t, 17, 0, n.arrangeMode), e(t, 19, 0, !n.combineMode && n.isUrbanPlanningEnabled() && n.hasCombinableBuildings()), e(t, 21, 0, n.combineMode), e(t, 23, 0, !n.splitMode && n.isUrbanPlanningEnabled() && n.hasSplittableBuildings()), e(t, 25, 0, n.splitMode), e(t, 32, 0, n.filterText), e(t, 37, 0, "hammer", "Workers", "0 0 0 2px"), e(t, 40, 0, "land"), e(t, 47, 0, !n.arrangeMode), e(t, 49, 0, n.arrangeMode), e(t, 58, 0, n.getSeaBuildings())
            }, function (e, t) {
                var n = t.component;
                e(t, 29, 0, El(t, 34).ngClassUntouched, El(t, 34).ngClassTouched, El(t, 34).ngClassPristine, El(t, 34).ngClassDirty, El(t, 34).ngClassValid, El(t, 34).ngClassInvalid, El(t, 34).ngClassPending), e(t, 38, 0, n.getUnemployed()), e(t, 41, 0, n.getFreeLand())
            })
        }

        function VR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-sea", [], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, BR, IR)), Ml(1, 114688, null, 0, _R, [yg, Sb, Eg, Sg, CR, Tr], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }
        var WR = al("app-sea", _R, VR, {}, {}, []),
            jR = function () {
                function e(e, t, n) {
                    this.rd = e, this.el = t, this.modalService = n, this.param = "", this.element = t.nativeElement
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ngAfterViewInit = function () {
                    var e = this,
                        t = this;
                    this.id && (document.body.appendChild(this.element), this.rd.listen(this.element, "click", function (n) {
                        var r = n.target;
                        null === r.closest(".modal-body") && "BUTTON" !== r.tagName && "tutorial-modal" !== t.id && (e.modalService.sendConfirmationResult(!1), e.modalService.sendCloseSignal(), t.close())
                    }), this.modalService.add(this))
                }, e.prototype.ngOnDestroy = function () {
                    this.modalService.remove(this.id), this.element.remove()
                }, e.prototype.open = function () {
                    this.element.style.display = "block", document.body.classList.add("modal-open")
                }, e.prototype.openTutorialWindow = function (e) {
                    var t = this.element.querySelector(".modal-body");
                    t.style.position = "absolute", t.style.margin = "0", t.style.width = e.width, t.style.top = e.top, t.style.left = e.left, this.element.style.display = "block", document.body.classList.add("modal-open")
                }, e.prototype.close = function () {
                    this.element.style.display = "none", document.body.classList.remove("modal-open")
                }, e.prototype.onKeydownHandler = function (e) {
                    "tutorial-modal" !== this.id && (this.modalService.sendConfirmationResult(!1), this.modalService.sendCloseSignal(), this.close())
                }, e
            }(),
            YR = gi({
                encapsulation: 2,
                styles: [],
                data: {}
            });

        function zR(e) {
            return so(0, [$l(671088640, 1, {
                body: 1
            }), {
                nodeIndex: -1,
                parent: null,
                renderParent: null,
                bindingIndex: -1,
                outputIndex: -1,
                checkIndex: -1,
                flags: 8,
                childFlags: 0,
                directChildFlags: 0,
                childMatchedQueries: 0,
                matchedQueries: {},
                matchedQueryIds: 0,
                references: {},
                ngContentIndex: null,
                childCount: 0,
                bindings: [],
                bindingFlags: 0,
                outputs: [],
                element: null,
                provider: null,
                text: null,
                query: null,
                ngContent: {
                    index: 0
                }
            }], null, null)
        }
        var KR = function () {
                function e(e, t, n, r, i, l, o, u, s, a, c, p, h, d) {
                    this.buildingFactoryService = e, this.servicesService = t, this.modalService = n, this.logService = r, this.resourcesService = i, this.landService = l, this.villageService = o, this.fortService = u, this.fieldService = s, this.forestService = a, this.mountainsService = c, this.seaService = p, this.plateauService = h, this.gameService = d, this.filterText = "", this.buildings = new Map, this.buildings.set(ku.VILLAGE, [[new eO, [], 0], [new tO, [Eu.HOUSE], 0], [new MO, [Eu.BAKERY], 0], [new VO, [Eu.TAILOR], 0], [new SO, [], 0], [new EO, [], 0], [new ob, [Eu.MARKETPLACE], 0], [new KO, [Eu.ENTERTAINMENT], 0], [new RO, [Eu.SHRINE], 1], [new sb, [Eu.CHURCH], 1]]), this.buildings.set(ku.FOREST, [[new rO, [], 0], [new fO, [], 0], [new TO, [Eu.HUNTER], 0], [new HO, [Eu.TANNERY], 0], [new oO, [Eu.FORESTER], 0], [new cO, [Eu.SAWMILL], 0]]), this.buildings.set(ku.FORT, [[new xO, [Eu.BARRACKS], 0], [new UO, [Eu.BARRACKS], 0], [new GO, [Eu.STOCKADE], 1], [new jO, [Eu.WOODEN_TOWER], 0], [new YO, [Eu.STONE_TOWER], 0], [new vb, [Eu.STASH], 3]]), this.buildings.set(ku.FIELD, [[new IO, [Eu.FARM], 0], [new DO, [Eu.WINDMILL], 0], [new wO, [], 0], [new PO, [], 0], [new eb, [Eu.PASTURE], 0], [new tb, [Eu.BUTCHER], 0], [new BO, [Eu.COTTON_MILL], 0], [new WO, [Eu.BREWERY], 0], [new zO, [Eu.WINERY], 0]]), this.buildings.set(ku.MOUNTAINS, [[new vO, [], 0], [new qO, [Eu.GEOLOGIST], 0], [new QO, [], 0], [new XO, [Eu.PIT_MINE], 0], [new ub, [Eu.SMITHY], 1], [new nb, [Eu.MINT], 0]]), this.buildings.set(ku.PLATEAU, [[new lb, [], 1], [new ab, [], 1], [new cb, [], 1], [new pb, [], 1], [new db, [], 1], [new fb, [], 1], [new gb, [], 1], [new hb, [], 1]]), this.buildings.set(ku.SEA, [[new LO, [Eu.FISHERS_HUT], 0]])
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.clearFilterObservable.subscribe(function (t) {
                        return e.filterText = ""
                    })
                }, e.prototype.build = function (e) {
                    if (e.buildOnMountain()) {
                        if (!this.landService.hasMountains(e.getSize())) return this.modalService.info("Not enough mountains to build " + e.getName() + "!<br>" + e.getSize() + " mountains required but " + this.landService.getMountains() + " available"), void this.modalService.close(mu.BUILD)
                    } else if (!this.landService.hasLand(e.getSize())) return this.modalService.info("Not enough empty land to build " + e.getName() + "!<br>" + e.getSize() + " empty land required but " + this.landService.getLand() + " available"), void this.modalService.close(mu.BUILD);
                    if (this.resourcesService.decreaseResources(e.getCost(), !0)) {
                        switch (e.buildOnMountain() ? this.landService.decreaseMountains(e.getSize()) : this.landService.decreaseLand(e.getSize()), this.region) {
                            case ku.VILLAGE:
                                this.villageService.createConstruction(new iO(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), ku.VILLAGE, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case ku.FORT:
                                this.fortService.createConstruction(new iO(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), ku.FORT, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case ku.FOREST:
                                this.forestService.createConstruction(new iO(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), ku.FOREST, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case ku.FIELD:
                                this.fieldService.createConstruction(new iO(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), ku.FIELD, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case ku.MOUNTAINS:
                                this.mountainsService.createConstruction(new iO(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), ku.MOUNTAINS, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case ku.SEA:
                                this.seaService.createConstruction(new iO(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), ku.SEA, e.getBuildingType(), e.getComplexity(), e.getSize()).build());
                                break;
                            case ku.PLATEAU:
                                this.plateauService.createConstruction(new iO(this.servicesService, this.servicesService.getService(Nu.ID).getNextId(), ku.PLATEAU, e.getBuildingType(), e.getComplexity(), e.getSize()).build())
                        }
                        this.modalService.close(mu.BUILD)
                    } else this.modalService.close(mu.BUILD)
                }, e.prototype.ngOnChanges = function (e) {
                    this.regionString = ku[this.region]
                }, e.prototype.checkBuilding = function (e, t) {
                    var n = this,
                        r = !0;
                    return e[1].forEach(function (e) {
                        n.gameService.isEnabled(e) || (r = !1)
                    }), e[2] > 0 && e[2] <= this.servicesService.getServiceByRegion(t).getBuildings().filter(function (t) {
                        return t.getBuildingType() === e[0].getBuildingType()
                    }).length && (r = !1), r
                }, e.prototype.hasResource = function (e) {
                    return 0 === this.resourcesService.hasResource(e.key, e.value, !0)
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.getBuildingCostEntries = function (e) {
                    return e.getCost()
                }, e.prototype.getBuildingForRegion = function (e) {
                    var t = this;
                    if (this.buildings && this.buildings.get(e)) {
                        var n = this.buildings.get(e).filter(function (n) {
                            return t.checkBuilding(n, e)
                        }).map(function (e) {
                            return e[0]
                        });
                        return e === ku.PLATEAU && this.gameService.getAbdicationLevel() < this.servicesService.getServiceByRegion(e).getBuildings().length ? [] : null !== this.filterText && this.filterText.length > 0 ? n.filter(function (e) {
                            return e.getName().toLowerCase().includes(t.filterText.toLowerCase())
                        }) : n
                    }
                }, e.prototype.isCostMet = function (e) {
                    var t = this,
                        n = !0;
                    return Array.from(e.getCost().entries()).forEach(function (e) {
                        0 !== t.resourcesService.hasResource(e[0], e[1], !0) && (n = !1)
                    }), n
                }, e.prototype.hasLand = function (e) {
                    return this.landService.hasLand(e)
                }, e.prototype.hasMountains = function (e) {
                    return this.landService.getMountains() >= e
                }, e
            }(),
            qR = gi({
                encapsulation: 0,
                styles: [[".notMet[_ngcontent-%COMP%]{color:#8b0000}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:10px}#buildings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.building[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:flex;width:100%;border-right:1px solid #000;flex-direction:column}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]],
                data: {}
            });

        function QR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getSize();
                e(t, 1, 0, n)
            })
        }

        function $R(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getSize();
                e(t, 1, 0, n)
            })
        }

        function ZR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, QR)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, $R)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(7, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null)], function (e, t) {
                var n = t.component,
                    r = n.hasLand(t.parent.context.$implicit.getSize());
                e(t, 3, 0, r);
                var i = !n.hasLand(t.parent.context.$implicit.getSize());
                e(t, 5, 0, i), e(t, 7, 0, "land")
            }, null)
        }

        function XR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getSize();
                e(t, 1, 0, n)
            })
        }

        function JR(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getSize();
                e(t, 1, 0, n)
            })
        }

        function eC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, XR)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, JR)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(7, 114688, null, 0, rf, [], {
                name: [0, "name"]
            }, null)], function (e, t) {
                var n = t.component,
                    r = n.hasMountains(t.parent.context.$implicit.getSize());
                e(t, 3, 0, r);
                var i = !n.hasMountains(t.parent.context.$implicit.getSize());
                e(t, 5, 0, i), e(t, 7, 0, "mountains")
            }, null)
        }

        function tC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value)
            })
        }

        function nC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "notMet"]], null, null, null, null, null)), (e()(), lo(1, null, [" ", " "]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value)
            })
        }

        function rC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, tC)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, nC)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(7, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.hasResource(t.context.$implicit)), e(t, 5, 0, !n.hasResource(t.context.$implicit)), e(t, 7, 0, n.getResourceName(t.context.$implicit.key), "resources")
            }, null)
        }

        function iC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "buildButton"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.build(e.parent.context.$implicit) && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"]))], null, null)
        }

        function lC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [["class", "buildButtonNotAvailable"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.build(e.parent.context.$implicit) && r), r
            }, null, null)), (e()(), lo(-1, null, ["Build"]))], null, null)
        }

        function oC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 18, "div", [["class", "building"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 13, "div", [["class", "buildingSecondRow"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "span", [["class", "buildingTitle"]], null, null, null, null, null)), (e()(), lo(3, null, ["", ""])), (e()(), Yi(4, 0, null, null, 10, "div", [["class", "details"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(6, null, ["", ""])), (e()(), Yi(7, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, ZR)), Ml(9, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, eC)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 2, null, rC)), Ml(13, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr]), (e()(), ji(16777216, null, null, 1, null, iC)), Ml(16, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, lC)), Ml(18, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component,
                    r = !t.context.$implicit.buildOnMountain();
                e(t, 9, 0, r);
                var i = t.context.$implicit.buildOnMountain();
                e(t, 11, 0, i), e(t, 13, 0, hi(t, 13, 0, El(t, 14).transform(n.getBuildingCostEntries(t.context.$implicit)))), e(t, 16, 0, n.isCostMet(t.context.$implicit)), e(t, 18, 0, !n.isCostMet(t.context.$implicit))
            }, function (e, t) {
                var n = t.context.$implicit.getName();
                e(t, 3, 0, n);
                var r = t.context.$implicit.getDescription();
                e(t, 6, 0, r)
            })
        }

        function uC(e) {
            return so(0, [kl(0, Bs, []), (e()(), Yi(1, 0, null, null, 13, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 2, "div", [["id", "title"]], null, null, null, null, null)), (e()(), lo(3, null, [" ", " buildings "])), no(4, 1), (e()(), lo(-1, null, [" Search: "])), (e()(), Yi(6, 0, null, null, 5, "input", [["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 7)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 7).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 7)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 7)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.filterText = n) && r), r
            }, null, null)), Ml(7, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(9, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(11, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(12, 0, null, null, 2, "div", [["id", "buildings"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, oC)), Ml(14, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 9, 0, n.filterText), e(t, 14, 0, n.getBuildingForRegion(n.region))
            }, function (e, t) {
                var n = t.component,
                    r = hi(t, 3, 0, e(t, 4, 0, El(t, 0), n.regionString));
                e(t, 3, 0, r), e(t, 6, 0, El(t, 11).ngClassUntouched, El(t, 11).ngClassTouched, El(t, 11).ngClassPristine, El(t, 11).ngClassDirty, El(t, 11).ngClassValid, El(t, 11).ngClassInvalid, El(t, 11).ngClassPending)
            })
        }
        var sC = function () {
                function e(e) {
                    var t = this;
                    this.modalService = e, this.clearFilterSubject = new L, this.modalService.registerForRegion().subscribe(function (e) {
                        t.region = e, t.clearFilterSubject.next()
                    })
                }
                return e.prototype.ngOnInit = function () {}, e
            }(),
            aC = gi({
                encapsulation: 0,
                styles: [[""]],
                data: {}
            });

        function cC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "app-modal", [["id", "build-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 3, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "app-construction", [], null, null, null, uC, qR)), Ml(5, 638976, null, 0, KR, [yb, pg, yg, mg, Cg, Sb, Ob, Bb, CT, lT, WT, CR, dR, Eg], {
                region: [0, "region"],
                clearFilterObservable: [1, "clearFilterObservable"]
            }, null), (e()(), Yi(6, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 1, 0, "build-modal"), e(t, 5, 0, n.region, n.clearFilterSubject.asObservable())
            }, null)
        }
        var pC = function () {
                function e(e, t, n, r, i, l, o, u, s, a, c, p, h, d, f, g, v) {
                    var m = this;
                    this.logService = e, this.villageService = t, this.fortService = n, this.fieldService = r, this.mountainsService = i, this.plateauService = l, this.seaService = o, this.forestService = u, this.calendarService = s, this.landService = a, this.techService = c, this.weatherService = p, this.resourcesService = h, this.gameService = d, this.effectsService = f, this.armyService = g, this.happinessService = v, this.tickerState = 0, this.lastTick = 0, this.ticking = !1, this.resolution = Wu, this.tickSubject = new L, this.interval = setInterval(function () {
                        return m.tick()
                    }, this.resolution)
                }
                return e.prototype.tick = function () {
                    if (!this.ticking) {
                        this.ticking = !0;
                        var e = Math.floor(Date.now() / this.resolution);
                        this.tickerState >= 0 && (this.lastTick = e, this.calendarService.tick(e), this.effectsService.tick(e), this.weatherService.tick(e), this.happinessService.tick(e), this.landService.tick(e), this.resourcesService.tick(e), this.gameService.tick(e), this.villageService.tick(e), this.fortService.tick(e), this.fieldService.tick(e), this.mountainsService.tick(e), this.plateauService.tick(e), this.seaService.tick(e), this.forestService.tick(e), this.armyService.tick(e)), this.ticking = !1
                    }
                }, e.prototype.stop = function () {
                    return this.tickerState -= 1, this.lastTick
                }, e.prototype.start = function () {
                    this.tickerState += 1
                }, e.prototype.clearTicker = function () {
                    clearInterval(this.interval)
                }, e.prototype.initTicker = function () {
                    var e = this;
                    this.interval = setInterval(function () {
                        return e.tick()
                    }, this.resolution)
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(mg), ze(Ob), ze(Bb), ze(CT), ze(WT), ze(dR), ze(CR), ze(lT), ze(vg), ze(Sb), ze(Mm), ze(oS), ze(Cg), ze(Eg), ze(Hg), ze(py), ze(Rg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            hC = function () {
                function e(e, t, n, r, i, l, o, u, s, a, c, p, h, d, f, g, v, m, y, S, E, O, b, T, R, C, _, I, A, w) {
                    var N = this;
                    this.router = e, this.tickerService = t, this.gameService = n, this.modalService = r, this.optionsService = i, this.logService = l, this.villageService = o, this.forestService = u, this.resourcesService = s, this.landService = a, this.mountainsService = c, this.calendarService = p, this.royalService = h, this.techService = d, this.religionService = f, this.craftingService = g, this.recipeService = v, this.fieldService = m, this.plateauService = y, this.seaService = S, this.fortService = E, this.effectsService = O, this.armyService = b, this.happinessService = T, this.managementService = R, this.marketService = C, this.weatherService = _, this.idService = I, this.tutorialService = A, this.saveName = Hu.saveName, this.saveVersion = Hu.saveVersion, w.addService(Nu.SERIALIZER, this), this.autoSaveStatus = this.optionsService.getOption(hg.AUTO_SAVE_STATUS), this.autoSavePeriod = this.optionsService.getOption(hg.AUTO_SAVE_PERIOD), this.optionsSubscription || (this.optionsSubscription = this.optionsService.registerForOptionsChange().subscribe(function () {
                        return N.changeOptions()
                    })), this.saveInterval = setInterval(function () {
                        N.initSave(), N.logService.log("Auto saved")
                    }, this.autoSavePeriod)
                }
                return e.prototype.changeOptions = function () {
                    var e = this,
                        t = this.optionsService.getOption(hg.AUTO_SAVE_STATUS),
                        n = this.optionsService.getOption(hg.AUTO_SAVE_PERIOD);
                    this.autoSaveStatus === t && this.autoSavePeriod === n || (this.autoSaveStatus = t, this.autoSavePeriod = n, clearInterval(this.saveInterval), this.autoSaveStatus && (this.saveInterval = setInterval(function () {
                        e.initSave(), e.logService.log("Auto saved")
                    }, 1e3 * this.autoSavePeriod * 60)))
                }, e.prototype.initSave = function () {
                    this.tickerService.stop(), localStorage.setItem(this.saveName, this.prepareBase64()), this.tickerService.start()
                }, e.prototype.prepareBase64 = function () {
                    this.tickerService.stop();
                    var e = btoa(JSON.stringify({
                        saveVersion: this.saveVersion,
                        id: this.idService,
                        tutorial: this.tutorialService.save(),
                        resources: this.resourcesService.save(),
                        village: this.villageService.save(),
                        fort: this.fortService.save(),
                        forest: this.forestService.save(),
                        field: this.fieldService.save(),
                        mountains: this.mountainsService.save(),
                        plateau: this.plateauService.save(),
                        sea: this.seaService.save(),
                        land: this.landService.save(),
                        calendar: this.calendarService.save(),
                        game: this.gameService.save(),
                        options: this.optionsService.save(),
                        royal: this.royalService.save(),
                        tech: this.techService.save(),
                        religion: this.religionService.save(),
                        crafting: this.craftingService.save(),
                        recipe: this.recipeService.save(),
                        effects: this.effectsService.save(),
                        army: this.armyService.save(),
                        happiness: this.happinessService.save(),
                        management: this.managementService.save(),
                        market: this.marketService.save(),
                        weather: this.weatherService.save(),
                        logs: this.logService.save()
                    }));
                    return this.tickerService.start(), e
                }, e.prototype.initLoad = function () {
                    if (this.tickerService.stop(), null === localStorage.getItem(this.saveName)) return this.modalService.info("There is no any save file to load."), void this.tickerService.start();
                    var e;
                    try {
                        e = JSON.parse(atob(localStorage.getItem(this.saveName)))
                    } catch (t) {
                        return this.modalService.info("Save data is corrupted! Loading failed."), void this.tickerService.start()
                    }
                    this.loadSave(e), this.tickerService.start(), this.logService.log("loaded")
                }, e.prototype.hasSave = function () {
                    return null != localStorage.getItem(this.saveName)
                }, e.prototype.import = function (e) {
                    var t;
                    this.tickerService.stop();
                    try {
                        t = JSON.parse(atob(e))
                    } catch (n) {
                        return this.modalService.info("Import file is not valid or corrupted! Import failed."), void this.tickerService.start()
                    }
                    this.loadSave(t), localStorage.setItem(this.saveName, e), this.tickerService.start(), this.logService.log("save imported")
                }, e.prototype.hardReset = function () {
                    this.reset(!0), localStorage.removeItem(this.saveName)
                }, e.prototype.softReset = function () {
                    this.reset(!1)
                }, e.prototype.ascensionReset = function () {
                    this.reset(!1, !0)
                }, e.prototype.reset = function (e, t) {
                    void 0 === t && (t = !1), this.tickerService.stop(), this.tickerService.clearTicker(), localStorage.removeItem(this.saveName), this.tutorialService.reset(e, t), this.gameService.reset(e, t), this.idService.reset(e, t), this.calendarService.reset(e, t), this.weatherService.reset(e, t), this.effectsService.reset(e, t), this.resourcesService.reset(e, t), this.landService.reset(e, t), this.villageService.reset(e, t), this.fortService.reset(e, t), this.forestService.reset(e, t), this.fieldService.reset(e, t), this.mountainsService.reset(e, t), this.plateauService.reset(e, t), this.seaService.reset(e, t), this.optionsService.reset(e, t), this.techService.reset(e, t), this.religionService.reset(e, t), this.craftingService.reset(e, t), this.recipeService.reset(e, t), this.armyService.reset(e, t), this.happinessService.reset(e, t), this.managementService.reset(e, t), this.marketService.reset(e, t), this.logService.reset(e, t), this.royalService.reset(e, t), this.initSave(), this.tickerService.initTicker(), this.tickerService.start(), this.router.navigate(["/village"])
                }, e.prototype.loadSave = function (e) {
                    switch (e.saveVersion) {
                        case Fu.DEV:
                        case Fu.V1_0_0:
                            this.loadDevVersion(e);
                            break;
                        default:
                            var t = "Corrupted save file (unknown save version). Loading is not possible";
                            return this.logService.log(t), void console.error(t)
                    }
                }, e.prototype.loadDevVersion = function (e) {
                    this.saveVersion = e.saveVersion, this.idService.load(e.id), this.effectsService.load(e.effects), this.resourcesService.load(e.resources), this.villageService.load(e.village), this.fortService.load(e.fort), this.forestService.load(e.forest), this.fieldService.load(e.field), this.mountainsService.load(e.mountains), this.plateauService.load(e.plateau), this.seaService.load(e.sea), this.landService.load(e.land), this.calendarService.load(e.calendar), this.optionsService.load(e.options), this.gameService.load(e.game), this.royalService.load(e.royal), this.techService.load(e.tech), this.religionService.load(e.religion), this.craftingService.load(e.crafting), this.recipeService.load(e.recipe), this.armyService.load(e.army), this.happinessService.load(e.happiness), this.managementService.load(e.management), this.marketService.load(e.market), this.weatherService.load(e.weather), this.logService.load(e.logs), this.tutorialService.load(void 0 !== e.tutorial ? e.tutorial : {})
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Ed), ze(pC), ze(Eg), ze(yg), ze(dg), ze(mg), ze(Ob), ze(lT), ze(Cg), ze(Sb), ze(WT), ze(vg), ze(bg), ze(Mm), ze(Uy), ze(Dv), ze(lv), ze(CT), ze(dR), ze(CR), ze(Bb), ze(Hg), ze(py), ze(Rg), ze(Ug), ze(bm), ze(oS), ze(mb), ze(Sg), ze(pg))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            dC = function () {
                function e(e, t) {
                    var n = this;
                    this.serializerService = e, this.modalService = t, this.exportTextArea = null, this.showMessage = !1, this.modalService.registerForOnOpen().subscribe(function () {
                        return n.export()
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.export = function () {
                    this.exportTextArea = this.serializerService.prepareBase64()
                }, e.prototype.copy = function () {
                    var e = this,
                        t = this.exportTextArea,
                        n = document.createElement("textarea");
                    n.id = "txt", n.style.position = "fixed", n.style.top = "0", n.style.left = "0", n.style.opacity = "0", n.value = t, document.body.appendChild(n), n.select();
                    try {
                        if (document.execCommand("copy")) return this.showMessage = !0, setTimeout(function () {
                            return e.showMessage = !1
                        }, 1500), !0
                    } catch (r) {
                        console.error(qf.ERROR_1)
                    } finally {
                        document.body.removeChild(n)
                    }
                    return !1
                }, e
            }(),
            fC = gi({
                encapsulation: 0,
                styles: [["#export-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],
                data: {}
            });

        function gC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, ["copied..."]))], null, null)
        }

        function vC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "br", [], null, null, null, null, null))], null, null)
        }

        function mC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 17, "app-modal", [["id", "export-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 14, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 13, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Export save"])), (e()(), Yi(6, 0, null, null, 1, "textarea", [["id", "export-area"], ["placeholder", "Your save will be generated here..."], ["readonly", ""], ["rows", "20"]], null, null, null, null, null)), (e()(), lo(7, null, ["", ""])), (e()(), Yi(8, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "button", [["id", "import-button"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.export() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Update"])), (e()(), Yi(11, 0, null, null, 1, "button", [["id", "copy-button"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.copy() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Copy to clipboard"])), (e()(), ji(16777216, null, null, 1, null, gC)), Ml(14, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, vC)), Ml(16, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(17, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 1, 0, "export-modal"), e(t, 14, 0, n.showMessage), e(t, 16, 0, !n.showMessage)
            }, function (e, t) {
                e(t, 7, 0, t.component.exportTextArea)
            })
        }
        var yC = function () {
                function e(e, t) {
                    this.serializerService = e, this.modalService = t
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.import = function () {
                    this.serializerService.import(this.importTextArea), this.importTextArea = "", this.modalService.close(mu.IMPORT)
                }, e
            }(),
            SC = gi({
                encapsulation: 0,
                styles: [["#import-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],
                data: {}
            });

        function EC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "app-modal", [["id", "import-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 11, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 10, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Import save"])), (e()(), Yi(6, 0, null, null, 5, "textarea", [["id", "import-area"], ["placeholder", "Paste your save here..."], ["rows", "20"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 7)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 7).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 7)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 7)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.importTextArea = n) && r), r
            }, null, null)), Ml(7, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(9, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(11, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(12, 0, null, null, 1, "button", [["id", "import-button"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.import() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Import"])), (e()(), Yi(14, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 1, 0, "import-modal"), e(t, 9, 0, n.importTextArea)
            }, function (e, t) {
                e(t, 6, 0, El(t, 11).ngClassUntouched, El(t, 11).ngClassTouched, El(t, 11).ngClassPristine, El(t, 11).ngClassDirty, El(t, 11).ngClassValid, El(t, 11).ngClassInvalid, El(t, 11).ngClassPending)
            })
        }
        var OC = function () {
                function e(e, t) {
                    this.modalService = e, this.serializerService = t
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.hardReset = function () {
                    this.serializerService.hardReset(), this.modalService.close(mu.HARD_RESET)
                }, e.prototype.cancel = function () {
                    this.modalService.close(mu.HARD_RESET)
                }, e
            }(),
            bC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1em}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:2px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}#hardReset[_ngcontent-%COMP%]{background-color:#5f0000}"]],
                data: {}
            });

        function TC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 19, "app-modal", [["id", "hard-reset-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 16, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 15, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "h2", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Hard Reset"])), (e()(), Yi(6, 0, null, null, 7, "div", [], null, null, null, null, null)), (e()(), lo(-1, null, [" Are you sure you want to hard reset your progress? "])), (e()(), Yi(8, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" This will remove ALL progress and saved game (except settings and tutorial state). "])), (e()(), Yi(10, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" You will still be able to load game from exported save. "])), (e()(), Yi(12, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" This should only be done if you have backup save or want to start from the beginning. "])), (e()(), Yi(14, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(15, 0, null, null, 1, "button", [["id", "hardReset"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.hardReset() && r), r
            }, null, null)), (e()(), lo(-1, null, ["HARD RESET"])), (e()(), Yi(17, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CANCEL"])), (e()(), Yi(19, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                e(t, 1, 0, "hard-reset-modal")
            }, null)
        }
        var RC = function () {
                function e(e, t) {
                    this.optionsService = e, this.modalService = t
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.optionsSubscription || (this.optionsSubscription = this.optionsService.registerForOptionsChange().subscribe(function () {
                        return e.initOptions()
                    })), this.initOptions()
                }, e.prototype.initOptions = function () {
                    this.autoSaveStatus = this.optionsService.getOption(hg.AUTO_SAVE_STATUS), this.autoSavePeriod = this.optionsService.getOption(hg.AUTO_SAVE_PERIOD), this.metricStatus = this.optionsService.getOption(hg.METRIC), this.saveLogs = this.optionsService.getOption(hg.SAVE_LOGS), this.sound = this.optionsService.getOption(hg.SOUND), this.soundVolume = this.optionsService.getOption(hg.SOUND_VOLUME)
                }, e.prototype.close = function () {
                    this.modalService.close(mu.OPTIONS)
                }, e.prototype.updateOptions = function () {
                    this.optionsService.setOptions([{
                        option: hg.AUTO_SAVE_STATUS,
                        value: this.autoSaveStatus
                    }, {
                        option: hg.AUTO_SAVE_PERIOD,
                        value: this.autoSavePeriod
                    }, {
                        option: hg.METRIC,
                        value: this.metricStatus
                    }, {
                        option: hg.SAVE_LOGS,
                        value: this.saveLogs
                    }, {
                        option: hg.SOUND,
                        value: this.sound
                    }, {
                        option: hg.SOUND_VOLUME,
                        value: this.soundVolume
                    }])
                }, e.prototype.updateSaveOption = function () {
                    this.autoSavePeriod = Number(this.autoSavePeriod), this.autoSavePeriod % 1 != 0 && (this.autoSavePeriod = Math.floor(this.autoSavePeriod)), this.autoSavePeriod <= 0 && (this.autoSaveStatus = !1, this.autoSavePeriod = 1), this.updateOptions()
                }, e.prototype.getSoundVolume = function () {
                    return this.optionsService.getOption(hg.SOUND_VOLUME)
                }, e.prototype.changeSoundVolume = function (e) {
                    this.soundVolume = e.target.value, this.updateOptions()
                }, e
            }(),
            CC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1em}#title[_ngcontent-%COMP%]{text-align:center;font-weight:800;display:inline-block}.options[_ngcontent-%COMP%]{text-align:left}#autoSavePeriod[_ngcontent-%COMP%]{width:4ch;text-align:right}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}#soundVolumeLabel[_ngcontent-%COMP%]{display:inline-block;width:135px}"]],
                data: {}
            });

        function _C(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 63, "app-modal", [["id", "options-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 60, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 59, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Options"])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 50, "div", [["class", "options"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 1, "label", [["for", "autoSaveStatus"]], null, null, null, null, null)), (e()(), lo(-1, null, ["auto save on/off "])), (e()(), Yi(11, 0, null, null, 5, "input", [["id", "autoSaveStatus"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "change" === t && (r = !1 !== El(e, 12).onChange(n.target.checked) && r), "blur" === t && (r = !1 !== El(e, 12).onTouched() && r), "change" === t && (r = !1 !== i.updateOptions() && r), "ngModelChange" === t && (r = !1 !== (i.autoSaveStatus = n) && r), r
            }, null, null)), Ml(12, 16384, null, 0, mf, [Lt, Nt], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [mf]), Ml(14, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(16, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(17, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(18, 0, null, null, 1, "label", [["for", "autoSavePeriod"]], null, null, null, null, null)), (e()(), lo(-1, null, ["auto save period "])), (e()(), Yi(20, 0, null, null, 5, "input", [["id", "autoSavePeriod"], ["type", "text"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 21)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 21).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 21)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 21)._compositionEnd(n.target.value) && r), "change" === t && (r = !1 !== i.updateSaveOption() && r), "ngModelChange" === t && (r = !1 !== (i.autoSavePeriod = n) && r), r
            }, null, null)), Ml(21, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(23, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(25, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(-1, null, [" minutes "])), (e()(), Yi(27, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(28, 0, null, null, 1, "label", [["for", "metricStatus"]], null, null, null, null, null)), (e()(), lo(-1, null, ["use metric units"])), (e()(), Yi(30, 0, null, null, 5, "input", [["id", "metricStatus"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "change" === t && (r = !1 !== El(e, 31).onChange(n.target.checked) && r), "blur" === t && (r = !1 !== El(e, 31).onTouched() && r), "change" === t && (r = !1 !== i.updateOptions() && r), "ngModelChange" === t && (r = !1 !== (i.metricStatus = n) && r), r
            }, null, null)), Ml(31, 16384, null, 0, mf, [Lt, Nt], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [mf]), Ml(33, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(35, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(36, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(37, 0, null, null, 1, "label", [["for", "saveLogsStatus"]], null, null, null, null, null)), (e()(), lo(-1, null, ["save logs"])), (e()(), Yi(39, 0, null, null, 5, "input", [["id", "saveLogsStatus"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "change" === t && (r = !1 !== El(e, 40).onChange(n.target.checked) && r), "blur" === t && (r = !1 !== El(e, 40).onTouched() && r), "change" === t && (r = !1 !== i.updateOptions() && r), "ngModelChange" === t && (r = !1 !== (i.saveLogs = n) && r), r
            }, null, null)), Ml(40, 16384, null, 0, mf, [Lt, Nt], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [mf]), Ml(42, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(44, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(45, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(46, 0, null, null, 1, "label", [["for", "sound"]], null, null, null, null, null)), (e()(), lo(-1, null, ["sound on/off"])), (e()(), Yi(48, 0, null, null, 5, "input", [["id", "sound"], ["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "change"], [null, "ngModelChange"], [null, "blur"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "change" === t && (r = !1 !== El(e, 49).onChange(n.target.checked) && r), "blur" === t && (r = !1 !== El(e, 49).onTouched() && r), "change" === t && (r = !1 !== i.updateOptions() && r), "ngModelChange" === t && (r = !1 !== (i.sound = n) && r), r
            }, null, null)), Ml(49, 16384, null, 0, mf, [Lt, Nt], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [mf]), Ml(51, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(53, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(54, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(55, 0, null, null, 1, "label", [["for", "soundVolume"], ["id", "soundVolumeLabel"]], null, null, null, null, null)), (e()(), lo(56, null, ["sound volume ", "% "])), (e()(), Yi(57, 0, null, null, 1, "div", [["class", "slidecontainer"]], null, null, null, null, null)), (e()(), Yi(58, 0, null, null, 0, "input", [["class", "slider"], ["id", "soundVolume"], ["max", "100"], ["min", "0"], ["type", "range"], ["value", "100"]], [[8, "value", 0]], [[null, "change"]], function (e, t, n) {
                var r = !0;
                return "change" === t && (r = !1 !== e.component.changeSoundVolume(n) && r), r
            }, null, null)), (e()(), Yi(59, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(60, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(61, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.close() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Close"])), (e()(), Yi(63, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 1, 0, "options-modal"), e(t, 14, 0, n.autoSaveStatus), e(t, 23, 0, n.autoSavePeriod), e(t, 33, 0, n.metricStatus), e(t, 42, 0, n.saveLogs), e(t, 51, 0, n.sound)
            }, function (e, t) {
                var n = t.component;
                e(t, 11, 0, El(t, 16).ngClassUntouched, El(t, 16).ngClassTouched, El(t, 16).ngClassPristine, El(t, 16).ngClassDirty, El(t, 16).ngClassValid, El(t, 16).ngClassInvalid, El(t, 16).ngClassPending), e(t, 20, 0, El(t, 25).ngClassUntouched, El(t, 25).ngClassTouched, El(t, 25).ngClassPristine, El(t, 25).ngClassDirty, El(t, 25).ngClassValid, El(t, 25).ngClassInvalid, El(t, 25).ngClassPending), e(t, 30, 0, El(t, 35).ngClassUntouched, El(t, 35).ngClassTouched, El(t, 35).ngClassPristine, El(t, 35).ngClassDirty, El(t, 35).ngClassValid, El(t, 35).ngClassInvalid, El(t, 35).ngClassPending), e(t, 39, 0, El(t, 44).ngClassUntouched, El(t, 44).ngClassTouched, El(t, 44).ngClassPristine, El(t, 44).ngClassDirty, El(t, 44).ngClassValid, El(t, 44).ngClassInvalid, El(t, 44).ngClassPending), e(t, 48, 0, El(t, 53).ngClassUntouched, El(t, 53).ngClassTouched, El(t, 53).ngClassPristine, El(t, 53).ngClassDirty, El(t, 53).ngClassValid, El(t, 53).ngClassInvalid, El(t, 53).ngClassPending), e(t, 56, 0, n.getSoundVolume()), e(t, 58, 0, n.getSoundVolume())
            })
        }
        var IC = function () {
                function e(e) {
                    this.modalService = e, this.text = "", this.value = ""
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.modalService.registerForText().subscribe(function (t) {
                        return e.text = t
                    }), this.modalService.registerForValue().subscribe(function (t) {
                        return e.value = t
                    })
                }, e.prototype.ok = function () {
                    this.modalService.sendValueInput(this.value), this.modalService.close(mu.INPUT)
                }, e.prototype.cancel = function () {
                    this.modalService.sendValueInput(null), this.modalService.close(mu.INPUT)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e
            }(),
            AC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],
                data: {}
            });

        function wC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 18, "app-modal", [["id", "input-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 15, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 14, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 5, "input", [["id", "input"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 7)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 7).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 7)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 7)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (i.value = n) && r), r
            }, null, null)), Ml(7, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(9, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(11, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(12, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(13, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CONFIRM"])), (e()(), Yi(16, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CANCEL"])), (e()(), Yi(18, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 1, 0, "input-modal"), e(t, 9, 0, n.value)
            }, function (e, t) {
                e(t, 4, 0, t.component.text), e(t, 6, 0, El(t, 11).ngClassUntouched, El(t, 11).ngClassTouched, El(t, 11).ngClassPristine, El(t, 11).ngClassDirty, El(t, 11).ngClassValid, El(t, 11).ngClassInvalid, El(t, 11).ngClassPending)
            })
        }
        var NC = function () {
                function e(e, t, n) {
                    this.kongregateService = e, this.royalService = t, this.modalService = n
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.buy = function (e) {
                    Hu.production ? this.kongregateService.buyItem(e) : (this.royalService.increaseRoyalPoints(Number(e.replace("rp_pack", ""))), this.modalService.close(mu.ROYAL))
                }, e
            }(),
            PC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.kred[_ngcontent-%COMP%]{width:30px;height:30px;vertical-align:middle}.value[_ngcontent-%COMP%]{margin-top:5px}.entry[_ngcontent-%COMP%]{width:50%;text-align:center}"]],
                data: {}
            });

        function DC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 31, "app-modal", [["id", "royal-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 28, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 27, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Choose how many Royal Points you would like to buy:"])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 5, "div", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 2, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.buy("rp_pack10") && r), r
            }, null, null)), (e()(), lo(-1, null, ["10 "])), (e()(), Yi(10, 0, null, null, 0, "img", [["alt", "Kreds"], ["class", "kred"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" 10 Royal points"])), (e()(), Yi(13, 0, null, null, 5, "div", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 2, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.buy("rp_pack20") && r), r
            }, null, null)), (e()(), lo(-1, null, ["20 "])), (e()(), Yi(16, 0, null, null, 0, "img", [["alt", "Kreds"], ["class", "kred"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(17, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" 20 Royal points"])), (e()(), Yi(19, 0, null, null, 5, "div", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 2, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.buy("rp_pack55") && r), r
            }, null, null)), (e()(), lo(-1, null, ["50 "])), (e()(), Yi(22, 0, null, null, 0, "img", [["alt", "Kreds"], ["class", "kred"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(23, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" 55 Royal points"])), (e()(), Yi(25, 0, null, null, 5, "div", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 2, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.buy("rp_pack125") && r), r
            }, null, null)), (e()(), lo(-1, null, ["100 "])), (e()(), Yi(28, 0, null, null, 0, "img", [["alt", "Kreds"], ["class", "kred"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, [" 125 Royal points"])), (e()(), Yi(31, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                e(t, 1, 0, "royal-modal")
            }, null)
        }
        var MC = function () {
                function e(e, t, n) {
                    var r = this;
                    this.modalService = e, this.resourcesService = t, this.armyService = n, this.troops = [], this.modalService.registerForMission().subscribe(function (e) {
                        r.mission = e, r.troops = r.getTroops()
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.MISSION), this.modalService.sendMissionResponse(this.mission), this.mission = new cy(this.mission.mission, this.mission.time, this.mission.description, this.mission.requiredStrength, this.mission.requiredStrength, this.mission.cost, this.mission.finish, []), this.mission = null, this.troops = []
                }, e.prototype.cancel = function () {
                    this.modalService.sendValueInput(null), this.mission = null, this.troops = [], this.modalService.close(mu.MISSION)
                }, e.prototype.getMissionName = function () {
                    return Au.prepareMissionName(this.mission.mission)
                }, e.prototype.getCost = function () {
                    return this.mission.cost
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.hasResource = function (e, t) {
                    return void 0 === t && (t = 1), 0 === this.resourcesService.hasResource(e.key, e.value * t, !0)
                }, e.prototype.getTroops = function () {
                    return this.armyService.getTroops().filter(function (e) {
                        return e[1] > 0
                    }).map(function (e) {
                        return [e[0], e[1]]
                    })
                }, e.prototype.getTroopName = function (e) {
                    return Au.prepareTroopName(e)
                }, e.prototype.evaluateValue = function (e, t) {
                    e.target.style.width = e.target.value.toString().length + 1 + "ch";
                    var n = this.mission.troops.find(function (e) {
                        return e[0].troop === t[0].troop
                    });
                    n && !isNaN(e.target.value) ? n[1] = Number(e.target.value) : this.mission.troops.push([t[0], Number(e.target.value)]), this.calculateMission()
                }, e.prototype.getTotalTroops = function () {
                    var e = 0;
                    return this.mission.troops.forEach(function (t) {
                        return e += t[1]
                    }), e
                }, e.prototype.calculateMission = function () {
                    var e = this;
                    this.mission.squadStrength = 0, this.mission.squadDefense = 0, this.mission.troops.forEach(function (t) {
                        e.mission.squadStrength += t[0].strength * t[1], e.mission.squadDefense += t[0].defense * t[1]
                    })
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e
            }(),
            kC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}hr[_ngcontent-%COMP%]{border-color:#000;width:90%}.modal[_ngcontent-%COMP%]{width:400px}.missing[_ngcontent-%COMP%]{color:#8b0000}#troops[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:center}.troop[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:4px}.troop[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:2ch}.icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function LC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 3, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(4, null, [": ", " / soldier "]))], function (e, t) {
                e(t, 3, 0, t.component.getResourceName(t.context.$implicit.key), "resources")
            }, function (e, t) {
                e(t, 4, 0, t.context.$implicit.value)
            })
        }

        function xC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "div", [["class", "troop"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), Yi(3, 0, null, null, 2, "span", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "input", [["type", "text"], ["value", "0"]], null, [[null, "keyup"]], function (e, t, n) {
                var r = !0;
                return "keyup" === t && (r = !1 !== e.component.evaluateValue(n, e.context.$implicit) && r), r
            }, null, null)), (e()(), lo(5, null, ["/", ""]))], null, function (e, t) {
                e(t, 2, 0, t.component.getTroopName(t.context.$implicit[0].troop)), e(t, 5, 0, t.context.$implicit[1])
            })
        }

        function FC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value * t.component.getTotalTroops())
            })
        }

        function UC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [["class", "missing"]], null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                e(t, 1, 0, t.parent.context.$implicit.value * t.component.getTotalTroops())
            })
        }

        function HC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 7, "div", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(3, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(-1, null, [": "])), (e()(), ji(16777216, null, null, 1, null, FC)), Ml(6, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, UC)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.getResourceName(t.context.$implicit.key), "resources"), e(t, 6, 0, n.hasResource(t.context.$implicit, n.getTotalTroops())), e(t, 8, 0, !n.hasResource(t.context.$implicit, n.getTotalTroops()))
            }, null)
        }

        function GC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 29, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["", ""])), (e()(), Yi(3, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 1, "span", [["id", "description"]], null, null, null, null, null)), (e()(), lo(5, null, ["", ""])), (e()(), Yi(6, 0, null, null, 0, "hr", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 1, "span", [["id", "time"]], null, null, null, null, null)), (e()(), lo(8, null, ["duration: ", " days"])), (e()(), Yi(9, 0, null, null, 3, "div", [["id", "cost"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 2, null, LC)), Ml(11, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr]), (e()(), Yi(13, 0, null, null, 1, "span", [["id", "requiredStrength"]], null, null, null, null, null)), (e()(), lo(14, null, ["squad strength: ", ""])), (e()(), Yi(15, 0, null, null, 1, "span", [["id", "requiredDefense"]], null, null, null, null, null)), (e()(), lo(16, null, ["squad defense: ", ""])), (e()(), Yi(17, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(18, 0, null, null, 2, "div", [["id", "troops"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, xC)), Ml(20, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(21, 0, null, null, 3, "div", [["id", "totalCost"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 2, null, HC)), Ml(23, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), kl(0, Vs, [Vr]), (e()(), Yi(25, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["START"])), (e()(), Yi(28, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CANCEL"]))], function (e, t) {
                var n = t.component;
                e(t, 11, 0, hi(t, 11, 0, El(t, 12).transform(n.getCost()))), e(t, 20, 0, n.troops), e(t, 23, 0, hi(t, 23, 0, El(t, 24).transform(n.getCost())))
            }, function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.getMissionName()), e(t, 5, 0, n.mission.description), e(t, 8, 0, n.mission.time), e(t, 14, 0, n.mission.squadStrength + " / " + n.mission.requiredStrength), e(t, 16, 0, n.mission.squadDefense + " / " + n.mission.requiredDefense)
            })
        }

        function BC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "app-modal", [["id", "mission-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 2, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, GC)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 1, 0, "mission-modal"), e(t, 4, 0, n.mission)
            }, null)
        }
        var VC = function () {
                function e(e, t) {
                    this.modalService = e, this.resourcesService = t
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.modalService.registerForValue().subscribe(function (t) {
                        t && void 0 !== t.id && (e.offer = t, e.value = e.offer.amount, e.inputRef && (e.inputRef.nativeElement.style.width = e.value.toString().length + 1 + "ch"))
                    })
                }, e.prototype.ok = function () {
                    this.checkValue(this.value), this.modalService.sendValueInput(Number(this.value)), this.modalService.close(mu.MARKET), this.offer = null
                }, e.prototype.cancel = function () {
                    this.modalService.sendValueInput(null), this.offer = null, this.modalService.close(mu.MARKET)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e.prototype.getResourceName = function (e) {
                    return vu[e]
                }, e.prototype.calculatePrice = function () {
                    var e = this.value;
                    return this.offer.amount < e && (e = this.offer.amount), this.offer.buy ? Math.ceil(e / this.offer.amount * this.offer.price) : Math.floor(e / this.offer.amount * this.offer.price)
                }, e.prototype.checkValue = function (e) {
                    if (e && !isNaN(e)) {
                        if (this.offer.amount >= e) return !0;
                        this.inputRef.nativeElement.value = this.offer.amount, this.value = this.offer.amount
                    }
                    return !1
                }, e.prototype.getResourceAmount = function () {
                    return this.resourcesService.getResource(this.offer.resource).amount
                }, e.prototype.getResourceLimit = function () {
                    return this.resourcesService.getResource(this.offer.resource).limit
                }, e
            }(),
            WC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}#input[_ngcontent-%COMP%]{display:inline-block;width:3ch}app-icon[_ngcontent-%COMP%]{display:inline-block}"]],
                data: {}
            });

        function jC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["buy"]))], null, null)
        }

        function YC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["sell"]))], null, null)
        }

        function zC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["BUY"]))], null, null)
        }

        function KC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["SELL"]))], null, null)
        }

        function qC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 35, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(-1, null, ["Market offer"])), (e()(), Yi(3, 0, null, null, 9, "span", [["id", "text"]], null, null, null, null, null)), (e()(), lo(-1, null, ["How many "])), (e()(), Yi(5, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(6, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(7, null, ["(", "/", ") would you like to "])), (e()(), ji(16777216, null, null, 1, null, jC)), Ml(9, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, YC)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(-1, null, ["?"])), (e()(), Yi(13, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 12, "span", [], null, null, null, null, null)), (e()(), Yi(15, 0, [[1, 0], ["input", 1]], null, 5, "input", [["id", "input"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "input" === t && (r = !1 !== El(e, 16)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 16).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 16)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 16)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== i.checkValue(n) && r), "ngModelChange" === t && (r = !1 !== (i.value = n) && r), r
            }, null, null)), Ml(16, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(18, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(20, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(21, null, ["/", " "])), (e()(), Yi(22, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(23, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(24, null, [" for ", " "])), (e()(), Yi(25, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(26, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(27, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(28, 0, null, null, 7, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 4, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), ji(16777216, null, null, 1, null, zC)), Ml(31, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, KC)), Ml(33, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(34, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CANCEL"]))], function (e, t) {
                var n = t.component;
                e(t, 6, 0, n.getResourceName(n.offer.resource), "resources"), e(t, 9, 0, n.offer.buy), e(t, 11, 0, !n.offer.buy), e(t, 18, 0, n.value), e(t, 23, 0, n.getResourceName(n.offer.resource), "resources"), e(t, 26, 0, "coins", "resources"), e(t, 31, 0, n.offer.buy), e(t, 33, 0, !n.offer.buy)
            }, function (e, t) {
                var n = t.component;
                e(t, 7, 0, n.getResourceAmount(), n.getResourceLimit()), e(t, 15, 0, El(t, 20).ngClassUntouched, El(t, 20).ngClassTouched, El(t, 20).ngClassPristine, El(t, 20).ngClassDirty, El(t, 20).ngClassValid, El(t, 20).ngClassInvalid, El(t, 20).ngClassPending), e(t, 21, 0, n.offer.amount), e(t, 24, 0, n.calculatePrice())
            })
        }

        function QC(e) {
            return so(0, [$l(671088640, 1, {
                inputRef: 0
            }), (e()(), Yi(1, 0, null, null, 5, "app-modal", [["id", "market-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 2).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(2, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(3, 0, null, 0, 2, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, qC)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 2, 0, "market-modal"), e(t, 5, 0, n.offer)
            }, null)
        }
        var $C = function () {
                function e(e, t) {
                    var n = this;
                    this.modalService = e, this.resourcesService = t, this.modalService.registerForBuilding().subscribe(function (e) {
                        n.building = e
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.WORK_MANAGEMENT)
                }, e.prototype.cancel = function () {
                    this.modalService.close(mu.WORK_MANAGEMENT)
                }, e.prototype.stop = function () {
                    this.building.isWorking() ? this.building.stopProduction() : this.building.startProduction() || this.modalService.info("Cannot unlock production of " + this.building.getName() + ". Number of free workers: " + this.resourcesService.getPeople())
                }, e.prototype.getBuildingName = function () {
                    return Au.prepareBuildingName(this.building.getBuildingType())
                }, e.prototype.getResourceName = function (e) {
                    return Au.prepareResourceName(e)
                }, e.prototype.getResource = function (e) {
                    return this.resourcesService.getResource(e)
                }, e.prototype.onKeydownHandler = function () {
                    this.ok()
                }, e
            }(),
            ZC = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{text-align:center}input[_ngcontent-%COMP%]:not([type]), input[type=text][_ngcontent-%COMP%]{width:5ch}#rules[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#input[_ngcontent-%COMP%]{flex:0 0 50%;border-right:1px solid #000}#output[_ngcontent-%COMP%]{flex:0 0 50%}"]],
                data: {}
            });

        function XC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, [" working"]))], null, null)
        }

        function JC(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, [" not working"]))], null, null)
        }

        function e_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.stop() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Hire worker"]))], null, null)
        }

        function t_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.stop() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Fire worker"]))], null, null)
        }

        function n_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(2, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(-1, null, [" > "])), (e()(), Yi(4, 0, null, null, 5, "input", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0;
                return "input" === t && (r = !1 !== El(e, 5)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 5).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 5)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 5)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (e.context.$implicit[1] = n) && r), r
            }, null, null)), Ml(5, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(7, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(9, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(10, null, [" ( ", "/", " ) "]))], function (e, t) {
                e(t, 2, 0, t.component.getResourceName(t.context.$implicit[0]), "resources"), e(t, 7, 0, t.context.$implicit[1])
            }, function (e, t) {
                var n = t.component;
                e(t, 4, 0, El(t, 9).ngClassUntouched, El(t, 9).ngClassTouched, El(t, 9).ngClassPristine, El(t, 9).ngClassDirty, El(t, 9).ngClassValid, El(t, 9).ngClassInvalid, El(t, 9).ngClassPending), e(t, 10, 0, n.getResource(t.context.$implicit[0]).amount, n.getResource(t.context.$implicit[0]).limit)
            })
        }

        function r_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, "div", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(2, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), lo(-1, null, [" < "])), (e()(), Yi(4, 0, null, null, 5, "input", [], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (e, t, n) {
                var r = !0;
                return "input" === t && (r = !1 !== El(e, 5)._handleInput(n.target.value) && r), "blur" === t && (r = !1 !== El(e, 5).onTouched() && r), "compositionstart" === t && (r = !1 !== El(e, 5)._compositionStart() && r), "compositionend" === t && (r = !1 !== El(e, 5)._compositionEnd(n.target.value) && r), "ngModelChange" === t && (r = !1 !== (e.context.$implicit[1] = n) && r), r
            }, null, null)), Ml(5, 16384, null, 0, Sf, [Lt, Nt, [2, yf]], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [Sf]), Ml(7, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(9, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), lo(10, null, [" ( ", "/", " ) "]))], function (e, t) {
                e(t, 2, 0, t.component.getResourceName(t.context.$implicit[0]), "resources"), e(t, 7, 0, t.context.$implicit[1])
            }, function (e, t) {
                var n = t.component;
                e(t, 4, 0, El(t, 9).ngClassUntouched, El(t, 9).ngClassTouched, El(t, 9).ngClassPristine, El(t, 9).ngClassDirty, El(t, 9).ngClassValid, El(t, 9).ngClassInvalid, El(t, 9).ngClassPending), e(t, 10, 0, n.getResource(t.context.$implicit[0]).amount, n.getResource(t.context.$implicit[0]).limit)
            })
        }

        function i_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 37, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["", " work management"])), (e()(), Yi(3, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" status: "])), (e()(), ji(16777216, null, null, 1, null, XC)), Ml(7, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, JC)), Ml(9, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, e_)), Ml(11, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, t_)), Ml(13, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(14, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, [" work management on/off "])), (e()(), Yi(16, 0, null, null, 5, "input", [["type", "checkbox"]], [[2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "change"], [null, "blur"]], function (e, t, n) {
                var r = !0,
                    i = e.component;
                return "change" === t && (r = !1 !== El(e, 17).onChange(n.target.checked) && r), "blur" === t && (r = !1 !== El(e, 17).onTouched() && r), "ngModelChange" === t && (r = !1 !== (i.building.getWorkSettings().enabled = n) && r), r
            }, null, null)), Ml(17, 16384, null, 0, mf, [Lt, Nt], null, null), Ll(1024, null, vf, function (e) {
                return [e]
            }, [mf]), Ml(19, 671744, null, 0, lg, [[8, null], [8, null], [8, null], [6, vf]], {
                model: [0, "model"]
            }, {
                update: "ngModelChange"
            }), Ll(2048, null, Rf, null, [lg]), Ml(21, 16384, null, 0, jf, [[4, Rf]], null, null), (e()(), Yi(22, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(23, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(24, 0, null, null, 9, "div", [["id", "rules"]], null, null, null, null, null)), (e()(), Yi(25, 0, null, null, 3, "div", [["id", "input"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Input resources: "])), (e()(), ji(16777216, null, null, 1, null, n_)), Ml(28, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(29, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(30, 0, null, null, 3, "div", [["id", "output"]], null, null, null, null, null)), (e()(), lo(-1, null, [" Output resources: "])), (e()(), ji(16777216, null, null, 1, null, r_)), Ml(33, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), Yi(34, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(35, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["Close"]))], function (e, t) {
                var n = t.component;
                e(t, 7, 0, n.building.isWorking()), e(t, 9, 0, !n.building.isWorking()), e(t, 11, 0, !n.building.getWorkSettings().enabled && !n.building.isWorking()), e(t, 13, 0, !n.building.getWorkSettings().enabled && n.building.isWorking()), e(t, 19, 0, n.building.getWorkSettings().enabled), e(t, 28, 0, n.building.getWorkSettings().inputSettings), e(t, 33, 0, n.building.getWorkSettings().outputSettings)
            }, function (e, t) {
                e(t, 2, 0, t.component.getBuildingName()), e(t, 16, 0, El(t, 21).ngClassUntouched, El(t, 21).ngClassTouched, El(t, 21).ngClassPristine, El(t, 21).ngClassDirty, El(t, 21).ngClassValid, El(t, 21).ngClassInvalid, El(t, 21).ngClassPending)
            })
        }

        function l_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "app-modal", [["id", "work-management-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 2, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, i_)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 1, 0, "work-management-modal"), e(t, 4, 0, n.building)
            }, null)
        }
        var o_ = function () {
                function e(e, t, n) {
                    var r = this;
                    this.modalService = e, this.tutorialService = t, this.text = "", this.tutorialStages = [], this.currentStep = 1, this.modalService.registerForTutorial().subscribe(function (e) {
                        r.tutorialStages = e, r.currentStep = 1, n.destroyed || n.detectChanges()
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ngAfterViewInit = function () {
                    this.tutorialService.enableTutorials()
                }, e.prototype.ok = function () {
                    this.currentStep += 1, this.modalService.openTutorialModal(this.tutorialStages[this.currentStep - 1].position)
                }, e.prototype.skip = function () {
                    var e = this;
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText("<br>");
                    var t = this.modalService.registerForConfirmation().subscribe(function (n) {
                        t.unsubscribe(), n && (e.modalService.sendTutorialResponse(-1), e.modalService.close(mu.TUTORIAL))
                    })
                }, e.prototype.finish = function () {
                    this.modalService.sendTutorialResponse(1), this.modalService.close(mu.TUTORIAL)
                }, e
            }(),
            u_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]],
                data: {}
            });

        function s_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function a_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.finish() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function c_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.skip() && r), r
            }, null, null)), (e()(), lo(-1, null, [""]))], null, null)
        }

        function p_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 10, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["id", "title"]], null, null, null, null, null)), (e()(), lo(2, null, ["Tutorial ", ""])), (e()(), Yi(3, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, s_)), Ml(6, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, a_)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, c_)), Ml(10, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(0, null, null, 0))], function (e, t) {
                var n = t.component;
                e(t, 6, 0, n.currentStep < n.tutorialStages.length), e(t, 8, 0, n.currentStep === n.tutorialStages.length), e(t, 10, 0, n.currentStep !== n.tutorialStages.length)
            }, function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.currentStep + "/" + n.tutorialStages.length), e(t, 3, 0, n.tutorialStages[n.currentStep - 1].text)
            })
        }

        function h_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 6, "app-modal", [["id", "tutorial-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 3, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 2, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, p_)), Ml(5, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(6, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                var n = t.component;
                e(t, 1, 0, "tutorial-modal"), e(t, 5, 0, n.tutorialStages.length > 0)
            }, null)
        }
        var d_ = function () {
                function e(e) {
                    var t = this;
                    this.modalService = e, this.messageNumber = Bu.length, this.modalService.registerForCloseModal().subscribe(function (e) {
                        return t.messageNumber = Bu.length
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.CHANGELOG)
                }, e.prototype.hasPrevious = function () {
                    return this.messageNumber > 1
                }, e.prototype.previous = function () {
                    this.messageNumber > 1 && (this.messageNumber -= 1)
                }, e.prototype.hasNext = function () {
                    return this.messageNumber < Bu.length
                }, e.prototype.next = function () {
                    this.messageNumber < Bu.length && (this.messageNumber += 1)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e.prototype.getChange = function () {
                    return Bu[this.messageNumber - 1]
                }, e
            }(),
            f_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 33%}#header[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-bottom:10px}#text[_ngcontent-%COMP%]{font-size:1.2em;overflow-y:auto}#text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0}button[disabled][_ngcontent-%COMP%]{color:#5a5a5a}button[disabled][_ngcontent-%COMP%]:active{background-color:var(--passive-colour);cursor:default}button[disabled][_ngcontent-%COMP%]:hover{cursor:default}"]],
                data: {}
            });

        function g_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 14, "app-modal", [["id", "changelog-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 11, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 10, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "span", [["id", "header"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 6, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 1, "button", [], [[8, "disabled", 0]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.previous() && r), r
            }, null, null)), (e()(), lo(-1, null, ["PREVIOUS"])), (e()(), Yi(10, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["CLOSE"])), (e()(), Yi(12, 0, null, null, 1, "button", [], [[8, "disabled", 0]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.next() && r), r
            }, null, null)), (e()(), lo(-1, null, ["NEXT"])), (e()(), Yi(14, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                e(t, 1, 0, "changelog-modal")
            }, function (e, t) {
                var n = t.component;
                e(t, 4, 0, n.getChange().VERSION), e(t, 5, 0, n.getChange().MESSAGE), e(t, 8, 0, !n.hasPrevious()), e(t, 12, 0, !n.hasNext())
            })
        }
        var v_ = function () {
                function e(e) {
                    var t = this;
                    this.modalService = e, this.modalService.registerForText().subscribe(function (e) {
                        return t.text = e
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.sendConfirmationResult(!0), this.modalService.close(mu.CONFIRM)
                }, e.prototype.cancel = function () {
                    this.modalService.sendConfirmationResult(!1), this.modalService.close(mu.CONFIRM)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e
            }(),
            m_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],
                data: {}
            });

        function y_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 11, "app-modal", [["id", "confirm-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 8, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 7, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 4, "div", [["id", "buttons"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["YES"])), (e()(), Yi(9, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.cancel() && r), r
            }, null, null)), (e()(), lo(-1, null, ["NO"])), (e()(), Yi(11, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                e(t, 1, 0, "confirm-modal")
            }, function (e, t) {
                e(t, 4, 0, t.component.text)
            })
        }
        var S_ = function () {
                function e(e) {
                    var t = this;
                    this.modalService = e, this.text = "", this.modalService.registerForText().subscribe(function (e) {
                        return t.text = e
                    })
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.ok = function () {
                    this.modalService.close(mu.INFO)
                }, e.prototype.onKeydownHandler = function (e) {
                    this.ok()
                }, e
            }(),
            E_ = gi({
                encapsulation: 0,
                styles: [[".modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]],
                data: {}
            });

        function O_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "app-modal", [["id", "info-modal"]], null, [["document", "keydown.escape"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.escape" === t && (r = !1 !== El(e, 1).onKeydownHandler(n) && r), r
            }, zR, YR)), Ml(1, 4440064, null, 0, jR, [Lt, Nt, yg], {
                id: [0, "id"]
            }, null), (e()(), Yi(2, 0, null, 0, 5, "div", [["class", "modal"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 4, "div", [["class", "modal-body"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "span", [["id", "text"]], [[8, "innerHTML", 1]], null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 1, "button", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.ok() && r), r
            }, null, null)), (e()(), lo(-1, null, ["OK"])), (e()(), Yi(8, 0, null, 0, 0, "div", [["class", "modal-background"]], null, null, null, null, null))], function (e, t) {
                e(t, 1, 0, "info-modal")
            }, function (e, t) {
                e(t, 4, 0, t.component.text)
            })
        }
        var b_ = function () {
                function e() {}
                return e.prototype.ngOnInit = function () {}, e
            }(),
            T_ = gi({
                encapsulation: 0,
                styles: [[""]],
                data: {}
            });

        function R_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-build-modal", [], null, null, null, cC, aC)), Ml(1, 114688, null, 0, sC, [yg], null, null), (e()(), Yi(2, 0, null, null, 1, "app-export-modal", [], null, null, null, mC, fC)), Ml(3, 114688, null, 0, dC, [hC, yg], null, null), (e()(), Yi(4, 0, null, null, 1, "app-import-modal", [], null, null, null, EC, SC)), Ml(5, 114688, null, 0, yC, [hC, yg], null, null), (e()(), Yi(6, 0, null, null, 1, "app-hard-reset-modal", [], null, null, null, TC, bC)), Ml(7, 114688, null, 0, OC, [yg, hC], null, null), (e()(), Yi(8, 0, null, null, 1, "app-options-modal", [], null, null, null, _C, CC)), Ml(9, 114688, null, 0, RC, [dg, yg], null, null), (e()(), Yi(10, 0, null, null, 1, "app-input-modal", [], null, [["document", "keydown.enter"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.enter" === t && (r = !1 !== El(e, 11).onKeydownHandler(n) && r), r
            }, wC, AC)), Ml(11, 114688, null, 0, IC, [yg], null, null), (e()(), Yi(12, 0, null, null, 1, "app-royal-modal", [], null, null, null, DC, PC)), Ml(13, 114688, null, 0, NC, [Tg, bg, yg], null, null), (e()(), Yi(14, 0, null, null, 1, "app-mission-modal", [], null, [["document", "keydown.enter"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.enter" === t && (r = !1 !== El(e, 15).onKeydownHandler(n) && r), r
            }, BC, kC)), Ml(15, 114688, null, 0, MC, [yg, Cg, py], null, null), (e()(), Yi(16, 0, null, null, 1, "app-market-modal", [], null, [["document", "keydown.enter"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.enter" === t && (r = !1 !== El(e, 17).onKeydownHandler(n) && r), r
            }, QC, WC)), Ml(17, 114688, null, 0, VC, [yg, Cg], null, null), (e()(), Yi(18, 0, null, null, 1, "app-work-management-modal", [], null, [["document", "keydown.enter"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.enter" === t && (r = !1 !== El(e, 19).onKeydownHandler(n) && r), r
            }, l_, ZC)), Ml(19, 114688, null, 0, $C, [yg, Cg], null, null), (e()(), Yi(20, 0, null, null, 1, "app-tutorial-modal", [], null, null, null, h_, u_)), Ml(21, 4308992, null, 0, o_, [yg, Sg, Tr], null, null), (e()(), Yi(22, 0, null, null, 1, "app-changelog-modal", [], null, [["document", "keydown.enter"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.enter" === t && (r = !1 !== El(e, 23).onKeydownHandler(n) && r), r
            }, g_, f_)), Ml(23, 114688, null, 0, d_, [yg], null, null), (e()(), Yi(24, 0, null, null, 1, "app-confirm-modal", [], null, [["document", "keydown.enter"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.enter" === t && (r = !1 !== El(e, 25).onKeydownHandler(n) && r), r
            }, y_, m_)), Ml(25, 114688, null, 0, v_, [yg], null, null), (e()(), Yi(26, 0, null, null, 1, "app-info-modal", [], null, [["document", "keydown.enter"]], function (e, t, n) {
                var r = !0;
                return "document:keydown.enter" === t && (r = !1 !== El(e, 27).onKeydownHandler(n) && r), r
            }, O_, E_)), Ml(27, 114688, null, 0, S_, [yg], null, null)], function (e, t) {
                e(t, 1, 0), e(t, 3, 0), e(t, 5, 0), e(t, 7, 0), e(t, 9, 0), e(t, 11, 0), e(t, 13, 0), e(t, 15, 0), e(t, 17, 0), e(t, 19, 0), e(t, 21, 0), e(t, 23, 0), e(t, 25, 0), e(t, 27, 0)
            }, null)
        }
        var C_ = function () {
                function e(e) {
                    this.calendarService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.getDay = function () {
                    return this.calendarService.getDay()
                }, e.prototype.getYear = function () {
                    return this.calendarService.getYear()
                }, e.prototype.getSeason = function () {
                    return gg[this.calendarService.getSeason()].toLowerCase()
                }, e
            }(),
            __ = gi({
                encapsulation: 0,
                styles: [[""]],
                data: {}
            });

        function I_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), lo(1, null, [" day: ", " year: ", " ", "\n"]))], null, function (e, t) {
                var n = t.component;
                e(t, 1, 0, n.getDay(), n.getYear(), n.getSeason())
            })
        }
        var A_ = function () {
                function e(e, t, n, r, i, l, o, u) {
                    var s = this;
                    this.serializerService = e, this.logService = t, this.modalService = n, this.resourcesService = r, this.weatherService = i, this.optionsService = l, this.gameService = o, this.tutorialService = u, this.metric = this.optionsService.getOption(hg.METRIC), this.optionsSubscription || (this.optionsSubscription = this.optionsService.registerForOptionsChange().subscribe(function () {
                        return s.metric = s.optionsService.getOption(hg.METRIC)
                    }))
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.resources = this.resourcesService.getResources(), this.resourcesService.registerForResourcesChange().subscribe(function (t) {
                        e.resources = t
                    })
                }, e.prototype.getResourcesValues = function () {
                    return Array.from(this.resources.values())
                }, e.prototype.save = function () {
                    this.serializerService.initSave(), this.logService.log("saved")
                }, e.prototype.load = function () {
                    this.serializerService.initLoad()
                }, e.prototype.import = function () {
                    this.modalService.open(mu.IMPORT)
                }, e.prototype.export = function () {
                    this.modalService.open(mu.EXPORT)
                }, e.prototype.hardReset = function () {
                    this.modalService.open(mu.HARD_RESET)
                }, e.prototype.options = function () {
                    this.modalService.open(mu.OPTIONS)
                }, e.prototype.getTemperature = function () {
                    return this.weatherService.getCurrentTemperature()
                }, e.prototype.getWeather = function () {
                    return this.weatherService.getCurrentWeather()
                }, e.prototype.getWeatherName = function () {
                    return xu[this.getWeather()].toLowerCase()
                }, e.prototype.calendarEnabled = function () {
                    return this.gameService.isEnabled(Eu.CALENDAR)
                }, e.prototype.softReset = function () {
                    var e = this;
                    this.modalService.open(mu.CONFIRM), this.modalService.setModalText("Are you sure you want to soft reset your progress? <br>You will start from the beginning and all progress except for</br>royal points,<br>permanent royal upgrades<br>and Wonders and their effects will be deleted.");
                    var t = this.modalService.registerForConfirmation().subscribe(function (n) {
                        n && e.serializerService.softReset(), t.unsubscribe()
                    })
                }, e.prototype.isNotCoins = function (e) {
                    return e.resource !== vu.COINS
                }, e.prototype.resetTutorials = function () {
                    this.tutorialService.resetTutorials()
                }, e
            }(),
            w_ = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{font-size:1em;display:flex;height:100%;align-items:center}button[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}#highlighted[_ngcontent-%COMP%], app-calendar[_ngcontent-%COMP%]{display:inline-block}#cog[_ngcontent-%COMP%]{float:right;margin-top:-1px;padding-bottom:2px;height:24px;width:30px}#cog[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;right:4px;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:90px;right:0;margin-top:25px;padding:0;border:1px solid #000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}#temp[_ngcontent-%COMP%]{padding-top:2px;padding-left:5px}.full[_ngcontent-%COMP%]{font-weight:600}app-calendar[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em}#right[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:row;right:40px}app-icon[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:3px}#weather[_ngcontent-%COMP%]{flex:0 0 auto}.icon[_ngcontent-%COMP%]{font-size:1.1em;display:flex;flex-direction:row;align-items:center}"]],
                data: {}
            });

        function N_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getAmount(),
                    r = t.parent.parent.context.$implicit.getLimit();
                e(t, 1, 0, n, r)
            })
        }

        function P_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", "/", ""]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getAmount(),
                    r = t.parent.parent.context.$implicit.getLimit();
                e(t, 1, 0, n, r)
            })
        }

        function D_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(1, null, ["", ""]))], null, function (e, t) {
                var n = t.parent.parent.context.$implicit.getAmount();
                e(t, 1, 0, n)
            })
        }

        function M_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 9, "span", [["class", "icon"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(2, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), ji(16777216, null, null, 1, null, N_)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, P_)), Ml(6, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, D_)), Ml(8, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), lo(-1, null, [" \xa0 "]))], function (e, t) {
                var n = t.component,
                    r = t.parent.context.$implicit.getName();
                e(t, 2, 0, r, "resources");
                var i = t.parent.context.$implicit.getAmount() === t.parent.context.$implicit.getLimit();
                e(t, 4, 0, i);
                var l = n.isNotCoins(t.parent.context.$implicit) && t.parent.context.$implicit.getAmount() !== t.parent.context.$implicit.getLimit();
                e(t, 6, 0, l), e(t, 8, 0, !n.isNotCoins(t.parent.context.$implicit))
            }, null)
        }

        function k_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 2, "div", [["id", "highlighted"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, M_)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                e(t, 2, 0, t.context.$implicit.visible && t.context.$implicit.highlighted)
            }, null)
        }

        function L_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-calendar", [], null, null, null, I_, __)), Ml(1, 114688, null, 0, C_, [vg], null, null)], function (e, t) {
                e(t, 1, 0)
            }, null)
        }

        function x_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0C"]))], null, null)
        }

        function F_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), lo(-1, null, ["\xb0F"]))], null, null)
        }

        function U_(e) {
            return so(0, [kl(0, js, [Kr]), (e()(), Yi(1, 0, null, null, 36, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, k_)), Ml(3, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null), (e()(), lo(-1, null, [" \xa0 "])), (e()(), Yi(5, 0, null, null, 13, "div", [["id", "right"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, L_)), Ml(7, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(8, 0, null, null, 10, "span", [["class", "icon"], ["id", "weather"]], null, null, null, null, null)), (e()(), lo(-1, null, [" \xa0 "])), (e()(), Yi(10, 0, null, null, 1, "app-icon", [], null, null, null, of , lf)), Ml(11, 114688, null, 0, rf, [], {
                name: [0, "name"],
                path: [1, "path"]
            }, null), (e()(), Yi(12, 0, null, null, 6, null, null, null, null, null, null, null)), (e()(), lo(13, null, ["", " "])), no(14, 2), (e()(), ji(16777216, null, null, 1, null, x_)), Ml(16, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, F_)), Ml(18, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(19, 0, null, null, 18, "div", [["class", "dropdown"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 0, "img", [["alt", "settings"], ["draggable", "false"], ["id", "cog"], ["src", "assets/settings.svg"]], null, null, null, null, null)), (e()(), Yi(21, 0, null, null, 16, "ul", [["class", "dropdown-content"]], null, null, null, null, null)), (e()(), Yi(22, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.options() && r), r
            }, null, null)), (e()(), lo(-1, null, ["options"])), (e()(), Yi(24, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.save() && r), r
            }, null, null)), (e()(), lo(-1, null, ["save"])), (e()(), Yi(26, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.load() && r), r
            }, null, null)), (e()(), lo(-1, null, ["load"])), (e()(), Yi(28, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.import() && r), r
            }, null, null)), (e()(), lo(-1, null, ["import"])), (e()(), Yi(30, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.export() && r), r
            }, null, null)), (e()(), lo(-1, null, ["export"])), (e()(), Yi(32, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.resetTutorials() && r), r
            }, null, null)), (e()(), lo(-1, null, ["enable tutorials"])), (e()(), Yi(34, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.softReset() && r), r
            }, null, null)), (e()(), lo(-1, null, ["soft reset"])), (e()(), Yi(36, 0, null, null, 1, "li", [], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.hardReset() && r), r
            }, null, null)), (e()(), lo(-1, null, ["hard reset"]))], function (e, t) {
                var n = t.component;
                e(t, 3, 0, n.getResourcesValues()), e(t, 7, 0, n.calendarEnabled()), e(t, 11, 0, n.getWeatherName(), "weather"), e(t, 16, 0, n.metric), e(t, 18, 0, !n.metric)
            }, function (e, t) {
                var n = t.component,
                    r = hi(t, 13, 0, e(t, 14, 0, El(t, 0), n.getTemperature(), "0.0-1"));
                e(t, 13, 0, r)
            })
        }
        var H_ = function () {
                function e(e) {
                    this.gameService = e
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.isWeatherEnabled = function () {
                    return this.gameService.isEnabled(Eu.WEATHER)
                }, e.prototype.isMarketEnabled = function () {
                    return this.gameService.isEnabled(Eu.MARKET)
                }, e.prototype.isManagementEnabled = function () {
                    return this.gameService.isEnabled(Eu.MANAGEMENT)
                }, e.prototype.isResearchEnabled = function () {
                    return this.gameService.isEnabled(Eu.RESEARCH)
                }, e.prototype.isArmyEnabled = function () {
                    return this.gameService.isEnabled(Eu.ARMY)
                }, e.prototype.isReligionEnabled = function () {
                    return this.gameService.isEnabled(Eu.RELIGION)
                }, e.prototype.isCraftingEnabled = function () {
                    return this.gameService.isEnabled(Eu.CRAFTING)
                }, e
            }(),
            G_ = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}.entry[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;justify-content:center;flex-direction:column;height:5%;text-align:center;border-bottom:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:first-of-type{cursor:default}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour);text-decoration:none}.end[_ngcontent-%COMP%]{margin-top:auto;border-top:2px solid #000;border-bottom:none}"]],
                data: {}
            });

        function B_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/management"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[6, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 5, {
                links: 1
            }), $l(603979776, 6, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/management"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function V_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/crafting"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[8, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 7, {
                links: 1
            }), $l(603979776, 8, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/crafting"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function W_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/research"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[10, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 9, {
                links: 1
            }), $l(603979776, 10, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/research"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function j_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/market"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[12, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 11, {
                links: 1
            }), $l(603979776, 12, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/market"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function Y_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/army"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[14, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 13, {
                links: 1
            }), $l(603979776, 14, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/army"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function z_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/religion"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[16, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 15, {
                links: 1
            }), $l(603979776, 16, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/religion"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function K_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/weather"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 1).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(1, 671744, [[18, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(2, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 17, {
                links: 1
            }), $l(603979776, 18, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""]))], function (e, t) {
                e(t, 1, 0, "/weather"), e(t, 2, 0, "active")
            }, function (e, t) {
                e(t, 0, 0, El(t, 1).target, El(t, 1).href)
            })
        }

        function q_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 33, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "a", [["class", "entry"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/village"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 3).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(3, 671744, [[2, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(4, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 1, {
                links: 1
            }), $l(603979776, 2, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""])), (e()(), Yi(8, 0, null, null, 5, "a", [["class", "entry"], ["draggable", "false"], ["routerLink", "/resources"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 9).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(9, 671744, [[4, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(10, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 3, {
                links: 1
            }), $l(603979776, 4, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, [""])), (e()(), ji(16777216, null, null, 1, null, B_)), Ml(15, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, V_)), Ml(17, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, W_)), Ml(19, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, j_)), Ml(21, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Y_)), Ml(23, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, z_)), Ml(25, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, K_)), Ml(27, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(28, 0, null, null, 5, "a", [["class", "entry end"], ["draggable", "false"], ["routerLink", "/royal"], ["routerLinkActive", "active"]], [[1, "target", 0], [8, "href", 4]], [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== El(e, 29).onClick(n.button, n.ctrlKey, n.metaKey, n.shiftKey) && r), r
            }, null, null)), Ml(29, 671744, [[20, 4]], 0, Od, [Ed, ch, as], {
                routerLink: [0, "routerLink"]
            }, null), Ml(30, 1720320, null, 2, Td, [Ed, Nt, Lt, Tr], {
                routerLinkActive: [0, "routerLinkActive"]
            }, null), $l(603979776, 19, {
                links: 1
            }), $l(603979776, 20, {
                linksWithHrefs: 1
            }), (e()(), lo(-1, null, ["Royal perks"]))], function (e, t) {
                var n = t.component;
                e(t, 3, 0, "/village"), e(t, 4, 0, "active"), e(t, 9, 0, "/resources"), e(t, 10, 0, "active"), e(t, 15, 0, n.isManagementEnabled()), e(t, 17, 0, n.isCraftingEnabled()), e(t, 19, 0, n.isResearchEnabled()), e(t, 21, 0, n.isMarketEnabled()), e(t, 23, 0, n.isArmyEnabled()), e(t, 25, 0, n.isReligionEnabled()), e(t, 27, 0, n.isWeatherEnabled()), e(t, 29, 0, "/royal"), e(t, 30, 0, "active")
            }, function (e, t) {
                e(t, 2, 0, El(t, 3).target, El(t, 3).href), e(t, 8, 0, El(t, 9).target, El(t, 9).href), e(t, 28, 0, El(t, 29).target, El(t, 29).href)
            })
        }
        var Q_ = function () {
                function e(e, t) {
                    this.logService = e, this.changeDetectorRef = t, this.entries = [], this.logEntryTypes = fg
                }
                return e.prototype.ngOnInit = function () {
                    var e = this;
                    this.logService.registerForLogs().subscribe(function () {
                        e.entries = e.logService.getEntries(), e.scrollToBottom()
                    }), this.entries = this.logService.getEntries(), this.scrollToBottom()
                }, e.prototype.clearLogs = function () {
                    this.logService.clearEntries()
                }, e.prototype.scrollToBottom = function () {
                    var e = this.scrollRef.nativeElement,
                        t = e.scrollHeight - e.clientHeight <= e.scrollTop + 25;
                    this.changeDetectorRef.destroyed || this.changeDetectorRef.detectChanges(), t && (e.scrollTop = e.scrollHeight)
                }, e
            }(),
            $_ = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:100%}#clear-button[_ngcontent-%COMP%]{float:right}#log[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;font-size:.8em}.title[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-weight:700;font-size:1.1em}#title-text[_ngcontent-%COMP%]{display:inline-block;margin-left:20px;margin-top:3px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding-left:.5%;padding-bottom:.4%}.date[_ngcontent-%COMP%]{font-weight:bolder}.warning[_ngcontent-%COMP%]{color:#8b0000}.success[_ngcontent-%COMP%]{color:#006400}"]],
                data: {}
            });

        function Z_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "span", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "date"]], null, null, null, null, null)), (e()(), lo(2, null, ["day ", ":"])), (e()(), Yi(3, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.day), e(t, 3, 0, " " + t.parent.context.$implicit.message)
            })
        }

        function X_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "span", [["class", "success"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "date"]], null, null, null, null, null)), (e()(), lo(2, null, ["day ", ":"])), (e()(), Yi(3, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.day), e(t, 3, 0, " " + t.parent.context.$implicit.message)
            })
        }

        function J_(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 3, "span", [["class", "warning"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "span", [["class", "date"]], null, null, null, null, null)), (e()(), lo(2, null, ["day ", ":"])), (e()(), Yi(3, 0, null, null, 0, "span", [], [[8, "innerHTML", 1]], null, null, null, null))], null, function (e, t) {
                e(t, 2, 0, t.parent.context.$implicit.day), e(t, 3, 0, " " + t.parent.context.$implicit.message)
            })
        }

        function eI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "li", [], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 7, "div", [], null, null, null, null, null)), Ml(2, 16384, null, 0, xs, [], {
                ngSwitch: [0, "ngSwitch"]
            }, null), (e()(), ji(16777216, null, null, 1, null, Z_)), Ml(4, 278528, null, 0, Fs, [Or, hn, xs], {
                ngSwitchCase: [0, "ngSwitchCase"]
            }, null), (e()(), ji(16777216, null, null, 1, null, X_)), Ml(6, 278528, null, 0, Fs, [Or, hn, xs], {
                ngSwitchCase: [0, "ngSwitchCase"]
            }, null), (e()(), ji(16777216, null, null, 1, null, J_)), Ml(8, 278528, null, 0, Fs, [Or, hn, xs], {
                ngSwitchCase: [0, "ngSwitchCase"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 2, 0, t.context.$implicit.type), e(t, 4, 0, n.logEntryTypes.LOG), e(t, 6, 0, n.logEntryTypes.SUCCESS), e(t, 8, 0, n.logEntryTypes.WARNING)
            }, null)
        }

        function tI(e) {
            return so(0, [$l(402653184, 1, {
                scrollRef: 0
            }), (e()(), Yi(1, 0, null, null, 9, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 4, "div", [["class", "title"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 1, "span", [["id", "title-text"]], null, null, null, null, null)), (e()(), lo(-1, null, [""])), (e()(), Yi(5, 0, null, null, 1, "button", [["id", "clear-button"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.clearLogs() && r), r
            }, null, null)), (e()(), lo(-1, null, ["clear"])), (e()(), Yi(7, 0, [[1, 0], ["scroll", 1]], null, 3, "div", [["id", "log"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 2, "ul", [], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, eI)), Ml(10, 278528, null, 0, Ns, [Or, hn, Br], {
                ngForOf: [0, "ngForOf"]
            }, null)], function (e, t) {
                e(t, 10, 0, t.component.entries)
            }, null)
        }
        var nI = function () {
                function e(e, t) {
                    this.gameService = e, this.optionsService = t, this.gameName = Hu.gameName, this.version = Hu.versionString
                }
                return e.prototype.ngOnInit = function () {}, e.prototype.showDevNotes = function () {
                    this.gameService.showDevNotes()
                }, e.prototype.getSound = function () {
                    return this.optionsService.getOption(hg.SOUND)
                }, e.prototype.toggleSound = function () {
                    this.optionsService.setOption(hg.SOUND, !this.optionsService.getOption(hg.SOUND))
                }, e
            }(),
            rI = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:row;font-size:1em}.first[_ngcontent-%COMP%]{flex:0 0 3%;height:24px;cursor:pointer}#center[_ngcontent-%COMP%]{flex:0 0 94%;display:flex;justify-content:center;align-items:center}#dev[_ngcontent-%COMP%]{flex:0 0 3%;height:24px;cursor:pointer}img[_ngcontent-%COMP%]{width:24px}"]],
                data: {}
            });

        function iI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["src", "assets/sound_on.svg"], ["title", "turn off"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSound() && r), r
            }, null, null))], null, null)
        }

        function lI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["src", "assets/sound_off.svg"], ["title", "turn on"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.toggleSound() && r), r
            }, null, null))], null, null)
        }

        function oI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 8, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), ji(16777216, null, null, 1, null, iI)), Ml(2, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, lI)), Ml(4, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), Yi(5, 0, null, null, 2, "div", [["id", "center"]], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 1, "span", [], null, null, null, null, null)), (e()(), lo(7, null, ["", " v", ""])), (e()(), Yi(8, 0, null, null, 0, "img", [["id", "dev"], ["src", "assets/dev.svg"], ["title", "dev notes"]], null, [[null, "click"]], function (e, t, n) {
                var r = !0;
                return "click" === t && (r = !1 !== e.component.showDevNotes() && r), r
            }, null, null))], function (e, t) {
                var n = t.component;
                e(t, 2, 0, n.getSound()), e(t, 4, 0, !n.getSound())
            }, function (e, t) {
                var n = t.component;
                e(t, 7, 0, n.gameName, n.version)
            })
        }
        var uI = function () {
                function e(e, t, n, r, i, l, o, u, s, a, c, p, h, d) {
                    this.gameService = e, this.randomService = t, this.optionsService = n, this.tickerService = r, this.serializerService = i, this.resourceService = l, this.techService = o, this.logService = u, this.seaService = s, this.mountainsService = a, this.fortService = c, this.forestService = p, this.fieldService = h, this.villageService = d
                }
                return e.prototype.ngOnInit = function () {
                    this.serializerService.hasSave() ? this.serializerService.initLoad() : this.initGame(), this.tickerService.start()
                }, e.prototype.initGame = function () {
                    this.gameService.init(), this.optionsService.init(), this.resourceService.init(), this.villageService.init(), this.fortService.init(), this.forestService.init(), this.fieldService.init(), this.mountainsService.init(), this.seaService.init()
                }, e.prototype.exitSave = function (e) {
                    this.serializerService.initSave()
                }, e
            }(),
            sI = gi({
                encapsulation: 0,
                styles: [["#wrapper[_ngcontent-%COMP%]{position:relative;display:grid;height:100%;max-height:100%;grid-template-columns:11% auto 20%;grid-template-rows:5% auto 4%;border:1px solid #000;background:var(--background-clour);background-image:url(old_parchment.e3e77af15bdb5cd39bab.jpg);background-size:100% 100%}#footer[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;border:1px solid #000;overflow:hidden}#left-menu[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;border:1px solid #000;overflow:hidden}#center[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;border:1px solid #000;overflow:hidden}#screen[_ngcontent-%COMP%]{height:100%}#right-menu[_ngcontent-%COMP%]{grid-column-start:3;grid-column-end:4;border:1px solid #000;overflow:hidden}.asset[_ngcontent-%COMP%]{display:none}"]],
                data: {}
            });

        function aI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 116, "div", [["id", "wrapper"]], null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/buff.svg"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/complex_management.svg"]], null, null, null, null, null)), (e()(), Yi(3, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/details.svg"]], null, null, null, null, null)), (e()(), Yi(4, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/dev.svg"]], null, null, null, null, null)), (e()(), Yi(5, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/eye.svg"]], null, null, null, null, null)), (e()(), Yi(6, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/foresight.svg"]], null, null, null, null, null)), (e()(), Yi(7, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/forest.svg"]], null, null, null, null, null)), (e()(), Yi(8, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/gear.svg"]], null, null, null, null, null)), (e()(), Yi(9, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/gear_off.svg"]], null, null, null, null, null)), (e()(), Yi(10, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/hammer.svg"]], null, null, null, null, null)), (e()(), Yi(11, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/kred.png"]], null, null, null, null, null)), (e()(), Yi(12, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/land.svg"]], null, null, null, null, null)), (e()(), Yi(13, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/manage.svg"]], null, null, null, null, null)), (e()(), Yi(14, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/mountains.svg"]], null, null, null, null, null)), (e()(), Yi(15, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/population.svg"]], null, null, null, null, null)), (e()(), Yi(16, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/question_mark.svg"]], null, null, null, null, null)), (e()(), Yi(17, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/settings.svg"]], null, null, null, null, null)), (e()(), Yi(18, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/tick.svg"]], null, null, null, null, null)), (e()(), Yi(19, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/time.svg"]], null, null, null, null, null)), (e()(), Yi(20, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/trade.svg"]], null, null, null, null, null)), (e()(), Yi(21, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/upgrade.svg"]], null, null, null, null, null)), (e()(), Yi(22, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/village.svg"]], null, null, null, null, null)), (e()(), Yi(23, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/religion/faith.svg"]], null, null, null, null, null)), (e()(), Yi(24, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/religion/faith_shield.svg"]], null, null, null, null, null)), (e()(), Yi(25, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/clouds.svg"]], null, null, null, null, null)), (e()(), Yi(26, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/rain.svg"]], null, null, null, null, null)), (e()(), Yi(27, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/snow.svg"]], null, null, null, null, null)), (e()(), Yi(28, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/storm.svg"]], null, null, null, null, null)), (e()(), Yi(29, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/sun.svg"]], null, null, null, null, null)), (e()(), Yi(30, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/weather/wind.svg"]], null, null, null, null, null)), (e()(), Yi(31, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/attack.svg"]], null, null, null, null, null)), (e()(), Yi(32, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/barracks.svg"]], null, null, null, null, null)), (e()(), Yi(33, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/defense.svg"]], null, null, null, null, null)), (e()(), Yi(34, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/invasion.svg"]], null, null, null, null, null)), (e()(), Yi(35, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/army/recruit.svg"]], null, null, null, null, null)), (e()(), Yi(36, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/angry.svg"]], null, null, null, null, null)), (e()(), Yi(37, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/happy.svg"]], null, null, null, null, null)), (e()(), Yi(38, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/neutral.svg"]], null, null, null, null, null)), (e()(), Yi(39, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/overjoyed.svg"]], null, null, null, null, null)), (e()(), Yi(40, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/happiness/sad.svg"]], null, null, null, null, null)), (e()(), Yi(41, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/apple.svg"]], null, null, null, null, null)), (e()(), Yi(42, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/barley.svg"]], null, null, null, null, null)), (e()(), Yi(43, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/beer.svg"]], null, null, null, null, null)), (e()(), Yi(44, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/berry.svg"]], null, null, null, null, null)), (e()(), Yi(45, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/bow.svg"]], null, null, null, null, null)), (e()(), Yi(46, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/bread.svg"]], null, null, null, null, null)), (e()(), Yi(47, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/bronze.svg"]], null, null, null, null, null)), (e()(), Yi(48, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/brushwood.svg"]], null, null, null, null, null)), (e()(), Yi(49, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/chicken.svg"]], null, null, null, null, null)), (e()(), Yi(50, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/clothes.svg"]], null, null, null, null, null)), (e()(), Yi(51, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/coal.svg"]], null, null, null, null, null)), (e()(), Yi(52, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/coins.svg"]], null, null, null, null, null)), (e()(), Yi(53, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/cooked_meat.svg"]], null, null, null, null, null)), (e()(), Yi(54, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/copper.svg"]], null, null, null, null, null)), (e()(), Yi(55, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/copper_ore.svg"]], null, null, null, null, null)), (e()(), Yi(56, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/cotton.svg"]], null, null, null, null, null)), (e()(), Yi(57, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/cow.svg"]], null, null, null, null, null)), (e()(), Yi(58, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/cut_stone.svg"]], null, null, null, null, null)), (e()(), Yi(59, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/egg.svg"]], null, null, null, null, null)), (e()(), Yi(60, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/fabric.svg"]], null, null, null, null, null)), (e()(), Yi(61, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/fish.svg"]], null, null, null, null, null)), (e()(), Yi(62, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/flour.svg"]], null, null, null, null, null)), (e()(), Yi(63, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/food.svg"]], null, null, null, null, null)), (e()(), Yi(64, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/fuel.svg"]], null, null, null, null, null)), (e()(), Yi(65, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/fur.svg"]], null, null, null, null, null)), (e()(), Yi(66, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/gold.svg"]], null, null, null, null, null)), (e()(), Yi(67, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/gold_ore.svg"]], null, null, null, null, null)), (e()(), Yi(68, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/grape.svg"]], null, null, null, null, null)), (e()(), Yi(69, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/hay.svg"]], null, null, null, null, null)), (e()(), Yi(70, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/hop.svg"]], null, null, null, null, null)), (e()(), Yi(71, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/horse.svg"]], null, null, null, null, null)), (e()(), Yi(72, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/iron.svg"]], null, null, null, null, null)), (e()(), Yi(73, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/iron_ore.svg"]], null, null, null, null, null)), (e()(), Yi(74, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/leather.svg"]], null, null, null, null, null)), (e()(), Yi(75, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/leather_armor.svg"]], null, null, null, null, null)), (e()(), Yi(76, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/light_armor.svg"]], null, null, null, null, null)), (e()(), Yi(77, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/heavy_armor.svg"]], null, null, null, null, null)), (e()(), Yi(78, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/log.svg"]], null, null, null, null, null)), (e()(), Yi(79, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/meat.svg"]], null, null, null, null, null)), (e()(), Yi(80, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/meat_soup.svg"]], null, null, null, null, null)), (e()(), Yi(81, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/milk.svg"]], null, null, null, null, null)), (e()(), Yi(82, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/mushroom.svg"]], null, null, null, null, null)), (e()(), Yi(83, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/pig.svg"]], null, null, null, null, null)), (e()(), Yi(84, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/plank.svg"]], null, null, null, null, null)), (e()(), Yi(85, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/silver.svg"]], null, null, null, null, null)), (e()(), Yi(86, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/silver_ore.svg"]], null, null, null, null, null)), (e()(), Yi(87, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/steel.svg"]], null, null, null, null, null)), (e()(), Yi(88, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone.svg"]], null, null, null, null, null)), (e()(), Yi(89, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_axe.svg"]], null, null, null, null, null)), (e()(), Yi(90, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_hammer.svg"]], null, null, null, null, null)), (e()(), Yi(91, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_pickaxe.svg"]], null, null, null, null, null)), (e()(), Yi(92, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_shovel.svg"]], null, null, null, null, null)), (e()(), Yi(93, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/stone_spear.svg"]], null, null, null, null, null)), (e()(), Yi(94, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/sword.svg"]], null, null, null, null, null)), (e()(), Yi(95, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/tin.svg"]], null, null, null, null, null)), (e()(), Yi(96, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/tin_ore.svg"]], null, null, null, null, null)), (e()(), Yi(97, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/vegetable_soup.svg"]], null, null, null, null, null)), (e()(), Yi(98, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/wheat.svg"]], null, null, null, null, null)), (e()(), Yi(99, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/wine.svg"]], null, null, null, null, null)), (e()(), Yi(100, 0, null, null, 0, "img", [["alt", ""], ["class", "asset"], ["src", "assets/resources/wooden_shield.svg"]], null, null, null, null, null)), (e()(), Yi(101, 0, null, null, 2, "div", [["id", "header"]], null, null, null, null, null)), (e()(), Yi(102, 0, null, null, 1, "app-header", [], null, null, null, U_, w_)), Ml(103, 114688, null, 0, A_, [hC, mg, yg, Cg, oS, dg, Eg, Sg], null, null), (e()(), Yi(104, 0, null, null, 2, "div", [["id", "left-menu"]], null, null, null, null, null)), (e()(), Yi(105, 0, null, null, 1, "app-left-menu", [], null, null, null, q_, G_)), Ml(106, 114688, null, 0, H_, [Eg], null, null), (e()(), Yi(107, 0, null, null, 3, "div", [["id", "center"]], null, null, null, null, null)), (e()(), Yi(108, 0, null, null, 2, "div", [["id", "screen"]], null, null, null, null, null)), (e()(), Yi(109, 16777216, null, null, 1, "router-outlet", [], null, null, null, null, null)), Ml(110, 212992, null, 0, _d, [Cd, Or, Ct, [8, null], Tr], null, null), (e()(), Yi(111, 0, null, null, 2, "div", [["id", "right-menu"]], null, null, null, null, null)), (e()(), Yi(112, 0, null, null, 1, "app-log", [], null, null, null, tI, $_)), Ml(113, 114688, null, 0, Q_, [mg, Tr], null, null), (e()(), Yi(114, 0, null, null, 2, "div", [["id", "footer"]], null, null, null, null, null)), (e()(), Yi(115, 0, null, null, 1, "app-footer", [], null, null, null, oI, rI)), Ml(116, 114688, null, 0, nI, [Eg, dg], null, null)], function (e, t) {
                e(t, 103, 0), e(t, 106, 0), e(t, 110, 0), e(t, 113, 0), e(t, 116, 0)
            }, null)
        }
        var cI = gi({
            encapsulation: 0,
            styles: [["#IEwrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#919191;font-size:3em;height:100%;max-height:100%;display:flex;justify-content:center;align-items:center}#IEwrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}"]],
            data: {}
        });

        function pI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 4, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 1, "app-modals", [], null, null, null, R_, T_)), Ml(2, 114688, null, 0, b_, [], null, null), (e()(), Yi(3, 0, null, null, 1, "app-game", [], null, [["window", "beforeunload"]], function (e, t, n) {
                var r = !0;
                return "window:beforeunload" === t && (r = !1 !== El(e, 4).exitSave(n) && r), r
            }, aI, sI)), Ml(4, 114688, null, 0, uI, [Eg, Mu, dg, pC, hC, Cg, Mm, mg, CR, WT, Bb, lT, CT, Ob], null, null)], function (e, t) {
                e(t, 2, 0), e(t, 4, 0)
            }, null)
        }

        function hI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 7, null, null, null, null, null, null, null)), (e()(), Yi(1, 0, null, null, 6, "div", [["id", "IEwrapper"]], null, null, null, null, null)), (e()(), Yi(2, 0, null, null, 5, "span", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Internet Explorer is not supported."])), (e()(), Yi(4, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, ["Please use Firefox, Chrome, Safari"])), (e()(), Yi(6, 0, null, null, 0, "br", [], null, null, null, null, null)), (e()(), lo(-1, null, ["or Edge."]))], null, null)
        }

        function dI(e) {
            return so(0, [(e()(), ji(16777216, null, null, 1, null, pI)), Ml(1, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null), (e()(), ji(16777216, null, null, 1, null, hI)), Ml(3, 16384, null, 0, Ds, [Or, hn], {
                ngIf: [0, "ngIf"]
            }, null)], function (e, t) {
                var n = t.component;
                e(t, 1, 0, !n.isIE()), e(t, 3, 0, n.isIE())
            }, null)
        }

        function fI(e) {
            return so(0, [(e()(), Yi(0, 0, null, null, 1, "app-root", [], null, [["document", "contextmenu"]], function (e, t, n) {
                var r = !0;
                return "document:contextmenu" === t && (r = !1 !== El(e, 1).catchContextMenu(n) && r), r
            }, dI, cI)), Ml(1, 49152, null, 0, os, [], null, null)], null, null)
        }
        var gI = al("app-root", os, fI, {}, {}, []),
            vI = function () {
                return function () {}
            }(),
            mI = function () {
                return function () {}
            }(),
            yI = "*";

        function SI(e, t) {
            return void 0 === t && (t = null), {
                type: 2,
                steps: e,
                options: t
            }
        }

        function EI(e) {
            return {
                type: 6,
                styles: e,
                offset: null
            }
        }

        function OI(e) {
            Promise.resolve(null).then(e)
        }
        var bI = function () {
                function e(e, t) {
                    void 0 === e && (e = 0), void 0 === t && (t = 0), this._onDoneFns = [], this._onStartFns = [], this._onDestroyFns = [], this._started = !1, this._destroyed = !1, this._finished = !1, this.parentPlayer = null, this.totalTime = e + t
                }
                return e.prototype._onFinish = function () {
                    this._finished || (this._finished = !0, this._onDoneFns.forEach(function (e) {
                        return e()
                    }), this._onDoneFns = [])
                }, e.prototype.onStart = function (e) {
                    this._onStartFns.push(e)
                }, e.prototype.onDone = function (e) {
                    this._onDoneFns.push(e)
                }, e.prototype.onDestroy = function (e) {
                    this._onDestroyFns.push(e)
                }, e.prototype.hasStarted = function () {
                    return this._started
                }, e.prototype.init = function () {}, e.prototype.play = function () {
                    this.hasStarted() || (this._onStart(), this.triggerMicrotask()), this._started = !0
                }, e.prototype.triggerMicrotask = function () {
                    var e = this;
                    OI(function () {
                        return e._onFinish()
                    })
                }, e.prototype._onStart = function () {
                    this._onStartFns.forEach(function (e) {
                        return e()
                    }), this._onStartFns = []
                }, e.prototype.pause = function () {}, e.prototype.restart = function () {}, e.prototype.finish = function () {
                    this._onFinish()
                }, e.prototype.destroy = function () {
                    this._destroyed || (this._destroyed = !0, this.hasStarted() || this._onStart(), this.finish(), this._onDestroyFns.forEach(function (e) {
                        return e()
                    }), this._onDestroyFns = [])
                }, e.prototype.reset = function () {}, e.prototype.setPosition = function (e) {}, e.prototype.getPosition = function () {
                    return 0
                }, e.prototype.triggerCallback = function (e) {
                    var t = "start" == e ? this._onStartFns : this._onDoneFns;
                    t.forEach(function (e) {
                        return e()
                    }), t.length = 0
                }, e
            }(),
            TI = function () {
                function e(e) {
                    var t = this;
                    this._onDoneFns = [], this._onStartFns = [], this._finished = !1, this._started = !1, this._destroyed = !1, this._onDestroyFns = [], this.parentPlayer = null, this.totalTime = 0, this.players = e;
                    var n = 0,
                        r = 0,
                        i = 0,
                        l = this.players.length;
                    0 == l ? OI(function () {
                        return t._onFinish()
                    }) : this.players.forEach(function (e) {
                        e.onDone(function () {
                            ++n == l && t._onFinish()
                        }), e.onDestroy(function () {
                            ++r == l && t._onDestroy()
                        }), e.onStart(function () {
                            ++i == l && t._onStart()
                        })
                    }), this.totalTime = this.players.reduce(function (e, t) {
                        return Math.max(e, t.totalTime)
                    }, 0)
                }
                return e.prototype._onFinish = function () {
                    this._finished || (this._finished = !0, this._onDoneFns.forEach(function (e) {
                        return e()
                    }), this._onDoneFns = [])
                }, e.prototype.init = function () {
                    this.players.forEach(function (e) {
                        return e.init()
                    })
                }, e.prototype.onStart = function (e) {
                    this._onStartFns.push(e)
                }, e.prototype._onStart = function () {
                    this.hasStarted() || (this._started = !0, this._onStartFns.forEach(function (e) {
                        return e()
                    }), this._onStartFns = [])
                }, e.prototype.onDone = function (e) {
                    this._onDoneFns.push(e)
                }, e.prototype.onDestroy = function (e) {
                    this._onDestroyFns.push(e)
                }, e.prototype.hasStarted = function () {
                    return this._started
                }, e.prototype.play = function () {
                    this.parentPlayer || this.init(), this._onStart(), this.players.forEach(function (e) {
                        return e.play()
                    })
                }, e.prototype.pause = function () {
                    this.players.forEach(function (e) {
                        return e.pause()
                    })
                }, e.prototype.restart = function () {
                    this.players.forEach(function (e) {
                        return e.restart()
                    })
                }, e.prototype.finish = function () {
                    this._onFinish(), this.players.forEach(function (e) {
                        return e.finish()
                    })
                }, e.prototype.destroy = function () {
                    this._onDestroy()
                }, e.prototype._onDestroy = function () {
                    this._destroyed || (this._destroyed = !0, this._onFinish(), this.players.forEach(function (e) {
                        return e.destroy()
                    }), this._onDestroyFns.forEach(function (e) {
                        return e()
                    }), this._onDestroyFns = [])
                }, e.prototype.reset = function () {
                    this.players.forEach(function (e) {
                        return e.reset()
                    }), this._destroyed = !1, this._finished = !1, this._started = !1
                }, e.prototype.setPosition = function (e) {
                    var t = e * this.totalTime;
                    this.players.forEach(function (e) {
                        var n = e.totalTime ? Math.min(1, t / e.totalTime) : 1;
                        e.setPosition(n)
                    })
                }, e.prototype.getPosition = function () {
                    var e = 0;
                    return this.players.forEach(function (t) {
                        var n = t.getPosition();
                        e = Math.min(n, e)
                    }), e
                }, e.prototype.beforeDestroy = function () {
                    this.players.forEach(function (e) {
                        e.beforeDestroy && e.beforeDestroy()
                    })
                }, e.prototype.triggerCallback = function (e) {
                    var t = "start" == e ? this._onStartFns : this._onDoneFns;
                    t.forEach(function (e) {
                        return e()
                    }), t.length = 0
                }, e
            }(),
            RI = "!";

        function CI() {
            return "undefined" != typeof process
        }

        function _I(e) {
            switch (e.length) {
                case 0:
                    return new bI;
                case 1:
                    return e[0];
                default:
                    return new TI(e)
            }
        }

        function II(e, t, n, r, i, l) {
            void 0 === i && (i = {}), void 0 === l && (l = {});
            var o = [],
                u = [],
                s = -1,
                a = null;
            if (r.forEach(function (e) {
                    var n = e.offset,
                        r = n == s,
                        c = r && a || {};
                    Object.keys(e).forEach(function (n) {
                        var r = n,
                            u = e[n];
                        if ("offset" !== n) switch (r = t.normalizePropertyName(r, o), u) {
                            case RI:
                                u = i[n];
                                break;
                            case yI:
                                u = l[n];
                                break;
                            default:
                                u = t.normalizeStyleValue(n, r, u, o)
                        }
                        c[r] = u
                    }), r || u.push(c), a = c, s = n
                }), o.length) throw new Error("Unable to animate due to the following errors:\n - " + o.join("\n - "));
            return u
        }

        function AI(e, t, n, r) {
            switch (t) {
                case "start":
                    e.onStart(function () {
                        return r(n && wI(n, "start", e))
                    });
                    break;
                case "done":
                    e.onDone(function () {
                        return r(n && wI(n, "done", e))
                    });
                    break;
                case "destroy":
                    e.onDestroy(function () {
                        return r(n && wI(n, "destroy", e))
                    })
            }
        }

        function wI(e, t, n) {
            var r = n.totalTime,
                i = NI(e.element, e.triggerName, e.fromState, e.toState, t || e.phaseName, null == r ? e.totalTime : r, !!n.disabled),
                l = e._data;
            return null != l && (i._data = l), i
        }

        function NI(e, t, n, r, i, l, o) {
            return void 0 === i && (i = ""), void 0 === l && (l = 0), {
                element: e,
                triggerName: t,
                fromState: n,
                toState: r,
                phaseName: i,
                totalTime: l,
                disabled: !!o
            }
        }

        function PI(e, t, n) {
            var r;
            return e instanceof Map ? (r = e.get(t)) || e.set(t, r = n) : (r = e[t]) || (r = e[t] = n), r
        }

        function DI(e) {
            var t = e.indexOf(":");
            return [e.substring(1, t), e.substr(t + 1)]
        }
        var MI = function (e, t) {
                return !1
            },
            kI = function (e, t) {
                return !1
            },
            LI = function (e, t, n) {
                return []
            },
            xI = CI();
        if (xI || "undefined" != typeof Element) {
            if (MI = function (e, t) {
                    return e.contains(t)
                }, xI || Element.prototype.matches) kI = function (e, t) {
                return e.matches(t)
            };
            else {
                var FI = Element.prototype,
                    UI = FI.matchesSelector || FI.mozMatchesSelector || FI.msMatchesSelector || FI.oMatchesSelector || FI.webkitMatchesSelector;
                UI && (kI = function (e, t) {
                    return UI.apply(e, [t])
                })
            }
            LI = function (e, t, n) {
                var r = [];
                if (n) r.push.apply(r, c(e.querySelectorAll(t)));
                else {
                    var i = e.querySelector(t);
                    i && r.push(i)
                }
                return r
            }
        }
        var HI = null,
            GI = !1,
            BI = kI,
            VI = MI,
            WI = LI,
            jI = function () {
                function e() {}
                return e.prototype.validateStyleProperty = function (e) {
                    return function (e) {
                        HI || (HI = ("undefined" != typeof document ? document.body : null) || {}, GI = !!HI.style && "WebkitAppearance" in HI.style);
                        var t = !0;
                        return HI.style && ! function (e) {
                            return "ebkit" == e.substring(1, 6)
                        }(e) && !(t = e in HI.style) && GI && (t = "Webkit" + e.charAt(0).toUpperCase() + e.substr(1) in HI.style), t
                    }(e)
                }, e.prototype.matchesElement = function (e, t) {
                    return BI(e, t)
                }, e.prototype.containsElement = function (e, t) {
                    return VI(e, t)
                }, e.prototype.query = function (e, t, n) {
                    return WI(e, t, n)
                }, e.prototype.computeStyle = function (e, t, n) {
                    return n || ""
                }, e.prototype.animate = function (e, t, n, r, i, l, o) {
                    return void 0 === l && (l = []), new bI(n, r)
                }, e
            }(),
            YI = function () {
                function e() {}
                return e.NOOP = new jI, e
            }(),
            zI = 1e3;

        function KI(e) {
            if ("number" == typeof e) return e;
            var t = e.match(/^(-?[\.\d]+)(m?s)/);
            return !t || t.length < 2 ? 0 : qI(parseFloat(t[1]), t[2])
        }

        function qI(e, t) {
            switch (t) {
                case "s":
                    return e * zI;
                default:
                    return e
            }
        }

        function QI(e, t, n) {
            return e.hasOwnProperty("duration") ? e : function (e, t, n) {
                var r, i = 0,
                    l = "";
                if ("string" == typeof e) {
                    var o = e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);
                    if (null === o) return t.push('The provided timing value "' + e + '" is invalid.'), {
                        duration: 0,
                        delay: 0,
                        easing: ""
                    };
                    r = qI(parseFloat(o[1]), o[2]);
                    var u = o[3];
                    null != u && (i = qI(parseFloat(u), o[4]));
                    var s = o[5];
                    s && (l = s)
                } else r = e;
                if (!n) {
                    var a = !1,
                        c = t.length;
                    r < 0 && (t.push("Duration values below 0 are not allowed for this animation step."), a = !0), i < 0 && (t.push("Delay values below 0 are not allowed for this animation step."), a = !0), a && t.splice(c, 0, 'The provided timing value "' + e + '" is invalid.')
                }
                return {
                    duration: r,
                    delay: i,
                    easing: l
                }
            }(e, t, n)
        }

        function $I(e, t) {
            return void 0 === t && (t = {}), Object.keys(e).forEach(function (n) {
                t[n] = e[n]
            }), t
        }

        function ZI(e, t, n) {
            if (void 0 === n && (n = {}), t)
                for (var r in e) n[r] = e[r];
            else $I(e, n);
            return n
        }

        function XI(e, t, n) {
            return n ? t + ":" + n + ";" : ""
        }

        function JI(e) {
            for (var t = "", n = 0; n < e.style.length; n++) t += XI(0, r = e.style.item(n), e.style.getPropertyValue(r));
            for (var r in e.style) e.style.hasOwnProperty(r) && !r.startsWith("_") && (t += XI(0, r.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), e.style[r]));
            e.setAttribute("style", t)
        }

        function eA(e, t, n) {
            e.style && (Object.keys(t).forEach(function (r) {
                var i = sA(r);
                n && !n.hasOwnProperty(r) && (n[r] = e.style[i]), e.style[i] = t[r]
            }), CI() && JI(e))
        }

        function tA(e, t) {
            e.style && (Object.keys(t).forEach(function (t) {
                var n = sA(t);
                e.style[n] = ""
            }), CI() && JI(e))
        }

        function nA(e) {
            return Array.isArray(e) ? 1 == e.length ? e[0] : SI(e) : e
        }
        var rA = new RegExp("{{\\s*(.+?)\\s*}}", "g");

        function iA(e) {
            var t = [];
            if ("string" == typeof e) {
                for (var n = e.toString(), r = void 0; r = rA.exec(n);) t.push(r[1]);
                rA.lastIndex = 0
            }
            return t
        }

        function lA(e, t, n) {
            var r = e.toString(),
                i = r.replace(rA, function (e, r) {
                    var i = t[r];
                    return t.hasOwnProperty(r) || (n.push("Please provide a value for the animation param " + r), i = ""), i.toString()
                });
            return i == r ? e : i
        }

        function oA(e) {
            for (var t = [], n = e.next(); !n.done;) t.push(n.value), n = e.next();
            return t
        }
        var uA = /-+([a-z0-9])/g;

        function sA(e) {
            return e.replace(uA, function () {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                return e[1].toUpperCase()
            })
        }

        function aA(e, t, n) {
            switch (t.type) {
                case 7:
                    return e.visitTrigger(t, n);
                case 0:
                    return e.visitState(t, n);
                case 1:
                    return e.visitTransition(t, n);
                case 2:
                    return e.visitSequence(t, n);
                case 3:
                    return e.visitGroup(t, n);
                case 4:
                    return e.visitAnimate(t, n);
                case 5:
                    return e.visitKeyframes(t, n);
                case 6:
                    return e.visitStyle(t, n);
                case 8:
                    return e.visitReference(t, n);
                case 9:
                    return e.visitAnimateChild(t, n);
                case 10:
                    return e.visitAnimateRef(t, n);
                case 11:
                    return e.visitQuery(t, n);
                case 12:
                    return e.visitStagger(t, n);
                default:
                    throw new Error("Unable to resolve animation metadata node #" + t.type)
            }
        }
        var cA = "*",
            pA = new Set(["true", "1"]),
            hA = new Set(["false", "0"]);

        function dA(e, t) {
            var n = pA.has(e) || hA.has(e),
                r = pA.has(t) || hA.has(t);
            return function (i, l) {
                var o = e == cA || e == i,
                    u = t == cA || t == l;
                return !o && n && "boolean" == typeof i && (o = i ? pA.has(e) : hA.has(e)), !u && r && "boolean" == typeof l && (u = l ? pA.has(t) : hA.has(t)), o && u
            }
        }
        var fA = new RegExp("s*:selfs*,?", "g");

        function gA(e, t, n) {
            return new vA(e).build(t, n)
        }
        var vA = function () {
                function e(e) {
                    this._driver = e
                }
                return e.prototype.build = function (e, t) {
                    var n = new mA(t);
                    return this._resetContextStyleTimingState(n), aA(this, nA(e), n)
                }, e.prototype._resetContextStyleTimingState = function (e) {
                    e.currentQuerySelector = "", e.collectedStyles = {}, e.collectedStyles[""] = {}, e.currentTime = 0
                }, e.prototype.visitTrigger = function (e, t) {
                    var n = this,
                        r = t.queryCount = 0,
                        i = t.depCount = 0,
                        l = [],
                        o = [];
                    return "@" == e.name.charAt(0) && t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"), e.definitions.forEach(function (e) {
                        if (n._resetContextStyleTimingState(t), 0 == e.type) {
                            var u = e,
                                s = u.name;
                            s.toString().split(/\s*,\s*/).forEach(function (e) {
                                u.name = e, l.push(n.visitState(u, t))
                            }), u.name = s
                        } else if (1 == e.type) {
                            var a = n.visitTransition(e, t);
                            r += a.queryCount, i += a.depCount, o.push(a)
                        } else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")
                    }), {
                        type: 7,
                        name: e.name,
                        states: l,
                        transitions: o,
                        queryCount: r,
                        depCount: i,
                        options: null
                    }
                }, e.prototype.visitState = function (e, t) {
                    var n = this.visitStyle(e.styles, t),
                        r = e.options && e.options.params || null;
                    if (n.containsDynamicStyles) {
                        var i = new Set,
                            l = r || {};
                        if (n.styles.forEach(function (e) {
                                if (yA(e)) {
                                    var t = e;
                                    Object.keys(t).forEach(function (e) {
                                        iA(t[e]).forEach(function (e) {
                                            l.hasOwnProperty(e) || i.add(e)
                                        })
                                    })
                                }
                            }), i.size) {
                            var o = oA(i.values());
                            t.errors.push('state("' + e.name + '", ...) must define default values for all the following style substitutions: ' + o.join(", "))
                        }
                    }
                    return {
                        type: 0,
                        name: e.name,
                        style: n,
                        options: r ? {
                            params: r
                        } : null
                    }
                }, e.prototype.visitTransition = function (e, t) {
                    t.queryCount = 0, t.depCount = 0;
                    var n, r, i, l = aA(this, nA(e.animation), t);
                    return {
                        type: 1,
                        matchers: (n = e.expr, r = t.errors, i = [], "string" == typeof n ? n.split(/\s*,\s*/).forEach(function (e) {
                            return function (e, t, n) {
                                if (":" == e[0]) {
                                    var r = function (e, t) {
                                        switch (e) {
                                            case ":enter":
                                                return "void => *";
                                            case ":leave":
                                                return "* => void";
                                            case ":increment":
                                                return function (e, t) {
                                                    return parseFloat(t) > parseFloat(e)
                                                };
                                            case ":decrement":
                                                return function (e, t) {
                                                    return parseFloat(t) < parseFloat(e)
                                                };
                                            default:
                                                return t.push('The transition alias value "' + e + '" is not supported'), "* => *"
                                        }
                                    }(e, n);
                                    if ("function" == typeof r) return void t.push(r);
                                    e = r
                                }
                                var i = e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);
                                if (null == i || i.length < 4) return n.push('The provided transition expression "' + e + '" is not supported'), t;
                                var l = i[1],
                                    o = i[2],
                                    u = i[3];
                                t.push(dA(l, u)), "<" != o[0] || l == cA && u == cA || t.push(dA(u, l))
                            }(e, i, r)
                        }) : i.push(n), i),
                        animation: l,
                        queryCount: t.queryCount,
                        depCount: t.depCount,
                        options: SA(e.options)
                    }
                }, e.prototype.visitSequence = function (e, t) {
                    var n = this;
                    return {
                        type: 2,
                        steps: e.steps.map(function (e) {
                            return aA(n, e, t)
                        }),
                        options: SA(e.options)
                    }
                }, e.prototype.visitGroup = function (e, t) {
                    var n = this,
                        r = t.currentTime,
                        i = 0,
                        l = e.steps.map(function (e) {
                            t.currentTime = r;
                            var l = aA(n, e, t);
                            return i = Math.max(i, t.currentTime), l
                        });
                    return t.currentTime = i, {
                        type: 3,
                        steps: l,
                        options: SA(e.options)
                    }
                }, e.prototype.visitAnimate = function (e, t) {
                    var n, r = function (e, t) {
                        var n = null;
                        if (e.hasOwnProperty("duration")) n = e;
                        else if ("number" == typeof e) return EA(QI(e, t).duration, 0, "");
                        var r = e;
                        if (r.split(/\s+/).some(function (e) {
                                return "{" == e.charAt(0) && "{" == e.charAt(1)
                            })) {
                            var i = EA(0, 0, "");
                            return i.dynamic = !0, i.strValue = r, i
                        }
                        return EA((n = n || QI(r, t)).duration, n.delay, n.easing)
                    }(e.timings, t.errors);
                    t.currentAnimateTimings = r;
                    var i = e.styles ? e.styles : EI({});
                    if (5 == i.type) n = this.visitKeyframes(i, t);
                    else {
                        var l = e.styles,
                            o = !1;
                        if (!l) {
                            o = !0;
                            var u = {};
                            r.easing && (u.easing = r.easing), l = EI(u)
                        }
                        t.currentTime += r.duration + r.delay;
                        var s = this.visitStyle(l, t);
                        s.isEmptyStep = o, n = s
                    }
                    return t.currentAnimateTimings = null, {
                        type: 4,
                        timings: r,
                        style: n,
                        options: null
                    }
                }, e.prototype.visitStyle = function (e, t) {
                    var n = this._makeStyleAst(e, t);
                    return this._validateStyleAst(n, t), n
                }, e.prototype._makeStyleAst = function (e, t) {
                    var n = [];
                    Array.isArray(e.styles) ? e.styles.forEach(function (e) {
                        "string" == typeof e ? e == yI ? n.push(e) : t.errors.push("The provided style string value " + e + " is not allowed.") : n.push(e)
                    }) : n.push(e.styles);
                    var r = !1,
                        i = null;
                    return n.forEach(function (e) {
                        if (yA(e)) {
                            var t = e,
                                n = t.easing;
                            if (n && (i = n, delete t.easing), !r)
                                for (var l in t)
                                    if (t[l].toString().indexOf("{{") >= 0) {
                                        r = !0;
                                        break
                                    }
                        }
                    }), {
                        type: 6,
                        styles: n,
                        easing: i,
                        offset: e.offset,
                        containsDynamicStyles: r,
                        options: null
                    }
                }, e.prototype._validateStyleAst = function (e, t) {
                    var n = this,
                        r = t.currentAnimateTimings,
                        i = t.currentTime,
                        l = t.currentTime;
                    r && l > 0 && (l -= r.duration + r.delay), e.styles.forEach(function (e) {
                        "string" != typeof e && Object.keys(e).forEach(function (r) {
                            if (n._driver.validateStyleProperty(r)) {
                                var o, u, s, a = t.collectedStyles[t.currentQuerySelector],
                                    c = a[r],
                                    p = !0;
                                c && (l != i && l >= c.startTime && i <= c.endTime && (t.errors.push('The CSS property "' + r + '" that exists between the times of "' + c.startTime + 'ms" and "' + c.endTime + 'ms" is also being animated in a parallel animation between the times of "' + l + 'ms" and "' + i + 'ms"'), p = !1), l = c.startTime), p && (a[r] = {
                                    startTime: l,
                                    endTime: i
                                }), t.options && (o = t.errors, u = t.options.params || {}, (s = iA(e[r])).length && s.forEach(function (e) {
                                    u.hasOwnProperty(e) || o.push("Unable to resolve the local animation param " + e + " in the given list of values")
                                }))
                            } else t.errors.push('The provided animation property "' + r + '" is not a supported CSS property for animations')
                        })
                    })
                }, e.prototype.visitKeyframes = function (e, t) {
                    var n = this,
                        r = {
                            type: 5,
                            styles: [],
                            options: null
                        };
                    if (!t.currentAnimateTimings) return t.errors.push("keyframes() must be placed inside of a call to animate()"), r;
                    var i = 0,
                        l = [],
                        o = !1,
                        u = !1,
                        s = 0,
                        a = e.steps.map(function (e) {
                            var r = n._makeStyleAst(e, t),
                                a = null != r.offset ? r.offset : function (e) {
                                    if ("string" == typeof e) return null;
                                    var t = null;
                                    if (Array.isArray(e)) e.forEach(function (e) {
                                        if (yA(e) && e.hasOwnProperty("offset")) {
                                            var n = e;
                                            t = parseFloat(n.offset), delete n.offset
                                        }
                                    });
                                    else if (yA(e) && e.hasOwnProperty("offset")) {
                                        var n = e;
                                        t = parseFloat(n.offset), delete n.offset
                                    }
                                    return t
                                }(r.styles),
                                c = 0;
                            return null != a && (i++, c = r.offset = a), u = u || c < 0 || c > 1, o = o || c < s, s = c, l.push(c), r
                        });
                    u && t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"), o && t.errors.push("Please ensure that all keyframe offsets are in order");
                    var c = e.steps.length,
                        p = 0;
                    i > 0 && i < c ? t.errors.push("Not all style() steps within the declared keyframes() contain offsets") : 0 == i && (p = 1 / (c - 1));
                    var h = c - 1,
                        d = t.currentTime,
                        f = t.currentAnimateTimings,
                        g = f.duration;
                    return a.forEach(function (e, i) {
                        var o = p > 0 ? i == h ? 1 : p * i : l[i],
                            u = o * g;
                        t.currentTime = d + f.delay + u, f.duration = u, n._validateStyleAst(e, t), e.offset = o, r.styles.push(e)
                    }), r
                }, e.prototype.visitReference = function (e, t) {
                    return {
                        type: 8,
                        animation: aA(this, nA(e.animation), t),
                        options: SA(e.options)
                    }
                }, e.prototype.visitAnimateChild = function (e, t) {
                    return t.depCount++, {
                        type: 9,
                        options: SA(e.options)
                    }
                }, e.prototype.visitAnimateRef = function (e, t) {
                    return {
                        type: 10,
                        animation: this.visitReference(e.animation, t),
                        options: SA(e.options)
                    }
                }, e.prototype.visitQuery = function (e, t) {
                    var n = t.currentQuerySelector,
                        r = e.options || {};
                    t.queryCount++, t.currentQuery = e;
                    var i = a(function (e) {
                            var t = !!e.split(/\s*,\s*/).find(function (e) {
                                return ":self" == e
                            });
                            return t && (e = e.replace(fA, "")), [e = e.replace(/@\*/g, ".ng-trigger").replace(/@\w+/g, function (e) {
                                return ".ng-trigger-" + e.substr(1)
                            }).replace(/:animating/g, ".ng-animating"), t]
                        }(e.selector), 2),
                        l = i[0],
                        o = i[1];
                    t.currentQuerySelector = n.length ? n + " " + l : l, PI(t.collectedStyles, t.currentQuerySelector, {});
                    var u = aA(this, nA(e.animation), t);
                    return t.currentQuery = null, t.currentQuerySelector = n, {
                        type: 11,
                        selector: l,
                        limit: r.limit || 0,
                        optional: !!r.optional,
                        includeSelf: o,
                        animation: u,
                        originalSelector: e.selector,
                        options: SA(e.options)
                    }
                }, e.prototype.visitStagger = function (e, t) {
                    t.currentQuery || t.errors.push("stagger() can only be used inside of query()");
                    var n = "full" === e.timings ? {
                        duration: 0,
                        delay: 0,
                        easing: "full"
                    } : QI(e.timings, t.errors, !0);
                    return {
                        type: 12,
                        animation: aA(this, nA(e.animation), t),
                        timings: n,
                        options: null
                    }
                }, e
            }(),
            mA = function () {
                return function (e) {
                    this.errors = e, this.queryCount = 0, this.depCount = 0, this.currentTransition = null, this.currentQuery = null, this.currentQuerySelector = null, this.currentAnimateTimings = null, this.currentTime = 0, this.collectedStyles = {}, this.options = null
                }
            }();

        function yA(e) {
            return !Array.isArray(e) && "object" == typeof e
        }

        function SA(e) {
            var t;
            return e ? (e = $I(e)).params && (e.params = (t = e.params) ? $I(t) : null) : e = {}, e
        }

        function EA(e, t, n) {
            return {
                duration: e,
                delay: t,
                easing: n
            }
        }

        function OA(e, t, n, r, i, l, o, u) {
            return void 0 === o && (o = null), void 0 === u && (u = !1), {
                type: 1,
                element: e,
                keyframes: t,
                preStyleProps: n,
                postStyleProps: r,
                duration: i,
                delay: l,
                totalTime: i + l,
                easing: o,
                subTimeline: u
            }
        }
        var bA = function () {
                function e() {
                    this._map = new Map
                }
                return e.prototype.consume = function (e) {
                    var t = this._map.get(e);
                    return t ? this._map.delete(e) : t = [], t
                }, e.prototype.append = function (e, t) {
                    var n = this._map.get(e);
                    n || this._map.set(e, n = []), n.push.apply(n, c(t))
                }, e.prototype.has = function (e) {
                    return this._map.has(e)
                }, e.prototype.clear = function () {
                    this._map.clear()
                }, e
            }(),
            TA = new RegExp(":enter", "g"),
            RA = new RegExp(":leave", "g");

        function CA(e, t, n, r, i, l, o, u, s, a) {
            return void 0 === l && (l = {}), void 0 === o && (o = {}), void 0 === a && (a = []), (new _A).buildKeyframes(e, t, n, r, i, l, o, u, s, a)
        }
        var _A = function () {
                function e() {}
                return e.prototype.buildKeyframes = function (e, t, n, r, i, l, o, u, s, a) {
                    void 0 === a && (a = []), s = s || new bA;
                    var c = new AA(e, t, s, r, i, a, []);
                    c.options = u, c.currentTimeline.setStyles([l], null, c.errors, u), aA(this, n, c);
                    var p = c.timelines.filter(function (e) {
                        return e.containsAnimation()
                    });
                    if (p.length && Object.keys(o).length) {
                        var h = p[p.length - 1];
                        h.allowOnlyTimelineStyles() || h.setStyles([o], null, c.errors, u)
                    }
                    return p.length ? p.map(function (e) {
                        return e.buildKeyframes()
                    }) : [OA(t, [], [], [], 0, 0, "", !1)]
                }, e.prototype.visitTrigger = function (e, t) {}, e.prototype.visitState = function (e, t) {}, e.prototype.visitTransition = function (e, t) {}, e.prototype.visitAnimateChild = function (e, t) {
                    var n = t.subInstructions.consume(t.element);
                    if (n) {
                        var r = t.createSubContext(e.options),
                            i = t.currentTimeline.currentTime,
                            l = this._visitSubInstructions(n, r, r.options);
                        i != l && t.transformIntoNewTimeline(l)
                    }
                    t.previousNode = e
                }, e.prototype.visitAnimateRef = function (e, t) {
                    var n = t.createSubContext(e.options);
                    n.transformIntoNewTimeline(), this.visitReference(e.animation, n), t.transformIntoNewTimeline(n.currentTimeline.currentTime), t.previousNode = e
                }, e.prototype._visitSubInstructions = function (e, t, n) {
                    var r = t.currentTimeline.currentTime,
                        i = null != n.duration ? KI(n.duration) : null,
                        l = null != n.delay ? KI(n.delay) : null;
                    return 0 !== i && e.forEach(function (e) {
                        var n = t.appendInstructionToTimeline(e, i, l);
                        r = Math.max(r, n.duration + n.delay)
                    }), r
                }, e.prototype.visitReference = function (e, t) {
                    t.updateOptions(e.options, !0), aA(this, e.animation, t), t.previousNode = e
                }, e.prototype.visitSequence = function (e, t) {
                    var n = this,
                        r = t.subContextCount,
                        i = t,
                        l = e.options;
                    if (l && (l.params || l.delay) && ((i = t.createSubContext(l)).transformIntoNewTimeline(), null != l.delay)) {
                        6 == i.previousNode.type && (i.currentTimeline.snapshotCurrentStyles(), i.previousNode = IA);
                        var o = KI(l.delay);
                        i.delayNextStep(o)
                    }
                    e.steps.length && (e.steps.forEach(function (e) {
                        return aA(n, e, i)
                    }), i.currentTimeline.applyStylesToKeyframe(), i.subContextCount > r && i.transformIntoNewTimeline()), t.previousNode = e
                }, e.prototype.visitGroup = function (e, t) {
                    var n = this,
                        r = [],
                        i = t.currentTimeline.currentTime,
                        l = e.options && e.options.delay ? KI(e.options.delay) : 0;
                    e.steps.forEach(function (o) {
                        var u = t.createSubContext(e.options);
                        l && u.delayNextStep(l), aA(n, o, u), i = Math.max(i, u.currentTimeline.currentTime), r.push(u.currentTimeline)
                    }), r.forEach(function (e) {
                        return t.currentTimeline.mergeTimelineCollectedStyles(e)
                    }), t.transformIntoNewTimeline(i), t.previousNode = e
                }, e.prototype._visitTiming = function (e, t) {
                    if (e.dynamic) {
                        var n = e.strValue;
                        return QI(t.params ? lA(n, t.params, t.errors) : n, t.errors)
                    }
                    return {
                        duration: e.duration,
                        delay: e.delay,
                        easing: e.easing
                    }
                }, e.prototype.visitAnimate = function (e, t) {
                    var n = t.currentAnimateTimings = this._visitTiming(e.timings, t),
                        r = t.currentTimeline;
                    n.delay && (t.incrementTime(n.delay), r.snapshotCurrentStyles());
                    var i = e.style;
                    5 == i.type ? this.visitKeyframes(i, t) : (t.incrementTime(n.duration), this.visitStyle(i, t), r.applyStylesToKeyframe()), t.currentAnimateTimings = null, t.previousNode = e
                }, e.prototype.visitStyle = function (e, t) {
                    var n = t.currentTimeline,
                        r = t.currentAnimateTimings;
                    !r && n.getCurrentStyleProperties().length && n.forwardFrame();
                    var i = r && r.easing || e.easing;
                    e.isEmptyStep ? n.applyEmptyStep(i) : n.setStyles(e.styles, i, t.errors, t.options), t.previousNode = e
                }, e.prototype.visitKeyframes = function (e, t) {
                    var n = t.currentAnimateTimings,
                        r = t.currentTimeline.duration,
                        i = n.duration,
                        l = t.createSubContext().currentTimeline;
                    l.easing = n.easing, e.styles.forEach(function (e) {
                        l.forwardTime((e.offset || 0) * i), l.setStyles(e.styles, e.easing, t.errors, t.options), l.applyStylesToKeyframe()
                    }), t.currentTimeline.mergeTimelineCollectedStyles(l), t.transformIntoNewTimeline(r + i), t.previousNode = e
                }, e.prototype.visitQuery = function (e, t) {
                    var n = this,
                        r = t.currentTimeline.currentTime,
                        i = e.options || {},
                        l = i.delay ? KI(i.delay) : 0;
                    l && (6 === t.previousNode.type || 0 == r && t.currentTimeline.getCurrentStyleProperties().length) && (t.currentTimeline.snapshotCurrentStyles(), t.previousNode = IA);
                    var o = r,
                        u = t.invokeQuery(e.selector, e.originalSelector, e.limit, e.includeSelf, !!i.optional, t.errors);
                    t.currentQueryTotal = u.length;
                    var s = null;
                    u.forEach(function (r, i) {
                        t.currentQueryIndex = i;
                        var u = t.createSubContext(e.options, r);
                        l && u.delayNextStep(l), r === t.element && (s = u.currentTimeline), aA(n, e.animation, u), u.currentTimeline.applyStylesToKeyframe(), o = Math.max(o, u.currentTimeline.currentTime)
                    }), t.currentQueryIndex = 0, t.currentQueryTotal = 0, t.transformIntoNewTimeline(o), s && (t.currentTimeline.mergeTimelineCollectedStyles(s), t.currentTimeline.snapshotCurrentStyles()), t.previousNode = e
                }, e.prototype.visitStagger = function (e, t) {
                    var n = t.parentContext,
                        r = t.currentTimeline,
                        i = e.timings,
                        l = Math.abs(i.duration),
                        o = l * (t.currentQueryTotal - 1),
                        u = l * t.currentQueryIndex;
                    switch (i.duration < 0 ? "reverse" : i.easing) {
                        case "reverse":
                            u = o - u;
                            break;
                        case "full":
                            u = n.currentStaggerTime
                    }
                    var s = t.currentTimeline;
                    u && s.delayNextStep(u);
                    var a = s.currentTime;
                    aA(this, e.animation, t), t.previousNode = e, n.currentStaggerTime = r.currentTime - a + (r.startTime - n.currentTimeline.startTime)
                }, e
            }(),
            IA = {},
            AA = function () {
                function e(e, t, n, r, i, l, o, u) {
                    this._driver = e, this.element = t, this.subInstructions = n, this._enterClassName = r, this._leaveClassName = i, this.errors = l, this.timelines = o, this.parentContext = null, this.currentAnimateTimings = null, this.previousNode = IA, this.subContextCount = 0, this.options = {}, this.currentQueryIndex = 0, this.currentQueryTotal = 0, this.currentStaggerTime = 0, this.currentTimeline = u || new wA(this._driver, t, 0), o.push(this.currentTimeline)
                }
                return Object.defineProperty(e.prototype, "params", {
                    get: function () {
                        return this.options.params
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.updateOptions = function (e, t) {
                    var n = this;
                    if (e) {
                        var r = e,
                            i = this.options;
                        null != r.duration && (i.duration = KI(r.duration)), null != r.delay && (i.delay = KI(r.delay));
                        var l = r.params;
                        if (l) {
                            var o = i.params;
                            o || (o = this.options.params = {}), Object.keys(l).forEach(function (e) {
                                t && o.hasOwnProperty(e) || (o[e] = lA(l[e], o, n.errors))
                            })
                        }
                    }
                }, e.prototype._copyOptions = function () {
                    var e = {};
                    if (this.options) {
                        var t = this.options.params;
                        if (t) {
                            var n = e.params = {};
                            Object.keys(t).forEach(function (e) {
                                n[e] = t[e]
                            })
                        }
                    }
                    return e
                }, e.prototype.createSubContext = function (t, n, r) {
                    void 0 === t && (t = null);
                    var i = n || this.element,
                        l = new e(this._driver, i, this.subInstructions, this._enterClassName, this._leaveClassName, this.errors, this.timelines, this.currentTimeline.fork(i, r || 0));
                    return l.previousNode = this.previousNode, l.currentAnimateTimings = this.currentAnimateTimings, l.options = this._copyOptions(), l.updateOptions(t), l.currentQueryIndex = this.currentQueryIndex, l.currentQueryTotal = this.currentQueryTotal, l.parentContext = this, this.subContextCount++, l
                }, e.prototype.transformIntoNewTimeline = function (e) {
                    return this.previousNode = IA, this.currentTimeline = this.currentTimeline.fork(this.element, e), this.timelines.push(this.currentTimeline), this.currentTimeline
                }, e.prototype.appendInstructionToTimeline = function (e, t, n) {
                    var r = {
                            duration: null != t ? t : e.duration,
                            delay: this.currentTimeline.currentTime + (null != n ? n : 0) + e.delay,
                            easing: ""
                        },
                        i = new NA(this._driver, e.element, e.keyframes, e.preStyleProps, e.postStyleProps, r, e.stretchStartingKeyframe);
                    return this.timelines.push(i), r
                }, e.prototype.incrementTime = function (e) {
                    this.currentTimeline.forwardTime(this.currentTimeline.duration + e)
                }, e.prototype.delayNextStep = function (e) {
                    e > 0 && this.currentTimeline.delayNextStep(e)
                }, e.prototype.invokeQuery = function (e, t, n, r, i, l) {
                    var o = [];
                    if (r && o.push(this.element), e.length > 0) {
                        e = (e = e.replace(TA, "." + this._enterClassName)).replace(RA, "." + this._leaveClassName);
                        var u = this._driver.query(this.element, e, 1 != n);
                        0 !== n && (u = n < 0 ? u.slice(u.length + n, u.length) : u.slice(0, n)), o.push.apply(o, c(u))
                    }
                    return i || 0 != o.length || l.push('`query("' + t + '")` returned zero elements. (Use `query("' + t + '", { optional: true })` if you wish to allow this.)'), o
                }, e
            }(),
            wA = function () {
                function e(e, t, n, r) {
                    this._driver = e, this.element = t, this.startTime = n, this._elementTimelineStylesLookup = r, this.duration = 0, this._previousKeyframe = {}, this._currentKeyframe = {}, this._keyframes = new Map, this._styleSummary = {}, this._pendingStyles = {}, this._backFill = {}, this._currentEmptyStepKeyframe = null, this._elementTimelineStylesLookup || (this._elementTimelineStylesLookup = new Map), this._localTimelineStyles = Object.create(this._backFill, {}), this._globalTimelineStyles = this._elementTimelineStylesLookup.get(t), this._globalTimelineStyles || (this._globalTimelineStyles = this._localTimelineStyles, this._elementTimelineStylesLookup.set(t, this._localTimelineStyles)), this._loadKeyframe()
                }
                return e.prototype.containsAnimation = function () {
                    switch (this._keyframes.size) {
                        case 0:
                            return !1;
                        case 1:
                            return this.getCurrentStyleProperties().length > 0;
                        default:
                            return !0
                    }
                }, e.prototype.getCurrentStyleProperties = function () {
                    return Object.keys(this._currentKeyframe)
                }, Object.defineProperty(e.prototype, "currentTime", {
                    get: function () {
                        return this.startTime + this.duration
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.delayNextStep = function (e) {
                    var t = 1 == this._keyframes.size && Object.keys(this._pendingStyles).length;
                    this.duration || t ? (this.forwardTime(this.currentTime + e), t && this.snapshotCurrentStyles()) : this.startTime += e
                }, e.prototype.fork = function (t, n) {
                    return this.applyStylesToKeyframe(), new e(this._driver, t, n || this.currentTime, this._elementTimelineStylesLookup)
                }, e.prototype._loadKeyframe = function () {
                    this._currentKeyframe && (this._previousKeyframe = this._currentKeyframe), this._currentKeyframe = this._keyframes.get(this.duration), this._currentKeyframe || (this._currentKeyframe = Object.create(this._backFill, {}), this._keyframes.set(this.duration, this._currentKeyframe))
                }, e.prototype.forwardFrame = function () {
                    this.duration += 1, this._loadKeyframe()
                }, e.prototype.forwardTime = function (e) {
                    this.applyStylesToKeyframe(), this.duration = e, this._loadKeyframe()
                }, e.prototype._updateStyle = function (e, t) {
                    this._localTimelineStyles[e] = t, this._globalTimelineStyles[e] = t, this._styleSummary[e] = {
                        time: this.currentTime,
                        value: t
                    }
                }, e.prototype.allowOnlyTimelineStyles = function () {
                    return this._currentEmptyStepKeyframe !== this._currentKeyframe
                }, e.prototype.applyEmptyStep = function (e) {
                    var t = this;
                    e && (this._previousKeyframe.easing = e), Object.keys(this._globalTimelineStyles).forEach(function (e) {
                        t._backFill[e] = t._globalTimelineStyles[e] || yI, t._currentKeyframe[e] = yI
                    }), this._currentEmptyStepKeyframe = this._currentKeyframe
                }, e.prototype.setStyles = function (e, t, n, r) {
                    var i = this;
                    t && (this._previousKeyframe.easing = t);
                    var l = r && r.params || {},
                        o = function (e, t) {
                            var n, r = {};
                            return e.forEach(function (e) {
                                "*" === e ? (n = n || Object.keys(t)).forEach(function (e) {
                                    r[e] = yI
                                }) : ZI(e, !1, r)
                            }), r
                        }(e, this._globalTimelineStyles);
                    Object.keys(o).forEach(function (e) {
                        var t = lA(o[e], l, n);
                        i._pendingStyles[e] = t, i._localTimelineStyles.hasOwnProperty(e) || (i._backFill[e] = i._globalTimelineStyles.hasOwnProperty(e) ? i._globalTimelineStyles[e] : yI), i._updateStyle(e, t)
                    })
                }, e.prototype.applyStylesToKeyframe = function () {
                    var e = this,
                        t = this._pendingStyles,
                        n = Object.keys(t);
                    0 != n.length && (this._pendingStyles = {}, n.forEach(function (n) {
                        e._currentKeyframe[n] = t[n]
                    }), Object.keys(this._localTimelineStyles).forEach(function (t) {
                        e._currentKeyframe.hasOwnProperty(t) || (e._currentKeyframe[t] = e._localTimelineStyles[t])
                    }))
                }, e.prototype.snapshotCurrentStyles = function () {
                    var e = this;
                    Object.keys(this._localTimelineStyles).forEach(function (t) {
                        var n = e._localTimelineStyles[t];
                        e._pendingStyles[t] = n, e._updateStyle(t, n)
                    })
                }, e.prototype.getFinalKeyframe = function () {
                    return this._keyframes.get(this.duration)
                }, Object.defineProperty(e.prototype, "properties", {
                    get: function () {
                        var e = [];
                        for (var t in this._currentKeyframe) e.push(t);
                        return e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.mergeTimelineCollectedStyles = function (e) {
                    var t = this;
                    Object.keys(e._styleSummary).forEach(function (n) {
                        var r = t._styleSummary[n],
                            i = e._styleSummary[n];
                        (!r || i.time > r.time) && t._updateStyle(n, i.value)
                    })
                }, e.prototype.buildKeyframes = function () {
                    var e = this;
                    this.applyStylesToKeyframe();
                    var t = new Set,
                        n = new Set,
                        r = 1 === this._keyframes.size && 0 === this.duration,
                        i = [];
                    this._keyframes.forEach(function (l, o) {
                        var u = ZI(l, !0);
                        Object.keys(u).forEach(function (e) {
                            var r = u[e];
                            r == RI ? t.add(e) : r == yI && n.add(e)
                        }), r || (u.offset = o / e.duration), i.push(u)
                    });
                    var l = t.size ? oA(t.values()) : [],
                        o = n.size ? oA(n.values()) : [];
                    if (r) {
                        var u = i[0],
                            s = $I(u);
                        u.offset = 0, s.offset = 1, i = [u, s]
                    }
                    return OA(this.element, i, l, o, this.duration, this.startTime, this.easing, !1)
                }, e
            }(),
            NA = function (e) {
                function t(t, n, r, i, l, o, u) {
                    void 0 === u && (u = !1);
                    var s = e.call(this, t, n, o.delay) || this;
                    return s.element = n, s.keyframes = r, s.preStyleProps = i, s.postStyleProps = l, s._stretchStartingKeyframe = u, s.timings = {
                        duration: o.duration,
                        delay: o.delay,
                        easing: o.easing
                    }, s
                }
                return i(t, e), t.prototype.containsAnimation = function () {
                    return this.keyframes.length > 1
                }, t.prototype.buildKeyframes = function () {
                    var e = this.keyframes,
                        t = this.timings,
                        n = t.delay,
                        r = t.duration,
                        i = t.easing;
                    if (this._stretchStartingKeyframe && n) {
                        var l = [],
                            o = r + n,
                            u = n / o,
                            s = ZI(e[0], !1);
                        s.offset = 0, l.push(s);
                        var a = ZI(e[0], !1);
                        a.offset = PA(u), l.push(a);
                        for (var c = e.length - 1, p = 1; p <= c; p++) {
                            var h = ZI(e[p], !1);
                            h.offset = PA((n + h.offset * r) / o), l.push(h)
                        }
                        r = o, n = 0, i = "", e = l
                    }
                    return OA(this.element, e, this.preStyleProps, this.postStyleProps, r, n, i, !0)
                }, t
            }(wA);

        function PA(e, t) {
            void 0 === t && (t = 3);
            var n = Math.pow(10, t - 1);
            return Math.round(e * n) / n
        }
        var DA = function () {
                return function () {}
            }(),
            MA = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i(t, e), t.prototype.normalizePropertyName = function (e, t) {
                    return sA(e)
                }, t.prototype.normalizeStyleValue = function (e, t, n, r) {
                    var i = "",
                        l = n.toString().trim();
                    if (kA[t] && 0 !== n && "0" !== n)
                        if ("number" == typeof n) i = "px";
                        else {
                            var o = n.match(/^[+-]?[\d\.]+([a-z]*)$/);
                            o && 0 == o[1].length && r.push("Please provide a CSS unit value for " + e + ":" + n)
                        } return l + i
                }, t
            }(DA),
            kA = LA("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));

        function LA(e) {
            var t = {};
            return e.forEach(function (e) {
                return t[e] = !0
            }), t
        }

        function xA(e, t, n, r, i, l, o, u, s, a, c, p, h) {
            return {
                type: 0,
                element: e,
                triggerName: t,
                isRemovalTransition: i,
                fromState: n,
                fromStyles: l,
                toState: r,
                toStyles: o,
                timelines: u,
                queriedElements: s,
                preStyleProps: a,
                postStyleProps: c,
                totalTime: p,
                errors: h
            }
        }
        var FA = {},
            UA = function () {
                function e(e, t, n) {
                    this._triggerName = e, this.ast = t, this._stateStyles = n
                }
                return e.prototype.match = function (e, t, n, r) {
                    return function (e, t, n, r, i) {
                        return e.some(function (e) {
                            return e(t, n, r, i)
                        })
                    }(this.ast.matchers, e, t, n, r)
                }, e.prototype.buildStyles = function (e, t, n) {
                    var r = this._stateStyles["*"],
                        i = this._stateStyles[e],
                        l = r ? r.buildStyles(t, n) : {};
                    return i ? i.buildStyles(t, n) : l
                }, e.prototype.build = function (e, t, n, r, i, o, u, s, a, c) {
                    var p = [],
                        h = this.ast.options && this.ast.options.params || FA,
                        d = this.buildStyles(n, u && u.params || FA, p),
                        f = s && s.params || FA,
                        g = this.buildStyles(r, f, p),
                        v = new Set,
                        m = new Map,
                        y = new Map,
                        S = "void" === r,
                        E = {
                            params: l({}, h, f)
                        },
                        O = c ? [] : CA(e, t, this.ast.animation, i, o, d, g, E, a, p),
                        b = 0;
                    if (O.forEach(function (e) {
                            b = Math.max(e.duration + e.delay, b)
                        }), p.length) return xA(t, this._triggerName, n, r, S, d, g, [], [], m, y, b, p);
                    O.forEach(function (e) {
                        var n = e.element,
                            r = PI(m, n, {});
                        e.preStyleProps.forEach(function (e) {
                            return r[e] = !0
                        });
                        var i = PI(y, n, {});
                        e.postStyleProps.forEach(function (e) {
                            return i[e] = !0
                        }), n !== t && v.add(n)
                    });
                    var T = oA(v.values());
                    return xA(t, this._triggerName, n, r, S, d, g, O, T, m, y, b)
                }, e
            }(),
            HA = function () {
                function e(e, t) {
                    this.styles = e, this.defaultParams = t
                }
                return e.prototype.buildStyles = function (e, t) {
                    var n = {},
                        r = $I(this.defaultParams);
                    return Object.keys(e).forEach(function (t) {
                        var n = e[t];
                        null != n && (r[t] = n)
                    }), this.styles.styles.forEach(function (e) {
                        if ("string" != typeof e) {
                            var i = e;
                            Object.keys(i).forEach(function (e) {
                                var l = i[e];
                                l.length > 1 && (l = lA(l, r, t)), n[e] = l
                            })
                        }
                    }), n
                }, e
            }(),
            GA = function () {
                function e(e, t) {
                    var n = this;
                    this.name = e, this.ast = t, this.transitionFactories = [], this.states = {}, t.states.forEach(function (e) {
                        n.states[e.name] = new HA(e.style, e.options && e.options.params || {})
                    }), BA(this.states, "true", "1"), BA(this.states, "false", "0"), t.transitions.forEach(function (t) {
                        n.transitionFactories.push(new UA(e, t, n.states))
                    }), this.fallbackTransition = new UA(e, {
                        type: 1,
                        animation: {
                            type: 2,
                            steps: [],
                            options: null
                        },
                        matchers: [function (e, t) {
                            return !0
                        }],
                        options: null,
                        queryCount: 0,
                        depCount: 0
                    }, this.states)
                }
                return Object.defineProperty(e.prototype, "containsQueries", {
                    get: function () {
                        return this.ast.queryCount > 0
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.matchTransition = function (e, t, n, r) {
                    return this.transitionFactories.find(function (i) {
                        return i.match(e, t, n, r)
                    }) || null
                }, e.prototype.matchStyles = function (e, t, n) {
                    return this.fallbackTransition.buildStyles(e, t, n)
                }, e
            }();

        function BA(e, t, n) {
            e.hasOwnProperty(t) ? e.hasOwnProperty(n) || (e[n] = e[t]) : e.hasOwnProperty(n) && (e[t] = e[n])
        }
        var VA = new bA,
            WA = function () {
                function e(e, t, n) {
                    this.bodyNode = e, this._driver = t, this._normalizer = n, this._animations = {}, this._playersById = {}, this.players = []
                }
                return e.prototype.register = function (e, t) {
                    var n = [],
                        r = gA(this._driver, t, n);
                    if (n.length) throw new Error("Unable to build the animation due to the following errors: " + n.join("\n"));
                    this._animations[e] = r
                }, e.prototype._buildPlayer = function (e, t, n) {
                    var r = e.element,
                        i = II(0, this._normalizer, 0, e.keyframes, t, n);
                    return this._driver.animate(r, i, e.duration, e.delay, e.easing, [], !0)
                }, e.prototype.create = function (e, t, n) {
                    var r = this;
                    void 0 === n && (n = {});
                    var i, l = [],
                        o = this._animations[e],
                        u = new Map;
                    if (o ? (i = CA(this._driver, t, o, "ng-enter", "ng-leave", {}, {}, n, VA, l)).forEach(function (e) {
                            var t = PI(u, e.element, {});
                            e.postStyleProps.forEach(function (e) {
                                return t[e] = null
                            })
                        }) : (l.push("The requested animation doesn't exist or has already been destroyed"), i = []), l.length) throw new Error("Unable to create the animation due to the following errors: " + l.join("\n"));
                    u.forEach(function (e, t) {
                        Object.keys(e).forEach(function (n) {
                            e[n] = r._driver.computeStyle(t, n, yI)
                        })
                    });
                    var s = _I(i.map(function (e) {
                        var t = u.get(e.element);
                        return r._buildPlayer(e, {}, t)
                    }));
                    return this._playersById[e] = s, s.onDestroy(function () {
                        return r.destroy(e)
                    }), this.players.push(s), s
                }, e.prototype.destroy = function (e) {
                    var t = this._getPlayer(e);
                    t.destroy(), delete this._playersById[e];
                    var n = this.players.indexOf(t);
                    n >= 0 && this.players.splice(n, 1)
                }, e.prototype._getPlayer = function (e) {
                    var t = this._playersById[e];
                    if (!t) throw new Error("Unable to find the timeline player referenced by " + e);
                    return t
                }, e.prototype.listen = function (e, t, n, r) {
                    var i = NI(t, "", "", "");
                    return AI(this._getPlayer(e), n, i, r),
                        function () {}
                }, e.prototype.command = function (e, t, n, r) {
                    if ("register" != n)
                        if ("create" != n) {
                            var i = this._getPlayer(e);
                            switch (n) {
                                case "play":
                                    i.play();
                                    break;
                                case "pause":
                                    i.pause();
                                    break;
                                case "reset":
                                    i.reset();
                                    break;
                                case "restart":
                                    i.restart();
                                    break;
                                case "finish":
                                    i.finish();
                                    break;
                                case "init":
                                    i.init();
                                    break;
                                case "setPosition":
                                    i.setPosition(parseFloat(r[0]));
                                    break;
                                case "destroy":
                                    this.destroy(e)
                            }
                        } else this.create(e, t, r[0] || {});
                    else this.register(e, r[0])
                }, e
            }(),
            jA = [],
            YA = {
                namespaceId: "",
                setForRemoval: !1,
                setForMove: !1,
                hasAnimation: !1,
                removedBeforeQueried: !1
            },
            zA = {
                namespaceId: "",
                setForMove: !1,
                setForRemoval: !1,
                hasAnimation: !1,
                removedBeforeQueried: !0
            },
            KA = "__ng_removed",
            qA = function () {
                function e(e, t) {
                    void 0 === t && (t = ""), this.namespaceId = t;
                    var n = e && e.hasOwnProperty("value");
                    if (this.value = function (e) {
                            return null != e ? e : null
                        }(n ? e.value : e), n) {
                        var r = $I(e);
                        delete r.value, this.options = r
                    } else this.options = {};
                    this.options.params || (this.options.params = {})
                }
                return Object.defineProperty(e.prototype, "params", {
                    get: function () {
                        return this.options.params
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.absorbOptions = function (e) {
                    var t = e.params;
                    if (t) {
                        var n = this.options.params;
                        Object.keys(t).forEach(function (e) {
                            null == n[e] && (n[e] = t[e])
                        })
                    }
                }, e
            }(),
            QA = new qA("void"),
            $A = function () {
                function e(e, t, n) {
                    this.id = e, this.hostElement = t, this._engine = n, this.players = [], this._triggers = {}, this._queue = [], this._elementListeners = new Map, this._hostClassName = "ng-tns-" + e, iw(t, this._hostClassName)
                }
                return e.prototype.listen = function (e, t, n, r) {
                    var i, l = this;
                    if (!this._triggers.hasOwnProperty(t)) throw new Error('Unable to listen on the animation trigger event "' + n + '" because the animation trigger "' + t + "\" doesn't exist!");
                    if (null == n || 0 == n.length) throw new Error('Unable to listen on the animation trigger "' + t + '" because the provided event is undefined!');
                    if ("start" != (i = n) && "done" != i) throw new Error('The provided animation trigger event "' + n + '" for the animation trigger "' + t + '" is not supported!');
                    var o = PI(this._elementListeners, e, []),
                        u = {
                            name: t,
                            phase: n,
                            callback: r
                        };
                    o.push(u);
                    var s = PI(this._engine.statesByElement, e, {});
                    return s.hasOwnProperty(t) || (iw(e, "ng-trigger"), iw(e, "ng-trigger-" + t), s[t] = QA),
                        function () {
                            l._engine.afterFlush(function () {
                                var e = o.indexOf(u);
                                e >= 0 && o.splice(e, 1), l._triggers[t] || delete s[t]
                            })
                        }
                }, e.prototype.register = function (e, t) {
                    return !this._triggers[e] && (this._triggers[e] = t, !0)
                }, e.prototype._getTrigger = function (e) {
                    var t = this._triggers[e];
                    if (!t) throw new Error('The provided animation trigger "' + e + '" has not been registered!');
                    return t
                }, e.prototype.trigger = function (e, t, n, r) {
                    var i = this;
                    void 0 === r && (r = !0);
                    var l = this._getTrigger(t),
                        o = new XA(this.id, t, e),
                        u = this._engine.statesByElement.get(e);
                    u || (iw(e, "ng-trigger"), iw(e, "ng-trigger-" + t), this._engine.statesByElement.set(e, u = {}));
                    var s = u[t],
                        a = new qA(n, this.id);
                    if (!(n && n.hasOwnProperty("value")) && s && a.absorbOptions(s.options), u[t] = a, s || (s = QA), "void" === a.value || s.value !== a.value) {
                        var c = PI(this._engine.playersByElement, e, []);
                        c.forEach(function (e) {
                            e.namespaceId == i.id && e.triggerName == t && e.queued && e.destroy()
                        });
                        var p = l.matchTransition(s.value, a.value, e, a.params),
                            h = !1;
                        if (!p) {
                            if (!r) return;
                            p = l.fallbackTransition, h = !0
                        }
                        return this._engine.totalQueuedPlayers++, this._queue.push({
                            element: e,
                            triggerName: t,
                            transition: p,
                            fromState: s,
                            toState: a,
                            player: o,
                            isFallbackTransition: h
                        }), h || (iw(e, "ng-animate-queued"), o.onStart(function () {
                            lw(e, "ng-animate-queued")
                        })), o.onDone(function () {
                            var t = i.players.indexOf(o);
                            t >= 0 && i.players.splice(t, 1);
                            var n = i._engine.playersByElement.get(e);
                            if (n) {
                                var r = n.indexOf(o);
                                r >= 0 && n.splice(r, 1)
                            }
                        }), this.players.push(o), c.push(o), o
                    }
                    if (! function (e, t) {
                            var n = Object.keys(e),
                                r = Object.keys(t);
                            if (n.length != r.length) return !1;
                            for (var i = 0; i < n.length; i++) {
                                var l = n[i];
                                if (!t.hasOwnProperty(l) || e[l] !== t[l]) return !1
                            }
                            return !0
                        }(s.params, a.params)) {
                        var d = [],
                            f = l.matchStyles(s.value, s.params, d),
                            g = l.matchStyles(a.value, a.params, d);
                        d.length ? this._engine.reportError(d) : this._engine.afterFlush(function () {
                            tA(e, f), eA(e, g)
                        })
                    }
                }, e.prototype.deregister = function (e) {
                    var t = this;
                    delete this._triggers[e], this._engine.statesByElement.forEach(function (t, n) {
                        delete t[e]
                    }), this._elementListeners.forEach(function (n, r) {
                        t._elementListeners.set(r, n.filter(function (t) {
                            return t.name != e
                        }))
                    })
                }, e.prototype.clearElementCache = function (e) {
                    this._engine.statesByElement.delete(e), this._elementListeners.delete(e);
                    var t = this._engine.playersByElement.get(e);
                    t && (t.forEach(function (e) {
                        return e.destroy()
                    }), this._engine.playersByElement.delete(e))
                }, e.prototype._signalRemovalForInnerTriggers = function (e, t, n) {
                    var r = this;
                    void 0 === n && (n = !1), this._engine.driver.query(e, ".ng-trigger", !0).forEach(function (e) {
                        if (!e[KA]) {
                            var n = r._engine.fetchNamespacesByElement(e);
                            n.size ? n.forEach(function (n) {
                                return n.triggerLeaveAnimation(e, t, !1, !0)
                            }) : r.clearElementCache(e)
                        }
                    })
                }, e.prototype.triggerLeaveAnimation = function (e, t, n, r) {
                    var i = this,
                        l = this._engine.statesByElement.get(e);
                    if (l) {
                        var o = [];
                        if (Object.keys(l).forEach(function (t) {
                                if (i._triggers[t]) {
                                    var n = i.trigger(e, t, "void", r);
                                    n && o.push(n)
                                }
                            }), o.length) return this._engine.markElementAsRemoved(this.id, e, !0, t), n && _I(o).onDone(function () {
                            return i._engine.processLeaveNode(e)
                        }), !0
                    }
                    return !1
                }, e.prototype.prepareLeaveAnimationListeners = function (e) {
                    var t = this,
                        n = this._elementListeners.get(e);
                    if (n) {
                        var r = new Set;
                        n.forEach(function (n) {
                            var i = n.name;
                            if (!r.has(i)) {
                                r.add(i);
                                var l = t._triggers[i].fallbackTransition,
                                    o = t._engine.statesByElement.get(e)[i] || QA,
                                    u = new qA("void"),
                                    s = new XA(t.id, i, e);
                                t._engine.totalQueuedPlayers++, t._queue.push({
                                    element: e,
                                    triggerName: i,
                                    transition: l,
                                    fromState: o,
                                    toState: u,
                                    player: s,
                                    isFallbackTransition: !0
                                })
                            }
                        })
                    }
                }, e.prototype.removeNode = function (e, t) {
                    var n = this,
                        r = this._engine;
                    if (e.childElementCount && this._signalRemovalForInnerTriggers(e, t, !0), !this.triggerLeaveAnimation(e, t, !0)) {
                        var i = !1;
                        if (r.totalAnimations) {
                            var l = r.players.length ? r.playersByQueriedElement.get(e) : [];
                            if (l && l.length) i = !0;
                            else
                                for (var o = e; o = o.parentNode;)
                                    if (r.statesByElement.get(o)) {
                                        i = !0;
                                        break
                                    }
                        }
                        this.prepareLeaveAnimationListeners(e), i ? r.markElementAsRemoved(this.id, e, !1, t) : (r.afterFlush(function () {
                            return n.clearElementCache(e)
                        }), r.destroyInnerAnimations(e), r._onRemovalComplete(e, t))
                    }
                }, e.prototype.insertNode = function (e, t) {
                    iw(e, this._hostClassName)
                }, e.prototype.drainQueuedTransitions = function (e) {
                    var t = this,
                        n = [];
                    return this._queue.forEach(function (r) {
                        var i = r.player;
                        if (!i.destroyed) {
                            var l = r.element,
                                o = t._elementListeners.get(l);
                            o && o.forEach(function (t) {
                                if (t.name == r.triggerName) {
                                    var n = NI(l, r.triggerName, r.fromState.value, r.toState.value);
                                    n._data = e, AI(r.player, t.phase, n, t.callback)
                                }
                            }), i.markedForDestroy ? t._engine.afterFlush(function () {
                                i.destroy()
                            }) : n.push(r)
                        }
                    }), this._queue = [], n.sort(function (e, n) {
                        var r = e.transition.ast.depCount,
                            i = n.transition.ast.depCount;
                        return 0 == r || 0 == i ? r - i : t._engine.driver.containsElement(e.element, n.element) ? 1 : -1
                    })
                }, e.prototype.destroy = function (e) {
                    this.players.forEach(function (e) {
                        return e.destroy()
                    }), this._signalRemovalForInnerTriggers(this.hostElement, e)
                }, e.prototype.elementContainsData = function (e) {
                    var t = !1;
                    return this._elementListeners.has(e) && (t = !0), !!this._queue.find(function (t) {
                        return t.element === e
                    }) || t
                }, e
            }(),
            ZA = function () {
                function e(e, t, n) {
                    this.bodyNode = e, this.driver = t, this._normalizer = n, this.players = [], this.newHostElements = new Map, this.playersByElement = new Map, this.playersByQueriedElement = new Map, this.statesByElement = new Map, this.disabledNodes = new Set, this.totalAnimations = 0, this.totalQueuedPlayers = 0, this._namespaceLookup = {}, this._namespaceList = [], this._flushFns = [], this._whenQuietFns = [], this.namespacesByHostElement = new Map, this.collectedEnterElements = [], this.collectedLeaveElements = [], this.onRemovalComplete = function (e, t) {}
                }
                return e.prototype._onRemovalComplete = function (e, t) {
                    this.onRemovalComplete(e, t)
                }, Object.defineProperty(e.prototype, "queuedPlayers", {
                    get: function () {
                        var e = [];
                        return this._namespaceList.forEach(function (t) {
                            t.players.forEach(function (t) {
                                t.queued && e.push(t)
                            })
                        }), e
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.createNamespace = function (e, t) {
                    var n = new $A(e, t, this);
                    return t.parentNode ? this._balanceNamespaceList(n, t) : (this.newHostElements.set(t, n), this.collectEnterElement(t)), this._namespaceLookup[e] = n
                }, e.prototype._balanceNamespaceList = function (e, t) {
                    var n = this._namespaceList.length - 1;
                    if (n >= 0) {
                        for (var r = !1, i = n; i >= 0; i--)
                            if (this.driver.containsElement(this._namespaceList[i].hostElement, t)) {
                                this._namespaceList.splice(i + 1, 0, e), r = !0;
                                break
                            } r || this._namespaceList.splice(0, 0, e)
                    } else this._namespaceList.push(e);
                    return this.namespacesByHostElement.set(t, e), e
                }, e.prototype.register = function (e, t) {
                    var n = this._namespaceLookup[e];
                    return n || (n = this.createNamespace(e, t)), n
                }, e.prototype.registerTrigger = function (e, t, n) {
                    var r = this._namespaceLookup[e];
                    r && r.register(t, n) && this.totalAnimations++
                }, e.prototype.destroy = function (e, t) {
                    var n = this;
                    if (e) {
                        var r = this._fetchNamespace(e);
                        this.afterFlush(function () {
                            n.namespacesByHostElement.delete(r.hostElement), delete n._namespaceLookup[e];
                            var t = n._namespaceList.indexOf(r);
                            t >= 0 && n._namespaceList.splice(t, 1)
                        }), this.afterFlushAnimationsDone(function () {
                            return r.destroy(t)
                        })
                    }
                }, e.prototype._fetchNamespace = function (e) {
                    return this._namespaceLookup[e]
                }, e.prototype.fetchNamespacesByElement = function (e) {
                    var t = new Set,
                        n = this.statesByElement.get(e);
                    if (n)
                        for (var r = Object.keys(n), i = 0; i < r.length; i++) {
                            var l = n[r[i]].namespaceId;
                            if (l) {
                                var o = this._fetchNamespace(l);
                                o && t.add(o)
                            }
                        }
                    return t
                }, e.prototype.trigger = function (e, t, n, r) {
                    if (JA(t)) {
                        var i = this._fetchNamespace(e);
                        if (i) return i.trigger(t, n, r), !0
                    }
                    return !1
                }, e.prototype.insertNode = function (e, t, n, r) {
                    if (JA(t)) {
                        var i = t[KA];
                        if (i && i.setForRemoval) {
                            i.setForRemoval = !1, i.setForMove = !0;
                            var l = this.collectedLeaveElements.indexOf(t);
                            l >= 0 && this.collectedLeaveElements.splice(l, 1)
                        }
                        if (e) {
                            var o = this._fetchNamespace(e);
                            o && o.insertNode(t, n)
                        }
                        r && this.collectEnterElement(t)
                    }
                }, e.prototype.collectEnterElement = function (e) {
                    this.collectedEnterElements.push(e)
                }, e.prototype.markElementAsDisabled = function (e, t) {
                    t ? this.disabledNodes.has(e) || (this.disabledNodes.add(e), iw(e, "ng-animate-disabled")) : this.disabledNodes.has(e) && (this.disabledNodes.delete(e), lw(e, "ng-animate-disabled"))
                }, e.prototype.removeNode = function (e, t, n) {
                    if (JA(t)) {
                        var r = e ? this._fetchNamespace(e) : null;
                        r ? r.removeNode(t, n) : this.markElementAsRemoved(e, t, !1, n)
                    } else this._onRemovalComplete(t, n)
                }, e.prototype.markElementAsRemoved = function (e, t, n, r) {
                    this.collectedLeaveElements.push(t), t[KA] = {
                        namespaceId: e,
                        setForRemoval: r,
                        hasAnimation: n,
                        removedBeforeQueried: !1
                    }
                }, e.prototype.listen = function (e, t, n, r, i) {
                    return JA(t) ? this._fetchNamespace(e).listen(t, n, r, i) : function () {}
                }, e.prototype._buildInstruction = function (e, t, n, r, i) {
                    return e.transition.build(this.driver, e.element, e.fromState.value, e.toState.value, n, r, e.fromState.options, e.toState.options, t, i)
                }, e.prototype.destroyInnerAnimations = function (e) {
                    var t = this,
                        n = this.driver.query(e, ".ng-trigger", !0);
                    n.forEach(function (e) {
                        return t.destroyActiveAnimationsForElement(e)
                    }), 0 != this.playersByQueriedElement.size && (n = this.driver.query(e, ".ng-animating", !0)).forEach(function (e) {
                        return t.finishActiveQueriedAnimationOnElement(e)
                    })
                }, e.prototype.destroyActiveAnimationsForElement = function (e) {
                    var t = this.playersByElement.get(e);
                    t && t.forEach(function (e) {
                        e.queued ? e.markedForDestroy = !0 : e.destroy()
                    })
                }, e.prototype.finishActiveQueriedAnimationOnElement = function (e) {
                    var t = this.playersByQueriedElement.get(e);
                    t && t.forEach(function (e) {
                        return e.finish()
                    })
                }, e.prototype.whenRenderingDone = function () {
                    var e = this;
                    return new Promise(function (t) {
                        if (e.players.length) return _I(e.players).onDone(function () {
                            return t()
                        });
                        t()
                    })
                }, e.prototype.processLeaveNode = function (e) {
                    var t = this,
                        n = e[KA];
                    if (n && n.setForRemoval) {
                        if (e[KA] = YA, n.namespaceId) {
                            this.destroyInnerAnimations(e);
                            var r = this._fetchNamespace(n.namespaceId);
                            r && r.clearElementCache(e)
                        }
                        this._onRemovalComplete(e, n.setForRemoval)
                    }
                    this.driver.matchesElement(e, ".ng-animate-disabled") && this.markElementAsDisabled(e, !1), this.driver.query(e, ".ng-animate-disabled", !0).forEach(function (e) {
                        t.markElementAsDisabled(e, !1)
                    })
                }, e.prototype.flush = function (e) {
                    var t = this;
                    void 0 === e && (e = -1);
                    var n = [];
                    if (this.newHostElements.size && (this.newHostElements.forEach(function (e, n) {
                            return t._balanceNamespaceList(e, n)
                        }), this.newHostElements.clear()), this.totalAnimations && this.collectedEnterElements.length)
                        for (var r = 0; r < this.collectedEnterElements.length; r++) iw(this.collectedEnterElements[r], "ng-star-inserted");
                    if (this._namespaceList.length && (this.totalQueuedPlayers || this.collectedLeaveElements.length)) {
                        var i = [];
                        try {
                            n = this._flushAnimations(i, e)
                        } finally {
                            for (r = 0; r < i.length; r++) i[r]()
                        }
                    } else
                        for (r = 0; r < this.collectedLeaveElements.length; r++) this.processLeaveNode(this.collectedLeaveElements[r]);
                    if (this.totalQueuedPlayers = 0, this.collectedEnterElements.length = 0, this.collectedLeaveElements.length = 0, this._flushFns.forEach(function (e) {
                            return e()
                        }), this._flushFns = [], this._whenQuietFns.length) {
                        var l = this._whenQuietFns;
                        this._whenQuietFns = [], n.length ? _I(n).onDone(function () {
                            l.forEach(function (e) {
                                return e()
                            })
                        }) : l.forEach(function (e) {
                            return e()
                        })
                    }
                }, e.prototype.reportError = function (e) {
                    throw new Error("Unable to process animations due to the following failed trigger transitions\n " + e.join("\n"))
                }, e.prototype._flushAnimations = function (e, t) {
                    var n = this,
                        r = new bA,
                        i = [],
                        o = new Map,
                        u = [],
                        s = new Map,
                        a = new Map,
                        p = new Map,
                        h = new Set;
                    this.disabledNodes.forEach(function (e) {
                        h.add(e);
                        for (var t = n.driver.query(e, ".ng-animate-queued", !0), r = 0; r < t.length; r++) h.add(t[r])
                    });
                    var d = this.bodyNode,
                        f = Array.from(this.statesByElement.keys()),
                        g = nw(f, this.collectedEnterElements),
                        v = new Map,
                        m = 0;
                    g.forEach(function (e, t) {
                        var n = "ng-enter" + m++;
                        v.set(t, n), e.forEach(function (e) {
                            return iw(e, n)
                        })
                    });
                    for (var y = [], S = new Set, E = new Set, O = 0; O < this.collectedLeaveElements.length; O++)(U = (F = this.collectedLeaveElements[O])[KA]) && U.setForRemoval && (y.push(F), S.add(F), U.hasAnimation ? this.driver.query(F, ".ng-star-inserted", !0).forEach(function (e) {
                        return S.add(e)
                    }) : E.add(F));
                    var b = new Map,
                        T = nw(f, Array.from(S));
                    T.forEach(function (e, t) {
                        var n = "ng-leave" + m++;
                        b.set(t, n), e.forEach(function (e) {
                            return iw(e, n)
                        })
                    }), e.push(function () {
                        g.forEach(function (e, t) {
                            var n = v.get(t);
                            e.forEach(function (e) {
                                return lw(e, n)
                            })
                        }), T.forEach(function (e, t) {
                            var n = b.get(t);
                            e.forEach(function (e) {
                                return lw(e, n)
                            })
                        }), y.forEach(function (e) {
                            n.processLeaveNode(e)
                        })
                    });
                    for (var R = [], C = [], _ = this._namespaceList.length - 1; _ >= 0; _--) this._namespaceList[_].drainQueuedTransitions(t).forEach(function (e) {
                        var t = e.player,
                            l = e.element;
                        if (R.push(t), n.collectedEnterElements.length) {
                            var o = l[KA];
                            if (o && o.setForMove) return void t.destroy()
                        }
                        var c = !d || !n.driver.containsElement(d, l),
                            h = b.get(l),
                            f = v.get(l),
                            g = n._buildInstruction(e, r, f, h, c);
                        if (g.errors && g.errors.length) C.push(g);
                        else {
                            if (c) return t.onStart(function () {
                                return tA(l, g.fromStyles)
                            }), t.onDestroy(function () {
                                return eA(l, g.toStyles)
                            }), void i.push(t);
                            if (e.isFallbackTransition) return t.onStart(function () {
                                return tA(l, g.fromStyles)
                            }), t.onDestroy(function () {
                                return eA(l, g.toStyles)
                            }), void i.push(t);
                            g.timelines.forEach(function (e) {
                                return e.stretchStartingKeyframe = !0
                            }), r.append(l, g.timelines), u.push({
                                instruction: g,
                                player: t,
                                element: l
                            }), g.queriedElements.forEach(function (e) {
                                return PI(s, e, []).push(t)
                            }), g.preStyleProps.forEach(function (e, t) {
                                var n = Object.keys(e);
                                if (n.length) {
                                    var r = a.get(t);
                                    r || a.set(t, r = new Set), n.forEach(function (e) {
                                        return r.add(e)
                                    })
                                }
                            }), g.postStyleProps.forEach(function (e, t) {
                                var n = Object.keys(e),
                                    r = p.get(t);
                                r || p.set(t, r = new Set), n.forEach(function (e) {
                                    return r.add(e)
                                })
                            })
                        }
                    });
                    if (C.length) {
                        var I = [];
                        C.forEach(function (e) {
                            I.push("@" + e.triggerName + " has failed due to:\n"), e.errors.forEach(function (e) {
                                return I.push("- " + e + "\n")
                            })
                        }), R.forEach(function (e) {
                            return e.destroy()
                        }), this.reportError(I)
                    }
                    var A = new Map,
                        w = new Map;
                    u.forEach(function (e) {
                        var t = e.element;
                        r.has(t) && (w.set(t, t), n._beforeAnimationBuild(e.player.namespaceId, e.instruction, A))
                    }), i.forEach(function (e) {
                        var t = e.element;
                        n._getPreviousPlayers(t, !1, e.namespaceId, e.triggerName, null).forEach(function (e) {
                            PI(A, t, []).push(e), e.destroy()
                        })
                    });
                    var N = y.filter(function (e) {
                            return uw(e, a, p)
                        }),
                        P = new Map;
                    tw(P, this.driver, E, p, yI).forEach(function (e) {
                        uw(e, a, p) && N.push(e)
                    });
                    var D = new Map;
                    g.forEach(function (e, t) {
                        tw(D, n.driver, new Set(e), a, RI)
                    }), N.forEach(function (e) {
                        var t = P.get(e),
                            n = D.get(e);
                        P.set(e, l({}, t, n))
                    });
                    var M = [],
                        k = [],
                        L = {};
                    u.forEach(function (e) {
                        var t = e.element,
                            l = e.player,
                            u = e.instruction;
                        if (r.has(t)) {
                            if (h.has(t)) return l.onDestroy(function () {
                                return eA(t, u.toStyles)
                            }), l.disabled = !0, l.overrideTotalTime(u.totalTime), void i.push(l);
                            var s = L;
                            if (w.size > 1) {
                                for (var a = t, c = []; a = a.parentNode;) {
                                    var p = w.get(a);
                                    if (p) {
                                        s = p;
                                        break
                                    }
                                    c.push(a)
                                }
                                c.forEach(function (e) {
                                    return w.set(e, s)
                                })
                            }
                            var d = n._buildAnimation(l.namespaceId, u, A, o, D, P);
                            if (l.setRealPlayer(d), s === L) M.push(l);
                            else {
                                var f = n.playersByElement.get(s);
                                f && f.length && (l.parentPlayer = _I(f)), i.push(l)
                            }
                        } else tA(t, u.fromStyles), l.onDestroy(function () {
                            return eA(t, u.toStyles)
                        }), k.push(l), h.has(t) && i.push(l)
                    }), k.forEach(function (e) {
                        var t = o.get(e.element);
                        if (t && t.length) {
                            var n = _I(t);
                            e.setRealPlayer(n)
                        }
                    }), i.forEach(function (e) {
                        e.parentPlayer ? e.syncPlayerEvents(e.parentPlayer) : e.destroy()
                    });
                    for (var x = 0; x < y.length; x++) {
                        var F, U = (F = y[x])[KA];
                        if (lw(F, "ng-leave"), !U || !U.hasAnimation) {
                            var H = [];
                            if (s.size) {
                                var G = s.get(F);
                                G && G.length && H.push.apply(H, c(G));
                                for (var B = this.driver.query(F, ".ng-animating", !0), V = 0; V < B.length; V++) {
                                    var W = s.get(B[V]);
                                    W && W.length && H.push.apply(H, c(W))
                                }
                            }
                            var j = H.filter(function (e) {
                                return !e.destroyed
                            });
                            j.length ? ow(this, F, j) : this.processLeaveNode(F)
                        }
                    }
                    return y.length = 0, M.forEach(function (e) {
                        n.players.push(e), e.onDone(function () {
                            e.destroy();
                            var t = n.players.indexOf(e);
                            n.players.splice(t, 1)
                        }), e.play()
                    }), M
                }, e.prototype.elementContainsData = function (e, t) {
                    var n = !1,
                        r = t[KA];
                    return r && r.setForRemoval && (n = !0), this.playersByElement.has(t) && (n = !0), this.playersByQueriedElement.has(t) && (n = !0), this.statesByElement.has(t) && (n = !0), this._fetchNamespace(e).elementContainsData(t) || n
                }, e.prototype.afterFlush = function (e) {
                    this._flushFns.push(e)
                }, e.prototype.afterFlushAnimationsDone = function (e) {
                    this._whenQuietFns.push(e)
                }, e.prototype._getPreviousPlayers = function (e, t, n, r, i) {
                    var l = [];
                    if (t) {
                        var o = this.playersByQueriedElement.get(e);
                        o && (l = o)
                    } else {
                        var u = this.playersByElement.get(e);
                        if (u) {
                            var s = !i || "void" == i;
                            u.forEach(function (e) {
                                e.queued || (s || e.triggerName == r) && l.push(e)
                            })
                        }
                    }
                    return (n || r) && (l = l.filter(function (e) {
                        return !(n && n != e.namespaceId || r && r != e.triggerName)
                    })), l
                }, e.prototype._beforeAnimationBuild = function (e, t, n) {
                    var r, i, l = t.element,
                        o = t.isRemovalTransition ? void 0 : e,
                        u = t.isRemovalTransition ? void 0 : t.triggerName,
                        a = function (e) {
                            var r = e.element,
                                i = r !== l,
                                s = PI(n, r, []);
                            c._getPreviousPlayers(r, i, o, u, t.toState).forEach(function (e) {
                                var t = e.getRealPlayer();
                                t.beforeDestroy && t.beforeDestroy(), e.destroy(), s.push(e)
                            })
                        },
                        c = this;
                    try {
                        for (var p = s(t.timelines), h = p.next(); !h.done; h = p.next()) a(h.value)
                    } catch (d) {
                        r = {
                            error: d
                        }
                    } finally {
                        try {
                            h && !h.done && (i = p.return) && i.call(p)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    tA(l, t.fromStyles)
                }, e.prototype._buildAnimation = function (e, t, n, r, i, l) {
                    var o = this,
                        u = t.triggerName,
                        s = t.element,
                        a = [],
                        c = new Set,
                        p = new Set,
                        h = t.timelines.map(function (t) {
                            var h = t.element;
                            c.add(h);
                            var d = h[KA];
                            if (d && d.removedBeforeQueried) return new bI(t.duration, t.delay);
                            var f, g, v = h !== s,
                                m = (f = (n.get(h) || jA).map(function (e) {
                                    return e.getRealPlayer()
                                }), g = [], function e(t, n) {
                                    for (var r = 0; r < t.length; r++) {
                                        var i = t[r];
                                        i instanceof TI ? e(i.players, n) : n.push(i)
                                    }
                                }(f, g), g).filter(function (e) {
                                    return !!e.element && e.element === h
                                }),
                                y = i.get(h),
                                S = l.get(h),
                                E = II(0, o._normalizer, 0, t.keyframes, y, S),
                                O = o._buildPlayer(t, E, m);
                            if (t.subTimeline && r && p.add(h), v) {
                                var b = new XA(e, u, h);
                                b.setRealPlayer(O), a.push(b)
                            }
                            return O
                        });
                    a.forEach(function (e) {
                        PI(o.playersByQueriedElement, e.element, []).push(e), e.onDone(function () {
                            return function (e, t, n) {
                                var r;
                                if (e instanceof Map) {
                                    if (r = e.get(t)) {
                                        if (r.length) {
                                            var i = r.indexOf(n);
                                            r.splice(i, 1)
                                        }
                                        0 == r.length && e.delete(t)
                                    }
                                } else(r = e[t]) && (r.length && (i = r.indexOf(n), r.splice(i, 1)), 0 == r.length && delete e[t]);
                                return r
                            }(o.playersByQueriedElement, e.element, e)
                        })
                    }), c.forEach(function (e) {
                        return iw(e, "ng-animating")
                    });
                    var d = _I(h);
                    return d.onDestroy(function () {
                        c.forEach(function (e) {
                            return lw(e, "ng-animating")
                        }), eA(s, t.toStyles)
                    }), p.forEach(function (e) {
                        PI(r, e, []).push(d)
                    }), d
                }, e.prototype._buildPlayer = function (e, t, n) {
                    return t.length > 0 ? this.driver.animate(e.element, t, e.duration, e.delay, e.easing, n) : new bI(e.duration, e.delay)
                }, e
            }(),
            XA = function () {
                function e(e, t, n) {
                    this.namespaceId = e, this.triggerName = t, this.element = n, this._player = new bI, this._containsRealPlayer = !1, this._queuedCallbacks = {}, this.destroyed = !1, this.markedForDestroy = !1, this.disabled = !1, this.queued = !0, this.totalTime = 0
                }
                return e.prototype.setRealPlayer = function (e) {
                    var t = this;
                    this._containsRealPlayer || (this._player = e, Object.keys(this._queuedCallbacks).forEach(function (n) {
                        t._queuedCallbacks[n].forEach(function (t) {
                            return AI(e, n, void 0, t)
                        })
                    }), this._queuedCallbacks = {}, this._containsRealPlayer = !0, this.overrideTotalTime(e.totalTime), this.queued = !1)
                }, e.prototype.getRealPlayer = function () {
                    return this._player
                }, e.prototype.overrideTotalTime = function (e) {
                    this.totalTime = e
                }, e.prototype.syncPlayerEvents = function (e) {
                    var t = this,
                        n = this._player;
                    n.triggerCallback && e.onStart(function () {
                        return n.triggerCallback("start")
                    }), e.onDone(function () {
                        return t.finish()
                    }), e.onDestroy(function () {
                        return t.destroy()
                    })
                }, e.prototype._queueEvent = function (e, t) {
                    PI(this._queuedCallbacks, e, []).push(t)
                }, e.prototype.onDone = function (e) {
                    this.queued && this._queueEvent("done", e), this._player.onDone(e)
                }, e.prototype.onStart = function (e) {
                    this.queued && this._queueEvent("start", e), this._player.onStart(e)
                }, e.prototype.onDestroy = function (e) {
                    this.queued && this._queueEvent("destroy", e), this._player.onDestroy(e)
                }, e.prototype.init = function () {
                    this._player.init()
                }, e.prototype.hasStarted = function () {
                    return !this.queued && this._player.hasStarted()
                }, e.prototype.play = function () {
                    !this.queued && this._player.play()
                }, e.prototype.pause = function () {
                    !this.queued && this._player.pause()
                }, e.prototype.restart = function () {
                    !this.queued && this._player.restart()
                }, e.prototype.finish = function () {
                    this._player.finish()
                }, e.prototype.destroy = function () {
                    this.destroyed = !0, this._player.destroy()
                }, e.prototype.reset = function () {
                    !this.queued && this._player.reset()
                }, e.prototype.setPosition = function (e) {
                    this.queued || this._player.setPosition(e)
                }, e.prototype.getPosition = function () {
                    return this.queued ? 0 : this._player.getPosition()
                }, e.prototype.triggerCallback = function (e) {
                    var t = this._player;
                    t.triggerCallback && t.triggerCallback(e)
                }, e
            }();

        function JA(e) {
            return e && 1 === e.nodeType
        }

        function ew(e, t) {
            var n = e.style.display;
            return e.style.display = null != t ? t : "none", n
        }

        function tw(e, t, n, r, i) {
            var l = [];
            n.forEach(function (e) {
                return l.push(ew(e))
            });
            var o = [];
            r.forEach(function (n, r) {
                var l = {};
                n.forEach(function (e) {
                    var n = l[e] = t.computeStyle(r, e, i);
                    n && 0 != n.length || (r[KA] = zA, o.push(r))
                }), e.set(r, l)
            });
            var u = 0;
            return n.forEach(function (e) {
                return ew(e, l[u++])
            }), o
        }

        function nw(e, t) {
            var n = new Map;
            if (e.forEach(function (e) {
                    return n.set(e, [])
                }), 0 == t.length) return n;
            var r = new Set(t),
                i = new Map;
            return t.forEach(function (e) {
                var t = function e(t) {
                    if (!t) return 1;
                    var l = i.get(t);
                    if (l) return l;
                    var o = t.parentNode;
                    return l = n.has(o) ? o : r.has(o) ? 1 : e(o), i.set(t, l), l
                }(e);
                1 !== t && n.get(t).push(e)
            }), n
        }
        var rw = "$$classes";

        function iw(e, t) {
            if (e.classList) e.classList.add(t);
            else {
                var n = e[rw];
                n || (n = e[rw] = {}), n[t] = !0
            }
        }

        function lw(e, t) {
            if (e.classList) e.classList.remove(t);
            else {
                var n = e[rw];
                n && delete n[t]
            }
        }

        function ow(e, t, n) {
            _I(n).onDone(function () {
                return e.processLeaveNode(t)
            })
        }

        function uw(e, t, n) {
            var r = n.get(e);
            if (!r) return !1;
            var i = t.get(e);
            return i ? r.forEach(function (e) {
                return i.add(e)
            }) : t.set(e, r), n.delete(e), !0
        }
        var sw = function () {
                function e(e, t, n) {
                    var r = this;
                    this.bodyNode = e, this._driver = t, this._triggerCache = {}, this.onRemovalComplete = function (e, t) {}, this._transitionEngine = new ZA(e, t, n), this._timelineEngine = new WA(e, t, n), this._transitionEngine.onRemovalComplete = function (e, t) {
                        return r.onRemovalComplete(e, t)
                    }
                }
                return e.prototype.registerTrigger = function (e, t, n, r, i) {
                    var l = e + "-" + r,
                        o = this._triggerCache[l];
                    if (!o) {
                        var u = [],
                            s = gA(this._driver, i, u);
                        if (u.length) throw new Error('The animation trigger "' + r + '" has failed to build due to the following errors:\n - ' + u.join("\n - "));
                        o = function (e, t) {
                            return new GA(e, t)
                        }(r, s), this._triggerCache[l] = o
                    }
                    this._transitionEngine.registerTrigger(t, r, o)
                }, e.prototype.register = function (e, t) {
                    this._transitionEngine.register(e, t)
                }, e.prototype.destroy = function (e, t) {
                    this._transitionEngine.destroy(e, t)
                }, e.prototype.onInsert = function (e, t, n, r) {
                    this._transitionEngine.insertNode(e, t, n, r)
                }, e.prototype.onRemove = function (e, t, n) {
                    this._transitionEngine.removeNode(e, t, n)
                }, e.prototype.disableAnimations = function (e, t) {
                    this._transitionEngine.markElementAsDisabled(e, t)
                }, e.prototype.process = function (e, t, n, r) {
                    if ("@" == n.charAt(0)) {
                        var i = a(DI(n), 2);
                        this._timelineEngine.command(i[0], t, i[1], r)
                    } else this._transitionEngine.trigger(e, t, n, r)
                }, e.prototype.listen = function (e, t, n, r, i) {
                    if ("@" == n.charAt(0)) {
                        var l = a(DI(n), 2);
                        return this._timelineEngine.listen(l[0], t, l[1], i)
                    }
                    return this._transitionEngine.listen(e, t, n, r, i)
                }, e.prototype.flush = function (e) {
                    void 0 === e && (e = -1), this._transitionEngine.flush(e)
                }, Object.defineProperty(e.prototype, "players", {
                    get: function () {
                        return this._transitionEngine.players.concat(this._timelineEngine.players)
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.whenRenderingDone = function () {
                    return this._transitionEngine.whenRenderingDone()
                }, e
            }(),
            aw = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r._nextAnimationId = 0, r._renderer = t.createRenderer(n.body, {
                        id: "0",
                        encapsulation: Ue.None,
                        styles: [],
                        data: {
                            animation: []
                        }
                    }), r
                }
                return i(t, e), t.prototype.build = function (e) {
                    var t = this._nextAnimationId.toString();
                    this._nextAnimationId++;
                    var n = Array.isArray(e) ? SI(e) : e;
                    return hw(this._renderer, null, t, "register", [n]), new cw(t, this._renderer)
                }, t
            }(vI),
            cw = function (e) {
                function t(t, n) {
                    var r = e.call(this) || this;
                    return r._id = t, r._renderer = n, r
                }
                return i(t, e), t.prototype.create = function (e, t) {
                    return new pw(this._id, e, t || {}, this._renderer)
                }, t
            }(mI),
            pw = function () {
                function e(e, t, n, r) {
                    this.id = e, this.element = t, this._renderer = r, this.parentPlayer = null, this._started = !1, this.totalTime = 0, this._command("create", n)
                }
                return e.prototype._listen = function (e, t) {
                    return this._renderer.listen(this.element, "@@" + this.id + ":" + e, t)
                }, e.prototype._command = function (e) {
                    for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
                    return hw(this._renderer, this.element, this.id, e, t)
                }, e.prototype.onDone = function (e) {
                    this._listen("done", e)
                }, e.prototype.onStart = function (e) {
                    this._listen("start", e)
                }, e.prototype.onDestroy = function (e) {
                    this._listen("destroy", e)
                }, e.prototype.init = function () {
                    this._command("init")
                }, e.prototype.hasStarted = function () {
                    return this._started
                }, e.prototype.play = function () {
                    this._command("play"), this._started = !0
                }, e.prototype.pause = function () {
                    this._command("pause")
                }, e.prototype.restart = function () {
                    this._command("restart")
                }, e.prototype.finish = function () {
                    this._command("finish")
                }, e.prototype.destroy = function () {
                    this._command("destroy")
                }, e.prototype.reset = function () {
                    this._command("reset")
                }, e.prototype.setPosition = function (e) {
                    this._command("setPosition", e)
                }, e.prototype.getPosition = function () {
                    return 0
                }, e
            }();

        function hw(e, t, n, r, i) {
            return e.setProperty(t, "@@" + n + ":" + r, i)
        }
        var dw = function () {
                function e(e, t, n) {
                    this.delegate = e, this.engine = t, this._zone = n, this._currentId = 0, this._microtaskId = 1, this._animationCallbacksBuffer = [], this._rendererCache = new Map, this._cdRecurDepth = 0, this.promise = Promise.resolve(0), t.onRemovalComplete = function (e, t) {
                        t && t.parentNode(e) && t.removeChild(e.parentNode, e)
                    }
                }
                return e.prototype.createRenderer = function (e, t) {
                    var n = this,
                        r = this.delegate.createRenderer(e, t);
                    if (!(e && t && t.data && t.data.animation)) {
                        var i = this._rendererCache.get(r);
                        return i || (i = new fw("", r, this.engine), this._rendererCache.set(r, i)), i
                    }
                    var l = t.id,
                        o = t.id + "-" + this._currentId;
                    return this._currentId++, this.engine.register(o, e), t.data.animation.forEach(function (t) {
                        return n.engine.registerTrigger(l, o, e, t.name, t)
                    }), new gw(this, o, r, this.engine)
                }, e.prototype.begin = function () {
                    this._cdRecurDepth++, this.delegate.begin && this.delegate.begin()
                }, e.prototype._scheduleCountTask = function () {
                    var e = this;
                    this.promise.then(function () {
                        e._microtaskId++
                    })
                }, e.prototype.scheduleListenerCallback = function (e, t, n) {
                    var r = this;
                    e >= 0 && e < this._microtaskId ? this._zone.run(function () {
                        return t(n)
                    }) : (0 == this._animationCallbacksBuffer.length && Promise.resolve(null).then(function () {
                        r._zone.run(function () {
                            r._animationCallbacksBuffer.forEach(function (e) {
                                var t = a(e, 2);
                                (0, t[0])(t[1])
                            }), r._animationCallbacksBuffer = []
                        })
                    }), this._animationCallbacksBuffer.push([t, n]))
                }, e.prototype.end = function () {
                    var e = this;
                    this._cdRecurDepth--, 0 == this._cdRecurDepth && this._zone.runOutsideAngular(function () {
                        e._scheduleCountTask(), e.engine.flush(e._microtaskId)
                    }), this.delegate.end && this.delegate.end()
                }, e.prototype.whenRenderingDone = function () {
                    return this.engine.whenRenderingDone()
                }, e
            }(),
            fw = function () {
                function e(e, t, n) {
                    this.namespaceId = e, this.delegate = t, this.engine = n, this.destroyNode = this.delegate.destroyNode ? function (e) {
                        return t.destroyNode(e)
                    } : null
                }
                return Object.defineProperty(e.prototype, "data", {
                    get: function () {
                        return this.delegate.data
                    },
                    enumerable: !0,
                    configurable: !0
                }), e.prototype.destroy = function () {
                    this.engine.destroy(this.namespaceId, this.delegate), this.delegate.destroy()
                }, e.prototype.createElement = function (e, t) {
                    return this.delegate.createElement(e, t)
                }, e.prototype.createComment = function (e) {
                    return this.delegate.createComment(e)
                }, e.prototype.createText = function (e) {
                    return this.delegate.createText(e)
                }, e.prototype.appendChild = function (e, t) {
                    this.delegate.appendChild(e, t), this.engine.onInsert(this.namespaceId, t, e, !1)
                }, e.prototype.insertBefore = function (e, t, n) {
                    this.delegate.insertBefore(e, t, n), this.engine.onInsert(this.namespaceId, t, e, !0)
                }, e.prototype.removeChild = function (e, t) {
                    this.engine.onRemove(this.namespaceId, t, this.delegate)
                }, e.prototype.selectRootElement = function (e, t) {
                    return this.delegate.selectRootElement(e, t)
                }, e.prototype.parentNode = function (e) {
                    return this.delegate.parentNode(e)
                }, e.prototype.nextSibling = function (e) {
                    return this.delegate.nextSibling(e)
                }, e.prototype.setAttribute = function (e, t, n, r) {
                    this.delegate.setAttribute(e, t, n, r)
                }, e.prototype.removeAttribute = function (e, t, n) {
                    this.delegate.removeAttribute(e, t, n)
                }, e.prototype.addClass = function (e, t) {
                    this.delegate.addClass(e, t)
                }, e.prototype.removeClass = function (e, t) {
                    this.delegate.removeClass(e, t)
                }, e.prototype.setStyle = function (e, t, n, r) {
                    this.delegate.setStyle(e, t, n, r)
                }, e.prototype.removeStyle = function (e, t, n) {
                    this.delegate.removeStyle(e, t, n)
                }, e.prototype.setProperty = function (e, t, n) {
                    "@" == t.charAt(0) && "@.disabled" == t ? this.disableAnimations(e, !!n) : this.delegate.setProperty(e, t, n)
                }, e.prototype.setValue = function (e, t) {
                    this.delegate.setValue(e, t)
                }, e.prototype.listen = function (e, t, n) {
                    return this.delegate.listen(e, t, n)
                }, e.prototype.disableAnimations = function (e, t) {
                    this.engine.disableAnimations(e, t)
                }, e
            }(),
            gw = function (e) {
                function t(t, n, r, i) {
                    var l = e.call(this, n, r, i) || this;
                    return l.factory = t, l.namespaceId = n, l
                }
                return i(t, e), t.prototype.setProperty = function (e, t, n) {
                    "@" == t.charAt(0) ? "." == t.charAt(1) && "@.disabled" == t ? this.disableAnimations(e, n = void 0 === n || !!n) : this.engine.process(this.namespaceId, e, t.substr(1), n) : this.delegate.setProperty(e, t, n)
                }, t.prototype.listen = function (e, t, n) {
                    var r, i, l, o = this;
                    if ("@" == t.charAt(0)) {
                        var u = function (e) {
                                switch (e) {
                                    case "body":
                                        return document.body;
                                    case "document":
                                        return document;
                                    case "window":
                                        return window;
                                    default:
                                        return e
                                }
                            }(e),
                            s = t.substr(1),
                            c = "";
                        return "@" != s.charAt(0) && (s = (r = a((i = s, l = i.indexOf("."), [i.substring(0, l), i.substr(l + 1)]), 2))[0], c = r[1]), this.engine.listen(this.namespaceId, u, s, c, function (e) {
                            o.factory.scheduleListenerCallback(e._data || -1, n, e)
                        })
                    }
                    return this.delegate.listen(e, t, n)
                }, t
            }(fw),
            vw = function (e) {
                function t(t, n, r) {
                    return e.call(this, t.body, n, r) || this
                }
                return i(t, e), t
            }(sw);

        function mw() {
            return new MA
        }

        function yw(e, t, n) {
            return new dw(e, t, n)
        }
        var Sw = new ye("AnimationModuleType"),
            Ew = function () {
                return function () {}
            }(),
            Ow = function () {
                function e(e, t) {
                    this.gameService = e, this.router = t
                }
                return e.prototype.canActivate = function (e, t) {
                    switch (e.routeConfig.path) {
                        case "crafting":
                            return !!this.gameService.isEnabled(Eu.CRAFTING) || (this.goToError(), !1);
                        case "market":
                            return !!this.gameService.isEnabled(Eu.MARKET) || (this.goToError(), !1);
                        case "research":
                            return !!this.gameService.isEnabled(Eu.RESEARCH) || (this.goToError(), !1);
                        case "army":
                            return !!this.gameService.isEnabled(Eu.ARMY) || (this.goToError(), !1);
                        case "religion":
                            return !!this.gameService.isEnabled(Eu.RELIGION) || (this.goToError(), !1);
                        case "weather":
                            return !!this.gameService.isEnabled(Eu.WEATHER) || (this.goToError(), !1);
                        case "mountains":
                            return !!this.gameService.isEnabled(Eu.MOUNTAINS) || (this.goToError(), !1);
                        case "fort":
                            return !!this.gameService.isEnabled(Eu.FORT) || (this.goToError(), !1);
                        case "sea":
                            return !!this.gameService.isEnabled(Eu.SEA) || (this.goToError(), !1);
                        case "field":
                            return !!this.gameService.isEnabled(Eu.FIELD) || (this.goToError(), !1);
                        case "plateau":
                            return !!this.gameService.isEnabled(Eu.PLATEAU) || (this.goToError(), !1);
                        default:
                            return !1
                    }
                }, e.prototype.goToError = function () {
                    this.router.navigate(["/404"], {
                        skipLocationChange: !0
                    })
                }, e.ngInjectableDef = ve({
                    factory: function () {
                        return new e(ze(Eg), ze(Ed))
                    },
                    token: e,
                    providedIn: "root"
                }), e
            }(),
            bw = function () {
                return function () {}
            }(),
            Tw = fu(ls, [os], function (e) {
                return function (e) {
                    for (var t = {}, n = [], r = !1, i = 0; i < e.length; i++) {
                        var l = e[i];
                        l.token === St && !0 === l.value && (r = !0), 1073741824 & l.flags && n.push(l.token), l.index = i, t[pi(l.token)] = l
                    }
                    return {
                        factory: null,
                        providersByKey: t,
                        providers: e,
                        modules: n,
                        isRoot: r
                    }
                }([el(512, Ct, _t, [[8, [Zd, nf, Fg, nv, Sm, Nm, sy, xy, lS, SS, LS, Gb, iT, RT, VT, hR, RR, WR, gI]], [3, Ct], At]), el(4608, Cf, Cf, []), el(5120, Kr, $r, [[3, Kr]]), el(4608, _s, Is, [Kr, [2, Cs]]), el(5120, Nn, Pn, []), el(5120, Br, qr, []), el(5120, Vr, Qr, []), el(4608, Yc, zc, [zs]), el(6144, Ut, null, [Yc]), el(4608, Uc, Gc, []), el(5120, pc, function (e, t, n, r, i, l, o, u) {
                    return [new xc(e, t, n), new jc(r), new Bc(i, l, o, u)]
                }, [zs, Zn, kn, zs, zs, Uc, xn, [2, Hc]]), el(4608, hc, hc, [pc, Zn]), el(135680, gc, gc, [zs]), el(4608, bc, bc, [hc, gc, Nn]), el(4608, YI, jI, []), el(5120, DA, mw, []), el(4608, sw, vw, [zs, YI, DA]), el(5120, Mt, yw, [bc, sw, Zn]), el(6144, fc, null, [gc]), el(4608, lr, lr, [Zn]), el(5120, ch, Wd, [Ed]), el(4608, Nd, Nd, []), el(6144, Ad, null, [Nd]), el(135680, Pd, Pd, [Ed, vn, jn, lt, Ad]), el(4608, wd, wd, []), el(5120, Dd, Ud, [Ed, Qs, Md]), el(5120, Kd, zd, [jd]), el(5120, Ln, function (e) {
                    return [e]
                }, [Kd]), el(4608, vI, aw, [Mt, nc]), el(4608, Cg, Cg, [mg, pg, Eg, yg, Rg, Tg]), el(1073742336, og, og, []), el(1073742336, ug, ug, []), el(1073742336, Ys, Ys, []), el(1024, Cn, ep, []), el(1024, ar, function () {
                    return [xd()]
                }, []), el(512, jd, jd, [lt]), el(1024, An, function (e, t) {
                    return [(n = e, sc("probe", cc), sc("coreTokens", l({}, ac, (n || []).reduce(function (e, t) {
                        return e[t.name] = t.token, e
                    }, {}))), function () {
                        return cc
                    }), Yd(t)];
                    var n
                }, [[2, ar], jd]), el(512, wn, wn, [[2, An]]), el(131584, fr, fr, [Zn, xn, lt, Cn, Ct, wn]), el(1073742336, Zr, Zr, [fr]), el(1073742336, tp, tp, [[3, tp]]), el(1024, kd, Gd, [[3, Ed]]), el(512, Vp, Wp, []), el(512, Cd, Cd, []), el(256, Md, {}, []), el(1024, as, Hd, [us, [2, cs], Md]), el(512, ps, ps, [as]), el(512, jn, jn, []), el(512, vn, Sr, [jn, [2, mr]]), el(1024, dd, function () {
                    return [[{
                        path: "",
                        redirectTo: "village/village",
                        pathMatch: "full"
                    }, {
                        path: "404",
                        component: Xd,
                        pathMatch: "full"
                    }, {
                        path: "resources",
                        component: _g
                    }, {
                        path: "management",
                        component: Gg
                    }, {
                        path: "crafting",
                        component: cm,
                        canActivate: [Ow]
                    }, {
                        path: "market",
                        component: Tm,
                        canActivate: [Ow]
                    }, {
                        path: "research",
                        component: Jm,
                        canActivate: [Ow]
                    }, {
                        path: "army",
                        component: Oy,
                        canActivate: [Ow]
                    }, {
                        path: "religion",
                        component: jy,
                        canActivate: [Ow]
                    }, {
                        path: "weather",
                        component: uS,
                        canActivate: [Ow]
                    }, {
                        path: "royal",
                        component: NS
                    }, {
                        path: "village",
                        children: [{
                            path: "",
                            redirectTo: "village",
                            pathMatch: "full"
                        }, {
                            path: "village",
                            component: Tb
                        }, {
                            path: "fort",
                            component: Vb,
                            canActivate: [Ow]
                        }, {
                            path: "forest",
                            component: oT
                        }, {
                            path: "field",
                            component: _T,
                            canActivate: [Ow]
                        }, {
                            path: "mountains",
                            component: jT,
                            canActivate: [Ow]
                        }, {
                            path: "plateau",
                            component: fR,
                            canActivate: [Ow]
                        }, {
                            path: "sea",
                            component: _R,
                            canActivate: [Ow]
                        }]
                    }, {
                        path: "**",
                        redirectTo: "village/village",
                        pathMatch: "full"
                    }]]
                }, []), el(1024, Ed, Vd, [fr, Vp, Cd, ps, lt, vn, jn, dd, Md, [2, gd], [2, pd]]), el(1073742336, Fd, Fd, [[2, kd], [2, Ed]]), el(1073742336, bw, bw, []), el(1073742336, Ew, Ew, []), el(1073742336, Nv, Nv, []), el(1073742336, ls, ls, []), el(256, St, !0, []), el(256, Sw, "NoopAnimations", [])])
            });
        Hu.production && function () {
            if (Bt) throw new Error("Cannot enable prod mode after platform setup.");
            Gt = !1
        }(), Jc().bootstrapModuleFactory(Tw).catch(function (e) {
            return console.log(e)
        })
    }
}, [[0, 0]]]);
